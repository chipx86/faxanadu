<!DOCTYPE html>

<html>
 <head>
  <title>PRG12 - Faxanadu (U).nes</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <style>

 @import url('https://fonts.googleapis.com/css2?family=Roboto+Mono:ital,wght@0,100..700;1,100..700&display=swap');

body {
  background: #1c212d;
  color: white;
  padding: 0.5em;
  line-height: 1.5;
}

body, * {
  font-family: "Roboto Mono", monospace;
  font-size: 9.5pt;
  font-style: normal;
}

a:link,
a:visited {
  color: #9bdeff;
}

pre {
  display: grid;
  grid-template-columns: minmax(6ch, min-content)
                         minmax(70ch, max-content)
                         1fr;
  gap: 0 3em;
  margin: 0;
  padding: 0;
}

.anc {
  grid-area: addr;
  grid-column: 1;
  grid-row: 1;
}

.anc:link,
.anc:visited {
  color: #666677;
  text-decoration: none;
}

.anc:link:hover {
  color: #9bdeff;
}

.equs {
  display: grid;
  grid-template-columns: minmax(50ch, max-content) min-content auto;
  gap: 0 1em;
}

.l {
  display: grid;
  grid-template-columns: subgrid;
  grid-column: 1 / -1;
  min-height: 1lh;
}

.c,
.cp,
.equs {
  grid-column: 2;
}

.cp {
  color: #6fafb5;
}

.c {
  margin-left: 4em;
}

.c, .ce {
  color: #8aa9ac;
}

.cd {
  grid-column: 2 / 3;
}

.ce {
  grid-column: -1;
  text-wrap: wrap;
  text-indent: 2ch hanging;
}

.lla {
  margin-left: 2em;
}

.la,
.lla {
  font-weight: bold;
  grid-column: 2 / 3;
}

.la,
.la:link,
.la:visited {
  color: #e8e801;
}

.lla,
.lla:link,
.lla:visited {
  color: #caca00;
}

.i {
  color: #f26969;
  margin-left: 4em;
  min-width: 3em;
}

.o {
  color: #e3e3e3;
  margin-left: 1ch;
}

  </style>
 </head>
 <body>
  <pre>
<div class="cp">;============================================================================
; Faxanadu (U).nes
;
; PRG12 ($8000 - $bfff)
;============================================================================
</div><span class="l"></span>
<span class="l"><span class="cd"><span class="i">BASE $8000</span></span></span>
<span class="l"></span>
<span class="l"><a class="anc" name="8000" href="#8000">[8000]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [0]:</span></span>
<span class="l"><a class="anc" name="8001" href="#8001">[8001]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [1]:</span></span>
<span class="l"><a class="anc" name="8002" href="#8002">[8002]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [2]:</span></span>
<span class="l"><a class="anc" name="8003" href="#8003">[8003]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [3]:</span></span>
<span class="l"><a class="anc" name="8004" href="#8004">[8004]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [4]:</span></span>
<span class="l"><a class="anc" name="8005" href="#8005">[8005]</a><span class="cd"><span class="i">db</span> <span class="o">$c0</span></span><span class="ce">; [5]:</span></span>
<span class="l"><a class="anc" name="8006" href="#8006">[8006]</a><span class="cd"><span class="i">db</span> <span class="o">$bf</span></span><span class="ce">; [6]:</span></span>
<span class="l"><a class="anc" name="8007" href="#8007">[8007]</a><span class="cd"><span class="i">db</span> <span class="o">$bf</span></span><span class="ce">; [7]:</span></span>
<span class="l"><a class="anc" name="8008" href="#8008">[8008]</a><span class="cd"><span class="i">db</span> <span class="o">$bf</span></span><span class="ce">; [8]:</span></span>
<span class="l"><a class="anc" name="8009" href="#8009">[8009]</a><span class="cd"><span class="i">db</span> <span class="o">$bf</span></span><span class="ce">; [9]:</span></span>
<span class="l"><a class="anc" name="800a" href="#800a">[800a]</a><span class="cd"><span class="i">db</span> <span class="o">$bf</span></span><span class="ce">; [10]:</span></span>
<span class="l"><a class="anc" name="800b" href="#800b">[800b]</a><span class="cd"><span class="i">db</span> <span class="o">$bf</span></span><span class="ce">; [11]:</span></span>
<span class="l"><a class="anc" name="800c" href="#800c">[800c]</a><span class="cd"><span class="i">db</span> <span class="o">$bf</span></span><span class="ce">; [12]:</span></span>
<span class="l"><a class="anc" name="800d" href="#800d">[800d]</a><span class="cd"><span class="i">db</span> <span class="o">$bf</span></span><span class="ce">; [13]:</span></span>
<span class="l"><a class="anc" name="800e" href="#800e">[800e]</a><span class="cd"><span class="i">db</span> <span class="o">$bf</span></span><span class="ce">; [14]:</span></span>
<span class="l"><a class="anc" name="800f" href="#800f">[800f]</a><span class="cd"><span class="i">db</span> <span class="o">$bf</span></span><span class="ce">; [15]:</span></span>
<span class="l"><a class="anc" name="8010" href="#8010">[8010]</a><span class="cd"><span class="i">db</span> <span class="o">$bf</span></span><span class="ce">; [16]:</span></span>
<span class="l"><a class="anc" name="8011" href="#8011">[8011]</a><span class="cd"><span class="i">db</span> <span class="o">$bf</span></span><span class="ce">; [17]:</span></span>
<span class="l"><a class="anc" name="8012" href="#8012">[8012]</a><span class="cd"><span class="i">db</span> <span class="o">$bf</span></span><span class="ce">; [18]:</span></span>
<span class="l"><a class="anc" name="8013" href="#8013">[8013]</a><span class="cd"><span class="i">db</span> <span class="o">$bf</span></span><span class="ce">; [19]:</span></span>
<span class="l"><a class="anc" name="8014" href="#8014">[8014]</a><span class="cd"><span class="i">db</span> <span class="o">$bf</span></span><span class="ce">; [20]:</span></span>
<span class="l"><a class="anc" name="8015" href="#8015">[8015]</a><span class="cd"><span class="i">db</span> <span class="o">$bf</span></span><span class="ce">; [21]:</span></span>
<span class="l"><a class="anc" name="8016" href="#8016">[8016]</a><span class="cd"><span class="i">db</span> <span class="o">$cf</span></span><span class="ce">; [22]:</span></span>
<span class="l"><a class="anc" name="8017" href="#8017">[8017]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [23]:</span></span>
<span class="l"><a class="anc" name="8018" href="#8018">[8018]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [24]:</span></span>
<span class="l"><a class="anc" name="8019" href="#8019">[8019]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [25]:</span></span>
<span class="l"><a class="anc" name="801a" href="#801a">[801a]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [26]:</span></span>
<span class="l"><a class="anc" name="801b" href="#801b">[801b]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [27]:</span></span>
<span class="l"><a class="anc" name="801c" href="#801c">[801c]</a><span class="cd"><span class="i">db</span> <span class="o">$c0</span></span><span class="ce">; [0]:</span></span>
<span class="l"><a class="anc" name="801d" href="#801d">[801d]</a><span class="cd"><span class="i">db</span> <span class="o">$bf</span></span><span class="ce">; [1]:</span></span>
<span class="l"><a class="anc" name="801e" href="#801e">[801e]</a><span class="cd"><span class="i">db</span> <span class="o">$bf</span></span><span class="ce">; [2]:</span></span>
<span class="l"><a class="anc" name="801f" href="#801f">[801f]</a><span class="cd"><span class="i">db</span> <span class="o">$bf</span></span><span class="ce">; [3]:</span></span>
<span class="l"><a class="anc" name="8020" href="#8020">[8020]</a><span class="cd"><span class="i">db</span> <span class="o">$bf</span></span><span class="ce">; [4]:</span></span>
<span class="l"><a class="anc" name="8021" href="#8021">[8021]</a><span class="cd"><span class="i">db</span> <span class="o">$ce</span></span><span class="ce">; [5]:</span></span>
<span class="l"><a class="anc" name="8022" href="#8022">[8022]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [6]:</span></span>
<span class="l"><a class="anc" name="8023" href="#8023">[8023]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [7]:</span></span>
<span class="l"><a class="anc" name="8024" href="#8024">[8024]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [8]:</span></span>
<span class="l"><a class="anc" name="8025" href="#8025">[8025]</a><span class="cd"><span class="i">db</span> <span class="o">$c8</span></span><span class="ce">; [9]:</span></span>
<span class="l"><a class="anc" name="8026" href="#8026">[8026]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [10]:</span></span>
<span class="l"><a class="anc" name="8027" href="#8027">[8027]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [11]:</span></span>
<span class="l"><a class="anc" name="8028" href="#8028">[8028]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [12]:</span></span>
<span class="l"><a class="anc" name="8029" href="#8029">[8029]</a><span class="cd"><span class="i">db</span> <span class="o">$be</span></span><span class="ce">; [13]:</span></span>
<span class="l"><a class="anc" name="802a" href="#802a">[802a]</a><span class="cd"><span class="i">db</span> <span class="o">$b9</span></span><span class="ce">; [14]:</span></span>
<span class="l"><a class="anc" name="802b" href="#802b">[802b]</a><span class="cd"><span class="i">db</span> <span class="o">$ac</span></span><span class="ce">; [15]:</span></span>
<span class="l"><a class="anc" name="802c" href="#802c">[802c]</a><span class="cd"><span class="i">db</span> <span class="o">$b3</span></span><span class="ce">; [16]:</span></span>
<span class="l"><a class="anc" name="802d" href="#802d">[802d]</a><span class="cd"><span class="i">db</span> <span class="o">$b4</span></span><span class="ce">; [17]:</span></span>
<span class="l"><a class="anc" name="802e" href="#802e">[802e]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [18]:</span></span>
<span class="l"><a class="anc" name="802f" href="#802f">[802f]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [19]:</span></span>
<span class="l"><a class="anc" name="8030" href="#8030">[8030]</a><span class="cd"><span class="i">db</span> <span class="o">$bc</span></span><span class="ce">; [20]:</span></span>
<span class="l"><a class="anc" name="8031" href="#8031">[8031]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [21]:</span></span>
<span class="l"><a class="anc" name="8032" href="#8032">[8032]</a><span class="cd"><span class="i">db</span> <span class="o">$cd</span></span><span class="ce">; [22]:</span></span>
<span class="l"><a class="anc" name="8033" href="#8033">[8033]</a><span class="cd"><span class="i">db</span> <span class="o">$bf</span></span><span class="ce">; [23]:</span></span>
<span class="l"><a class="anc" name="8034" href="#8034">[8034]</a><span class="cd"><span class="i">db</span> <span class="o">$bf</span></span><span class="ce">; [24]:</span></span>
<span class="l"><a class="anc" name="8035" href="#8035">[8035]</a><span class="cd"><span class="i">db</span> <span class="o">$bf</span></span><span class="ce">; [25]:</span></span>
<span class="l"><a class="anc" name="8036" href="#8036">[8036]</a><span class="cd"><span class="i">db</span> <span class="o">$bf</span></span><span class="ce">; [26]:</span></span>
<span class="l"><a class="anc" name="8037" href="#8037">[8037]</a><span class="cd"><span class="i">db</span> <span class="o">$cf</span></span><span class="ce">; [27]:</span></span>
<span class="l"><a class="anc" name="8038" href="#8038">[8038]</a><span class="cd"><span class="i">db</span> <span class="o">$cb</span></span><span class="ce">; [0]:</span></span>
<span class="l"><a class="anc" name="8039" href="#8039">[8039]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [1]:</span></span>
<span class="l"><a class="anc" name="803a" href="#803a">[803a]</a><span class="cd"><span class="i">db</span> <span class="o">$c8</span></span><span class="ce">; [2]:</span></span>
<span class="l"><a class="anc" name="803b" href="#803b">[803b]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [3]:</span></span>
<span class="l"><a class="anc" name="803c" href="#803c">[803c]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [4]:</span></span>
<span class="l"><a class="anc" name="803d" href="#803d">[803d]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [5]:</span></span>
<span class="l"><a class="anc" name="803e" href="#803e">[803e]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [6]:</span></span>
<span class="l"><a class="anc" name="803f" href="#803f">[803f]</a><span class="cd"><span class="i">db</span> <span class="o">$bc</span></span><span class="ce">; [7]:</span></span>
<span class="l"><a class="anc" name="8040" href="#8040">[8040]</a><span class="cd"><span class="i">db</span> <span class="o">$cc</span></span><span class="ce">; [8]:</span></span>
<span class="l"><a class="anc" name="8041" href="#8041">[8041]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [9]:</span></span>
<span class="l"><a class="anc" name="8042" href="#8042">[8042]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [10]:</span></span>
<span class="l"><a class="anc" name="8043" href="#8043">[8043]</a><span class="cd"><span class="i">db</span> <span class="o">$c1</span></span><span class="ce">; [11]:</span></span>
<span class="l"><a class="anc" name="8044" href="#8044">[8044]</a><span class="cd"><span class="i">db</span> <span class="o">$c2</span></span><span class="ce">; [12]:</span></span>
<span class="l"><a class="anc" name="8045" href="#8045">[8045]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [13]:</span></span>
<span class="l"><a class="anc" name="8046" href="#8046">[8046]</a><span class="cd"><span class="i">db</span> <span class="o">$ab</span></span><span class="ce">; [14]:</span></span>
<span class="l"><a class="anc" name="8047" href="#8047">[8047]</a><span class="cd"><span class="i">db</span> <span class="o">$ac</span></span><span class="ce">; [15]:</span></span>
<span class="l"><a class="anc" name="8048" href="#8048">[8048]</a><span class="cd"><span class="i">db</span> <span class="o">$b3</span></span><span class="ce">; [16]:</span></span>
<span class="l"><a class="anc" name="8049" href="#8049">[8049]</a><span class="cd"><span class="i">db</span> <span class="o">$b4</span></span><span class="ce">; [17]:</span></span>
<span class="l"><a class="anc" name="804a" href="#804a">[804a]</a><span class="cd"><span class="i">db</span> <span class="o">$bc</span></span><span class="ce">; [18]:</span></span>
<span class="l"><a class="anc" name="804b" href="#804b">[804b]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [19]:</span></span>
<span class="l"><a class="anc" name="804c" href="#804c">[804c]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [20]:</span></span>
<span class="l"><a class="anc" name="804d" href="#804d">[804d]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [21]:</span></span>
<span class="l"><a class="anc" name="804e" href="#804e">[804e]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [22]:</span></span>
<span class="l"><a class="anc" name="804f" href="#804f">[804f]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [23]:</span></span>
<span class="l"><a class="anc" name="8050" href="#8050">[8050]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [24]:</span></span>
<span class="l"><a class="anc" name="8051" href="#8051">[8051]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [25]:</span></span>
<span class="l"><a class="anc" name="8052" href="#8052">[8052]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [26]:</span></span>
<span class="l"><a class="anc" name="8053" href="#8053">[8053]</a><span class="cd"><span class="i">db</span> <span class="o">$cb</span></span><span class="ce">; [27]:</span></span>
<span class="l"><a class="anc" name="8054" href="#8054">[8054]</a><span class="cd"><span class="i">db</span> <span class="o">$cb</span></span><span class="ce">; [0]:</span></span>
<span class="l"><a class="anc" name="8055" href="#8055">[8055]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [1]:</span></span>
<span class="l"><a class="anc" name="8056" href="#8056">[8056]</a><span class="cd"><span class="i">db</span> <span class="o">$01</span></span><span class="ce">; [2]:</span></span>
<span class="l"><a class="anc" name="8057" href="#8057">[8057]</a><span class="cd"><span class="i">db</span> <span class="o">$02</span></span><span class="ce">; [3]:</span></span>
<span class="l"><a class="anc" name="8058" href="#8058">[8058]</a><span class="cd"><span class="i">db</span> <span class="o">$03</span></span><span class="ce">; [4]:</span></span>
<span class="l"><a class="anc" name="8059" href="#8059">[8059]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [5]:</span></span>
<span class="l"><a class="anc" name="805a" href="#805a">[805a]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [6]:</span></span>
<span class="l"><a class="anc" name="805b" href="#805b">[805b]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [7]:</span></span>
<span class="l"><a class="anc" name="805c" href="#805c">[805c]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [8]:</span></span>
<span class="l"><a class="anc" name="805d" href="#805d">[805d]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [9]:</span></span>
<span class="l"><a class="anc" name="805e" href="#805e">[805e]</a><span class="cd"><span class="i">db</span> <span class="o">$d0</span></span><span class="ce">; [10]:</span></span>
<span class="l"><a class="anc" name="805f" href="#805f">[805f]</a><span class="cd"><span class="i">db</span> <span class="o">$d1</span></span><span class="ce">; [11]:</span></span>
<span class="l"><a class="anc" name="8060" href="#8060">[8060]</a><span class="cd"><span class="i">db</span> <span class="o">$d2</span></span><span class="ce">; [12]:</span></span>
<span class="l"><a class="anc" name="8061" href="#8061">[8061]</a><span class="cd"><span class="i">db</span> <span class="o">$d0</span></span><span class="ce">; [13]:</span></span>
<span class="l"><a class="anc" name="8062" href="#8062">[8062]</a><span class="cd"><span class="i">db</span> <span class="o">$ab</span></span><span class="ce">; [14]:</span></span>
<span class="l"><a class="anc" name="8063" href="#8063">[8063]</a><span class="cd"><span class="i">db</span> <span class="o">$ac</span></span><span class="ce">; [15]:</span></span>
<span class="l"><a class="anc" name="8064" href="#8064">[8064]</a><span class="cd"><span class="i">db</span> <span class="o">$b3</span></span><span class="ce">; [16]:</span></span>
<span class="l"><a class="anc" name="8065" href="#8065">[8065]</a><span class="cd"><span class="i">db</span> <span class="o">$b4</span></span><span class="ce">; [17]:</span></span>
<span class="l"><a class="anc" name="8066" href="#8066">[8066]</a><span class="cd"><span class="i">db</span> <span class="o">$c8</span></span><span class="ce">; [18]:</span></span>
<span class="l"><a class="anc" name="8067" href="#8067">[8067]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [19]:</span></span>
<span class="l"><a class="anc" name="8068" href="#8068">[8068]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [20]:</span></span>
<span class="l"><a class="anc" name="8069" href="#8069">[8069]</a><span class="cd"><span class="i">db</span> <span class="o">$c8</span></span><span class="ce">; [21]:</span></span>
<span class="l"><a class="anc" name="806a" href="#806a">[806a]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [22]:</span></span>
<span class="l"><a class="anc" name="806b" href="#806b">[806b]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [23]:</span></span>
<span class="l"><a class="anc" name="806c" href="#806c">[806c]</a><span class="cd"><span class="i">db</span> <span class="o">$9d</span></span><span class="ce">; [24]:</span></span>
<span class="l"><a class="anc" name="806d" href="#806d">[806d]</a><span class="cd"><span class="i">db</span> <span class="o">$9e</span></span><span class="ce">; [25]:</span></span>
<span class="l"><a class="anc" name="806e" href="#806e">[806e]</a><span class="cd"><span class="i">db</span> <span class="o">$9f</span></span><span class="ce">; [26]:</span></span>
<span class="l"><a class="anc" name="806f" href="#806f">[806f]</a><span class="cd"><span class="i">db</span> <span class="o">$cb</span></span><span class="ce">; [27]:</span></span>
<span class="l"><a class="anc" name="8070" href="#8070">[8070]</a><span class="cd"><span class="i">db</span> <span class="o">$cb</span></span><span class="ce">; [0]:</span></span>
<span class="l"><a class="anc" name="8071" href="#8071">[8071]</a><span class="cd"><span class="i">db</span> <span class="o">$10</span></span><span class="ce">; [1]:</span></span>
<span class="l"><a class="anc" name="8072" href="#8072">[8072]</a><span class="cd"><span class="i">db</span> <span class="o">$11</span></span><span class="ce">; [2]:</span></span>
<span class="l"><a class="anc" name="8073" href="#8073">[8073]</a><span class="cd"><span class="i">db</span> <span class="o">$12</span></span><span class="ce">; [3]:</span></span>
<span class="l"><a class="anc" name="8074" href="#8074">[8074]</a><span class="cd"><span class="i">db</span> <span class="o">$13</span></span><span class="ce">; [4]:</span></span>
<span class="l"><a class="anc" name="8075" href="#8075">[8075]</a><span class="cd"><span class="i">db</span> <span class="o">$14</span></span><span class="ce">; [5]:</span></span>
<span class="l"><a class="anc" name="8076" href="#8076">[8076]</a><span class="cd"><span class="i">db</span> <span class="o">$15</span></span><span class="ce">; [6]:</span></span>
<span class="l"><a class="anc" name="8077" href="#8077">[8077]</a><span class="cd"><span class="i">db</span> <span class="o">$bc</span></span><span class="ce">; [7]:</span></span>
<span class="l"><a class="anc" name="8078" href="#8078">[8078]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [8]:</span></span>
<span class="l"><a class="anc" name="8079" href="#8079">[8079]</a><span class="cd"><span class="i">db</span> <span class="o">$d0</span></span><span class="ce">; [9]:</span></span>
<span class="l"><a class="anc" name="807a" href="#807a">[807a]</a><span class="cd"><span class="i">db</span> <span class="o">$b5</span></span><span class="ce">; [10]:</span></span>
<span class="l"><a class="anc" name="807b" href="#807b">[807b]</a><span class="cd"><span class="i">db</span> <span class="o">$b6</span></span><span class="ce">; [11]:</span></span>
<span class="l"><a class="anc" name="807c" href="#807c">[807c]</a><span class="cd"><span class="i">db</span> <span class="o">$b7</span></span><span class="ce">; [12]:</span></span>
<span class="l"><a class="anc" name="807d" href="#807d">[807d]</a><span class="cd"><span class="i">db</span> <span class="o">$b8</span></span><span class="ce">; [13]:</span></span>
<span class="l"><a class="anc" name="807e" href="#807e">[807e]</a><span class="cd"><span class="i">db</span> <span class="o">$b6</span></span><span class="ce">; [14]:</span></span>
<span class="l"><a class="anc" name="807f" href="#807f">[807f]</a><span class="cd"><span class="i">db</span> <span class="o">$b8</span></span><span class="ce">; [15]:</span></span>
<span class="l"><a class="anc" name="8080" href="#8080">[8080]</a><span class="cd"><span class="i">db</span> <span class="o">$b3</span></span><span class="ce">; [16]:</span></span>
<span class="l"><a class="anc" name="8081" href="#8081">[8081]</a><span class="cd"><span class="i">db</span> <span class="o">$b4</span></span><span class="ce">; [17]:</span></span>
<span class="l"><a class="anc" name="8082" href="#8082">[8082]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [18]:</span></span>
<span class="l"><a class="anc" name="8083" href="#8083">[8083]</a><span class="cd"><span class="i">db</span> <span class="o">$c8</span></span><span class="ce">; [19]:</span></span>
<span class="l"><a class="anc" name="8084" href="#8084">[8084]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [20]:</span></span>
<span class="l"><a class="anc" name="8085" href="#8085">[8085]</a><span class="cd"><span class="i">db</span> <span class="o">$9c</span></span><span class="ce">; [21]:</span></span>
<span class="l"><a class="anc" name="8086" href="#8086">[8086]</a><span class="cd"><span class="i">db</span> <span class="o">$a0</span></span><span class="ce">; [22]:</span></span>
<span class="l"><a class="anc" name="8087" href="#8087">[8087]</a><span class="cd"><span class="i">db</span> <span class="o">$a1</span></span><span class="ce">; [23]:</span></span>
<span class="l"><a class="anc" name="8088" href="#8088">[8088]</a><span class="cd"><span class="i">db</span> <span class="o">$a2</span></span><span class="ce">; [24]:</span></span>
<span class="l"><a class="anc" name="8089" href="#8089">[8089]</a><span class="cd"><span class="i">db</span> <span class="o">$a3</span></span><span class="ce">; [25]:</span></span>
<span class="l"><a class="anc" name="808a" href="#808a">[808a]</a><span class="cd"><span class="i">db</span> <span class="o">$a4</span></span><span class="ce">; [26]:</span></span>
<span class="l"><a class="anc" name="808b" href="#808b">[808b]</a><span class="cd"><span class="i">db</span> <span class="o">$cb</span></span><span class="ce">; [27]:</span></span>
<span class="l"><a class="anc" name="808c" href="#808c">[808c]</a><span class="cd"><span class="i">db</span> <span class="o">$cb</span></span><span class="ce">; [0]:</span></span>
<span class="l"><a class="anc" name="808d" href="#808d">[808d]</a><span class="cd"><span class="i">db</span> <span class="o">$20</span></span><span class="ce">; [1]:</span></span>
<span class="l"><a class="anc" name="808e" href="#808e">[808e]</a><span class="cd"><span class="i">db</span> <span class="o">$21</span></span><span class="ce">; [2]:</span></span>
<span class="l"><a class="anc" name="808f" href="#808f">[808f]</a><span class="cd"><span class="i">db</span> <span class="o">$22</span></span><span class="ce">; [3]:</span></span>
<span class="l"><a class="anc" name="8090" href="#8090">[8090]</a><span class="cd"><span class="i">db</span> <span class="o">$23</span></span><span class="ce">; [4]:</span></span>
<span class="l"><a class="anc" name="8091" href="#8091">[8091]</a><span class="cd"><span class="i">db</span> <span class="o">$24</span></span><span class="ce">; [5]:</span></span>
<span class="l"><a class="anc" name="8092" href="#8092">[8092]</a><span class="cd"><span class="i">db</span> <span class="o">$25</span></span><span class="ce">; [6]:</span></span>
<span class="l"><a class="anc" name="8093" href="#8093">[8093]</a><span class="cd"><span class="i">db</span> <span class="o">$26</span></span><span class="ce">; [7]:</span></span>
<span class="l"><a class="anc" name="8094" href="#8094">[8094]</a><span class="cd"><span class="i">db</span> <span class="o">$27</span></span><span class="ce">; [8]:</span></span>
<span class="l"><a class="anc" name="8095" href="#8095">[8095]</a><span class="cd"><span class="i">db</span> <span class="o">$c9</span></span><span class="ce">; [9]:</span></span>
<span class="l"><a class="anc" name="8096" href="#8096">[8096]</a><span class="cd"><span class="i">db</span> <span class="o">$ca</span></span><span class="ce">; [10]:</span></span>
<span class="l"><a class="anc" name="8097" href="#8097">[8097]</a><span class="cd"><span class="i">db</span> <span class="o">$c9</span></span><span class="ce">; [11]:</span></span>
<span class="l"><a class="anc" name="8098" href="#8098">[8098]</a><span class="cd"><span class="i">db</span> <span class="o">$ca</span></span><span class="ce">; [12]:</span></span>
<span class="l"><a class="anc" name="8099" href="#8099">[8099]</a><span class="cd"><span class="i">db</span> <span class="o">$ca</span></span><span class="ce">; [13]:</span></span>
<span class="l"><a class="anc" name="809a" href="#809a">[809a]</a><span class="cd"><span class="i">db</span> <span class="o">$ca</span></span><span class="ce">; [14]:</span></span>
<span class="l"><a class="anc" name="809b" href="#809b">[809b]</a><span class="cd"><span class="i">db</span> <span class="o">$ca</span></span><span class="ce">; [15]:</span></span>
<span class="l"><a class="anc" name="809c" href="#809c">[809c]</a><span class="cd"><span class="i">db</span> <span class="o">$b3</span></span><span class="ce">; [16]:</span></span>
<span class="l"><a class="anc" name="809d" href="#809d">[809d]</a><span class="cd"><span class="i">db</span> <span class="o">$b4</span></span><span class="ce">; [17]:</span></span>
<span class="l"><a class="anc" name="809e" href="#809e">[809e]</a><span class="cd"><span class="i">db</span> <span class="o">$bc</span></span><span class="ce">; [18]:</span></span>
<span class="l"><a class="anc" name="809f" href="#809f">[809f]</a><span class="cd"><span class="i">db</span> <span class="o">$2a</span></span><span class="ce">; [19]:</span></span>
<span class="l"><a class="anc" name="80a0" href="#80a0">[80a0]</a><span class="cd"><span class="i">db</span> <span class="o">$2b</span></span><span class="ce">; [20]:</span></span>
<span class="l"><a class="anc" name="80a1" href="#80a1">[80a1]</a><span class="cd"><span class="i">db</span> <span class="o">$a5</span></span><span class="ce">; [21]:</span></span>
<span class="l"><a class="anc" name="80a2" href="#80a2">[80a2]</a><span class="cd"><span class="i">db</span> <span class="o">$a6</span></span><span class="ce">; [22]:</span></span>
<span class="l"><a class="anc" name="80a3" href="#80a3">[80a3]</a><span class="cd"><span class="i">db</span> <span class="o">$a7</span></span><span class="ce">; [23]:</span></span>
<span class="l"><a class="anc" name="80a4" href="#80a4">[80a4]</a><span class="cd"><span class="i">db</span> <span class="o">$a8</span></span><span class="ce">; [24]:</span></span>
<span class="l"><a class="anc" name="80a5" href="#80a5">[80a5]</a><span class="cd"><span class="i">db</span> <span class="o">$a9</span></span><span class="ce">; [25]:</span></span>
<span class="l"><a class="anc" name="80a6" href="#80a6">[80a6]</a><span class="cd"><span class="i">db</span> <span class="o">$aa</span></span><span class="ce">; [26]:</span></span>
<span class="l"><a class="anc" name="80a7" href="#80a7">[80a7]</a><span class="cd"><span class="i">db</span> <span class="o">$cb</span></span><span class="ce">; [27]:</span></span>
<span class="l"><a class="anc" name="80a8" href="#80a8">[80a8]</a><span class="cd"><span class="i">db</span> <span class="o">$cb</span></span><span class="ce">; [0]:</span></span>
<span class="l"><a class="anc" name="80a9" href="#80a9">[80a9]</a><span class="cd"><span class="i">db</span> <span class="o">$30</span></span><span class="ce">; [1]:</span></span>
<span class="l"><a class="anc" name="80aa" href="#80aa">[80aa]</a><span class="cd"><span class="i">db</span> <span class="o">$31</span></span><span class="ce">; [2]:</span></span>
<span class="l"><a class="anc" name="80ab" href="#80ab">[80ab]</a><span class="cd"><span class="i">db</span> <span class="o">$32</span></span><span class="ce">; [3]:</span></span>
<span class="l"><a class="anc" name="80ac" href="#80ac">[80ac]</a><span class="cd"><span class="i">db</span> <span class="o">$33</span></span><span class="ce">; [4]:</span></span>
<span class="l"><a class="anc" name="80ad" href="#80ad">[80ad]</a><span class="cd"><span class="i">db</span> <span class="o">$34</span></span><span class="ce">; [5]:</span></span>
<span class="l"><a class="anc" name="80ae" href="#80ae">[80ae]</a><span class="cd"><span class="i">db</span> <span class="o">$35</span></span><span class="ce">; [6]:</span></span>
<span class="l"><a class="anc" name="80af" href="#80af">[80af]</a><span class="cd"><span class="i">db</span> <span class="o">$36</span></span><span class="ce">; [7]:</span></span>
<span class="l"><a class="anc" name="80b0" href="#80b0">[80b0]</a><span class="cd"><span class="i">db</span> <span class="o">$37</span></span><span class="ce">; [8]:</span></span>
<span class="l"><a class="anc" name="80b1" href="#80b1">[80b1]</a><span class="cd"><span class="i">db</span> <span class="o">$38</span></span><span class="ce">; [9]:</span></span>
<span class="l"><a class="anc" name="80b2" href="#80b2">[80b2]</a><span class="cd"><span class="i">db</span> <span class="o">$39</span></span><span class="ce">; [10]:</span></span>
<span class="l"><a class="anc" name="80b3" href="#80b3">[80b3]</a><span class="cd"><span class="i">db</span> <span class="o">$ad</span></span><span class="ce">; [11]:</span></span>
<span class="l"><a class="anc" name="80b4" href="#80b4">[80b4]</a><span class="cd"><span class="i">db</span> <span class="o">$ad</span></span><span class="ce">; [12]:</span></span>
<span class="l"><a class="anc" name="80b5" href="#80b5">[80b5]</a><span class="cd"><span class="i">db</span> <span class="o">$ae</span></span><span class="ce">; [13]:</span></span>
<span class="l"><a class="anc" name="80b6" href="#80b6">[80b6]</a><span class="cd"><span class="i">db</span> <span class="o">$ad</span></span><span class="ce">; [14]:</span></span>
<span class="l"><a class="anc" name="80b7" href="#80b7">[80b7]</a><span class="cd"><span class="i">db</span> <span class="o">$3e</span></span><span class="ce">; [15]:</span></span>
<span class="l"><a class="anc" name="80b8" href="#80b8">[80b8]</a><span class="cd"><span class="i">db</span> <span class="o">$3f</span></span><span class="ce">; [16]:</span></span>
<span class="l"><a class="anc" name="80b9" href="#80b9">[80b9]</a><span class="cd"><span class="i">db</span> <span class="o">$04</span></span><span class="ce">; [17]:</span></span>
<span class="l"><a class="anc" name="80ba" href="#80ba">[80ba]</a><span class="cd"><span class="i">db</span> <span class="o">$05</span></span><span class="ce">; [18]:</span></span>
<span class="l"><a class="anc" name="80bb" href="#80bb">[80bb]</a><span class="cd"><span class="i">db</span> <span class="o">$06</span></span><span class="ce">; [19]:</span></span>
<span class="l"><a class="anc" name="80bc" href="#80bc">[80bc]</a><span class="cd"><span class="i">db</span> <span class="o">$07</span></span><span class="ce">; [20]:</span></span>
<span class="l"><a class="anc" name="80bd" href="#80bd">[80bd]</a><span class="cd"><span class="i">db</span> <span class="o">$08</span></span><span class="ce">; [21]:</span></span>
<span class="l"><a class="anc" name="80be" href="#80be">[80be]</a><span class="cd"><span class="i">db</span> <span class="o">$09</span></span><span class="ce">; [22]:</span></span>
<span class="l"><a class="anc" name="80bf" href="#80bf">[80bf]</a><span class="cd"><span class="i">db</span> <span class="o">$0a</span></span><span class="ce">; [23]:</span></span>
<span class="l"><a class="anc" name="80c0" href="#80c0">[80c0]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [24]:</span></span>
<span class="l"><a class="anc" name="80c1" href="#80c1">[80c1]</a><span class="cd"><span class="i">db</span> <span class="o">$0b</span></span><span class="ce">; [25]:</span></span>
<span class="l"><a class="anc" name="80c2" href="#80c2">[80c2]</a><span class="cd"><span class="i">db</span> <span class="o">$0c</span></span><span class="ce">; [26]:</span></span>
<span class="l"><a class="anc" name="80c3" href="#80c3">[80c3]</a><span class="cd"><span class="i">db</span> <span class="o">$cb</span></span><span class="ce">; [27]:</span></span>
<span class="l"><a class="anc" name="80c4" href="#80c4">[80c4]</a><span class="cd"><span class="i">db</span> <span class="o">$cb</span></span><span class="ce">; [0]:</span></span>
<span class="l"><a class="anc" name="80c5" href="#80c5">[80c5]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [1]:</span></span>
<span class="l"><a class="anc" name="80c6" href="#80c6">[80c6]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [2]:</span></span>
<span class="l"><a class="anc" name="80c7" href="#80c7">[80c7]</a><span class="cd"><span class="i">db</span> <span class="o">$42</span></span><span class="ce">; [3]:</span></span>
<span class="l"><a class="anc" name="80c8" href="#80c8">[80c8]</a><span class="cd"><span class="i">db</span> <span class="o">$43</span></span><span class="ce">; [4]:</span></span>
<span class="l"><a class="anc" name="80c9" href="#80c9">[80c9]</a><span class="cd"><span class="i">db</span> <span class="o">$44</span></span><span class="ce">; [5]:</span></span>
<span class="l"><a class="anc" name="80ca" href="#80ca">[80ca]</a><span class="cd"><span class="i">db</span> <span class="o">$45</span></span><span class="ce">; [6]:</span></span>
<span class="l"><a class="anc" name="80cb" href="#80cb">[80cb]</a><span class="cd"><span class="i">db</span> <span class="o">$46</span></span><span class="ce">; [7]:</span></span>
<span class="l"><a class="anc" name="80cc" href="#80cc">[80cc]</a><span class="cd"><span class="i">db</span> <span class="o">$47</span></span><span class="ce">; [8]:</span></span>
<span class="l"><a class="anc" name="80cd" href="#80cd">[80cd]</a><span class="cd"><span class="i">db</span> <span class="o">$48</span></span><span class="ce">; [9]:</span></span>
<span class="l"><a class="anc" name="80ce" href="#80ce">[80ce]</a><span class="cd"><span class="i">db</span> <span class="o">$49</span></span><span class="ce">; [10]:</span></span>
<span class="l"><a class="anc" name="80cf" href="#80cf">[80cf]</a><span class="cd"><span class="i">db</span> <span class="o">$4a</span></span><span class="ce">; [11]:</span></span>
<span class="l"><a class="anc" name="80d0" href="#80d0">[80d0]</a><span class="cd"><span class="i">db</span> <span class="o">$4b</span></span><span class="ce">; [12]:</span></span>
<span class="l"><a class="anc" name="80d1" href="#80d1">[80d1]</a><span class="cd"><span class="i">db</span> <span class="o">$4c</span></span><span class="ce">; [13]:</span></span>
<span class="l"><a class="anc" name="80d2" href="#80d2">[80d2]</a><span class="cd"><span class="i">db</span> <span class="o">$4d</span></span><span class="ce">; [14]:</span></span>
<span class="l"><a class="anc" name="80d3" href="#80d3">[80d3]</a><span class="cd"><span class="i">db</span> <span class="o">$4e</span></span><span class="ce">; [15]:</span></span>
<span class="l"><a class="anc" name="80d4" href="#80d4">[80d4]</a><span class="cd"><span class="i">db</span> <span class="o">$4f</span></span><span class="ce">; [16]:</span></span>
<span class="l"><a class="anc" name="80d5" href="#80d5">[80d5]</a><span class="cd"><span class="i">db</span> <span class="o">$0d</span></span><span class="ce">; [17]:</span></span>
<span class="l"><a class="anc" name="80d6" href="#80d6">[80d6]</a><span class="cd"><span class="i">db</span> <span class="o">$0e</span></span><span class="ce">; [18]:</span></span>
<span class="l"><a class="anc" name="80d7" href="#80d7">[80d7]</a><span class="cd"><span class="i">db</span> <span class="o">$0f</span></span><span class="ce">; [19]:</span></span>
<span class="l"><a class="anc" name="80d8" href="#80d8">[80d8]</a><span class="cd"><span class="i">db</span> <span class="o">$16</span></span><span class="ce">; [20]:</span></span>
<span class="l"><a class="anc" name="80d9" href="#80d9">[80d9]</a><span class="cd"><span class="i">db</span> <span class="o">$17</span></span><span class="ce">; [21]:</span></span>
<span class="l"><a class="anc" name="80da" href="#80da">[80da]</a><span class="cd"><span class="i">db</span> <span class="o">$18</span></span><span class="ce">; [22]:</span></span>
<span class="l"><a class="anc" name="80db" href="#80db">[80db]</a><span class="cd"><span class="i">db</span> <span class="o">$19</span></span><span class="ce">; [23]:</span></span>
<span class="l"><a class="anc" name="80dc" href="#80dc">[80dc]</a><span class="cd"><span class="i">db</span> <span class="o">$1a</span></span><span class="ce">; [24]:</span></span>
<span class="l"><a class="anc" name="80dd" href="#80dd">[80dd]</a><span class="cd"><span class="i">db</span> <span class="o">$1b</span></span><span class="ce">; [25]:</span></span>
<span class="l"><a class="anc" name="80de" href="#80de">[80de]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [26]:</span></span>
<span class="l"><a class="anc" name="80df" href="#80df">[80df]</a><span class="cd"><span class="i">db</span> <span class="o">$cb</span></span><span class="ce">; [27]:</span></span>
<span class="l"><a class="anc" name="80e0" href="#80e0">[80e0]</a><span class="cd"><span class="i">db</span> <span class="o">$cb</span></span><span class="ce">; [0]:</span></span>
<span class="l"><a class="anc" name="80e1" href="#80e1">[80e1]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [1]:</span></span>
<span class="l"><a class="anc" name="80e2" href="#80e2">[80e2]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [2]:</span></span>
<span class="l"><a class="anc" name="80e3" href="#80e3">[80e3]</a><span class="cd"><span class="i">db</span> <span class="o">$52</span></span><span class="ce">; [3]:</span></span>
<span class="l"><a class="anc" name="80e4" href="#80e4">[80e4]</a><span class="cd"><span class="i">db</span> <span class="o">$53</span></span><span class="ce">; [4]:</span></span>
<span class="l"><a class="anc" name="80e5" href="#80e5">[80e5]</a><span class="cd"><span class="i">db</span> <span class="o">$54</span></span><span class="ce">; [5]:</span></span>
<span class="l"><a class="anc" name="80e6" href="#80e6">[80e6]</a><span class="cd"><span class="i">db</span> <span class="o">$55</span></span><span class="ce">; [6]:</span></span>
<span class="l"><a class="anc" name="80e7" href="#80e7">[80e7]</a><span class="cd"><span class="i">db</span> <span class="o">$56</span></span><span class="ce">; [7]:</span></span>
<span class="l"><a class="anc" name="80e8" href="#80e8">[80e8]</a><span class="cd"><span class="i">db</span> <span class="o">$57</span></span><span class="ce">; [8]:</span></span>
<span class="l"><a class="anc" name="80e9" href="#80e9">[80e9]</a><span class="cd"><span class="i">db</span> <span class="o">$58</span></span><span class="ce">; [9]:</span></span>
<span class="l"><a class="anc" name="80ea" href="#80ea">[80ea]</a><span class="cd"><span class="i">db</span> <span class="o">$59</span></span><span class="ce">; [10]:</span></span>
<span class="l"><a class="anc" name="80eb" href="#80eb">[80eb]</a><span class="cd"><span class="i">db</span> <span class="o">$5a</span></span><span class="ce">; [11]:</span></span>
<span class="l"><a class="anc" name="80ec" href="#80ec">[80ec]</a><span class="cd"><span class="i">db</span> <span class="o">$5b</span></span><span class="ce">; [12]:</span></span>
<span class="l"><a class="anc" name="80ed" href="#80ed">[80ed]</a><span class="cd"><span class="i">db</span> <span class="o">$5c</span></span><span class="ce">; [13]:</span></span>
<span class="l"><a class="anc" name="80ee" href="#80ee">[80ee]</a><span class="cd"><span class="i">db</span> <span class="o">$5d</span></span><span class="ce">; [14]:</span></span>
<span class="l"><a class="anc" name="80ef" href="#80ef">[80ef]</a><span class="cd"><span class="i">db</span> <span class="o">$5e</span></span><span class="ce">; [15]:</span></span>
<span class="l"><a class="anc" name="80f0" href="#80f0">[80f0]</a><span class="cd"><span class="i">db</span> <span class="o">$5f</span></span><span class="ce">; [16]:</span></span>
<span class="l"><a class="anc" name="80f1" href="#80f1">[80f1]</a><span class="cd"><span class="i">db</span> <span class="o">$1d</span></span><span class="ce">; [17]:</span></span>
<span class="l"><a class="anc" name="80f2" href="#80f2">[80f2]</a><span class="cd"><span class="i">db</span> <span class="o">$1e</span></span><span class="ce">; [18]:</span></span>
<span class="l"><a class="anc" name="80f3" href="#80f3">[80f3]</a><span class="cd"><span class="i">db</span> <span class="o">$1f</span></span><span class="ce">; [19]:</span></span>
<span class="l"><a class="anc" name="80f4" href="#80f4">[80f4]</a><span class="cd"><span class="i">db</span> <span class="o">$28</span></span><span class="ce">; [20]:</span></span>
<span class="l"><a class="anc" name="80f5" href="#80f5">[80f5]</a><span class="cd"><span class="i">db</span> <span class="o">$29</span></span><span class="ce">; [21]:</span></span>
<span class="l"><a class="anc" name="80f6" href="#80f6">[80f6]</a><span class="cd"><span class="i">db</span> <span class="o">$2c</span></span><span class="ce">; [22]:</span></span>
<span class="l"><a class="anc" name="80f7" href="#80f7">[80f7]</a><span class="cd"><span class="i">db</span> <span class="o">$2d</span></span><span class="ce">; [23]:</span></span>
<span class="l"><a class="anc" name="80f8" href="#80f8">[80f8]</a><span class="cd"><span class="i">db</span> <span class="o">$2e</span></span><span class="ce">; [24]:</span></span>
<span class="l"><a class="anc" name="80f9" href="#80f9">[80f9]</a><span class="cd"><span class="i">db</span> <span class="o">$2f</span></span><span class="ce">; [25]:</span></span>
<span class="l"><a class="anc" name="80fa" href="#80fa">[80fa]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [26]:</span></span>
<span class="l"><a class="anc" name="80fb" href="#80fb">[80fb]</a><span class="cd"><span class="i">db</span> <span class="o">$cb</span></span><span class="ce">; [27]:</span></span>
<span class="l"><a class="anc" name="80fc" href="#80fc">[80fc]</a><span class="cd"><span class="i">db</span> <span class="o">$cb</span></span><span class="ce">; [0]:</span></span>
<span class="l"><a class="anc" name="80fd" href="#80fd">[80fd]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [1]:</span></span>
<span class="l"><a class="anc" name="80fe" href="#80fe">[80fe]</a><span class="cd"><span class="i">db</span> <span class="o">$bc</span></span><span class="ce">; [2]:</span></span>
<span class="l"><a class="anc" name="80ff" href="#80ff">[80ff]</a><span class="cd"><span class="i">db</span> <span class="o">$62</span></span><span class="ce">; [3]:</span></span>
<span class="l"><a class="anc" name="8100" href="#8100">[8100]</a><span class="cd"><span class="i">db</span> <span class="o">$63</span></span><span class="ce">; [4]:</span></span>
<span class="l"><a class="anc" name="8101" href="#8101">[8101]</a><span class="cd"><span class="i">db</span> <span class="o">$64</span></span><span class="ce">; [5]:</span></span>
<span class="l"><a class="anc" name="8102" href="#8102">[8102]</a><span class="cd"><span class="i">db</span> <span class="o">$65</span></span><span class="ce">; [6]:</span></span>
<span class="l"><a class="anc" name="8103" href="#8103">[8103]</a><span class="cd"><span class="i">db</span> <span class="o">$66</span></span><span class="ce">; [7]:</span></span>
<span class="l"><a class="anc" name="8104" href="#8104">[8104]</a><span class="cd"><span class="i">db</span> <span class="o">$67</span></span><span class="ce">; [8]:</span></span>
<span class="l"><a class="anc" name="8105" href="#8105">[8105]</a><span class="cd"><span class="i">db</span> <span class="o">$68</span></span><span class="ce">; [9]:</span></span>
<span class="l"><a class="anc" name="8106" href="#8106">[8106]</a><span class="cd"><span class="i">db</span> <span class="o">$69</span></span><span class="ce">; [10]:</span></span>
<span class="l"><a class="anc" name="8107" href="#8107">[8107]</a><span class="cd"><span class="i">db</span> <span class="o">$6a</span></span><span class="ce">; [11]:</span></span>
<span class="l"><a class="anc" name="8108" href="#8108">[8108]</a><span class="cd"><span class="i">db</span> <span class="o">$6b</span></span><span class="ce">; [12]:</span></span>
<span class="l"><a class="anc" name="8109" href="#8109">[8109]</a><span class="cd"><span class="i">db</span> <span class="o">$6c</span></span><span class="ce">; [13]:</span></span>
<span class="l"><a class="anc" name="810a" href="#810a">[810a]</a><span class="cd"><span class="i">db</span> <span class="o">$6d</span></span><span class="ce">; [14]:</span></span>
<span class="l"><a class="anc" name="810b" href="#810b">[810b]</a><span class="cd"><span class="i">db</span> <span class="o">$6e</span></span><span class="ce">; [15]:</span></span>
<span class="l"><a class="anc" name="810c" href="#810c">[810c]</a><span class="cd"><span class="i">db</span> <span class="o">$6f</span></span><span class="ce">; [16]:</span></span>
<span class="l"><a class="anc" name="810d" href="#810d">[810d]</a><span class="cd"><span class="i">db</span> <span class="o">$3a</span></span><span class="ce">; [17]:</span></span>
<span class="l"><a class="anc" name="810e" href="#810e">[810e]</a><span class="cd"><span class="i">db</span> <span class="o">$3b</span></span><span class="ce">; [18]:</span></span>
<span class="l"><a class="anc" name="810f" href="#810f">[810f]</a><span class="cd"><span class="i">db</span> <span class="o">$3c</span></span><span class="ce">; [19]:</span></span>
<span class="l"><a class="anc" name="8110" href="#8110">[8110]</a><span class="cd"><span class="i">db</span> <span class="o">$3d</span></span><span class="ce">; [20]:</span></span>
<span class="l"><a class="anc" name="8111" href="#8111">[8111]</a><span class="cd"><span class="i">db</span> <span class="o">$40</span></span><span class="ce">; [21]:</span></span>
<span class="l"><a class="anc" name="8112" href="#8112">[8112]</a><span class="cd"><span class="i">db</span> <span class="o">$41</span></span><span class="ce">; [22]:</span></span>
<span class="l"><a class="anc" name="8113" href="#8113">[8113]</a><span class="cd"><span class="i">db</span> <span class="o">$50</span></span><span class="ce">; [23]:</span></span>
<span class="l"><a class="anc" name="8114" href="#8114">[8114]</a><span class="cd"><span class="i">db</span> <span class="o">$51</span></span><span class="ce">; [24]:</span></span>
<span class="l"><a class="anc" name="8115" href="#8115">[8115]</a><span class="cd"><span class="i">db</span> <span class="o">$60</span></span><span class="ce">; [25]:</span></span>
<span class="l"><a class="anc" name="8116" href="#8116">[8116]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [26]:</span></span>
<span class="l"><a class="anc" name="8117" href="#8117">[8117]</a><span class="cd"><span class="i">db</span> <span class="o">$cb</span></span><span class="ce">; [27]:</span></span>
<span class="l"><a class="anc" name="8118" href="#8118">[8118]</a><span class="cd"><span class="i">db</span> <span class="o">$cb</span></span><span class="ce">; [0]:</span></span>
<span class="l"><a class="anc" name="8119" href="#8119">[8119]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [1]:</span></span>
<span class="l"><a class="anc" name="811a" href="#811a">[811a]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [2]:</span></span>
<span class="l"><a class="anc" name="811b" href="#811b">[811b]</a><span class="cd"><span class="i">db</span> <span class="o">$72</span></span><span class="ce">; [3]:</span></span>
<span class="l"><a class="anc" name="811c" href="#811c">[811c]</a><span class="cd"><span class="i">db</span> <span class="o">$73</span></span><span class="ce">; [4]:</span></span>
<span class="l"><a class="anc" name="811d" href="#811d">[811d]</a><span class="cd"><span class="i">db</span> <span class="o">$74</span></span><span class="ce">; [5]:</span></span>
<span class="l"><a class="anc" name="811e" href="#811e">[811e]</a><span class="cd"><span class="i">db</span> <span class="o">$75</span></span><span class="ce">; [6]:</span></span>
<span class="l"><a class="anc" name="811f" href="#811f">[811f]</a><span class="cd"><span class="i">db</span> <span class="o">$76</span></span><span class="ce">; [7]:</span></span>
<span class="l"><a class="anc" name="8120" href="#8120">[8120]</a><span class="cd"><span class="i">db</span> <span class="o">$77</span></span><span class="ce">; [8]:</span></span>
<span class="l"><a class="anc" name="8121" href="#8121">[8121]</a><span class="cd"><span class="i">db</span> <span class="o">$78</span></span><span class="ce">; [9]:</span></span>
<span class="l"><a class="anc" name="8122" href="#8122">[8122]</a><span class="cd"><span class="i">db</span> <span class="o">$79</span></span><span class="ce">; [10]:</span></span>
<span class="l"><a class="anc" name="8123" href="#8123">[8123]</a><span class="cd"><span class="i">db</span> <span class="o">$7a</span></span><span class="ce">; [11]:</span></span>
<span class="l"><a class="anc" name="8124" href="#8124">[8124]</a><span class="cd"><span class="i">db</span> <span class="o">$7b</span></span><span class="ce">; [12]:</span></span>
<span class="l"><a class="anc" name="8125" href="#8125">[8125]</a><span class="cd"><span class="i">db</span> <span class="o">$7c</span></span><span class="ce">; [13]:</span></span>
<span class="l"><a class="anc" name="8126" href="#8126">[8126]</a><span class="cd"><span class="i">db</span> <span class="o">$7d</span></span><span class="ce">; [14]:</span></span>
<span class="l"><a class="anc" name="8127" href="#8127">[8127]</a><span class="cd"><span class="i">db</span> <span class="o">$7e</span></span><span class="ce">; [15]:</span></span>
<span class="l"><a class="anc" name="8128" href="#8128">[8128]</a><span class="cd"><span class="i">db</span> <span class="o">$7f</span></span><span class="ce">; [16]:</span></span>
<span class="l"><a class="anc" name="8129" href="#8129">[8129]</a><span class="cd"><span class="i">db</span> <span class="o">$61</span></span><span class="ce">; [17]:</span></span>
<span class="l"><a class="anc" name="812a" href="#812a">[812a]</a><span class="cd"><span class="i">db</span> <span class="o">$70</span></span><span class="ce">; [18]:</span></span>
<span class="l"><a class="anc" name="812b" href="#812b">[812b]</a><span class="cd"><span class="i">db</span> <span class="o">$71</span></span><span class="ce">; [19]:</span></span>
<span class="l"><a class="anc" name="812c" href="#812c">[812c]</a><span class="cd"><span class="i">db</span> <span class="o">$80</span></span><span class="ce">; [20]:</span></span>
<span class="l"><a class="anc" name="812d" href="#812d">[812d]</a><span class="cd"><span class="i">db</span> <span class="o">$90</span></span><span class="ce">; [21]:</span></span>
<span class="l"><a class="anc" name="812e" href="#812e">[812e]</a><span class="cd"><span class="i">db</span> <span class="o">$91</span></span><span class="ce">; [22]:</span></span>
<span class="l"><a class="anc" name="812f" href="#812f">[812f]</a><span class="cd"><span class="i">db</span> <span class="o">$92</span></span><span class="ce">; [23]:</span></span>
<span class="l"><a class="anc" name="8130" href="#8130">[8130]</a><span class="cd"><span class="i">db</span> <span class="o">$93</span></span><span class="ce">; [24]:</span></span>
<span class="l"><a class="anc" name="8131" href="#8131">[8131]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [25]:</span></span>
<span class="l"><a class="anc" name="8132" href="#8132">[8132]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [26]:</span></span>
<span class="l"><a class="anc" name="8133" href="#8133">[8133]</a><span class="cd"><span class="i">db</span> <span class="o">$cb</span></span><span class="ce">; [27]:</span></span>
<span class="l"><a class="anc" name="8134" href="#8134">[8134]</a><span class="cd"><span class="i">db</span> <span class="o">$cb</span></span><span class="ce">; [0]:</span></span>
<span class="l"><a class="anc" name="8135" href="#8135">[8135]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [1]:</span></span>
<span class="l"><a class="anc" name="8136" href="#8136">[8136]</a><span class="cd"><span class="i">db</span> <span class="o">$81</span></span><span class="ce">; [2]:</span></span>
<span class="l"><a class="anc" name="8137" href="#8137">[8137]</a><span class="cd"><span class="i">db</span> <span class="o">$82</span></span><span class="ce">; [3]:</span></span>
<span class="l"><a class="anc" name="8138" href="#8138">[8138]</a><span class="cd"><span class="i">db</span> <span class="o">$83</span></span><span class="ce">; [4]:</span></span>
<span class="l"><a class="anc" name="8139" href="#8139">[8139]</a><span class="cd"><span class="i">db</span> <span class="o">$84</span></span><span class="ce">; [5]:</span></span>
<span class="l"><a class="anc" name="813a" href="#813a">[813a]</a><span class="cd"><span class="i">db</span> <span class="o">$85</span></span><span class="ce">; [6]:</span></span>
<span class="l"><a class="anc" name="813b" href="#813b">[813b]</a><span class="cd"><span class="i">db</span> <span class="o">$86</span></span><span class="ce">; [7]:</span></span>
<span class="l"><a class="anc" name="813c" href="#813c">[813c]</a><span class="cd"><span class="i">db</span> <span class="o">$83</span></span><span class="ce">; [8]:</span></span>
<span class="l"><a class="anc" name="813d" href="#813d">[813d]</a><span class="cd"><span class="i">db</span> <span class="o">$88</span></span><span class="ce">; [9]:</span></span>
<span class="l"><a class="anc" name="813e" href="#813e">[813e]</a><span class="cd"><span class="i">db</span> <span class="o">$89</span></span><span class="ce">; [10]:</span></span>
<span class="l"><a class="anc" name="813f" href="#813f">[813f]</a><span class="cd"><span class="i">db</span> <span class="o">$83</span></span><span class="ce">; [11]:</span></span>
<span class="l"><a class="anc" name="8140" href="#8140">[8140]</a><span class="cd"><span class="i">db</span> <span class="o">$8b</span></span><span class="ce">; [12]:</span></span>
<span class="l"><a class="anc" name="8141" href="#8141">[8141]</a><span class="cd"><span class="i">db</span> <span class="o">$8c</span></span><span class="ce">; [13]:</span></span>
<span class="l"><a class="anc" name="8142" href="#8142">[8142]</a><span class="cd"><span class="i">db</span> <span class="o">$8d</span></span><span class="ce">; [14]:</span></span>
<span class="l"><a class="anc" name="8143" href="#8143">[8143]</a><span class="cd"><span class="i">db</span> <span class="o">$8e</span></span><span class="ce">; [15]:</span></span>
<span class="l"><a class="anc" name="8144" href="#8144">[8144]</a><span class="cd"><span class="i">db</span> <span class="o">$8f</span></span><span class="ce">; [16]:</span></span>
<span class="l"><a class="anc" name="8145" href="#8145">[8145]</a><span class="cd"><span class="i">db</span> <span class="o">$94</span></span><span class="ce">; [17]:</span></span>
<span class="l"><a class="anc" name="8146" href="#8146">[8146]</a><span class="cd"><span class="i">db</span> <span class="o">$95</span></span><span class="ce">; [18]:</span></span>
<span class="l"><a class="anc" name="8147" href="#8147">[8147]</a><span class="cd"><span class="i">db</span> <span class="o">$96</span></span><span class="ce">; [19]:</span></span>
<span class="l"><a class="anc" name="8148" href="#8148">[8148]</a><span class="cd"><span class="i">db</span> <span class="o">$97</span></span><span class="ce">; [20]:</span></span>
<span class="l"><a class="anc" name="8149" href="#8149">[8149]</a><span class="cd"><span class="i">db</span> <span class="o">$98</span></span><span class="ce">; [21]:</span></span>
<span class="l"><a class="anc" name="814a" href="#814a">[814a]</a><span class="cd"><span class="i">db</span> <span class="o">$83</span></span><span class="ce">; [22]:</span></span>
<span class="l"><a class="anc" name="814b" href="#814b">[814b]</a><span class="cd"><span class="i">db</span> <span class="o">$9a</span></span><span class="ce">; [23]:</span></span>
<span class="l"><a class="anc" name="814c" href="#814c">[814c]</a><span class="cd"><span class="i">db</span> <span class="o">$9b</span></span><span class="ce">; [24]:</span></span>
<span class="l"><a class="anc" name="814d" href="#814d">[814d]</a><span class="cd"><span class="i">db</span> <span class="o">$f3</span></span><span class="ce">; [25]:</span></span>
<span class="l"><a class="anc" name="814e" href="#814e">[814e]</a><span class="cd"><span class="i">db</span> <span class="o">$ec</span></span><span class="ce">; [26]:</span></span>
<span class="l"><a class="anc" name="814f" href="#814f">[814f]</a><span class="cd"><span class="i">db</span> <span class="o">$cb</span></span><span class="ce">; [27]:</span></span>
<span class="l"><a class="anc" name="8150" href="#8150">[8150]</a><span class="cd"><span class="i">db</span> <span class="o">$cb</span></span><span class="ce">; [0]:</span></span>
<span class="l"><a class="anc" name="8151" href="#8151">[8151]</a><span class="cd"><span class="i">db</span> <span class="o">$bc</span></span><span class="ce">; [1]:</span></span>
<span class="l"><a class="anc" name="8152" href="#8152">[8152]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [2]:</span></span>
<span class="l"><a class="anc" name="8153" href="#8153">[8153]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [3]:</span></span>
<span class="l"><a class="anc" name="8154" href="#8154">[8154]</a><span class="cd"><span class="i">db</span> <span class="o">$bc</span></span><span class="ce">; [4]:</span></span>
<span class="l"><a class="anc" name="8155" href="#8155">[8155]</a><span class="cd"><span class="i">db</span> <span class="o">$bc</span></span><span class="ce">; [5]:</span></span>
<span class="l"><a class="anc" name="8156" href="#8156">[8156]</a><span class="cd"><span class="i">db</span> <span class="o">$bc</span></span><span class="ce">; [6]:</span></span>
<span class="l"><a class="anc" name="8157" href="#8157">[8157]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [7]:</span></span>
<span class="l"><a class="anc" name="8158" href="#8158">[8158]</a><span class="cd"><span class="i">db</span> <span class="o">$c1</span></span><span class="ce">; [8]:</span></span>
<span class="l"><a class="anc" name="8159" href="#8159">[8159]</a><span class="cd"><span class="i">db</span> <span class="o">$d3</span></span><span class="ce">; [9]:</span></span>
<span class="l"><a class="anc" name="815a" href="#815a">[815a]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [10]:</span></span>
<span class="l"><a class="anc" name="815b" href="#815b">[815b]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [11]:</span></span>
<span class="l"><a class="anc" name="815c" href="#815c">[815c]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [12]:</span></span>
<span class="l"><a class="anc" name="815d" href="#815d">[815d]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [13]:</span></span>
<span class="l"><a class="anc" name="815e" href="#815e">[815e]</a><span class="cd"><span class="i">db</span> <span class="o">$c4</span></span><span class="ce">; [14]:</span></span>
<span class="l"><a class="anc" name="815f" href="#815f">[815f]</a><span class="cd"><span class="i">db</span> <span class="o">$c5</span></span><span class="ce">; [15]:</span></span>
<span class="l"><a class="anc" name="8160" href="#8160">[8160]</a><span class="cd"><span class="i">db</span> <span class="o">$b3</span></span><span class="ce">; [16]:</span></span>
<span class="l"><a class="anc" name="8161" href="#8161">[8161]</a><span class="cd"><span class="i">db</span> <span class="o">$b4</span></span><span class="ce">; [17]:</span></span>
<span class="l"><a class="anc" name="8162" href="#8162">[8162]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [18]:</span></span>
<span class="l"><a class="anc" name="8163" href="#8163">[8163]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [19]:</span></span>
<span class="l"><a class="anc" name="8164" href="#8164">[8164]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [20]:</span></span>
<span class="l"><a class="anc" name="8165" href="#8165">[8165]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [21]:</span></span>
<span class="l"><a class="anc" name="8166" href="#8166">[8166]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [22]:</span></span>
<span class="l"><a class="anc" name="8167" href="#8167">[8167]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [23]:</span></span>
<span class="l"><a class="anc" name="8168" href="#8168">[8168]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [24]:</span></span>
<span class="l"><a class="anc" name="8169" href="#8169">[8169]</a><span class="cd"><span class="i">db</span> <span class="o">$bc</span></span><span class="ce">; [25]:</span></span>
<span class="l"><a class="anc" name="816a" href="#816a">[816a]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [26]:</span></span>
<span class="l"><a class="anc" name="816b" href="#816b">[816b]</a><span class="cd"><span class="i">db</span> <span class="o">$cb</span></span><span class="ce">; [27]:</span></span>
<span class="l"><a class="anc" name="816c" href="#816c">[816c]</a><span class="cd"><span class="i">db</span> <span class="o">$cb</span></span><span class="ce">; [0]:</span></span>
<span class="l"><a class="anc" name="816d" href="#816d">[816d]</a><span class="cd"><span class="i">db</span> <span class="o">$bb</span></span><span class="ce">; [1]:</span></span>
<span class="l"><a class="anc" name="816e" href="#816e">[816e]</a><span class="cd"><span class="i">db</span> <span class="o">$d3</span></span><span class="ce">; [2]:</span></span>
<span class="l"><a class="anc" name="816f" href="#816f">[816f]</a><span class="cd"><span class="i">db</span> <span class="o">$d3</span></span><span class="ce">; [3]:</span></span>
<span class="l"><a class="anc" name="8170" href="#8170">[8170]</a><span class="cd"><span class="i">db</span> <span class="o">$c6</span></span><span class="ce">; [4]:</span></span>
<span class="l"><a class="anc" name="8171" href="#8171">[8171]</a><span class="cd"><span class="i">db</span> <span class="o">$c7</span></span><span class="ce">; [5]:</span></span>
<span class="l"><a class="anc" name="8172" href="#8172">[8172]</a><span class="cd"><span class="i">db</span> <span class="o">$cf</span></span><span class="ce">; [6]:</span></span>
<span class="l"><a class="anc" name="8173" href="#8173">[8173]</a><span class="cd"><span class="i">db</span> <span class="o">$d0</span></span><span class="ce">; [7]:</span></span>
<span class="l"><a class="anc" name="8174" href="#8174">[8174]</a><span class="cd"><span class="i">db</span> <span class="o">$d1</span></span><span class="ce">; [8]:</span></span>
<span class="l"><a class="anc" name="8175" href="#8175">[8175]</a><span class="cd"><span class="i">db</span> <span class="o">$b7</span></span><span class="ce">; [9]:</span></span>
<span class="l"><a class="anc" name="8176" href="#8176">[8176]</a><span class="cd"><span class="i">db</span> <span class="o">$b8</span></span><span class="ce">; [10]:</span></span>
<span class="l"><a class="anc" name="8177" href="#8177">[8177]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [11]:</span></span>
<span class="l"><a class="anc" name="8178" href="#8178">[8178]</a><span class="cd"><span class="i">db</span> <span class="o">$c8</span></span><span class="ce">; [12]:</span></span>
<span class="l"><a class="anc" name="8179" href="#8179">[8179]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [13]:</span></span>
<span class="l"><a class="anc" name="817a" href="#817a">[817a]</a><span class="cd"><span class="i">db</span> <span class="o">$d4</span></span><span class="ce">; [14]:</span></span>
<span class="l"><a class="anc" name="817b" href="#817b">[817b]</a><span class="cd"><span class="i">db</span> <span class="o">$b1</span></span><span class="ce">; [15]:</span></span>
<span class="l"><a class="anc" name="817c" href="#817c">[817c]</a><span class="cd"><span class="i">db</span> <span class="o">$b3</span></span><span class="ce">; [16]:</span></span>
<span class="l"><a class="anc" name="817d" href="#817d">[817d]</a><span class="cd"><span class="i">db</span> <span class="o">$b4</span></span><span class="ce">; [17]:</span></span>
<span class="l"><a class="anc" name="817e" href="#817e">[817e]</a><span class="cd"><span class="i">db</span> <span class="o">$c8</span></span><span class="ce">; [18]:</span></span>
<span class="l"><a class="anc" name="817f" href="#817f">[817f]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [19]:</span></span>
<span class="l"><a class="anc" name="8180" href="#8180">[8180]</a><span class="cd"><span class="i">db</span> <span class="o">$c1</span></span><span class="ce">; [20]:</span></span>
<span class="l"><a class="anc" name="8181" href="#8181">[8181]</a><span class="cd"><span class="i">db</span> <span class="o">$d3</span></span><span class="ce">; [21]:</span></span>
<span class="l"><a class="anc" name="8182" href="#8182">[8182]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [22]:</span></span>
<span class="l"><a class="anc" name="8183" href="#8183">[8183]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [23]:</span></span>
<span class="l"><a class="anc" name="8184" href="#8184">[8184]</a><span class="cd"><span class="i">db</span> <span class="o">$d2</span></span><span class="ce">; [24]:</span></span>
<span class="l"><a class="anc" name="8185" href="#8185">[8185]</a><span class="cd"><span class="i">db</span> <span class="o">$d3</span></span><span class="ce">; [25]:</span></span>
<span class="l"><a class="anc" name="8186" href="#8186">[8186]</a><span class="cd"><span class="i">db</span> <span class="o">$c6</span></span><span class="ce">; [26]:</span></span>
<span class="l"><a class="anc" name="8187" href="#8187">[8187]</a><span class="cd"><span class="i">db</span> <span class="o">$cb</span></span><span class="ce">; [27]:</span></span>
<span class="l"><a class="anc" name="8188" href="#8188">[8188]</a><span class="cd"><span class="i">db</span> <span class="o">$cd</span></span><span class="ce">; [0]:</span></span>
<span class="l"><a class="anc" name="8189" href="#8189">[8189]</a><span class="cd"><span class="i">db</span> <span class="o">$bf</span></span><span class="ce">; [1]:</span></span>
<span class="l"><a class="anc" name="818a" href="#818a">[818a]</a><span class="cd"><span class="i">db</span> <span class="o">$bf</span></span><span class="ce">; [2]:</span></span>
<span class="l"><a class="anc" name="818b" href="#818b">[818b]</a><span class="cd"><span class="i">db</span> <span class="o">$bf</span></span><span class="ce">; [3]:</span></span>
<span class="l"><a class="anc" name="818c" href="#818c">[818c]</a><span class="cd"><span class="i">db</span> <span class="o">$cf</span></span><span class="ce">; [4]:</span></span>
<span class="l"><a class="anc" name="818d" href="#818d">[818d]</a><span class="cd"><span class="i">db</span> <span class="o">$af</span></span><span class="ce">; [5]:</span></span>
<span class="l"><a class="anc" name="818e" href="#818e">[818e]</a><span class="cd"><span class="i">db</span> <span class="o">$bf</span></span><span class="ce">; [6]:</span></span>
<span class="l"><a class="anc" name="818f" href="#818f">[818f]</a><span class="cd"><span class="i">db</span> <span class="o">$b0</span></span><span class="ce">; [7]:</span></span>
<span class="l"><a class="anc" name="8190" href="#8190">[8190]</a><span class="cd"><span class="i">db</span> <span class="o">$b0</span></span><span class="ce">; [8]:</span></span>
<span class="l"><a class="anc" name="8191" href="#8191">[8191]</a><span class="cd"><span class="i">db</span> <span class="o">$af</span></span><span class="ce">; [9]:</span></span>
<span class="l"><a class="anc" name="8192" href="#8192">[8192]</a><span class="cd"><span class="i">db</span> <span class="o">$bf</span></span><span class="ce">; [10]:</span></span>
<span class="l"><a class="anc" name="8193" href="#8193">[8193]</a><span class="cd"><span class="i">db</span> <span class="o">$cf</span></span><span class="ce">; [11]:</span></span>
<span class="l"><a class="anc" name="8194" href="#8194">[8194]</a><span class="cd"><span class="i">db</span> <span class="o">$c6</span></span><span class="ce">; [12]:</span></span>
<span class="l"><a class="anc" name="8195" href="#8195">[8195]</a><span class="cd"><span class="i">db</span> <span class="o">$c7</span></span><span class="ce">; [13]:</span></span>
<span class="l"><a class="anc" name="8196" href="#8196">[8196]</a><span class="cd"><span class="i">db</span> <span class="o">$99</span></span><span class="ce">; [14]:</span></span>
<span class="l"><a class="anc" name="8197" href="#8197">[8197]</a><span class="cd"><span class="i">db</span> <span class="o">$8a</span></span><span class="ce">; [15]:</span></span>
<span class="l"><a class="anc" name="8198" href="#8198">[8198]</a><span class="cd"><span class="i">db</span> <span class="o">$87</span></span><span class="ce">; [16]:</span></span>
<span class="l"><a class="anc" name="8199" href="#8199">[8199]</a><span class="cd"><span class="i">db</span> <span class="o">$c3</span></span><span class="ce">; [17]:</span></span>
<span class="l"><a class="anc" name="819a" href="#819a">[819a]</a><span class="cd"><span class="i">db</span> <span class="o">$bb</span></span><span class="ce">; [18]:</span></span>
<span class="l"><a class="anc" name="819b" href="#819b">[819b]</a><span class="cd"><span class="i">db</span> <span class="o">$d0</span></span><span class="ce">; [19]:</span></span>
<span class="l"><a class="anc" name="819c" href="#819c">[819c]</a><span class="cd"><span class="i">db</span> <span class="o">$d1</span></span><span class="ce">; [20]:</span></span>
<span class="l"><a class="anc" name="819d" href="#819d">[819d]</a><span class="cd"><span class="i">db</span> <span class="o">$b7</span></span><span class="ce">; [21]:</span></span>
<span class="l"><a class="anc" name="819e" href="#819e">[819e]</a><span class="cd"><span class="i">db</span> <span class="o">$b8</span></span><span class="ce">; [22]:</span></span>
<span class="l"><a class="anc" name="819f" href="#819f">[819f]</a><span class="cd"><span class="i">db</span> <span class="o">$c0</span></span><span class="ce">; [23]:</span></span>
<span class="l"><a class="anc" name="81a0" href="#81a0">[81a0]</a><span class="cd"><span class="i">db</span> <span class="o">$bf</span></span><span class="ce">; [24]:</span></span>
<span class="l"><a class="anc" name="81a1" href="#81a1">[81a1]</a><span class="cd"><span class="i">db</span> <span class="o">$bf</span></span><span class="ce">; [25]:</span></span>
<span class="l"><a class="anc" name="81a2" href="#81a2">[81a2]</a><span class="cd"><span class="i">db</span> <span class="o">$bf</span></span><span class="ce">; [26]:</span></span>
<span class="l"><a class="anc" name="81a3" href="#81a3">[81a3]</a><span class="cd"><span class="i">db</span> <span class="o">$ce</span></span><span class="ce">; [27]:</span></span>
<span class="l"><a class="anc" name="81a4" href="#81a4">[81a4]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [0]:</span></span>
<span class="l"><a class="anc" name="81a5" href="#81a5">[81a5]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [1]:</span></span>
<span class="l"><a class="anc" name="81a6" href="#81a6">[81a6]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [2]:</span></span>
<span class="l"><a class="anc" name="81a7" href="#81a7">[81a7]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [3]:</span></span>
<span class="l"><a class="anc" name="81a8" href="#81a8">[81a8]</a><span class="cd"><span class="i">db</span> <span class="o">$cd</span></span><span class="ce">; [4]:</span></span>
<span class="l"><a class="anc" name="81a9" href="#81a9">[81a9]</a><span class="cd"><span class="i">db</span> <span class="o">$bf</span></span><span class="ce">; [5]:</span></span>
<span class="l"><a class="anc" name="81aa" href="#81aa">[81aa]</a><span class="cd"><span class="i">db</span> <span class="o">$bf</span></span><span class="ce">; [6]:</span></span>
<span class="l"><a class="anc" name="81ab" href="#81ab">[81ab]</a><span class="cd"><span class="i">db</span> <span class="o">$bf</span></span><span class="ce">; [7]:</span></span>
<span class="l"><a class="anc" name="81ac" href="#81ac">[81ac]</a><span class="cd"><span class="i">db</span> <span class="o">$bf</span></span><span class="ce">; [8]:</span></span>
<span class="l"><a class="anc" name="81ad" href="#81ad">[81ad]</a><span class="cd"><span class="i">db</span> <span class="o">$bf</span></span><span class="ce">; [9]:</span></span>
<span class="l"><a class="anc" name="81ae" href="#81ae">[81ae]</a><span class="cd"><span class="i">db</span> <span class="o">$bf</span></span><span class="ce">; [10]:</span></span>
<span class="l"><a class="anc" name="81af" href="#81af">[81af]</a><span class="cd"><span class="i">db</span> <span class="o">$bd</span></span><span class="ce">; [11]:</span></span>
<span class="l"><a class="anc" name="81b0" href="#81b0">[81b0]</a><span class="cd"><span class="i">db</span> <span class="o">$af</span></span><span class="ce">; [12]:</span></span>
<span class="l"><a class="anc" name="81b1" href="#81b1">[81b1]</a><span class="cd"><span class="i">db</span> <span class="o">$b2</span></span><span class="ce">; [13]:</span></span>
<span class="l"><a class="anc" name="81b2" href="#81b2">[81b2]</a><span class="cd"><span class="i">db</span> <span class="o">$b2</span></span><span class="ce">; [14]:</span></span>
<span class="l"><a class="anc" name="81b3" href="#81b3">[81b3]</a><span class="cd"><span class="i">db</span> <span class="o">$b0</span></span><span class="ce">; [15]:</span></span>
<span class="l"><a class="anc" name="81b4" href="#81b4">[81b4]</a><span class="cd"><span class="i">db</span> <span class="o">$bd</span></span><span class="ce">; [16]:</span></span>
<span class="l"><a class="anc" name="81b5" href="#81b5">[81b5]</a><span class="cd"><span class="i">db</span> <span class="o">$af</span></span><span class="ce">; [17]:</span></span>
<span class="l"><a class="anc" name="81b6" href="#81b6">[81b6]</a><span class="cd"><span class="i">db</span> <span class="o">$bf</span></span><span class="ce">; [18]:</span></span>
<span class="l"><a class="anc" name="81b7" href="#81b7">[81b7]</a><span class="cd"><span class="i">db</span> <span class="o">$b0</span></span><span class="ce">; [19]:</span></span>
<span class="l"><a class="anc" name="81b8" href="#81b8">[81b8]</a><span class="cd"><span class="i">db</span> <span class="o">$bf</span></span><span class="ce">; [20]:</span></span>
<span class="l"><a class="anc" name="81b9" href="#81b9">[81b9]</a><span class="cd"><span class="i">db</span> <span class="o">$af</span></span><span class="ce">; [21]:</span></span>
<span class="l"><a class="anc" name="81ba" href="#81ba">[81ba]</a><span class="cd"><span class="i">db</span> <span class="o">$bf</span></span><span class="ce">; [22]:</span></span>
<span class="l"><a class="anc" name="81bb" href="#81bb">[81bb]</a><span class="cd"><span class="i">db</span> <span class="o">$ce</span></span><span class="ce">; [23]:</span></span>
<span class="l"><a class="anc" name="81bc" href="#81bc">[81bc]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [24]:</span></span>
<span class="l"><a class="anc" name="81bd" href="#81bd">[81bd]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [25]:</span></span>
<span class="l"><a class="anc" name="81be" href="#81be">[81be]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [26]:</span></span>
<span class="l"><a class="anc" name="81bf" href="#81bf">[81bf]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [27]:</span></span>
<span class="l"></span>
<span class="l"></span>
</pre><pre><a name="TextBox_SetCoordsForNPC"></a><div class="cp">;============================================================================
; Set the textbox coordinates and dimensions for an NPC.
;
; The textbox will always be set at:
;
;     X = 10
;     Width = 20
;     Height = 8
;
; If there's a portrait, or the player is high up on the screen:
;
;     Y = 16
;
; Otherwise, if the player is on the ground:
;
;     Y = 6
;
; INPUTS:
;     <a href="RAM.html#Player_PosY">Player_PosY</a>:
;         The Y position for the player.
;
;     <a href="RAM.html#Temp_0201">Temp_0201</a>:
;         The loaded IScript portrait ID.
;
; OUTPUTS:
;     <a href="RAM.html#TextBox_X">TextBox_X</a>:
;         The new X position of the textbox.
;
;     <a href="RAM.html#TextBox_Y">TextBox_Y</a>:
;         The new Y position of the textbox.
;
;     <a href="RAM.html#TextBox_Width">TextBox_Width</a>:
;         The new width of the textbox.
;
;     <a href="RAM.html#TextBox_Height">TextBox_Height</a>:
;         The new height of the textbox.
;
; XREFS:
;     <a href="#IScripts_CloseCurrentTextBox">IScripts_CloseCurrentTextBox</a>
;     <a href="#TextBox_OpenForNPC">TextBox_OpenForNPC</a>
;============================================================================
</div><span class="l"><a class="anc" name="81c0" href="#81c0">[81c0]</a><a href="#TextBox_SetCoordsForNPC" class="la">TextBox_SetCoordsForNPC:</a><span class="ce">; [$81c0]</span></span>
<span class="l"><a class="anc" name="81c0" href="#81c0">[81c0]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$0a</span></span></span>
<span class="l"><a class="anc" name="81c2" href="#81c2">[81c2]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#TextBox_X">TextBox_X</a></span></span><span class="ce">; Textbox X = 10</span></span>
<span class="l"><a class="anc" name="81c5" href="#81c5">[81c5]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$14</span></span></span>
<span class="l"><a class="anc" name="81c7" href="#81c7">[81c7]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#TextBox_Width">TextBox_Width</a></span></span><span class="ce">; Textbox width = 20</span></span>
<span class="l"><a class="anc" name="81ca" href="#81ca">[81ca]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$08</span></span></span>
<span class="l"><a class="anc" name="81cc" href="#81cc">[81cc]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#TextBox_Height">TextBox_Height</a></span></span><span class="ce">; Textbox height = 8</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Check if there's a portrait shown.
;
</div><span class="l"><a class="anc" name="81cf" href="#81cf">[81cf]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#Temp_0201">Temp_0201</a></span></span><span class="ce">; Load the portrait ID from the IScript.</span></span>
<span class="l"><a class="anc" name="81d2" href="#81d2">[81d2]</a><span class="cd"><span class="i">BMI</span> <span class="o"><a href="#@_hasPortrait">@_hasPortrait</a></span></span><span class="ce">; If set, jump.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; There's no portrait. Set it based on the player's Y position.
;
; If the player is around the ground area, set it at Y = 6.
;
; If the player is higher up on the screen, move it downward to
; Y = 16 (same as the portrait).
;
</div><span class="l"><a class="anc" name="81d4" href="#81d4">[81d4]</a><span class="cd"><span class="i">LDY</span> <span class="o">#$06</span></span><span class="ce">; Textbox Y = 6</span></span>
<span class="l"><a class="anc" name="81d6" href="#81d6">[81d6]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="RAM.html#Player_PosY">Player_PosY</a></span></span><span class="ce">; Check the player's Y position.</span></span>
<span class="l"><a class="anc" name="81d8" href="#81d8">[81d8]</a><span class="cd"><span class="i">CMP</span> <span class="o">#$40</span></span><span class="ce">; Is it &gt;= 64?</span></span>
<span class="l"><a class="anc" name="81da" href="#81da">[81da]</a><span class="cd"><span class="i">BCS</span> <span class="o"><a href="#@_setYAndReturn">@_setYAndReturn</a></span></span><span class="ce">; If so, jump to return.</span></span>
<span class="l"></span>
<a name=":81dc:@_hasPortrait"></a><span class="l"><a class="anc" name="81dc" href="#81dc">[81dc]</a><a href="#:81dc:@_hasPortrait" class="lla">@_hasPortrait:</a><span class="ce">; [$81dc]</span></span>
<span class="l"><a class="anc" name="81dc" href="#81dc">[81dc]</a><span class="cd"><span class="i">LDY</span> <span class="o">#$10</span></span><span class="ce">; Textbox Y = 16</span></span>
<span class="l"></span>
<a name=":81de:@_setYAndReturn"></a><span class="l"><a class="anc" name="81de" href="#81de">[81de]</a><a href="#:81de:@_setYAndReturn" class="lla">@_setYAndReturn:</a><span class="ce">; [$81de]</span></span>
<span class="l"><a class="anc" name="81de" href="#81de">[81de]</a><span class="cd"><span class="i">STY</span> <span class="o">a:<a href="RAM.html#TextBox_Y">TextBox_Y</a></span></span><span class="ce">; Set the textbox Y position.</span></span>
<span class="l"><a class="anc" name="81e1" href="#81e1">[81e1]</a><span class="cd"><span class="i">RTS</span></span></span>
<span class="l"></span>
<span class="l"></span>
</pre><pre><a name="TextBox_OpenForNPC"></a><div class="cp">;============================================================================
; Open a textbox for NPC dialogue.
;
; This positions the textbox and fills it with temporary
; placeholder text in preparation for drawing the NPC's
; message text.
;
; INPUTS:
;     See falls through.
;
; OUTPUTS:
;     See falls through.
;
; CALLS:
;     <a href="#TextBox_SetCoordsForNPC">TextBox_SetCoordsForNPC</a>
;     <a href="#TextBox_Open">TextBox_Open</a>
;
; FALLS THROUGH:
;     <a href="#IScripts_PositionAndFillPlaceholderText">IScripts_PositionAndFillPlaceholderText</a>
;
; XREFS:
;     <a href="#IScriptAction_ShowSellMenu">IScriptAction_ShowSellMenu</a>
;     <a href="#IScripts_Begin">IScripts_Begin</a>
;     <a href="#Maybe_Shop_DrawTextBox">Maybe_Shop_DrawTextBox</a>
;============================================================================
</div><span class="l"><a class="anc" name="81e2" href="#81e2">[81e2]</a><a href="#TextBox_OpenForNPC" class="la">TextBox_OpenForNPC:</a><span class="ce">; [$81e2]</span></span>
<span class="l"><a class="anc" name="81e2" href="#81e2">[81e2]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#TextBox_SetCoordsForNPC">TextBox_SetCoordsForNPC</a></span></span><span class="ce">; Set textbox coordinates for an NPC dialogue.</span></span>
<span class="l"><a class="anc" name="81e5" href="#81e5">[81e5]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#TextBox_Open">TextBox_Open</a></span></span><span class="ce">; Open the textbox.</span></span>
<span class="l"></span>
<div class="c">;
; v-- Fall through --v
;
</div><span class="l"></span>
<span class="l"></span>
</pre><pre><a name="IScripts_PositionAndFillPlaceholderText"></a><div class="cp">;============================================================================
; Position the text X/Y position in a textbox and fill with placeholder text.
;
; This is done in preparation for clearing out a textbox and
; removing it from the screen.
;
; INPUTS:
;     <a href="RAM.html#TextBox_X">TextBox_X</a>:
;         The textbox X position.
;
;     <a href="RAM.html#TextBox_Y">TextBox_Y</a>:
;         The textbox Y position.
;
; OUTPUTS:
;     <a href="RAM.html#TextBox_ContentsX">TextBox_ContentsX</a>:
;         The text X position.
;
;     <a href="RAM.html#TextBox_ContentsY">TextBox_ContentsY</a>:
;         The text Y position.
;
; CALLS:
;     <a href="#IScripts_FillPlaceholderText">IScripts_FillPlaceholderText</a>
;
; XREFS:
;     <a href="#IScriptAction_AddInventoryItem">IScriptAction_AddInventoryItem</a>
;     <a href="#IScriptAction_ShowQuestionMessage">IScriptAction_ShowQuestionMessage</a>
;============================================================================
</div><span class="l"><a class="anc" name="81e8" href="#81e8">[81e8]</a><a href="#IScripts_PositionAndFillPlaceholderText" class="la">IScripts_PositionAndFillPlaceholderText:</a><span class="ce">; [$81e8]</span></span>
<div class="c">;
; Set the X position for text within the textbox.
;
</div><span class="l"><a class="anc" name="81e8" href="#81e8">[81e8]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#TextBox_X">TextBox_X</a></span></span><span class="ce">; Load the textbox X.</span></span>
<span class="l"><a class="anc" name="81eb" href="#81eb">[81eb]</a><span class="cd"><span class="i">CLC</span></span></span>
<span class="l"><a class="anc" name="81ec" href="#81ec">[81ec]</a><span class="cd"><span class="i">ADC</span> <span class="o">#$02</span></span><span class="ce">; Add 2.</span></span>
<span class="l"><a class="anc" name="81ee" href="#81ee">[81ee]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#TextBox_ContentsX">TextBox_ContentsX</a></span></span><span class="ce">; Set as the text draw X position.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Set the Y position for text within the textbox.
;
</div><span class="l"><a class="anc" name="81f0" href="#81f0">[81f0]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#TextBox_Y">TextBox_Y</a></span></span><span class="ce">; Load the textbox Y.</span></span>
<span class="l"><a class="anc" name="81f3" href="#81f3">[81f3]</a><span class="cd"><span class="i">CLC</span></span></span>
<span class="l"><a class="anc" name="81f4" href="#81f4">[81f4]</a><span class="cd"><span class="i">ADC</span> <span class="o">#$02</span></span><span class="ce">; Add 2.</span></span>
<span class="l"><a class="anc" name="81f6" href="#81f6">[81f6]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#TextBox_ContentsY">TextBox_ContentsY</a></span></span><span class="ce">; Set as the text draw Y position.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Fill with placeholder text.
;
</div><span class="l"><a class="anc" name="81f8" href="#81f8">[81f8]</a><span class="cd"><span class="i">JMP</span> <span class="o"><a href="#IScripts_FillPlaceholderText">IScripts_FillPlaceholderText</a></span></span><span class="ce">; Fill the textbox.</span></span>
<span class="l"></span>
<span class="l"></span>
</pre><pre><a name="IScripts_CloseCurrentTextBox"></a><div class="cp">;============================================================================
; Close the opened textbox for the IScript.
;
; INPUTS:
;     None.
;
; OUTPUTS:
;     None.
;
; CALLS:
;     TextBox_Close
;     <a href="#TextBox_SetCoordsForNPC">TextBox_SetCoordsForNPC</a>
;
; XREFS:
;     <a href="#IScriptAction_EndScript">IScriptAction_EndScript</a>
;============================================================================
</div><span class="l"><a class="anc" name="81fb" href="#81fb">[81fb]</a><a href="#IScripts_CloseCurrentTextBox" class="la">IScripts_CloseCurrentTextBox:</a><span class="ce">; [$81fb]</span></span>
<span class="l"><a class="anc" name="81fb" href="#81fb">[81fb]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#TextBox_SetCoordsForNPC">TextBox_SetCoordsForNPC</a></span></span><span class="ce">; Set textbox coordinates for an NPC dialogue.</span></span>
<span class="l"><a class="anc" name="81fe" href="#81fe">[81fe]</a><span class="cd"><span class="i">JMP</span> <span class="o"><a href="#TextBox_Close">TextBox_Close</a></span></span><span class="ce">; Close the textbox.</span></span>
<span class="l"></span>
<span class="l"></span>
</pre><pre><a name="TextBox_SetCoordsForPortrait"></a><div class="cp">;============================================================================
; Set the textbox coordinates for a portrait.
;
; INPUTS:
;     None.
;
; OUTPUTS:
;     <a href="RAM.html#TextBox_X">TextBox_X</a>:
;         The new X coordinate.
;
;     <a href="RAM.html#TextBox_Y">TextBox_Y</a>:
;         The new Y coordinate.
;
;     <a href="RAM.html#TextBox_Width">TextBox_Width</a>:
;         The new width.
;
;     <a href="RAM.html#TextBox_Height">TextBox_Height</a>:
;         The new height.
;
; XREFS:
;     <a href="#DEADCODE_TextBox_ClosePortrait">DEADCODE_TextBox_ClosePortrait</a>
;     <a href="#IScripts_OpenForPortrait">IScripts_OpenForPortrait</a>
;============================================================================
</div><span class="l"><a class="anc" name="8201" href="#8201">[8201]</a><a href="#TextBox_SetCoordsForPortrait" class="la">TextBox_SetCoordsForPortrait:</a><span class="ce">; [$8201]</span></span>
<span class="l"><a class="anc" name="8201" href="#8201">[8201]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$02</span></span></span>
<span class="l"><a class="anc" name="8203" href="#8203">[8203]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#TextBox_X">TextBox_X</a></span></span><span class="ce">; X = 2</span></span>
<span class="l"><a class="anc" name="8206" href="#8206">[8206]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$0e</span></span></span>
<span class="l"><a class="anc" name="8208" href="#8208">[8208]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#TextBox_Y">TextBox_Y</a></span></span><span class="ce">; Y = 14</span></span>
<span class="l"><a class="anc" name="820b" href="#820b">[820b]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$08</span></span></span>
<span class="l"><a class="anc" name="820d" href="#820d">[820d]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#TextBox_Width">TextBox_Width</a></span></span><span class="ce">; Width = 8</span></span>
<span class="l"><a class="anc" name="8210" href="#8210">[8210]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$0a</span></span></span>
<span class="l"><a class="anc" name="8212" href="#8212">[8212]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#TextBox_Height">TextBox_Height</a></span></span><span class="ce">; Height = 10</span></span>
<span class="l"><a class="anc" name="8215" href="#8215">[8215]</a><span class="cd"><span class="i">RTS</span></span></span>
<span class="l"></span>
<span class="l"></span>
</pre><pre><a name="IScripts_SetPortraitSpriteXY"></a><div class="cp">;============================================================================
; Set the sprite X, Y position to the interior of the portrait frame.
;
; This position is relative to the top of the playable screen (below
; the HUD).
;
; INPUTS:
;     None
;
; OUTPUTS:
;     <a href="RAM.html#Maybe_Arg_CurrentSprite_PosX">Maybe_Arg_CurrentSprite_PosX</a>:
;         The X position to draw into (0x18)
;
;     <a href="RAM.html#Maybe_Arg_CurrentSprite_PosY">Maybe_Arg_CurrentSprite_PosY</a>:
;         The Y position to draw into (0x58)
;
; XREFS:
;     <a href="#IScripts_UpdatePortraitAnimation">IScripts_UpdatePortraitAnimation</a>
;============================================================================
</div><span class="l"><a class="anc" name="8216" href="#8216">[8216]</a><a href="#IScripts_SetPortraitSpriteXY" class="la">IScripts_SetPortraitSpriteXY:</a><span class="ce">; [$8216]</span></span>
<span class="l"><a class="anc" name="8216" href="#8216">[8216]</a><span class="cd"><span class="i">LDX</span> <span class="o">#$18</span></span></span>
<span class="l"><a class="anc" name="8218" href="#8218">[8218]</a><span class="cd"><span class="i">STX</span> <span class="o"><a href="RAM.html#Maybe_Arg_CurrentSprite_PosX">Maybe_Arg_CurrentSprite_PosX</a></span></span><span class="ce">; Draw X = 24</span></span>
<span class="l"><a class="anc" name="821a" href="#821a">[821a]</a><span class="cd"><span class="i">LDX</span> <span class="o">#$58</span></span></span>
<span class="l"><a class="anc" name="821c" href="#821c">[821c]</a><span class="cd"><span class="i">STX</span> <span class="o"><a href="RAM.html#Maybe_Arg_CurrentSprite_PosY">Maybe_Arg_CurrentSprite_PosY</a></span></span><span class="ce">; Draw Y = 88</span></span>
<span class="l"><a class="anc" name="821e" href="#821e">[821e]</a><span class="cd"><span class="i">RTS</span></span></span>
<span class="l"></span>
<span class="l"></span>
</pre><pre><a name="IScripts_OpenForPortrait"></a><div class="cp">;============================================================================
; Open a textbox frame for a portrait.
;
; This positions the textbox at the position and size
; for a portrait in preparation for drawing the portrait
; picture.
;
; INPUTS:
;     None.
;
; OUTPUTS:
;     None.
;
; CALLS:
;     <a href="#TextBox_SetCoordsForNPC">TextBox_SetCoordsForNPC</a>
;     <a href="#TextBox_SetCoordsForPortrait">TextBox_SetCoordsForPortrait</a>
;
; XREFS:
;     <a href="#IScripts_Begin">IScripts_Begin</a>
;============================================================================
</div><span class="l"><a class="anc" name="821f" href="#821f">[821f]</a><a href="#IScripts_OpenForPortrait" class="la">IScripts_OpenForPortrait:</a><span class="ce">; [$821f]</span></span>
<span class="l"><a class="anc" name="821f" href="#821f">[821f]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#TextBox_SetCoordsForPortrait">TextBox_SetCoordsForPortrait</a></span></span><span class="ce">; Set textbox coordinates for the portrait.</span></span>
<span class="l"><a class="anc" name="8222" href="#8222">[8222]</a><span class="cd"><span class="i">JMP</span> <span class="o"><a href="#TextBox_Open">TextBox_Open</a></span></span><span class="ce">; Open the textbox.</span></span>
<span class="l"></span>
</pre><pre><a name="DEADCODE_TextBox_ClosePortrait"></a><div class="cp">;============================================================================
; TODO: Document DEADCODE_TextBox_ClosePortrait
;
; INPUTS:
;     None.
;
; OUTPUTS:
;     TODO
;============================================================================
</div><span class="l"><a class="anc" name="8225" href="#8225">[8225]</a><a href="#DEADCODE_TextBox_ClosePortrait" class="la">DEADCODE_TextBox_ClosePortrait:</a><span class="ce">; [$8225]</span></span>
<span class="l"><a class="anc" name="8225" href="#8225">[8225]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#TextBox_SetCoordsForPortrait">TextBox_SetCoordsForPortrait</a></span></span></span>
<span class="l"><a class="anc" name="8228" href="#8228">[8228]</a><span class="cd"><span class="i">JMP</span> <span class="o"><a href="#TextBox_Close">TextBox_Close</a></span></span></span>
<span class="l"></span>
<span class="l"></span>
</pre><pre><a name="TextBox_ClearForPortraitAndText"></a><div class="cp">;============================================================================
; Close the textbox for both the portrait and textbox.
;
; This effectively closes both textboxes on the screen at
; once by taking the entire dimensions of both and replacing
; them with the screen's tiles.
;
; Based on the DEADCODE function above, this used to be split
; into portrait-specific and dialogue-specific textbox closing
; logic, but they likely determined this was faster or cheaper.
;
; INPUTS:
;     None.
;
; OUTPUTS:
;     <a href="RAM.html#TextBox_X">TextBox_X</a>:
;     <a href="RAM.html#TextBox_Y">TextBox_Y</a>:
;     <a href="RAM.html#TextBox_Width">TextBox_Width</a>:
;     <a href="RAM.html#TextBox_Height">TextBox_Height</a>:
;         Clobbered.
;
; CALLS:
;     <a href="#TextBox_Close">TextBox_Close</a>
;
; XREFS:
;     <a href="#IScriptAction_EndScript">IScriptAction_EndScript</a>
;============================================================================
</div><span class="l"><a class="anc" name="822b" href="#822b">[822b]</a><a href="#TextBox_ClearForPortraitAndText" class="la">TextBox_ClearForPortraitAndText:</a><span class="ce">; [$822b]</span></span>
<span class="l"><a class="anc" name="822b" href="#822b">[822b]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$02</span></span></span>
<span class="l"><a class="anc" name="822d" href="#822d">[822d]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#TextBox_X">TextBox_X</a></span></span><span class="ce">; X = 2</span></span>
<span class="l"><a class="anc" name="8230" href="#8230">[8230]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$08</span></span></span>
<span class="l"><a class="anc" name="8232" href="#8232">[8232]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#TextBox_Y">TextBox_Y</a></span></span><span class="ce">; Y = 8</span></span>
<span class="l"><a class="anc" name="8235" href="#8235">[8235]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$1e</span></span></span>
<span class="l"><a class="anc" name="8237" href="#8237">[8237]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#TextBox_Width">TextBox_Width</a></span></span><span class="ce">; Width = 30</span></span>
<span class="l"><a class="anc" name="823a" href="#823a">[823a]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$14</span></span></span>
<span class="l"><a class="anc" name="823c" href="#823c">[823c]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#TextBox_Height">TextBox_Height</a></span></span><span class="ce">; Height = 20</span></span>
<span class="l"><a class="anc" name="823f" href="#823f">[823f]</a><span class="cd"><span class="i">JMP</span> <span class="o"><a href="#TextBox_Close">TextBox_Close</a></span></span><span class="ce">; Close the textbox.</span></span>
<span class="l"></span>
<span class="l"></span>
</pre><pre><a name="IScripts_Begin"></a><div class="cp">;============================================================================
; Begin running an IScript.
;
; This will start loading the IScript to run. Based on
; that script, this may display a portrait for an entity.
;
; Once loaded, a text window will be shown and the first
; action of the script will be executed.
;
; INPUTS:
;     A:
;         The entrypoint offset of the IScript to run.
;
;     <a href="#ISCRIPT_ADDRS_U">ISCRIPT_ADDRS_U</a>:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a>:
;         The lookup table of IScript entrypoints.
;
; OUTPUTS:
;     <a href="RAM.html#IScriptOrCHRAddr">IScriptOrCHRAddr</a>:
;     <a href="RAM.html#IScriptOrCHRAddr">IScriptOrCHRAddr</a>+1:
;         The read address for the IScript.
;
;     <a href="RAM.html#Temp_0201">Temp_0201</a>:
;         The entity ID of the IScript, for portrait
;         display.
;
;     <a href="RAM.html#Temp_0200">Temp_0200</a>:
;         The IScript entrypoint index.
;
;     <a href="RAM.html#IScriptOffset">IScriptOffset</a>:
;         The byte offset into the script.
;
; CALLS:
;     <a href="PRG15_MIRROR.html#IScripts_ShowPortraitImage">IScripts_ShowPortraitImage</a>
;     <a href="#IScripts_OpenForPortrait">IScripts_OpenForPortrait</a>
;     <a href="#TextBox_OpenForNPC">TextBox_OpenForNPC</a>
;     <a href="#IScripts_LoadByte">IScripts_LoadByte</a>
;
; XREFS:
;     <a href="PRG14.html#Player_CheckHandlePressUpOnNPC">Player_CheckHandlePressUpOnNPC</a>
;     <a href="PRG15_MIRROR.html#Game_UnlockDoorWithUsableItem">Game_UnlockDoorWithUsableItem</a>
;     <a href="PRG15_MIRROR.html#Player_PickUpBattleHelmet">Player_PickUpBattleHelmet</a>
;     <a href="PRG15_MIRROR.html#Player_PickUpBattleSuit">Player_PickUpBattleSuit</a>
;     <a href="PRG15_MIRROR.html#Player_PickUpBlackOnyx">Player_PickUpBlackOnyx</a>
;     <a href="PRG15_MIRROR.html#Player_PickUpDragonSlayer">Player_PickUpDragonSlayer</a>
;     <a href="PRG15_MIRROR.html#Player_PickUpElixir">Player_PickUpElixir</a>
;     <a href="PRG15_MIRROR.html#Player_PickUpGlove">Player_PickUpGlove</a>
;     <a href="PRG15_MIRROR.html#Player_PickUpHourGlass">Player_PickUpHourGlass</a>
;     <a href="PRG15_MIRROR.html#Player_PickUpMattock">Player_PickUpMattock</a>
;     <a href="PRG15_MIRROR.html#Player_PickUpOintment">Player_PickUpOintment</a>
;     <a href="PRG15_MIRROR.html#Player_PickUpRedPotion">Player_PickUpRedPotion</a>
;     <a href="PRG15_MIRROR.html#Player_PickUpWingBoots">Player_PickUpWingBoots</a>
;     <a href="PRG15_MIRROR.html#Player_UseHourGlass">Player_UseHourGlass</a>
;     <a href="PRG15_MIRROR.html#Player_UseMattock">Player_UseMattock</a>
;     <a href="PRG15_MIRROR.html#Player_UseRedPotion">Player_UseRedPotion</a>
;     <a href="PRG15_MIRROR.html#Player_UseWingBoots">Player_UseWingBoots</a>
;============================================================================
</div><span class="l"><a class="anc" name="8242" href="#8242">[8242]</a><a href="#IScripts_Begin" class="la">IScripts_Begin:</a><span class="ce">; [$8242]</span></span>
<div class="c">;
; If this is 0xFF, map to the "Remember Your Mantra."
;
</div><span class="l"><a class="anc" name="8242" href="#8242">[8242]</a><span class="cd"><span class="i">CMP</span> <span class="o">#$ff</span></span><span class="ce">; Compare the start offset to 0xFF.</span></span>
<span class="l"><a class="anc" name="8244" href="#8244">[8244]</a><span class="cd"><span class="i">BNE</span> <span class="o"><a href="#@_loadScript">@_loadScript</a></span></span><span class="ce">; If equal, jump.</span></span>
<span class="l"><a class="anc" name="8246" href="#8246">[8246]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$1f</span></span><span class="ce">; Set the start offset to 0x1F.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name=":8248:@_loadScript"></a><div class="c">;
; Load the script address from the table.
;
</div><span class="l"><a class="anc" name="8248" href="#8248">[8248]</a><a href="#:8248:@_loadScript" class="lla">@_loadScript:</a><span class="ce">; [$8248]</span></span>
<span class="l"><a class="anc" name="8248" href="#8248">[8248]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#Temp_0200">Temp_0200</a></span></span><span class="ce">; Store the index temporarily.</span></span>
<span class="l"><a class="anc" name="824b" href="#824b">[824b]</a><span class="cd"><span class="i">TAX</span></span><span class="ce">; X = A</span></span>
<span class="l"><a class="anc" name="824c" href="#824c">[824c]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a>,X</span></span><span class="ce">; Load the lower byte of the IScript address.</span></span>
<span class="l"><a class="anc" name="824f" href="#824f">[824f]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#IScriptOrCHRAddr">IScriptOrCHRAddr</a></span></span><span class="ce">; Store as the lower byte.</span></span>
<span class="l"><a class="anc" name="8251" href="#8251">[8251]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="#ISCRIPT_ADDRS_U">ISCRIPT_ADDRS_U</a>,X</span></span><span class="ce">; Load the upper byte of the IScript address.</span></span>
<span class="l"><a class="anc" name="8254" href="#8254">[8254]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#IScriptOrCHRAddr_U">IScriptOrCHRAddr_U</a></span></span><span class="ce">; Store as the upper byte.</span></span>
<span class="l"><a class="anc" name="8256" href="#8256">[8256]</a><span class="cd"><span class="i">LDY</span> <span class="o">#$00</span></span><span class="ce">; Y = 0 (start offset in the script).</span></span>
<span class="l"><a class="anc" name="8258" href="#8258">[8258]</a><span class="cd"><span class="i">LDA</span> <span class="o">(<a href="RAM.html#IScriptOrCHRAddr">IScriptOrCHRAddr</a>),Y</span></span><span class="ce">; Load the first byte of the script (portrait ID).</span></span>
<span class="l"><a class="anc" name="825a" href="#825a">[825a]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#Temp_0201">Temp_0201</a></span></span><span class="ce">; Store it for the duration of the script.</span></span>
<span class="l"><a class="anc" name="825d" href="#825d">[825d]</a><span class="cd"><span class="i">BPL</span> <span class="o"><a href="#@_continueScript">@_continueScript</a></span></span><span class="ce">; If not a portrait ID, jump.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Begin showing the portrait information.
;
</div><span class="l"><a class="anc" name="825f" href="#825f">[825f]</a><span class="cd"><span class="i">AND</span> <span class="o">#$7f</span></span><span class="ce">; Keep the portrait ID bits.</span></span>
<span class="l"><a class="anc" name="8261" href="#8261">[8261]</a><span class="cd"><span class="i">JSR</span> <span class="o">$f24d</span></span><span class="ce">; Draw the portrait image.</span></span>
<span class="l"><a class="anc" name="8264" href="#8264">[8264]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#IScripts_OpenForPortrait">IScripts_OpenForPortrait</a></span></span><span class="ce">; Draw the portrait frame.</span></span>
<span class="l"></span>
<a name=":8267:@_continueScript"></a><span class="l"><a class="anc" name="8267" href="#8267">[8267]</a><a href="#:8267:@_continueScript" class="lla">@_continueScript:</a><span class="ce">; [$8267]</span></span>
<span class="l"><a class="anc" name="8267" href="#8267">[8267]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#TextBox_OpenForNPC">TextBox_OpenForNPC</a></span></span><span class="ce">; Open the text window.</span></span>
<span class="l"><a class="anc" name="826a" href="#826a">[826a]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$01</span></span></span>
<span class="l"><a class="anc" name="826c" href="#826c">[826c]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#IScriptOffset">IScriptOffset</a></span></span><span class="ce">; Set IScript offset to 1.</span></span>
<span class="l"></span>
<div class="c">;
; v-- Fall through --v
;
</div><span class="l"></span>
<span class="l"></span>
</pre><pre><a name="IScripts_InvokeNextAction"></a><div class="cp">;============================================================================
; Invoke the next action listed in an IScript.
;
; This will load the action byte, look up the action
; handler, and then run it. The handler will be
; responsible for loading any further bytes and
; advancing the script.
;
; INPUTS:
;     <a href="#IScriptActions_U">IScriptActions_U</a>:
;     <a href="#IScriptActions_L">IScriptActions_L</a>:
;         Address table for the IScript action handlers.
;
; OUTPUTS:
;     A:
;         Address of the handler, pushed to the stack.
;
; CALLS:
;     <a href="#IScripts_LoadByte">IScripts_LoadByte</a>
;
; XREFS:
;     <a href="#IScriptAction_AddGold">IScriptAction_AddGold</a>
;     <a href="#IScriptAction_AddInventoryItem">IScriptAction_AddInventoryItem</a>
;     <a href="#IScriptAction_ConsumeItem">IScriptAction_ConsumeItem</a>
;     <a href="#IScriptAction_OpenShop">IScriptAction_OpenShop</a>
;     <a href="#IScriptAction_SetQuestComplete">IScriptAction_SetQuestComplete</a>
;     <a href="#IScriptAction_SetSpawnPoint">IScriptAction_SetSpawnPoint</a>
;     <a href="#IScriptAction_ShowMessage">IScriptAction_ShowMessage</a>
;     <a href="#IScriptAction_ShowPassword">IScriptAction_ShowPassword</a>
;     <a href="#IScriptAction_ShowQuestionMessage">IScriptAction_ShowQuestionMessage</a>
;     <a href="#IScriptAction_ShowSellMenu">IScriptAction_ShowSellMenu</a>
;     <a href="#IScriptAction_ShowUnskippableMessage">IScriptAction_ShowUnskippableMessage</a>
;     <a href="#IScriptAction_SpendGold">IScriptAction_SpendGold</a>
;     <a href="#IScripts_JumpToNextAddr">IScripts_JumpToNextAddr</a>
;     <a href="#IScripts_SkipAddrAndInvoke">IScripts_SkipAddrAndInvoke</a>
;     <a href="#thunk_IScripts_InvokeNextAction">thunk_IScripts_InvokeNextAction</a>
;============================================================================
</div><span class="l"><a class="anc" name="826e" href="#826e">[826e]</a><a href="#IScripts_InvokeNextAction" class="la">IScripts_InvokeNextAction:</a><span class="ce">; [$826e]</span></span>
<span class="l"><a class="anc" name="826e" href="#826e">[826e]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#IScripts_LoadByte">IScripts_LoadByte</a></span></span><span class="ce">; Load the script ID</span></span>
<span class="l"><a class="anc" name="8271" href="#8271">[8271]</a><span class="cd"><span class="i">TAX</span></span><span class="ce">; Store the byte in X and load from the offset table.</span></span>
<span class="l"><a class="anc" name="8272" href="#8272">[8272]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="#IScriptActions_U">IScriptActions_U</a>,X</span></span><span class="ce">; Fetch the upper script offset</span></span>
<span class="l"><a class="anc" name="8275" href="#8275">[8275]</a><span class="cd"><span class="i">PHA</span></span><span class="ce">; Push the upper offset to the stack</span></span>
<span class="l"><a class="anc" name="8276" href="#8276">[8276]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="#IScriptActions_L">IScriptActions_L</a>,X</span></span><span class="ce">; Fetch the lower script offset</span></span>
<span class="l"><a class="anc" name="8279" href="#8279">[8279]</a><span class="cd"><span class="i">PHA</span></span><span class="ce">; Push the lower offset to the stack</span></span>
<span class="l"><a class="anc" name="827a" href="#827a">[827a]</a><span class="cd"><span class="i">RTS</span></span></span>
<span class="l"></span>
<span class="l"></span>
<a name="IScriptActions_L"></a><div class="cp">;============================================================================
; Addresses for the IScript action handlers.
;
; XREFS:
;     <a href="#IScripts_InvokeNextAction">IScripts_InvokeNextAction</a>
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#IScripts_InvokeNextAction">IScripts_InvokeNextAction</a>
;
</div><span class="l"><a class="anc" name="827b" href="#827b">[827b]</a><a href="#IScriptActions_L" class="la">IScriptActions_L:</a><span class="ce">; [$827b]</span></span>
<span class="l"><a class="anc" name="827b" href="#827b">[827b]</a><span class="cd"><span class="i">db</span> <span class="o">$b3</span></span><span class="ce">; [0]: End Script action</span></span>
<span class="l"></span>
<a name="IScriptActions_L_1_"></a><div class="c">;
; XREFS:
;     <a href="#IScripts_InvokeNextAction">IScripts_InvokeNextAction</a>
;
</div><span class="l"><a class="anc" name="827c" href="#827c">[827c]</a><a href="#IScriptActions_L_1_" class="la">IScriptActions_L_1_:</a><span class="ce">; [$827c]</span></span>
<span class="l"><a class="anc" name="827c" href="#827c">[827c]</a><span class="cd"><span class="i">db</span> <span class="o">$c4</span></span><span class="ce">; [1]: Show Unskippable Message action</span></span>
<span class="l"><a class="anc" name="827d" href="#827d">[827d]</a><span class="cd"><span class="i">db</span> <span class="o">$ee</span></span><span class="ce">; [2]: Show Question Message action</span></span>
<span class="l"><a class="anc" name="827e" href="#827e">[827e]</a><span class="cd"><span class="i">db</span> <span class="o">$d8</span></span><span class="ce">; [3]: Show Message action</span></span>
<span class="l"><a class="anc" name="827f" href="#827f">[827f]</a><span class="cd"><span class="i">db</span> <span class="o">$25</span></span><span class="ce">; [4]: Check/Update Player Title action</span></span>
<span class="l"><a class="anc" name="8280" href="#8280">[8280]</a><span class="cd"><span class="i">db</span> <span class="o">$5a</span></span><span class="ce">; [5]: Spend Gold action</span></span>
<span class="l"><a class="anc" name="8281" href="#8281">[8281]</a><span class="cd"><span class="i">db</span> <span class="o">$90</span></span><span class="ce">; [6]: Set Spawn Point action</span></span>
<span class="l"><a class="anc" name="8282" href="#8282">[8282]</a><span class="cd"><span class="i">db</span> <span class="o">$9e</span></span><span class="ce">; [7]: Add Inventory Item action</span></span>
<span class="l"><a class="anc" name="8283" href="#8283">[8283]</a><span class="cd"><span class="i">db</span> <span class="o">$d7</span></span><span class="ce">; [8]: Open Shop action</span></span>
<span class="l"><a class="anc" name="8284" href="#8284">[8284]</a><span class="cd"><span class="i">db</span> <span class="o">$24</span></span><span class="ce">; [9]: Add Gold action</span></span>
<span class="l"><a class="anc" name="8285" href="#8285">[8285]</a><span class="cd"><span class="i">db</span> <span class="o">$7f</span></span><span class="ce">; [10]: Add MP action</span></span>
<span class="l"><a class="anc" name="8286" href="#8286">[8286]</a><span class="cd"><span class="i">db</span> <span class="o">$d0</span></span><span class="ce">; [11]: If Quest Completed action</span></span>
<span class="l"><a class="anc" name="8287" href="#8287">[8287]</a><span class="cd"><span class="i">db</span> <span class="o">$f5</span></span><span class="ce">; [12]: If Player Has Title action</span></span>
<span class="l"><a class="anc" name="8288" href="#8288">[8288]</a><span class="cd"><span class="i">db</span> <span class="o">$1e</span></span><span class="ce">; [13]: If Player Has Gold action</span></span>
<span class="l"><a class="anc" name="8289" href="#8289">[8289]</a><span class="cd"><span class="i">db</span> <span class="o">$e5</span></span><span class="ce">; [14]: Set Quest Complete action</span></span>
<span class="l"><a class="anc" name="828a" href="#828a">[828a]</a><span class="cd"><span class="i">db</span> <span class="o">$2f</span></span><span class="ce">; [15]: Show Buy/Sell Menu action</span></span>
<span class="l"><a class="anc" name="828b" href="#828b">[828b]</a><span class="cd"><span class="i">db</span> <span class="o">$56</span></span><span class="ce">; [16]: Consume Item action</span></span>
<span class="l"><a class="anc" name="828c" href="#828c">[828c]</a><span class="cd"><span class="i">db</span> <span class="o">$5f</span></span><span class="ce">; [17]: Show Sell Menu action</span></span>
<span class="l"><a class="anc" name="828d" href="#828d">[828d]</a><span class="cd"><span class="i">db</span> <span class="o">$17</span></span><span class="ce">; [18]: If Player Has Item action</span></span>
<span class="l"><a class="anc" name="828e" href="#828e">[828e]</a><span class="cd"><span class="i">db</span> <span class="o">$ae</span></span><span class="ce">; [19]: Add HP action</span></span>
<span class="l"><a class="anc" name="828f" href="#828f">[828f]</a><span class="cd"><span class="i">db</span> <span class="o">$36</span></span><span class="ce">; [20]: Show Password action</span></span>
<span class="l"><a class="anc" name="8290" href="#8290">[8290]</a><span class="cd"><span class="i">db</span> <span class="o">$ad</span></span><span class="ce">; [21]: Finish Game action</span></span>
<span class="l"><a class="anc" name="8291" href="#8291">[8291]</a><span class="cd"><span class="i">db</span> <span class="o">$07</span></span><span class="ce">; [22]: Show Message and If Dismissed action</span></span>
<span class="l"><a class="anc" name="8292" href="#8292">[8292]</a><span class="cd"><span class="i">db</span> <span class="o">$aa</span></span><span class="ce">; [23]: Jump To Script Address action</span></span>
<span class="l"></span>
<a name="IScriptActions_U"></a><div class="c">;
; XREFS:
;     <a href="#IScripts_InvokeNextAction">IScripts_InvokeNextAction</a>
;
</div><span class="l"><a class="anc" name="8293" href="#8293">[8293]</a><a href="#IScriptActions_U" class="la">IScriptActions_U:</a><span class="ce">; [$8293]</span></span>
<span class="l"><a class="anc" name="8293" href="#8293">[8293]</a><span class="cd"><span class="i">db</span> <span class="o">$82</span></span><span class="ce">; [0]: End Script action</span></span>
<span class="l"></span>
<a name="IScriptActions_U_1_"></a><div class="c">;
; XREFS:
;     <a href="#IScripts_InvokeNextAction">IScripts_InvokeNextAction</a>
;
</div><span class="l"><a class="anc" name="8294" href="#8294">[8294]</a><a href="#IScriptActions_U_1_" class="la">IScriptActions_U_1_:</a><span class="ce">; [$8294]</span></span>
<span class="l"><a class="anc" name="8294" href="#8294">[8294]</a><span class="cd"><span class="i">db</span> <span class="o">$82</span></span><span class="ce">; [1]: Show Unskippable Message action</span></span>
<span class="l"><a class="anc" name="8295" href="#8295">[8295]</a><span class="cd"><span class="i">db</span> <span class="o">$82</span></span><span class="ce">; [2]: Show Question Message action</span></span>
<span class="l"><a class="anc" name="8296" href="#8296">[8296]</a><span class="cd"><span class="i">db</span> <span class="o">$82</span></span><span class="ce">; [3]: Show Message action</span></span>
<span class="l"><a class="anc" name="8297" href="#8297">[8297]</a><span class="cd"><span class="i">db</span> <span class="o">$87</span></span><span class="ce">; [4]: Check/Update Player Title action</span></span>
<span class="l"><a class="anc" name="8298" href="#8298">[8298]</a><span class="cd"><span class="i">db</span> <span class="o">$83</span></span><span class="ce">; [5]: Spend Gold action</span></span>
<span class="l"><a class="anc" name="8299" href="#8299">[8299]</a><span class="cd"><span class="i">db</span> <span class="o">$83</span></span><span class="ce">; [6]: Set Spawn Point action</span></span>
<span class="l"><a class="anc" name="829a" href="#829a">[829a]</a><span class="cd"><span class="i">db</span> <span class="o">$83</span></span><span class="ce">; [7]: Add Inventory Item action</span></span>
<span class="l"><a class="anc" name="829b" href="#829b">[829b]</a><span class="cd"><span class="i">db</span> <span class="o">$83</span></span><span class="ce">; [8]: Open Shop action</span></span>
<span class="l"><a class="anc" name="829c" href="#829c">[829c]</a><span class="cd"><span class="i">db</span> <span class="o">$85</span></span><span class="ce">; [9]: Add Gold action</span></span>
<span class="l"><a class="anc" name="829d" href="#829d">[829d]</a><span class="cd"><span class="i">db</span> <span class="o">$85</span></span><span class="ce">; [10]: Add MP action</span></span>
<span class="l"><a class="anc" name="829e" href="#829e">[829e]</a><span class="cd"><span class="i">db</span> <span class="o">$85</span></span><span class="ce">; [11]: If Quest Completed action</span></span>
<span class="l"><a class="anc" name="829f" href="#829f">[829f]</a><span class="cd"><span class="i">db</span> <span class="o">$85</span></span><span class="ce">; [12]: If Player Has Title action</span></span>
<span class="l"><a class="anc" name="82a0" href="#82a0">[82a0]</a><span class="cd"><span class="i">db</span> <span class="o">$86</span></span><span class="ce">; [13]: If Player Has Gold action</span></span>
<span class="l"><a class="anc" name="82a1" href="#82a1">[82a1]</a><span class="cd"><span class="i">db</span> <span class="o">$85</span></span><span class="ce">; [14]: Set Quest Complete action</span></span>
<span class="l"><a class="anc" name="82a2" href="#82a2">[82a2]</a><span class="cd"><span class="i">db</span> <span class="o">$86</span></span><span class="ce">; [15]: Show Buy/Sell Menu action</span></span>
<span class="l"><a class="anc" name="82a3" href="#82a3">[82a3]</a><span class="cd"><span class="i">db</span> <span class="o">$86</span></span><span class="ce">; [16]: Consume Item action</span></span>
<span class="l"><a class="anc" name="82a4" href="#82a4">[82a4]</a><span class="cd"><span class="i">db</span> <span class="o">$86</span></span><span class="ce">; [17]: Show Sell Menu action</span></span>
<span class="l"><a class="anc" name="82a5" href="#82a5">[82a5]</a><span class="cd"><span class="i">db</span> <span class="o">$87</span></span><span class="ce">; [18]: If Player Has Item action</span></span>
<span class="l"><a class="anc" name="82a6" href="#82a6">[82a6]</a><span class="cd"><span class="i">db</span> <span class="o">$85</span></span><span class="ce">; [19]: Add HP action</span></span>
<span class="l"><a class="anc" name="82a7" href="#82a7">[82a7]</a><span class="cd"><span class="i">db</span> <span class="o">$87</span></span><span class="ce">; [20]: Show Password action</span></span>
<span class="l"><a class="anc" name="82a8" href="#82a8">[82a8]</a><span class="cd"><span class="i">db</span> <span class="o">$82</span></span><span class="ce">; [21]: Finish Game action</span></span>
<span class="l"><a class="anc" name="82a9" href="#82a9">[82a9]</a><span class="cd"><span class="i">db</span> <span class="o">$83</span></span><span class="ce">; [22]: Show Message and If Dismissed action</span></span>
<span class="l"><a class="anc" name="82aa" href="#82aa">[82aa]</a><span class="cd"><span class="i">db</span> <span class="o">$82</span></span><span class="ce">; [23]: Jump To Script Address action</span></span>
<span class="l"></span>
<span class="l"></span>
</pre><pre><a name="IScriptAction_Jump"></a><div class="cp">;============================================================================
; IScript Action $17: Jump to Address
;
; This will immediately jump to the specified address.
;
; Script Parameters:
;
;     1. Jump address (2 bytes)
;
; XREFS:
;     <a href="#IScriptActions_L">IScriptActions_L</a> [$PRG12::8292]
;============================================================================
</div><span class="l"><a class="anc" name="82ab" href="#82ab">[82ab]</a><a href="#IScriptAction_Jump" class="la">IScriptAction_Jump:</a><span class="ce">; [$82ab]</span></span>
<span class="l"><a class="anc" name="82ab" href="#82ab">[82ab]</a><span class="cd"><span class="i">JMP</span> <span class="o"><a href="#IScripts_JumpToNextAddr">IScripts_JumpToNextAddr</a></span></span><span class="ce">; Jump to the next address specified in the script.</span></span>
<span class="l"></span>
<span class="l"></span>
</pre><pre><a name="IScriptAction_FinishGame"></a><div class="cp">;============================================================================
; IScript Action $15: Finish Game
;
; This will immediately finish the game, showing
; the outro screen and victory music.
;
; Script Parameters:
;     None.
;
; XREFS:
;     <a href="#IScriptActions_L">IScriptActions_L</a> [$PRG12::8290]
;============================================================================
</div><span class="l"><a class="anc" name="82ae" href="#82ae">[82ae]</a><a href="#IScriptAction_FinishGame" class="la">IScriptAction_FinishGame:</a><span class="ce">; [$82ae]</span></span>
<span class="l"><a class="anc" name="82ae" href="#82ae">[82ae]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#SplashAnimation_RunOutro">SplashAnimation_RunOutro</a></span></span><span class="ce">; Show the outro animation.</span></span>
<span class="l"><a class="anc" name="82b1" href="#82b1">[82b1]</a><span class="cd"><span class="i">JMP</span> <span class="o">$c913</span></span><span class="ce">; Re-initialize the game.</span></span>
<span class="l"></span>
<span class="l"></span>
</pre><pre><a name="IScriptAction_EndScript"></a><div class="cp">;============================================================================
; IScript Action $00: End Script
;
; This will close the textbox, if one is opened, and
; finish processing the script.
;
; Script Parameters:
;     None.
;
; XREFS:
;     <a href="#IScriptAction_OpenShop">IScriptAction_OpenShop</a>
;     <a href="#IScriptAction_ShowBuySellMenu">IScriptAction_ShowBuySellMenu</a>
;     <a href="#IScriptAction_ShowMessage">IScriptAction_ShowMessage</a>
;     <a href="#IScriptAction_ShowQuestionMessage">IScriptAction_ShowQuestionMessage</a>
;     <a href="#IScriptAction_ShowSellMenu">IScriptAction_ShowSellMenu</a>
;     <a href="#IScriptActions_L">IScriptActions_L</a> [$PRG12::827b]
;     <a href="#IScripts_ShowFinalMessage">IScripts_ShowFinalMessage</a>
;============================================================================
</div><span class="l"><a class="anc" name="82b4" href="#82b4">[82b4]</a><a href="#IScriptAction_EndScript" class="la">IScriptAction_EndScript:</a><span class="ce">; [$82b4]</span></span>
<span class="l"><a class="anc" name="82b4" href="#82b4">[82b4]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#IScripts_UpdatePortraitAnimation">IScripts_UpdatePortraitAnimation</a></span></span><span class="ce">; Update the portrait animation.</span></span>
<span class="l"><a class="anc" name="82b7" href="#82b7">[82b7]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#Temp_0201">Temp_0201</a></span></span><span class="ce">; Load the portrait ID.</span></span>
<span class="l"><a class="anc" name="82ba" href="#82ba">[82ba]</a><span class="cd"><span class="i">BPL</span> <span class="o"><a href="#@_noPortrait">@_noPortrait</a></span></span><span class="ce">; If a portrait ID is not set, jump.</span></span>
<span class="l"><a class="anc" name="82bc" href="#82bc">[82bc]</a><span class="cd"><span class="i">JSR</span> <span class="o">$f281</span></span><span class="ce">; Clear the portrait image.</span></span>
<span class="l"><a class="anc" name="82bf" href="#82bf">[82bf]</a><span class="cd"><span class="i">JMP</span> <span class="o"><a href="#TextBox_ClearForPortraitAndText">TextBox_ClearForPortraitAndText</a></span></span><span class="ce">; Clear the portrait frame.</span></span>
<span class="l"></span>
<a name=":82c2:@_noPortrait"></a><span class="l"><a class="anc" name="82c2" href="#82c2">[82c2]</a><a href="#:82c2:@_noPortrait" class="lla">@_noPortrait:</a><span class="ce">; [$82c2]</span></span>
<span class="l"><a class="anc" name="82c2" href="#82c2">[82c2]</a><span class="cd"><span class="i">JMP</span> <span class="o"><a href="#IScripts_CloseCurrentTextBox">IScripts_CloseCurrentTextBox</a></span></span><span class="ce">; Clear the current textbox.</span></span>
<span class="l"></span>
<span class="l"></span>
</pre><pre><a name="IScriptAction_ShowUnskippableMessage"></a><div class="cp">;============================================================================
; IScript Action $01: Show Unskippable Message
;
; Displays a message in a text box, with an optional
; portrait depending on the script's Entity ID.
;
; This message cannot be skipped by pressing the B
; button. It's used for important messages, like the
; game's intro.
;
; Script Parameters:
;
;     1. Message ID (1 byte)
;
; XREFS:
;     <a href="#IScriptActions_L">IScriptActions_L</a> [$PRG12::827c]
;============================================================================
</div><span class="l"><a class="anc" name="82c5" href="#82c5">[82c5]</a><a href="#IScriptAction_ShowUnskippableMessage" class="la">IScriptAction_ShowUnskippableMessage:</a><span class="ce">; [$82c5]</span></span>
<div class="c">;
; Load the message to display.
;
</div><span class="l"><a class="anc" name="82c5" href="#82c5">[82c5]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#IScripts_LoadByte">IScripts_LoadByte</a></span></span><span class="ce">; Load the next byte as the message ID.</span></span>
<span class="l"><a class="anc" name="82c8" href="#82c8">[82c8]</a><span class="cd"><span class="i">JSR</span> <span class="o">$f3f5</span></span><span class="ce">; Load the message.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name=":82cb:@_loop"></a><div class="c">;
; Draw the characters one-by-one until the message is done.
;
</div><span class="l"><a class="anc" name="82cb" href="#82cb">[82cb]</a><a href="#:82cb:@_loop" class="lla">@_loop:</a><span class="ce">; [$82cb]</span></span>
<span class="l"><a class="anc" name="82cb" href="#82cb">[82cb]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#IScripts_UpdatePortraitAnimation">IScripts_UpdatePortraitAnimation</a></span></span><span class="ce">; Update the portrait animation.</span></span>
<span class="l"><a class="anc" name="82ce" href="#82ce">[82ce]</a><span class="cd"><span class="i">JSR</span> <span class="o">$f466</span></span><span class="ce">; Draw the next character in the textbox.</span></span>
<span class="l"><a class="anc" name="82d1" href="#82d1">[82d1]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#TextBox_CheckShouldContinue">TextBox_CheckShouldContinue</a></span></span><span class="ce">; Check if the message should continue.</span></span>
<span class="l"><a class="anc" name="82d4" href="#82d4">[82d4]</a><span class="cd"><span class="i">BCC</span> <span class="o"><a href="#@_loop">@_loop</a></span></span><span class="ce">; If so, loop.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Done showing the textbox. Invoke the next action.
;
</div><span class="l"><a class="anc" name="82d6" href="#82d6">[82d6]</a><span class="cd"><span class="i">JMP</span> <span class="o"><a href="#IScripts_InvokeNextAction">IScripts_InvokeNextAction</a></span></span><span class="ce">; Invoke the next action in the script.</span></span>
<span class="l"></span>
<span class="l"></span>
</pre><pre><a name="IScriptAction_ShowMessage"></a><div class="cp">;============================================================================
; IScript Action $03: Show Message
;
; Displays a message in a text box, with an optional
; portrait depending on the script's Entity ID.
;
; This message can be skipped at any point by pressing
; the B button.
;
; Script Parameters:
;
;     1. Message ID (1 byte)
;
; XREFS:
;     <a href="#IScriptActions_L">IScriptActions_L</a> [$PRG12::827e]
;============================================================================
</div><span class="l"><a class="anc" name="82d9" href="#82d9">[82d9]</a><a href="#IScriptAction_ShowMessage" class="la">IScriptAction_ShowMessage:</a><span class="ce">; [$82d9]</span></span>
<div class="c">;
; Load the message to display.
;
</div><span class="l"><a class="anc" name="82d9" href="#82d9">[82d9]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#IScripts_LoadByte">IScripts_LoadByte</a></span></span><span class="ce">; Load the next byte as the message ID.</span></span>
<span class="l"><a class="anc" name="82dc" href="#82dc">[82dc]</a><span class="cd"><span class="i">JSR</span> <span class="o">$f3f5</span></span><span class="ce">; Load the message.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name=":82df:@_loop"></a><div class="c">;
; Draw the characters one-by-one until the message is done.
;
</div><span class="l"><a class="anc" name="82df" href="#82df">[82df]</a><a href="#:82df:@_loop" class="lla">@_loop:</a><span class="ce">; [$82df]</span></span>
<span class="l"><a class="anc" name="82df" href="#82df">[82df]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#IScripts_UpdatePortraitAnimation">IScripts_UpdatePortraitAnimation</a></span></span><span class="ce">; Update the portrait animation.</span></span>
<span class="l"><a class="anc" name="82e2" href="#82e2">[82e2]</a><span class="cd"><span class="i">JSR</span> <span class="o">$f466</span></span><span class="ce">; Draw the next character in the textbox.</span></span>
<span class="l"><a class="anc" name="82e5" href="#82e5">[82e5]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#TextBox_CheckShouldContinueOrDismissMessage">TextBox_CheckShouldContinueOrDismissMessage</a></span></span><span class="ce">; Check if the message is done or continued.</span></span>
<span class="l"><a class="anc" name="82e8" href="#82e8">[82e8]</a><span class="cd"><span class="i">BCS</span> <span class="o"><a href="#IScriptAction_EndScript">IScriptAction_EndScript</a></span></span><span class="ce">; If dismissed, end the script.</span></span>
<span class="l"><a class="anc" name="82ea" href="#82ea">[82ea]</a><span class="cd"><span class="i">BNE</span> <span class="o"><a href="#@_loop">@_loop</a></span></span><span class="ce">; If not done, loop.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Done showing the textbox. Invoke the next action.
;
</div><span class="l"><a class="anc" name="82ec" href="#82ec">[82ec]</a><span class="cd"><span class="i">JMP</span> <span class="o"><a href="#IScripts_InvokeNextAction">IScripts_InvokeNextAction</a></span></span><span class="ce">; Invoke the next action in the script.</span></span>
<span class="l"></span>
<span class="l"></span>
</pre><pre><a name="IScriptAction_ShowQuestionMessage"></a><div class="cp">;============================================================================
; IScript Action $02: Show Question Message
;
; Tihs displays a message in a text box, with an
; optional portrait depending on the script's Entity ID.
;
; The message will terminate with a flashing "?" at the
; bottom-center of the dialogue, indicating a question
; for the player.
;
; This message can be skipped at any point by pressing
; the B button.
;
; Script Parameters:
;
;     1. Message ID (1 byte)
;
; XREFS:
;     <a href="#IScriptActions_L">IScriptActions_L</a> [$PRG12::827d]
;============================================================================
</div><span class="l"><a class="anc" name="82ef" href="#82ef">[82ef]</a><a href="#IScriptAction_ShowQuestionMessage" class="la">IScriptAction_ShowQuestionMessage:</a><span class="ce">; [$82ef]</span></span>
<span class="l"><a class="anc" name="82ef" href="#82ef">[82ef]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#IScripts_LoadByte">IScripts_LoadByte</a></span></span><span class="ce">; Load the message ID parameer.</span></span>
<span class="l"><a class="anc" name="82f2" href="#82f2">[82f2]</a><span class="cd"><span class="i">JSR</span> <span class="o">$f3f5</span></span><span class="ce">; Load the message string.</span></span>
<span class="l"></span>
<a name=":82f5:@_messageLoop"></a><span class="l"><a class="anc" name="82f5" href="#82f5">[82f5]</a><a href="#:82f5:@_messageLoop" class="lla">@_messageLoop:</a><span class="ce">; [$82f5]</span></span>
<span class="l"><a class="anc" name="82f5" href="#82f5">[82f5]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#IScripts_UpdatePortraitAnimation">IScripts_UpdatePortraitAnimation</a></span></span><span class="ce">; Update the portrait animation.</span></span>
<span class="l"><a class="anc" name="82f8" href="#82f8">[82f8]</a><span class="cd"><span class="i">JSR</span> <span class="o">$f466</span></span><span class="ce">; Show the next character in the textbox.</span></span>
<span class="l"><a class="anc" name="82fb" href="#82fb">[82fb]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#TextBox_CheckShouldContinueOrDismissQuestion">TextBox_CheckShouldContinueOrDismissQuestion</a></span></span><span class="ce">; Check whether to continue or dismiss.</span></span>
<span class="l"><a class="anc" name="82fe" href="#82fe">[82fe]</a><span class="cd"><span class="i">BCS</span> <span class="o"><a href="#IScriptAction_EndScript">IScriptAction_EndScript</a></span></span><span class="ce">; If dismissed, end the script.</span></span>
<span class="l"><a class="anc" name="8300" href="#8300">[8300]</a><span class="cd"><span class="i">BNE</span> <span class="o"><a href="#@_messageLoop">@_messageLoop</a></span></span><span class="ce">; Else, if message text remains, loop.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; The message finished. Fill up the textbox with hidden
; placeholder text and move on to the next action.
;
</div><span class="l"><a class="anc" name="8302" href="#8302">[8302]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#IScripts_PositionAndFillPlaceholderText">IScripts_PositionAndFillPlaceholderText</a></span></span></span>
<span class="l"><a class="anc" name="8305" href="#8305">[8305]</a><span class="cd"><span class="i">JMP</span> <span class="o"><a href="#IScripts_InvokeNextAction">IScripts_InvokeNextAction</a></span></span><span class="ce">; Invoke the next action in the script.</span></span>
<span class="l"></span>
<span class="l"></span>
</pre><pre><a name="IScriptAction_ShowQuestionMessageCheckIfDismissed"></a><div class="cp">;============================================================================
; IScript Action $16: Show Question Message then Check If Completed
;
; Tihs displays a message in a text box, with an
; optional portrait depending on the script's Entity ID.
;
; This message can be skipped at any point by pressing
; the B button.
;
; If the message is dismissed, continue on with the script.
;
; If the message completed, load the next address parameter
; and jump to it.
;
; This is not used in the shipped game.
;
; Script Parameters:
;
;     1. Message ID (1 byte)
;     2. Jump Address if Completed (2 bytes)
;
; XREFS:
;     <a href="#IScriptActions_L">IScriptActions_L</a> [$PRG12::8291]
;============================================================================
</div><span class="l"><a class="anc" name="8308" href="#8308">[8308]</a><a href="#IScriptAction_ShowQuestionMessageCheckIfDismissed" class="la">IScriptAction_ShowQuestionMessageCheckIfDismissed:</a><span class="ce">; [$8308]</span></span>
<span class="l"><a class="anc" name="8308" href="#8308">[8308]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#IScripts_LoadByte">IScripts_LoadByte</a></span></span><span class="ce">; Load the message ID parameer.</span></span>
<span class="l"><a class="anc" name="830b" href="#830b">[830b]</a><span class="cd"><span class="i">JSR</span> <span class="o">$f3f5</span></span><span class="ce">; Load the message string.</span></span>
<span class="l"></span>
<a name=":830e:@_messageLoop"></a><span class="l"><a class="anc" name="830e" href="#830e">[830e]</a><a href="#:830e:@_messageLoop" class="lla">@_messageLoop:</a><span class="ce">; [$830e]</span></span>
<span class="l"><a class="anc" name="830e" href="#830e">[830e]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#IScripts_UpdatePortraitAnimation">IScripts_UpdatePortraitAnimation</a></span></span><span class="ce">; Update the portrait animation.</span></span>
<span class="l"><a class="anc" name="8311" href="#8311">[8311]</a><span class="cd"><span class="i">JSR</span> <span class="o">$f466</span></span><span class="ce">; Show the next character in the textbox.</span></span>
<span class="l"><a class="anc" name="8314" href="#8314">[8314]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#TextBox_CheckShouldContinueOrDismissQuestion">TextBox_CheckShouldContinueOrDismissQuestion</a></span></span><span class="ce">; Check whether to continue or dismiss.</span></span>
<span class="l"><a class="anc" name="8317" href="#8317">[8317]</a><span class="cd"><span class="i">BCS</span> <span class="o"><a href="#@_messageDismissed">@_messageDismissed</a></span></span><span class="ce">; If dismissed, jump to continue this script.</span></span>
<span class="l"><a class="anc" name="8319" href="#8319">[8319]</a><span class="cd"><span class="i">BNE</span> <span class="o"><a href="#@_messageLoop">@_messageLoop</a></span></span><span class="ce">; Else, if message text remains, loop.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; The message finished. Load the next parameter as an
; address and jump to it.
;
</div><span class="l"><a class="anc" name="831b" href="#831b">[831b]</a><span class="cd"><span class="i">JMP</span> <span class="o"><a href="#IScripts_JumpToNextAddr">IScripts_JumpToNextAddr</a></span></span><span class="ce">; Else, if completed, jump to the next address specified in the script.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name=":831e:@_messageDismissed"></a><div class="c">;
; The message was dismissed. Move on to the next action in
; this script.
;
</div><span class="l"><a class="anc" name="831e" href="#831e">[831e]</a><a href="#:831e:@_messageDismissed" class="lla">@_messageDismissed:</a><span class="ce">; [$831e]</span></span>
<span class="l"><a class="anc" name="831e" href="#831e">[831e]</a><span class="cd"><span class="i">JMP</span> <span class="o"><a href="#IScripts_SkipAddrAndInvoke">IScripts_SkipAddrAndInvoke</a></span></span><span class="ce">; Invoke the next action in the script.</span></span>
<span class="l"></span>
<span class="l"></span>
</pre><pre><a name="IScripts_ProgressivelySubtractGold"></a><div class="cp">;============================================================================
; Progressively subtract gold from the player.
;
; This will subtract the code, animating the reduction
; of gold from the status screen.
;
; 10 gold will be subtracted at a time from the player.
; The values passed in will be used as a separate counter
; for how much gold is remaining to subtract.
;
; INPUTS:
;     <a href="RAM.html#Temp_0203">Temp_0203</a>:
;         Lower byte of the gold amount to subtract.
;
;     <a href="RAM.html#Temp_0203">Temp_0203</a>:
;         Upper byte of the gold amount to subtract.
;
; OUTPUTS:
;     <a href="RAM.html#Temp_Int24">Temp_Int24</a>:
;     <a href="RAM.html#Temp_Int24">Temp_Int24</a>+1:
;     <a href="RAM.html#Temp_0202">Temp_0202</a>:
;     <a href="RAM.html#Temp_0203">Temp_0203</a>:
;         Clobbered.
;
; CALLS:
;     <a href="#IScripts_UpdatePortraitAnimation">IScripts_UpdatePortraitAnimation</a>
;     <a href="PRG15_MIRROR.html#Player_SubtractGold">Player_SubtractGold</a>
;
; XREFS:
;     <a href="#IScriptAction_OpenShop">IScriptAction_OpenShop</a>
;     <a href="#IScriptAction_SpendGold">IScriptAction_SpendGold</a>
;     <a href="#IScripts_ProgressivelySubtractGold">IScripts_ProgressivelySubtractGold</a>
;============================================================================
</div><span class="l"><a class="anc" name="8321" href="#8321">[8321]</a><a href="#IScripts_ProgressivelySubtractGold" class="la">IScripts_ProgressivelySubtractGold:</a><span class="ce">; [$8321]</span></span>
<span class="l"><a class="anc" name="8321" href="#8321">[8321]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#IScripts_UpdatePortraitAnimation">IScripts_UpdatePortraitAnimation</a></span></span><span class="ce">; Update the portrait animation.</span></span>
<span class="l"><a class="anc" name="8324" href="#8324">[8324]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#Temp_0203">Temp_0203</a></span></span><span class="ce">; Load the upper byte of the gold amount.</span></span>
<span class="l"><a class="anc" name="8327" href="#8327">[8327]</a><span class="cd"><span class="i">BMI</span> <span class="o"><a href="#@_subtractLowerByte">@_subtractLowerByte</a></span></span><span class="ce">; If the upper byte is 0, jump.</span></span>
<span class="l"><a class="anc" name="8329" href="#8329">[8329]</a><span class="cd"><span class="i">ORA</span> <span class="o">a:<a href="RAM.html#Temp_0202">Temp_0202</a></span></span><span class="ce">; OR with the lower byte.</span></span>
<span class="l"><a class="anc" name="832c" href="#832c">[832c]</a><span class="cd"><span class="i">BEQ</span> <span class="o"><a href="#@_subtractUpperByte">@_subtractUpperByte</a></span></span><span class="ce">; If neither has a value, jump.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Subtract 10 from the counter of gold remaining to take.
; If at any point we underflow the lower byte, subtract 1
; from the upper byte.
;
</div><span class="l"><a class="anc" name="832e" href="#832e">[832e]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#Temp_0202">Temp_0202</a></span></span><span class="ce">; Load the lower byte of gold.</span></span>
<span class="l"><a class="anc" name="8331" href="#8331">[8331]</a><span class="cd"><span class="i">SEC</span></span></span>
<span class="l"><a class="anc" name="8332" href="#8332">[8332]</a><span class="cd"><span class="i">SBC</span> <span class="o">#$0a</span></span><span class="ce">; Subtract 10.</span></span>
<span class="l"><a class="anc" name="8334" href="#8334">[8334]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#Temp_0202">Temp_0202</a></span></span><span class="ce">; And store as the lower byte.</span></span>
<span class="l"><a class="anc" name="8337" href="#8337">[8337]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#Temp_0203">Temp_0203</a></span></span><span class="ce">; Load the upper byte of gold.</span></span>
<span class="l"><a class="anc" name="833a" href="#833a">[833a]</a><span class="cd"><span class="i">SBC</span> <span class="o">#$00</span></span><span class="ce">; If the lower is now &lt; 0, subtract 1 from upper.</span></span>
<span class="l"><a class="anc" name="833c" href="#833c">[833c]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#Temp_0203">Temp_0203</a></span></span><span class="ce">; And store it.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Remove 10 gold from the player.
;
</div><span class="l"><a class="anc" name="833f" href="#833f">[833f]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$0a</span></span><span class="ce">; A = 10</span></span>
<span class="l"><a class="anc" name="8341" href="#8341">[8341]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Temp_Int24">Temp_Int24</a></span></span><span class="ce">; Store as the lower byte to subtract.</span></span>
<span class="l"><a class="anc" name="8343" href="#8343">[8343]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$00</span></span><span class="ce">; A = 0</span></span>
<span class="l"><a class="anc" name="8345" href="#8345">[8345]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Temp_Int24_M">Temp_Int24_M</a></span></span><span class="ce">; Store as the upper byte to subtract.</span></span>
<span class="l"><a class="anc" name="8347" href="#8347">[8347]</a><span class="cd"><span class="i">JSR</span> <span class="o">$f9a5</span></span><span class="ce">; Subtract the gold from the player.</span></span>
<span class="l"><a class="anc" name="834a" href="#834a">[834a]</a><span class="cd"><span class="i">JMP</span> <span class="o"><a href="#IScripts_ProgressivelySubtractGold">IScripts_ProgressivelySubtractGold</a></span></span><span class="ce">; And loop.</span></span>
<span class="l"></span>
<a name=":834d:@_subtractUpperByte"></a><span class="l"><a class="anc" name="834d" href="#834d">[834d]</a><a href="#:834d:@_subtractUpperByte" class="lla">@_subtractUpperByte:</a><span class="ce">; [$834d]</span></span>
<span class="l"><a class="anc" name="834d" href="#834d">[834d]</a><span class="cd"><span class="i">DEC</span> <span class="o">a:<a href="RAM.html#Temp_0203">Temp_0203</a></span></span><span class="ce">; Subtract 1 from the upper byte.</span></span>
<span class="l"><a class="anc" name="8350" href="#8350">[8350]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$3c</span></span><span class="ce">; Use 60 for the lower byte.</span></span>
<span class="l"><a class="anc" name="8352" href="#8352">[8352]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#Temp_0202">Temp_0202</a></span></span><span class="ce">; And store it.</span></span>
<span class="l"></span>
<a name=":8355:@_subtractLowerByte"></a><span class="l"><a class="anc" name="8355" href="#8355">[8355]</a><a href="#:8355:@_subtractLowerByte" class="lla">@_subtractLowerByte:</a><span class="ce">; [$8355]</span></span>
<span class="l"><a class="anc" name="8355" href="#8355">[8355]</a><span class="cd"><span class="i">DEC</span> <span class="o">a:<a href="RAM.html#Temp_0202">Temp_0202</a></span></span><span class="ce">; Subtract 1 from the lower byte.</span></span>
<span class="l"><a class="anc" name="8358" href="#8358">[8358]</a><span class="cd"><span class="i">BNE</span> <span class="o"><a href="#IScripts_ProgressivelySubtractGold">IScripts_ProgressivelySubtractGold</a></span></span><span class="ce">; If not 0, loop.</span></span>
<span class="l"><a class="anc" name="835a" href="#835a">[835a]</a><span class="cd"><span class="i">RTS</span></span><span class="ce">; Else, we're done. Return.</span></span>
<span class="l"></span>
<span class="l"></span>
</pre><pre><a name="IScriptAction_SpendGold"></a><div class="cp">;============================================================================
; IScript Action $05: Spend Gold
;
; This takes the specified amount of gold away from the player.
;
; Script Parameters:
;
;     1. Gold amount (2 bytes)
;
; XREFS:
;     <a href="#IScriptActions_L">IScriptActions_L</a> [$PRG12::8280]
;============================================================================
</div><span class="l"><a class="anc" name="835b" href="#835b">[835b]</a><a href="#IScriptAction_SpendGold" class="la">IScriptAction_SpendGold:</a><span class="ce">; [$835b]</span></span>
<div class="c">;
; Load the gold amount parameters for the script.
;
</div><span class="l"><a class="anc" name="835b" href="#835b">[835b]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#IScripts_LoadByte">IScripts_LoadByte</a></span></span><span class="ce">; Load the lower byte of the gold amount.</span></span>
<span class="l"><a class="anc" name="835e" href="#835e">[835e]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#Temp_0202">Temp_0202</a></span></span><span class="ce">; Store it.</span></span>
<span class="l"><a class="anc" name="8361" href="#8361">[8361]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#IScripts_LoadByte">IScripts_LoadByte</a></span></span><span class="ce">; Load the upper byte of the gold amount.</span></span>
<span class="l"><a class="anc" name="8364" href="#8364">[8364]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#Temp_0203">Temp_0203</a></span></span><span class="ce">; Store it</span></span>
<span class="l"><a class="anc" name="8367" href="#8367">[8367]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#Temp_0202">Temp_0202</a></span></span><span class="ce">; Load the lower byte again.</span></span>
<span class="l"><a class="anc" name="836a" href="#836a">[836a]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Temp_Int24">Temp_Int24</a></span></span><span class="ce">; Store it in <a href="RAM.html#Temp_Int24">Temp_Int24</a> for comparison.</span></span>
<span class="l"><a class="anc" name="836c" href="#836c">[836c]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#Temp_0203">Temp_0203</a></span></span><span class="ce">; Lower the upper byte again.</span></span>
<span class="l"><a class="anc" name="836f" href="#836f">[836f]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Temp_Int24_M">Temp_Int24_M</a></span></span><span class="ce">; And store it in <a href="RAM.html#Temp_Int24">Temp_Int24</a> for comparison.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Validate that there's enough money. If there is, spend
; it. If not, display an error message.
;
</div><span class="l"><a class="anc" name="8371" href="#8371">[8371]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#IScripts_CheckEnoughMoney">IScripts_CheckEnoughMoney</a></span></span><span class="ce">; Check if there's enough money to pay.</span></span>
<span class="l"><a class="anc" name="8374" href="#8374">[8374]</a><span class="cd"><span class="i">BCC</span> <span class="o"><a href="#IScripts_ShowNotEnoughMoney">IScripts_ShowNotEnoughMoney</a></span></span><span class="ce">; If not, show the Not Enough Money message.</span></span>
<span class="l"><a class="anc" name="8376" href="#8376">[8376]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#IScripts_ProgressivelySubtractGold">IScripts_ProgressivelySubtractGold</a></span></span><span class="ce">; Progressively subtract the gold, animating it.</span></span>
<span class="l"><a class="anc" name="8379" href="#8379">[8379]</a><span class="cd"><span class="i">JMP</span> <span class="o"><a href="#IScripts_InvokeNextAction">IScripts_InvokeNextAction</a></span></span><span class="ce">; Invoke the next action in the script.</span></span>
<span class="l"></span>
<span class="l"></span>
</pre><pre><a name="IScripts_ShowNotEnoughMoney"></a><div class="cp">;============================================================================
; Show that the player doesn't have enough money.
;
; This will progressively show this in a textbox, and
; then end the script.
;
; INPUTS:
;     None.
;
; OUTPUTS:
;     None.
;
; CALLS:
;     <a href="PRG15_MIRROR.html#Messages_Load">Messages_Load</a>
;     <a href="#IScripts_UpdatePortraitAnimation">IScripts_UpdatePortraitAnimation</a>
;     <a href="PRG15_MIRROR.html#TextBox_ShowNextChar">TextBox_ShowNextChar</a>
;     <a href="#TextBox_CheckShouldContinueOrDismissMessage">TextBox_CheckShouldContinueOrDismissMessage</a>
;     <a href="#IScriptAction_EndScript">IScriptAction_EndScript</a>
;
; XREFS:
;     <a href="#IScriptAction_OpenShop">IScriptAction_OpenShop</a>
;     <a href="#IScriptAction_SpendGold">IScriptAction_SpendGold</a>
;============================================================================
</div><span class="l"><a class="anc" name="837c" href="#837c">[837c]</a><a href="#IScripts_ShowNotEnoughMoney" class="la">IScripts_ShowNotEnoughMoney:</a><span class="ce">; [$837c]</span></span>
<div class="c">;
; Display the Not Enough Money message.
;
</div><span class="l"><a class="anc" name="837c" href="#837c">[837c]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$03</span></span><span class="ce">; Set the message ID.</span></span>
<span class="l"></span>
<div class="c">;
; v-- Fall through --v
;
</div><span class="l"></span>
<span class="l"></span>
</pre><pre><a name="IScripts_ShowFinalMessage"></a><div class="cp">;============================================================================
; Show a message for shop purposes, ending the script once finished.
;
; This will show the message and, once dismissed or completed,
; end the current IScript.
;
; INPUTS:
;     A:
;         The ID of the message to show.
;
; OUTPUTS:
;     None.
;
; CALLS:
;     <a href="#IScriptAction_EndScript">IScriptAction_EndScript</a>
;     <a href="#IScripts_UpdatePortraitAnimation">IScripts_UpdatePortraitAnimation</a>
;     <a href="PRG15_MIRROR.html#Messages_Load">Messages_Load</a>
;     <a href="PRG15_MIRROR.html#TextBox_ShowNextChar">TextBox_ShowNextChar</a>
;     <a href="#TextBox_CheckShouldContinueOrDismissMessage">TextBox_CheckShouldContinueOrDismissMessage</a>
;
;
; XREFS:
;     <a href="#IScriptAction_OpenShop">IScriptAction_OpenShop</a>
;     <a href="#IScriptAction_ShowSellMenu">IScriptAction_ShowSellMenu</a>
;============================================================================
</div><span class="l"><a class="anc" name="837e" href="#837e">[837e]</a><a href="#IScripts_ShowFinalMessage" class="la">IScripts_ShowFinalMessage:</a><span class="ce">; [$837e]</span></span>
<span class="l"><a class="anc" name="837e" href="#837e">[837e]</a><span class="cd"><span class="i">JSR</span> <span class="o">$f3f5</span></span><span class="ce">; Load the message string.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name=":8381:@_messageLoop"></a><div class="c">;
; Progressively write the message.
;
</div><span class="l"><a class="anc" name="8381" href="#8381">[8381]</a><a href="#:8381:@_messageLoop" class="lla">@_messageLoop:</a><span class="ce">; [$8381]</span></span>
<span class="l"><a class="anc" name="8381" href="#8381">[8381]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#IScripts_UpdatePortraitAnimation">IScripts_UpdatePortraitAnimation</a></span></span><span class="ce">; Update the portrait animation.</span></span>
<span class="l"><a class="anc" name="8384" href="#8384">[8384]</a><span class="cd"><span class="i">JSR</span> <span class="o">$f466</span></span><span class="ce">; Show the next character in the textbox.</span></span>
<span class="l"><a class="anc" name="8387" href="#8387">[8387]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#TextBox_CheckShouldContinueOrDismissMessage">TextBox_CheckShouldContinueOrDismissMessage</a></span></span><span class="ce">; Check whether to continue or dismiss.</span></span>
<span class="l"><a class="anc" name="838a" href="#838a">[838a]</a><span class="cd"><span class="i">BCS</span> <span class="o"><a href="#@_endScript">@_endScript</a></span></span><span class="ce">; If dismissed, end the script.</span></span>
<span class="l"><a class="anc" name="838c" href="#838c">[838c]</a><span class="cd"><span class="i">BNE</span> <span class="o"><a href="#@_messageLoop">@_messageLoop</a></span></span><span class="ce">; Else, if the message is not finished, loop.</span></span>
<span class="l"></span>
<a name=":838e:@_endScript"></a><span class="l"><a class="anc" name="838e" href="#838e">[838e]</a><a href="#:838e:@_endScript" class="lla">@_endScript:</a><span class="ce">; [$838e]</span></span>
<span class="l"><a class="anc" name="838e" href="#838e">[838e]</a><span class="cd"><span class="i">JMP</span> <span class="o"><a href="#IScriptAction_EndScript">IScriptAction_EndScript</a></span></span><span class="ce">; End processing of the script.</span></span>
<span class="l"></span>
<span class="l"></span>
</pre><pre><a name="IScriptAction_SetSpawnPoint"></a><div class="cp">;============================================================================
; IScript Action $06: Set Spawn Point
;
; Sets the spawn point to the specified temple ID.
;
; Only the furthest temple will be set. If backtracking,
; to an earlier spawn point, then ew spawn point will
; not be set.
;
; Script Parameters:
;
;     1. Temple ID (1 byte)
;
; XREFS:
;     <a href="#IScriptActions_L">IScriptActions_L</a> [$PRG12::8281]
;============================================================================
</div><span class="l"><a class="anc" name="8391" href="#8391">[8391]</a><a href="#IScriptAction_SetSpawnPoint" class="la">IScriptAction_SetSpawnPoint:</a><span class="ce">; [$8391]</span></span>
<span class="l"><a class="anc" name="8391" href="#8391">[8391]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#IScripts_LoadByte">IScripts_LoadByte</a></span></span><span class="ce">; Load the temple/area ID.</span></span>
<span class="l"><a class="anc" name="8394" href="#8394">[8394]</a><span class="cd"><span class="i">CMP</span> <span class="o">a:<a href="RAM.html#TempleSpawnPoint">TempleSpawnPoint</a></span></span><span class="ce">; Compare against the current spawn point.</span></span>
<span class="l"><a class="anc" name="8397" href="#8397">[8397]</a><span class="cd"><span class="i">BCC</span> <span class="o"><a href="#@_nextAction">@_nextAction</a></span></span><span class="ce">; If the older spawn point is further in the game, don't update.</span></span>
<span class="l"><a class="anc" name="8399" href="#8399">[8399]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#TempleSpawnPoint">TempleSpawnPoint</a></span></span><span class="ce">; Else, set the new spawn point.</span></span>
<span class="l"></span>
<a name=":839c:@_nextAction"></a><span class="l"><a class="anc" name="839c" href="#839c">[839c]</a><a href="#:839c:@_nextAction" class="lla">@_nextAction:</a><span class="ce">; [$839c]</span></span>
<span class="l"><a class="anc" name="839c" href="#839c">[839c]</a><span class="cd"><span class="i">JMP</span> <span class="o"><a href="#IScripts_InvokeNextAction">IScripts_InvokeNextAction</a></span></span><span class="ce">; Invoke the next action in the script.</span></span>
<span class="l"></span>
<span class="l"></span>
</pre><pre><a name="IScriptAction_AddInventoryItem"></a><div class="cp">;============================================================================
; IScript Action $07: Adds an item with the specified ID to the player's
; inventory.
;
; This will show a textbox with the item's image and name,
; waiting for the player to press a button to dismiss it.
;
; Script Parameters:
;
;     1. Item ID (1 byte)
;
; XREFS:
;     <a href="#IScriptActions_L">IScriptActions_L</a> [$PRG12::8282]
;============================================================================
</div><span class="l"><a class="anc" name="839f" href="#839f">[839f]</a><a href="#IScriptAction_AddInventoryItem" class="la">IScriptAction_AddInventoryItem:</a><span class="ce">; [$839f]</span></span>
<span class="l"><a class="anc" name="839f" href="#839f">[839f]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#IScripts_LoadByte">IScripts_LoadByte</a></span></span><span class="ce">; Load the item ID parameter.</span></span>
<span class="l"><a class="anc" name="83a2" href="#83a2">[83a2]</a><span class="cd"><span class="i">PHA</span></span><span class="ce">; Push to the stack, twice.</span></span>
<span class="l"><a class="anc" name="83a3" href="#83a3">[83a3]</a><span class="cd"><span class="i">PHA</span></span></span>
<span class="l"><a class="anc" name="83a4" href="#83a4">[83a4]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#Player_AddToInventory">Player_AddToInventory</a></span></span><span class="ce">; Add the item to the inventory.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Begin showing the textbox indicating the added item.
;
; The text position will be inset 1 from the standard text
; position (2 blocks in from the textbox border), allowing
; room for the item image.
;
</div><span class="l"><a class="anc" name="83a7" href="#83a7">[83a7]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#IScriptAction_AddInventoryItem_ClearTextBox">IScriptAction_AddInventoryItem_ClearTextBox</a></span></span><span class="ce">; Clear the textbox and prepare for showing the item.</span></span>
<span class="l"><a class="anc" name="83aa" href="#83aa">[83aa]</a><span class="cd"><span class="i">LDX</span> <span class="o">a:<a href="RAM.html#TextBox_X">TextBox_X</a></span></span><span class="ce">; X = Textbox X location.</span></span>
<span class="l"><a class="anc" name="83ad" href="#83ad">[83ad]</a><span class="cd"><span class="i">INX</span></span><span class="ce">; X += 2</span></span>
<span class="l"><a class="anc" name="83ae" href="#83ae">[83ae]</a><span class="cd"><span class="i">INX</span></span></span>
<span class="l"><a class="anc" name="83af" href="#83af">[83af]</a><span class="cd"><span class="i">STX</span> <span class="o"><a href="RAM.html#TextBox_ContentsX">TextBox_ContentsX</a></span></span><span class="ce">; Store as the text X position.</span></span>
<span class="l"><a class="anc" name="83b1" href="#83b1">[83b1]</a><span class="cd"><span class="i">LDX</span> <span class="o">a:<a href="RAM.html#TextBox_Y">TextBox_Y</a></span></span><span class="ce">; X = Textbox Y position.</span></span>
<span class="l"><a class="anc" name="83b4" href="#83b4">[83b4]</a><span class="cd"><span class="i">INX</span></span><span class="ce">; X += 2</span></span>
<span class="l"><a class="anc" name="83b5" href="#83b5">[83b5]</a><span class="cd"><span class="i">INX</span></span></span>
<span class="l"><a class="anc" name="83b6" href="#83b6">[83b6]</a><span class="cd"><span class="i">STX</span> <span class="o"><a href="RAM.html#TextBox_ContentsY">TextBox_ContentsY</a></span></span><span class="ce">; Store as the text Y position.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Draw the item image and name in the textbox.
;
</div><span class="l"><a class="anc" name="83b8" href="#83b8">[83b8]</a><span class="cd"><span class="i">PLA</span></span><span class="ce">; Pull the item ID from the stack.</span></span>
<span class="l"><a class="anc" name="83b9" href="#83b9">[83b9]</a><span class="cd"><span class="i">LDX</span> <span class="o">#$00</span></span><span class="ce">; X = 0</span></span>
<span class="l"><a class="anc" name="83bb" href="#83bb">[83bb]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#TextBox_DrawItemImage">TextBox_DrawItemImage</a></span></span><span class="ce">; Draw the item image.</span></span>
<span class="l"><a class="anc" name="83be" href="#83be">[83be]</a><span class="cd"><span class="i">INC</span> <span class="o"><a href="RAM.html#TextBox_ContentsY">TextBox_ContentsY</a></span></span><span class="ce">; Text Y position += 3</span></span>
<span class="l"><a class="anc" name="83c0" href="#83c0">[83c0]</a><span class="cd"><span class="i">INC</span> <span class="o"><a href="RAM.html#TextBox_ContentsY">TextBox_ContentsY</a></span></span></span>
<span class="l"><a class="anc" name="83c2" href="#83c2">[83c2]</a><span class="cd"><span class="i">INC</span> <span class="o"><a href="RAM.html#TextBox_ContentsY">TextBox_ContentsY</a></span></span></span>
<span class="l"><a class="anc" name="83c4" href="#83c4">[83c4]</a><span class="cd"><span class="i">PLA</span></span><span class="ce">; Pull the item ID from the stack.</span></span>
<span class="l"><a class="anc" name="83c5" href="#83c5">[83c5]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#TextBox_DrawItemName">TextBox_DrawItemName</a></span></span><span class="ce">; Draw the item name.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name=":83c8:@_textboxLoop"></a><div class="c">;
; Update any portrait and textbox terminators until a
; button is pressed.
;
</div><span class="l"><a class="anc" name="83c8" href="#83c8">[83c8]</a><a href="#:83c8:@_textboxLoop" class="lla">@_textboxLoop:</a><span class="ce">; [$83c8]</span></span>
<span class="l"><a class="anc" name="83c8" href="#83c8">[83c8]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#IScripts_UpdatePortraitAnimation">IScripts_UpdatePortraitAnimation</a></span></span><span class="ce">; Update the portrait animation.</span></span>
<span class="l"><a class="anc" name="83cb" href="#83cb">[83cb]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#TextBox_DrawUpArrowTerminatorSymbol">TextBox_DrawUpArrowTerminatorSymbol</a></span></span><span class="ce">; Draw the Up arrow terminator symbol.</span></span>
<span class="l"><a class="anc" name="83ce" href="#83ce">[83ce]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="RAM.html#Joy1_ChangedButtonMask">Joy1_ChangedButtonMask</a></span></span><span class="ce">; Load any changed controller buttons.</span></span>
<span class="l"><a class="anc" name="83d0" href="#83d0">[83d0]</a><span class="cd"><span class="i">BPL</span> <span class="o"><a href="#@_textboxLoop">@_textboxLoop</a></span></span><span class="ce">; If not pressed, loop.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Prepare to clear out the textbox and then invoke the next
; action in the script.
;
</div><span class="l"><a class="anc" name="83d2" href="#83d2">[83d2]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#IScripts_PositionAndFillPlaceholderText">IScripts_PositionAndFillPlaceholderText</a></span></span><span class="ce">; Fill the textbox with invisible placeholder text.</span></span>
<span class="l"><a class="anc" name="83d5" href="#83d5">[83d5]</a><span class="cd"><span class="i">JMP</span> <span class="o"><a href="#IScripts_InvokeNextAction">IScripts_InvokeNextAction</a></span></span><span class="ce">; Invoke the next action in the script.</span></span>
<span class="l"></span>
<span class="l"></span>
</pre><pre><a name="IScriptAction_OpenShop"></a><div class="cp">;============================================================================
; IScript Action $08: Open Shop
;
; This will load an address for shop item data, and then
; display the items in a box.
;
; Script Parameters:
;
;     1. The address of the shop items (2 bytes)
;
; XREFS:
;     <a href="#IScriptActions_L">IScriptActions_L</a> [$PRG12::8283]
;============================================================================
</div><span class="l"><a class="anc" name="83d8" href="#83d8">[83d8]</a><a href="#IScriptAction_OpenShop" class="la">IScriptAction_OpenShop:</a><span class="ce">; [$83d8]</span></span>
<span class="l"><a class="anc" name="83d8" href="#83d8">[83d8]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$14</span></span><span class="ce">; "What would you like?"</span></span>
<span class="l"><a class="anc" name="83da" href="#83da">[83da]</a><span class="cd"><span class="i">JSR</span> <span class="o">$f3f5</span></span></span>
<span class="l"></span>
<a name=":83dd:@LAB_PRG12__83dd"></a><span class="l"><a class="anc" name="83dd" href="#83dd">[83dd]</a><a href="#:83dd:@LAB_PRG12__83dd" class="lla">@LAB_PRG12__83dd:</a><span class="ce">; [$83dd]</span></span>
<span class="l"><a class="anc" name="83dd" href="#83dd">[83dd]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#IScripts_UpdatePortraitAnimation">IScripts_UpdatePortraitAnimation</a></span></span></span>
<span class="l"><a class="anc" name="83e0" href="#83e0">[83e0]</a><span class="cd"><span class="i">JSR</span> <span class="o">$f466</span></span></span>
<span class="l"><a class="anc" name="83e3" href="#83e3">[83e3]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#TextBox_CheckShouldContinueOrDismissMessage">TextBox_CheckShouldContinueOrDismissMessage</a></span></span></span>
<span class="l"><a class="anc" name="83e6" href="#83e6">[83e6]</a><span class="cd"><span class="i">BCS</span> <span class="o"><a href="#@_endScript">@_endScript</a></span></span></span>
<span class="l"><a class="anc" name="83e8" href="#83e8">[83e8]</a><span class="cd"><span class="i">BNE</span> <span class="o"><a href="#@LAB_PRG12__83dd">@LAB_PRG12__83dd</a></span></span></span>
<span class="l"><a class="anc" name="83ea" href="#83ea">[83ea]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#IScripts_LoadByte">IScripts_LoadByte</a></span></span></span>
<span class="l"><a class="anc" name="83ed" href="#83ed">[83ed]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Temp_Int24">Temp_Int24</a></span></span><span class="ce">; Probably shop inventory table</span></span>
<span class="l"><a class="anc" name="83ef" href="#83ef">[83ef]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#IScripts_LoadByte">IScripts_LoadByte</a></span></span></span>
<span class="l"><a class="anc" name="83f2" href="#83f2">[83f2]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Temp_Int24_M">Temp_Int24_M</a></span></span></span>
<span class="l"><a class="anc" name="83f4" href="#83f4">[83f4]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#Shop_Populate">Shop_Populate</a></span></span></span>
<span class="l"><a class="anc" name="83f7" href="#83f7">[83f7]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#Shop_Draw">Shop_Draw</a></span></span></span>
<span class="l"><a class="anc" name="83fa" href="#83fa">[83fa]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#IScripts_WaitForMenuInput">IScripts_WaitForMenuInput</a></span></span></span>
<span class="l"><a class="anc" name="83fd" href="#83fd">[83fd]</a><span class="cd"><span class="i">BCC</span> <span class="o"><a href="#@LAB_PRG12__8402">@LAB_PRG12__8402</a></span></span></span>
<span class="l"></span>
<a name=":83ff:@_endScript"></a><span class="l"><a class="anc" name="83ff" href="#83ff">[83ff]</a><a href="#:83ff:@_endScript" class="lla">@_endScript:</a><span class="ce">; [$83ff]</span></span>
<span class="l"><a class="anc" name="83ff" href="#83ff">[83ff]</a><span class="cd"><span class="i">JMP</span> <span class="o"><a href="#IScriptAction_EndScript">IScriptAction_EndScript</a></span></span></span>
<span class="l"></span>
<a name=":8402:@LAB_PRG12__8402"></a><span class="l"><a class="anc" name="8402" href="#8402">[8402]</a><a href="#:8402:@LAB_PRG12__8402" class="lla">@LAB_PRG12__8402:</a><span class="ce">; [$8402]</span></span>
<span class="l"><a class="anc" name="8402" href="#8402">[8402]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#Shop_GetPlayerHasSelectedItem">Shop_GetPlayerHasSelectedItem</a></span></span></span>
<span class="l"><a class="anc" name="8405" href="#8405">[8405]</a><span class="cd"><span class="i">BCS</span> <span class="o"><a href="#@LAB_PRG12__8469">@LAB_PRG12__8469</a></span></span></span>
<span class="l"><a class="anc" name="8407" href="#8407">[8407]</a><span class="cd"><span class="i">LDX</span> <span class="o">a:<a href="RAM.html#Menu_CursorPos">Menu_CursorPos</a></span></span></span>
<span class="l"><a class="anc" name="840a" href="#840a">[840a]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="RAM.html#DataArray">DataArray</a>,X</span></span></span>
<span class="l"><a class="anc" name="840d" href="#840d">[840d]</a><span class="cd"><span class="i">CMP</span> <span class="o">#$80</span></span></span>
<span class="l"><a class="anc" name="840f" href="#840f">[840f]</a><span class="cd"><span class="i">BEQ</span> <span class="o"><a href="#@LAB_PRG12__8439">@LAB_PRG12__8439</a></span></span></span>
<span class="l"><a class="anc" name="8411" href="#8411">[8411]</a><span class="cd"><span class="i">CMP</span> <span class="o">#$81</span></span></span>
<span class="l"><a class="anc" name="8413" href="#8413">[8413]</a><span class="cd"><span class="i">BEQ</span> <span class="o"><a href="#@LAB_PRG12__8439">@LAB_PRG12__8439</a></span></span></span>
<span class="l"><a class="anc" name="8415" href="#8415">[8415]</a><span class="cd"><span class="i">CMP</span> <span class="o">#$82</span></span></span>
<span class="l"><a class="anc" name="8417" href="#8417">[8417]</a><span class="cd"><span class="i">BEQ</span> <span class="o"><a href="#@LAB_PRG12__8439">@LAB_PRG12__8439</a></span></span></span>
<span class="l"><a class="anc" name="8419" href="#8419">[8419]</a><span class="cd"><span class="i">CMP</span> <span class="o">#$83</span></span></span>
<span class="l"><a class="anc" name="841b" href="#841b">[841b]</a><span class="cd"><span class="i">BEQ</span> <span class="o"><a href="#@LAB_PRG12__8439">@LAB_PRG12__8439</a></span></span></span>
<span class="l"><a class="anc" name="841d" href="#841d">[841d]</a><span class="cd"><span class="i">CMP</span> <span class="o">#$92</span></span></span>
<span class="l"><a class="anc" name="841f" href="#841f">[841f]</a><span class="cd"><span class="i">BEQ</span> <span class="o"><a href="#@LAB_PRG12__8439">@LAB_PRG12__8439</a></span></span></span>
<span class="l"><a class="anc" name="8421" href="#8421">[8421]</a><span class="cd"><span class="i">CMP</span> <span class="o">#$8a</span></span></span>
<span class="l"><a class="anc" name="8423" href="#8423">[8423]</a><span class="cd"><span class="i">BEQ</span> <span class="o"><a href="#@LAB_PRG12__8439">@LAB_PRG12__8439</a></span></span></span>
<span class="l"><a class="anc" name="8425" href="#8425">[8425]</a><span class="cd"><span class="i">CMP</span> <span class="o">#$93</span></span></span>
<span class="l"><a class="anc" name="8427" href="#8427">[8427]</a><span class="cd"><span class="i">BEQ</span> <span class="o"><a href="#@LAB_PRG12__8439">@LAB_PRG12__8439</a></span></span></span>
<span class="l"><a class="anc" name="8429" href="#8429">[8429]</a><span class="cd"><span class="i">CMP</span> <span class="o">#$94</span></span></span>
<span class="l"><a class="anc" name="842b" href="#842b">[842b]</a><span class="cd"><span class="i">BEQ</span> <span class="o"><a href="#@LAB_PRG12__8439">@LAB_PRG12__8439</a></span></span></span>
<span class="l"><a class="anc" name="842d" href="#842d">[842d]</a><span class="cd"><span class="i">JSR</span> <span class="o">$f785</span></span></span>
<span class="l"><a class="anc" name="8430" href="#8430">[8430]</a><span class="cd"><span class="i">TAX</span></span></span>
<span class="l"><a class="anc" name="8431" href="#8431">[8431]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="RAM.html#NumberOfWeapons">NumberOfWeapons</a>,X</span></span><span class="ce">; Number of weapons in the player's inventory.</span></span>
<span class="l"><a class="anc" name="8434" href="#8434">[8434]</a><span class="cd"><span class="i">CMP</span> <span class="o"><a href="#MAX_INVENTORY_SLOTS">MAX_INVENTORY_SLOTS</a>,X</span></span></span>
<span class="l"><a class="anc" name="8437" href="#8437">[8437]</a><span class="cd"><span class="i">BEQ</span> <span class="o"><a href="#@LAB_PRG12__8469">@LAB_PRG12__8469</a></span></span></span>
<span class="l"></span>
<a name=":8439:@LAB_PRG12__8439"></a><span class="l"><a class="anc" name="8439" href="#8439">[8439]</a><a href="#:8439:@LAB_PRG12__8439" class="lla">@LAB_PRG12__8439:</a><span class="ce">; [$8439]</span></span>
<span class="l"><a class="anc" name="8439" href="#8439">[8439]</a><span class="cd"><span class="i">LDX</span> <span class="o">a:<a href="RAM.html#Menu_CursorPos">Menu_CursorPos</a></span></span></span>
<span class="l"><a class="anc" name="843c" href="#843c">[843c]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="RAM.html#ShopItemCostsL">ShopItemCostsL</a>,X</span></span></span>
<span class="l"><a class="anc" name="843f" href="#843f">[843f]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Temp_Int24">Temp_Int24</a></span></span></span>
<span class="l"><a class="anc" name="8441" href="#8441">[8441]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#Temp_0202">Temp_0202</a></span></span></span>
<span class="l"><a class="anc" name="8444" href="#8444">[8444]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="RAM.html#ShopItemCostsU">ShopItemCostsU</a>,X</span></span></span>
<span class="l"><a class="anc" name="8447" href="#8447">[8447]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Temp_Int24_M">Temp_Int24_M</a></span></span></span>
<span class="l"><a class="anc" name="8449" href="#8449">[8449]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#Temp_0203">Temp_0203</a></span></span></span>
<span class="l"><a class="anc" name="844c" href="#844c">[844c]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#IScripts_CheckEnoughMoney">IScripts_CheckEnoughMoney</a></span></span></span>
<span class="l"><a class="anc" name="844f" href="#844f">[844f]</a><span class="cd"><span class="i">BCS</span> <span class="o"><a href="#@LAB_PRG12__8457">@LAB_PRG12__8457</a></span></span></span>
<span class="l"><a class="anc" name="8451" href="#8451">[8451]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#Maybe_Shop_DrawTextBox">Maybe_Shop_DrawTextBox</a></span></span></span>
<span class="l"><a class="anc" name="8454" href="#8454">[8454]</a><span class="cd"><span class="i">JMP</span> <span class="o"><a href="#IScripts_ShowNotEnoughMoney">IScripts_ShowNotEnoughMoney</a></span></span></span>
<span class="l"></span>
<a name=":8457:@LAB_PRG12__8457"></a><span class="l"><a class="anc" name="8457" href="#8457">[8457]</a><a href="#:8457:@LAB_PRG12__8457" class="lla">@LAB_PRG12__8457:</a><span class="ce">; [$8457]</span></span>
<span class="l"><a class="anc" name="8457" href="#8457">[8457]</a><span class="cd"><span class="i">LDX</span> <span class="o">a:<a href="RAM.html#Menu_CursorPos">Menu_CursorPos</a></span></span></span>
<span class="l"><a class="anc" name="845a" href="#845a">[845a]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="RAM.html#DataArray">DataArray</a>,X</span></span></span>
<span class="l"><a class="anc" name="845d" href="#845d">[845d]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#Player_AddToInventory">Player_AddToInventory</a></span></span></span>
<span class="l"><a class="anc" name="8460" href="#8460">[8460]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#IScripts_ProgressivelySubtractGold">IScripts_ProgressivelySubtractGold</a></span></span></span>
<span class="l"><a class="anc" name="8463" href="#8463">[8463]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#Maybe_Shop_DrawTextBox">Maybe_Shop_DrawTextBox</a></span></span></span>
<span class="l"><a class="anc" name="8466" href="#8466">[8466]</a><span class="cd"><span class="i">JMP</span> <span class="o"><a href="#IScripts_InvokeNextAction">IScripts_InvokeNextAction</a></span></span></span>
<span class="l"></span>
<a name=":8469:@LAB_PRG12__8469"></a><span class="l"><a class="anc" name="8469" href="#8469">[8469]</a><a href="#:8469:@LAB_PRG12__8469" class="lla">@LAB_PRG12__8469:</a><span class="ce">; [$8469]</span></span>
<span class="l"><a class="anc" name="8469" href="#8469">[8469]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#Maybe_Shop_DrawTextBox">Maybe_Shop_DrawTextBox</a></span></span></span>
<span class="l"><a class="anc" name="846c" href="#846c">[846c]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$06</span></span></span>
<span class="l"><a class="anc" name="846e" href="#846e">[846e]</a><span class="cd"><span class="i">JMP</span> <span class="o"><a href="#IScripts_ShowFinalMessage">IScripts_ShowFinalMessage</a></span></span></span>
<span class="l"></span>
</pre><pre><a name="Maybe_Shop_DrawTextBox"></a><div class="cp">;============================================================================
; TODO: Document Maybe_Shop_DrawTextBox
;
; INPUTS:
;     None.
;
; OUTPUTS:
;     TODO
;
; XREFS:
;     <a href="#IScriptAction_OpenShop">IScriptAction_OpenShop</a>
;============================================================================
</div><span class="l"><a class="anc" name="8471" href="#8471">[8471]</a><a href="#Maybe_Shop_DrawTextBox" class="la">Maybe_Shop_DrawTextBox:</a><span class="ce">; [$8471]</span></span>
<span class="l"><a class="anc" name="8471" href="#8471">[8471]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#IScripts_UpdatePortraitAnimation">IScripts_UpdatePortraitAnimation</a></span></span></span>
<span class="l"><a class="anc" name="8474" href="#8474">[8474]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#IScripts_UpdatePortraitAnimation">IScripts_UpdatePortraitAnimation</a></span></span></span>
<span class="l"><a class="anc" name="8477" href="#8477">[8477]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#TextBox_Close">TextBox_Close</a></span></span></span>
<span class="l"><a class="anc" name="847a" href="#847a">[847a]</a><span class="cd"><span class="i">JMP</span> <span class="o"><a href="#TextBox_OpenForNPC">TextBox_OpenForNPC</a></span></span></span>
<span class="l"></span>
<a name="MAX_INVENTORY_SLOTS"></a><div class="c">;
; XREFS:
;     <a href="#IScriptAction_OpenShop">IScriptAction_OpenShop</a>
;     <a href="#Player_AddToInventory">Player_AddToInventory</a>
;
</div><span class="l"><a class="anc" name="847d" href="#847d">[847d]</a><a href="#MAX_INVENTORY_SLOTS" class="la">MAX_INVENTORY_SLOTS:</a><span class="ce">; [$847d]</span></span>
<span class="l"><a class="anc" name="847d" href="#847d">[847d]</a><span class="cd"><span class="i">db</span> <span class="o">$04</span></span><span class="ce">; [0]: Max weapons</span></span>
<span class="l"><a class="anc" name="847e" href="#847e">[847e]</a><span class="cd"><span class="i">db</span> <span class="o">$04</span></span><span class="ce">; [1]: Max armor</span></span>
<span class="l"><a class="anc" name="847f" href="#847f">[847f]</a><span class="cd"><span class="i">db</span> <span class="o">$04</span></span><span class="ce">; [2]: Max shields</span></span>
<span class="l"><a class="anc" name="8480" href="#8480">[8480]</a><span class="cd"><span class="i">db</span> <span class="o">$04</span></span><span class="ce">; [3]: Max spells</span></span>
<span class="l"><a class="anc" name="8481" href="#8481">[8481]</a><span class="cd"><span class="i">db</span> <span class="o">$08</span></span><span class="ce">; [4]: Max consumable items</span></span>
<span class="l"></span>
</pre><pre><a name="Shop_GetPlayerHasSelectedItem"></a><div class="cp">;============================================================================
; TODO: Document Shop_GetPlayerHasSelectedItem
;
; INPUTS:
;     None.
;
; OUTPUTS:
;     C
;
; XREFS:
;     <a href="#IScriptAction_OpenShop">IScriptAction_OpenShop</a>
;============================================================================
</div><span class="l"><a class="anc" name="8482" href="#8482">[8482]</a><a href="#Shop_GetPlayerHasSelectedItem" class="la">Shop_GetPlayerHasSelectedItem:</a><span class="ce">; [$8482]</span></span>
<span class="l"><a class="anc" name="8482" href="#8482">[8482]</a><span class="cd"><span class="i">LDX</span> <span class="o">a:<a href="RAM.html#Menu_CursorPos">Menu_CursorPos</a></span></span></span>
<span class="l"><a class="anc" name="8485" href="#8485">[8485]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="RAM.html#DataArray">DataArray</a>,X</span></span></span>
<span class="l"><a class="anc" name="8488" href="#8488">[8488]</a><span class="cd"><span class="i">BPL</span> <span class="o"><a href="#@LAB_PRG12__84bf">@LAB_PRG12__84bf</a></span></span></span>
<span class="l"><a class="anc" name="848a" href="#848a">[848a]</a><span class="cd"><span class="i">LDX</span> <span class="o">#$00</span></span></span>
<span class="l"><a class="anc" name="848c" href="#848c">[848c]</a><span class="cd"><span class="i">CMP</span> <span class="o">#$80</span></span></span>
<span class="l"><a class="anc" name="848e" href="#848e">[848e]</a><span class="cd"><span class="i">BEQ</span> <span class="o"><a href="#@LAB_PRG12__84b5">@LAB_PRG12__84b5</a></span></span></span>
<span class="l"><a class="anc" name="8490" href="#8490">[8490]</a><span class="cd"><span class="i">INX</span></span></span>
<span class="l"><a class="anc" name="8491" href="#8491">[8491]</a><span class="cd"><span class="i">CMP</span> <span class="o">#$81</span></span></span>
<span class="l"><a class="anc" name="8493" href="#8493">[8493]</a><span class="cd"><span class="i">BEQ</span> <span class="o"><a href="#@LAB_PRG12__84b5">@LAB_PRG12__84b5</a></span></span></span>
<span class="l"><a class="anc" name="8495" href="#8495">[8495]</a><span class="cd"><span class="i">INX</span></span></span>
<span class="l"><a class="anc" name="8496" href="#8496">[8496]</a><span class="cd"><span class="i">CMP</span> <span class="o">#$82</span></span></span>
<span class="l"><a class="anc" name="8498" href="#8498">[8498]</a><span class="cd"><span class="i">BEQ</span> <span class="o"><a href="#@LAB_PRG12__84b5">@LAB_PRG12__84b5</a></span></span></span>
<span class="l"><a class="anc" name="849a" href="#849a">[849a]</a><span class="cd"><span class="i">INX</span></span></span>
<span class="l"><a class="anc" name="849b" href="#849b">[849b]</a><span class="cd"><span class="i">CMP</span> <span class="o">#$83</span></span></span>
<span class="l"><a class="anc" name="849d" href="#849d">[849d]</a><span class="cd"><span class="i">BEQ</span> <span class="o"><a href="#@LAB_PRG12__84b5">@LAB_PRG12__84b5</a></span></span></span>
<span class="l"><a class="anc" name="849f" href="#849f">[849f]</a><span class="cd"><span class="i">INX</span></span></span>
<span class="l"><a class="anc" name="84a0" href="#84a0">[84a0]</a><span class="cd"><span class="i">CMP</span> <span class="o">#$92</span></span></span>
<span class="l"><a class="anc" name="84a2" href="#84a2">[84a2]</a><span class="cd"><span class="i">BEQ</span> <span class="o"><a href="#@LAB_PRG12__84b5">@LAB_PRG12__84b5</a></span></span></span>
<span class="l"><a class="anc" name="84a4" href="#84a4">[84a4]</a><span class="cd"><span class="i">INX</span></span></span>
<span class="l"><a class="anc" name="84a5" href="#84a5">[84a5]</a><span class="cd"><span class="i">CMP</span> <span class="o">#$8a</span></span></span>
<span class="l"><a class="anc" name="84a7" href="#84a7">[84a7]</a><span class="cd"><span class="i">BEQ</span> <span class="o"><a href="#@LAB_PRG12__84b5">@LAB_PRG12__84b5</a></span></span></span>
<span class="l"><a class="anc" name="84a9" href="#84a9">[84a9]</a><span class="cd"><span class="i">INX</span></span></span>
<span class="l"><a class="anc" name="84aa" href="#84aa">[84aa]</a><span class="cd"><span class="i">CMP</span> <span class="o">#$93</span></span></span>
<span class="l"><a class="anc" name="84ac" href="#84ac">[84ac]</a><span class="cd"><span class="i">BEQ</span> <span class="o"><a href="#@LAB_PRG12__84b5">@LAB_PRG12__84b5</a></span></span></span>
<span class="l"><a class="anc" name="84ae" href="#84ae">[84ae]</a><span class="cd"><span class="i">INX</span></span></span>
<span class="l"><a class="anc" name="84af" href="#84af">[84af]</a><span class="cd"><span class="i">CMP</span> <span class="o">#$94</span></span></span>
<span class="l"><a class="anc" name="84b1" href="#84b1">[84b1]</a><span class="cd"><span class="i">BEQ</span> <span class="o"><a href="#@LAB_PRG12__84b5">@LAB_PRG12__84b5</a></span></span></span>
<span class="l"></span>
<a name=":84b3:@LAB_PRG12__84b3"></a><span class="l"><a class="anc" name="84b3" href="#84b3">[84b3]</a><a href="#:84b3:@LAB_PRG12__84b3" class="lla">@LAB_PRG12__84b3:</a><span class="ce">; [$84b3]</span></span>
<span class="l"><a class="anc" name="84b3" href="#84b3">[84b3]</a><span class="cd"><span class="i">CLC</span></span></span>
<span class="l"><a class="anc" name="84b4" href="#84b4">[84b4]</a><span class="cd"><span class="i">RTS</span></span></span>
<span class="l"></span>
<a name=":84b5:@LAB_PRG12__84b5"></a><span class="l"><a class="anc" name="84b5" href="#84b5">[84b5]</a><a href="#:84b5:@LAB_PRG12__84b5" class="lla">@LAB_PRG12__84b5:</a><span class="ce">; [$84b5]</span></span>
<span class="l"><a class="anc" name="84b5" href="#84b5">[84b5]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#SpecialItems">SpecialItems</a></span></span></span>
<span class="l"><a class="anc" name="84b8" href="#84b8">[84b8]</a><span class="cd"><span class="i">AND</span> <span class="o">$84e5,X</span></span></span>
<span class="l"><a class="anc" name="84bb" href="#84bb">[84bb]</a><span class="cd"><span class="i">BEQ</span> <span class="o"><a href="#@LAB_PRG12__84b3">@LAB_PRG12__84b3</a></span></span></span>
<span class="l"></span>
<a name=":84bd:@LAB_PRG12__84bd"></a><span class="l"><a class="anc" name="84bd" href="#84bd">[84bd]</a><a href="#:84bd:@LAB_PRG12__84bd" class="lla">@LAB_PRG12__84bd:</a><span class="ce">; [$84bd]</span></span>
<span class="l"><a class="anc" name="84bd" href="#84bd">[84bd]</a><span class="cd"><span class="i">SEC</span></span></span>
<span class="l"><a class="anc" name="84be" href="#84be">[84be]</a><span class="cd"><span class="i">RTS</span></span></span>
<span class="l"></span>
<a name=":84bf:@LAB_PRG12__84bf"></a><span class="l"><a class="anc" name="84bf" href="#84bf">[84bf]</a><a href="#:84bf:@LAB_PRG12__84bf" class="lla">@LAB_PRG12__84bf:</a><span class="ce">; [$84bf]</span></span>
<span class="l"><a class="anc" name="84bf" href="#84bf">[84bf]</a><span class="cd"><span class="i">PHA</span></span></span>
<span class="l"><a class="anc" name="84c0" href="#84c0">[84c0]</a><span class="cd"><span class="i">JSR</span> <span class="o">$f785</span></span></span>
<span class="l"><a class="anc" name="84c3" href="#84c3">[84c3]</a><span class="cd"><span class="i">TAX</span></span></span>
<span class="l"><a class="anc" name="84c4" href="#84c4">[84c4]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="#INVENTORY_CATEGORY_L">INVENTORY_CATEGORY_L</a>,X</span></span></span>
<span class="l"><a class="anc" name="84c7" href="#84c7">[84c7]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Temp_Int24">Temp_Int24</a></span></span></span>
<span class="l"><a class="anc" name="84c9" href="#84c9">[84c9]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="#INVENTORY_CATEGORY_U">INVENTORY_CATEGORY_U</a>,X</span></span></span>
<span class="l"><a class="anc" name="84cc" href="#84cc">[84cc]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Temp_Int24_M">Temp_Int24_M</a></span></span></span>
<span class="l"><a class="anc" name="84ce" href="#84ce">[84ce]</a><span class="cd"><span class="i">PLA</span></span></span>
<span class="l"><a class="anc" name="84cf" href="#84cf">[84cf]</a><span class="cd"><span class="i">AND</span> <span class="o">#$1f</span></span></span>
<span class="l"><a class="anc" name="84d1" href="#84d1">[84d1]</a><span class="cd"><span class="i">CMP</span> <span class="o"><a href="RAM.html#SelectedWeapon">SelectedWeapon</a>,X</span></span></span>
<span class="l"><a class="anc" name="84d4" href="#84d4">[84d4]</a><span class="cd"><span class="i">BEQ</span> <span class="o"><a href="#@LAB_PRG12__84bd">@LAB_PRG12__84bd</a></span></span></span>
<span class="l"><a class="anc" name="84d6" href="#84d6">[84d6]</a><span class="cd"><span class="i">LDY</span> <span class="o"><a href="RAM.html#NumberOfWeapons">NumberOfWeapons</a>,X</span></span></span>
<span class="l"><a class="anc" name="84d9" href="#84d9">[84d9]</a><span class="cd"><span class="i">BEQ</span> <span class="o"><a href="#@LAB_PRG12__84b3">@LAB_PRG12__84b3</a></span></span></span>
<span class="l"><a class="anc" name="84db" href="#84db">[84db]</a><span class="cd"><span class="i">DEY</span></span></span>
<span class="l"></span>
<a name=":84dc:@LAB_PRG12__84dc"></a><span class="l"><a class="anc" name="84dc" href="#84dc">[84dc]</a><a href="#:84dc:@LAB_PRG12__84dc" class="lla">@LAB_PRG12__84dc:</a><span class="ce">; [$84dc]</span></span>
<span class="l"><a class="anc" name="84dc" href="#84dc">[84dc]</a><span class="cd"><span class="i">CMP</span> <span class="o">(<a href="RAM.html#Temp_Int24">Temp_Int24</a>),Y</span></span></span>
<span class="l"><a class="anc" name="84de" href="#84de">[84de]</a><span class="cd"><span class="i">BEQ</span> <span class="o"><a href="#@LAB_PRG12__84bd">@LAB_PRG12__84bd</a></span></span></span>
<span class="l"><a class="anc" name="84e0" href="#84e0">[84e0]</a><span class="cd"><span class="i">DEY</span></span></span>
<span class="l"><a class="anc" name="84e1" href="#84e1">[84e1]</a><span class="cd"><span class="i">BPL</span> <span class="o"><a href="#@LAB_PRG12__84dc">@LAB_PRG12__84dc</a></span></span></span>
<span class="l"><a class="anc" name="84e3" href="#84e3">[84e3]</a><span class="cd"><span class="i">CLC</span></span></span>
<span class="l"><a class="anc" name="84e4" href="#84e4">[84e4]</a><span class="cd"><span class="i">RTS</span></span></span>
<span class="l"></span>
<a name="BYTE_ARRAY_PRG12__84e5"></a><div class="c">;
; XREFS:
;     <a href="#Shop_GetPlayerHasSelectedItem">Shop_GetPlayerHasSelectedItem</a>
;
</div><span class="l"><a class="anc" name="84e5" href="#84e5">[84e5]</a><a href="#BYTE_ARRAY_PRG12__84e5" class="la">BYTE_ARRAY_PRG12__84e5:</a><span class="ce">; [$84e5]</span></span>
<span class="l"><a class="anc" name="84e5" href="#84e5">[84e5]</a><span class="cd"><span class="i">db</span> <span class="o">$80</span></span><span class="ce">; [0]:</span></span>
<span class="l"></span>
<a name="BYTE_ARRAY_PRG12__84e5_1_"></a><div class="c">;
; XREFS:
;     <a href="#Shop_GetPlayerHasSelectedItem">Shop_GetPlayerHasSelectedItem</a>
;
</div><span class="l"><a class="anc" name="84e6" href="#84e6">[84e6]</a><a href="#BYTE_ARRAY_PRG12__84e5_1_" class="la">BYTE_ARRAY_PRG12__84e5_1_:</a><span class="ce">; [$84e6]</span></span>
<span class="l"><a class="anc" name="84e6" href="#84e6">[84e6]</a><span class="cd"><span class="i">db</span> <span class="o">$40</span></span><span class="ce">; [1]:</span></span>
<span class="l"></span>
<a name="BYTE_ARRAY_PRG12__84e5_2_"></a><div class="c">;
; XREFS:
;     <a href="#Shop_GetPlayerHasSelectedItem">Shop_GetPlayerHasSelectedItem</a>
;
</div><span class="l"><a class="anc" name="84e7" href="#84e7">[84e7]</a><a href="#BYTE_ARRAY_PRG12__84e5_2_" class="la">BYTE_ARRAY_PRG12__84e5_2_:</a><span class="ce">; [$84e7]</span></span>
<span class="l"><a class="anc" name="84e7" href="#84e7">[84e7]</a><span class="cd"><span class="i">db</span> <span class="o">$20</span></span><span class="ce">; [2]:</span></span>
<span class="l"></span>
<a name="BYTE_ARRAY_PRG12__84e5_3_"></a><div class="c">;
; XREFS:
;     <a href="#Shop_GetPlayerHasSelectedItem">Shop_GetPlayerHasSelectedItem</a>
;
</div><span class="l"><a class="anc" name="84e8" href="#84e8">[84e8]</a><a href="#BYTE_ARRAY_PRG12__84e5_3_" class="la">BYTE_ARRAY_PRG12__84e5_3_:</a><span class="ce">; [$84e8]</span></span>
<span class="l"><a class="anc" name="84e8" href="#84e8">[84e8]</a><span class="cd"><span class="i">db</span> <span class="o">$10</span></span><span class="ce">; [3]:</span></span>
<span class="l"></span>
<a name="BYTE_ARRAY_PRG12__84e5_4_"></a><div class="c">;
; XREFS:
;     <a href="#Shop_GetPlayerHasSelectedItem">Shop_GetPlayerHasSelectedItem</a>
;
</div><span class="l"><a class="anc" name="84e9" href="#84e9">[84e9]</a><a href="#BYTE_ARRAY_PRG12__84e5_4_" class="la">BYTE_ARRAY_PRG12__84e5_4_:</a><span class="ce">; [$84e9]</span></span>
<span class="l"><a class="anc" name="84e9" href="#84e9">[84e9]</a><span class="cd"><span class="i">db</span> <span class="o">$08</span></span><span class="ce">; [4]:</span></span>
<span class="l"></span>
<a name="BYTE_ARRAY_PRG12__84e5_5_"></a><div class="c">;
; XREFS:
;     <a href="#Shop_GetPlayerHasSelectedItem">Shop_GetPlayerHasSelectedItem</a>
;
</div><span class="l"><a class="anc" name="84ea" href="#84ea">[84ea]</a><a href="#BYTE_ARRAY_PRG12__84e5_5_" class="la">BYTE_ARRAY_PRG12__84e5_5_:</a><span class="ce">; [$84ea]</span></span>
<span class="l"><a class="anc" name="84ea" href="#84ea">[84ea]</a><span class="cd"><span class="i">db</span> <span class="o">$04</span></span><span class="ce">; [5]:</span></span>
<span class="l"></span>
<a name="BYTE_ARRAY_PRG12__84e5_6_"></a><div class="c">;
; XREFS:
;     <a href="#Shop_GetPlayerHasSelectedItem">Shop_GetPlayerHasSelectedItem</a>
;
</div><span class="l"><a class="anc" name="84eb" href="#84eb">[84eb]</a><a href="#BYTE_ARRAY_PRG12__84e5_6_" class="la">BYTE_ARRAY_PRG12__84e5_6_:</a><span class="ce">; [$84eb]</span></span>
<span class="l"><a class="anc" name="84eb" href="#84eb">[84eb]</a><span class="cd"><span class="i">db</span> <span class="o">$02</span></span><span class="ce">; [6]:</span></span>
<span class="l"></span>
<a name="BYTE_ARRAY_PRG12__84e5_7_"></a><div class="c">;
; XREFS:
;     <a href="#Shop_GetPlayerHasSelectedItem">Shop_GetPlayerHasSelectedItem</a>
;
</div><span class="l"><a class="anc" name="84ec" href="#84ec">[84ec]</a><a href="#BYTE_ARRAY_PRG12__84e5_7_" class="la">BYTE_ARRAY_PRG12__84e5_7_:</a><span class="ce">; [$84ec]</span></span>
<span class="l"><a class="anc" name="84ec" href="#84ec">[84ec]</a><span class="cd"><span class="i">db</span> <span class="o">$01</span></span><span class="ce">; [7]:</span></span>
<span class="l"></span>
</pre><pre><a name="IScripts_WaitForMenuInput"></a><div class="cp">;============================================================================
; TODO: Document IScripts_WaitForMenuInput
;
; INPUTS:
;     None.
;
; OUTPUTS:
;     C
;
; XREFS:
;     <a href="#IScriptAction_OpenShop">IScriptAction_OpenShop</a>
;     <a href="#IScriptAction_ShowSellMenu">IScriptAction_ShowSellMenu</a>
;     <a href="#IScripts_WaitForMenuInput">IScripts_WaitForMenuInput</a>
;============================================================================
</div><span class="l"><a class="anc" name="84ed" href="#84ed">[84ed]</a><a href="#IScripts_WaitForMenuInput" class="la">IScripts_WaitForMenuInput:</a><span class="ce">; [$84ed]</span></span>
<span class="l"><a class="anc" name="84ed" href="#84ed">[84ed]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#IScripts_UpdatePortraitAnimation">IScripts_UpdatePortraitAnimation</a></span></span></span>
<span class="l"><a class="anc" name="84f0" href="#84f0">[84f0]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#Menu_UpdateAndDraw">Menu_UpdateAndDraw</a></span></span></span>
<span class="l"><a class="anc" name="84f3" href="#84f3">[84f3]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="RAM.html#Joy1_ChangedButtonMask">Joy1_ChangedButtonMask</a></span></span></span>
<span class="l"><a class="anc" name="84f5" href="#84f5">[84f5]</a><span class="cd"><span class="i">BMI</span> <span class="o"><a href="#@_returnFalse">@_returnFalse</a></span></span></span>
<span class="l"><a class="anc" name="84f7" href="#84f7">[84f7]</a><span class="cd"><span class="i">ASL</span> <span class="o">A</span></span></span>
<span class="l"><a class="anc" name="84f8" href="#84f8">[84f8]</a><span class="cd"><span class="i">BMI</span> <span class="o"><a href="#@_returnTrue">@_returnTrue</a></span></span></span>
<span class="l"><a class="anc" name="84fa" href="#84fa">[84fa]</a><span class="cd"><span class="i">JMP</span> <span class="o"><a href="#IScripts_WaitForMenuInput">IScripts_WaitForMenuInput</a></span></span></span>
<span class="l"></span>
<a name=":84fd:@_returnFalse"></a><span class="l"><a class="anc" name="84fd" href="#84fd">[84fd]</a><a href="#:84fd:@_returnFalse" class="lla">@_returnFalse:</a><span class="ce">; [$84fd]</span></span>
<span class="l"><a class="anc" name="84fd" href="#84fd">[84fd]</a><span class="cd"><span class="i">CLC</span></span></span>
<span class="l"><a class="anc" name="84fe" href="#84fe">[84fe]</a><span class="cd"><span class="i">RTS</span></span></span>
<span class="l"></span>
<a name=":84ff:@_returnTrue"></a><span class="l"><a class="anc" name="84ff" href="#84ff">[84ff]</a><a href="#:84ff:@_returnTrue" class="lla">@_returnTrue:</a><span class="ce">; [$84ff]</span></span>
<span class="l"><a class="anc" name="84ff" href="#84ff">[84ff]</a><span class="cd"><span class="i">SEC</span></span></span>
<span class="l"><a class="anc" name="8500" href="#8500">[8500]</a><span class="cd"><span class="i">RTS</span></span></span>
<span class="l"></span>
<span class="l"></span>
</pre><pre><a name="Shop_Populate"></a><div class="cp">;============================================================================
; Populate the items in the menu.
;
; This will take the menus stored in the address indicated
; in <a href="RAM.html#Temp_Int24">Temp_Int24</a> and <a href="RAM.html#Temp_Int24">Temp_Int24</a>+1. It will
; loop through
; these, adding the items and costs to the menu state.
;
; INPUTS:
;     <a href="RAM.html#Temp_Int24">Temp_Int24</a>:
;     <a href="RAM.html#Temp_Int24">Temp_Int24</a>+1:
;         The address of the menu items to load.
;
; OUTPUTS:
;     <a href="RAM.html#Arg_StringsCount">Arg_StringsCount</a>:
;         Position of the last menu item.
;
;     <a href="RAM.html#Menu_CursorPos">Menu_CursorPos</a>:
;         Start position of the cursor (0).
;
;     <a href="RAM.html#DataArray">DataArray</a>:
;         The populated list of items.
;
;     <a href="RAM.html#ShopItemCostsL">ShopItemCostsL</a>:
;     <a href="RAM.html#ShopItemCostsU">ShopItemCostsU</a>:
;         The populated costs for each item.
;
; XREFS:
;     <a href="#IScriptAction_OpenShop">IScriptAction_OpenShop</a>
;============================================================================
</div><span class="l"><a class="anc" name="8501" href="#8501">[8501]</a><a href="#Shop_Populate" class="la">Shop_Populate:</a><span class="ce">; [$8501]</span></span>
<span class="l"><a class="anc" name="8501" href="#8501">[8501]</a><span class="cd"><span class="i">LDY</span> <span class="o">#$00</span></span><span class="ce">; Y = 0 (loop counter)</span></span>
<span class="l"><a class="anc" name="8503" href="#8503">[8503]</a><span class="cd"><span class="i">LDX</span> <span class="o">#$00</span></span><span class="ce">; X = 0 (menu position counter)</span></span>
<span class="l"><a class="anc" name="8505" href="#8505">[8505]</a><span class="cd"><span class="i">STX</span> <span class="o">a:<a href="RAM.html#Menu_CursorPos">Menu_CursorPos</a></span></span><span class="ce">; Cusor position = 0</span></span>
<span class="l"></span>
<span class="l"></span>
<a name=":8508:@_populateLoop"></a><div class="c">;
; Fetch the menu item at this index.
;
</div><span class="l"><a class="anc" name="8508" href="#8508">[8508]</a><a href="#:8508:@_populateLoop" class="lla">@_populateLoop:</a><span class="ce">; [$8508]</span></span>
<span class="l"><a class="anc" name="8508" href="#8508">[8508]</a><span class="cd"><span class="i">LDA</span> <span class="o">(<a href="RAM.html#Temp_Int24">Temp_Int24</a>),Y</span></span><span class="ce">; A = Menu item at Y.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Check if we're on the last item.
;
</div><span class="l"><a class="anc" name="850a" href="#850a">[850a]</a><span class="cd"><span class="i">CMP</span> <span class="o">#$ff</span></span><span class="ce">; Check if it's 0xFF (the menu terminator).</span></span>
<span class="l"><a class="anc" name="850c" href="#850c">[850c]</a><span class="cd"><span class="i">BEQ</span> <span class="o"><a href="#@_finish">@_finish</a></span></span><span class="ce">; If so, we're done.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Store the item.
;
</div><span class="l"><a class="anc" name="850e" href="#850e">[850e]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#DataArray">DataArray</a>,X</span></span><span class="ce">; Store the item in the menu.</span></span>
<span class="l"><a class="anc" name="8511" href="#8511">[8511]</a><span class="cd"><span class="i">INY</span></span><span class="ce">; Y++</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Store the cost.
;
</div><span class="l"><a class="anc" name="8512" href="#8512">[8512]</a><span class="cd"><span class="i">LDA</span> <span class="o">(<a href="RAM.html#Temp_Int24">Temp_Int24</a>),Y</span></span><span class="ce">; Load the lower byte of the item cost.</span></span>
<span class="l"><a class="anc" name="8514" href="#8514">[8514]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#ShopItemCostsL">ShopItemCostsL</a>,X</span></span><span class="ce">; Store it.</span></span>
<span class="l"><a class="anc" name="8517" href="#8517">[8517]</a><span class="cd"><span class="i">INY</span></span><span class="ce">; Y++</span></span>
<span class="l"><a class="anc" name="8518" href="#8518">[8518]</a><span class="cd"><span class="i">LDA</span> <span class="o">(<a href="RAM.html#Temp_Int24">Temp_Int24</a>),Y</span></span><span class="ce">; Load the upper byte of the item cost.</span></span>
<span class="l"><a class="anc" name="851a" href="#851a">[851a]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#ShopItemCostsU">ShopItemCostsU</a>,X</span></span><span class="ce">; Store it.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Increment our counters.
;
</div><span class="l"><a class="anc" name="851d" href="#851d">[851d]</a><span class="cd"><span class="i">INY</span></span><span class="ce">; Y++</span></span>
<span class="l"><a class="anc" name="851e" href="#851e">[851e]</a><span class="cd"><span class="i">INX</span></span><span class="ce">; X++</span></span>
<span class="l"><a class="anc" name="851f" href="#851f">[851f]</a><span class="cd"><span class="i">BNE</span> <span class="o"><a href="#@_populateLoop">@_populateLoop</a></span></span><span class="ce">; If we're not done, loop.</span></span>
<span class="l"></span>
<a name=":8521:@_finish"></a><span class="l"><a class="anc" name="8521" href="#8521">[8521]</a><a href="#:8521:@_finish" class="lla">@_finish:</a><span class="ce">; [$8521]</span></span>
<span class="l"><a class="anc" name="8521" href="#8521">[8521]</a><span class="cd"><span class="i">STX</span> <span class="o">a:<a href="RAM.html#Arg_StringsCount">Arg_StringsCount</a></span></span><span class="ce">; Set the last menu position.</span></span>
<span class="l"><a class="anc" name="8524" href="#8524">[8524]</a><span class="cd"><span class="i">RTS</span></span></span>
<span class="l"></span>
<span class="l"></span>
</pre><pre><a name="IScriptAction_AddGold"></a><div class="cp">;============================================================================
; IScript action to add gold.
;
; This will load the lower and middle bytes of gold and
; progressively fill up the player's gold counter.
;
; It will then invoke the next action in the script.
;
; XREFS:
;     <a href="#IScriptActions_L">IScriptActions_L</a> [$PRG12::8284]
;============================================================================
</div><span class="l"><a class="anc" name="8525" href="#8525">[8525]</a><a href="#IScriptAction_AddGold" class="la">IScriptAction_AddGold:</a><span class="ce">; [$8525]</span></span>
<span class="l"><a class="anc" name="8525" href="#8525">[8525]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#IScripts_LoadByte">IScripts_LoadByte</a></span></span><span class="ce">; Load the lower byte for the gold amount.</span></span>
<span class="l"><a class="anc" name="8528" href="#8528">[8528]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#Temp_0202">Temp_0202</a></span></span><span class="ce">; Store it.</span></span>
<span class="l"><a class="anc" name="852b" href="#852b">[852b]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#IScripts_LoadByte">IScripts_LoadByte</a></span></span><span class="ce">; Load the upper byte for the gold amount.</span></span>
<span class="l"><a class="anc" name="852e" href="#852e">[852e]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#Temp_0203">Temp_0203</a></span></span><span class="ce">; Store it.</span></span>
<span class="l"><a class="anc" name="8531" href="#8531">[8531]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#IScripts_ProgressivelyAddGold">IScripts_ProgressivelyAddGold</a></span></span><span class="ce">; Progressively add gold.</span></span>
<span class="l"><a class="anc" name="8534" href="#8534">[8534]</a><span class="cd"><span class="i">JMP</span> <span class="o"><a href="#IScripts_InvokeNextAction">IScripts_InvokeNextAction</a></span></span><span class="ce">; Invoke the next action.</span></span>
<span class="l"></span>
</pre><pre><a name="IScripts_ProgressivelyAddGold"></a><div class="cp">;============================================================================
; TODO: Document IScripts_ProgressivelyAddGold
;
; INPUTS:
;     None.
;
; OUTPUTS:
;     TODO
;
; XREFS:
;     <a href="#IScriptAction_AddGold">IScriptAction_AddGold</a>
;     <a href="#IScriptAction_ShowSellMenu">IScriptAction_ShowSellMenu</a>
;     <a href="#IScripts_ProgressivelyAddGold">IScripts_ProgressivelyAddGold</a>
;============================================================================
</div><span class="l"><a class="anc" name="8537" href="#8537">[8537]</a><a href="#IScripts_ProgressivelyAddGold" class="la">IScripts_ProgressivelyAddGold:</a><span class="ce">; [$8537]</span></span>
<span class="l"><a class="anc" name="8537" href="#8537">[8537]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#IScripts_UpdatePortraitAnimation">IScripts_UpdatePortraitAnimation</a></span></span></span>
<span class="l"><a class="anc" name="853a" href="#853a">[853a]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#Temp_0203">Temp_0203</a></span></span></span>
<span class="l"><a class="anc" name="853d" href="#853d">[853d]</a><span class="cd"><span class="i">BMI</span> <span class="o"><a href="#@LAB_PRG12__856e">@LAB_PRG12__856e</a></span></span></span>
<span class="l"><a class="anc" name="853f" href="#853f">[853f]</a><span class="cd"><span class="i">ORA</span> <span class="o">a:<a href="RAM.html#Temp_0202">Temp_0202</a></span></span></span>
<span class="l"><a class="anc" name="8542" href="#8542">[8542]</a><span class="cd"><span class="i">BEQ</span> <span class="o"><a href="#@LAB_PRG12__8566">@LAB_PRG12__8566</a></span></span></span>
<span class="l"><a class="anc" name="8544" href="#8544">[8544]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#IScripts_PlayGoldChangeSound">IScripts_PlayGoldChangeSound</a></span></span></span>
<span class="l"><a class="anc" name="8547" href="#8547">[8547]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#Temp_0202">Temp_0202</a></span></span></span>
<span class="l"><a class="anc" name="854a" href="#854a">[854a]</a><span class="cd"><span class="i">SEC</span></span></span>
<span class="l"><a class="anc" name="854b" href="#854b">[854b]</a><span class="cd"><span class="i">SBC</span> <span class="o">#$0a</span></span></span>
<span class="l"><a class="anc" name="854d" href="#854d">[854d]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#Temp_0202">Temp_0202</a></span></span></span>
<span class="l"><a class="anc" name="8550" href="#8550">[8550]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#Temp_0203">Temp_0203</a></span></span></span>
<span class="l"><a class="anc" name="8553" href="#8553">[8553]</a><span class="cd"><span class="i">SBC</span> <span class="o">#$00</span></span></span>
<span class="l"><a class="anc" name="8555" href="#8555">[8555]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#Temp_0203">Temp_0203</a></span></span></span>
<span class="l"><a class="anc" name="8558" href="#8558">[8558]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$0a</span></span></span>
<span class="l"><a class="anc" name="855a" href="#855a">[855a]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Temp_Int24">Temp_Int24</a></span></span></span>
<span class="l"><a class="anc" name="855c" href="#855c">[855c]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$00</span></span></span>
<span class="l"><a class="anc" name="855e" href="#855e">[855e]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Temp_Int24_M">Temp_Int24_M</a></span></span></span>
<span class="l"><a class="anc" name="8560" href="#8560">[8560]</a><span class="cd"><span class="i">JSR</span> <span class="o">$f9c1</span></span></span>
<span class="l"><a class="anc" name="8563" href="#8563">[8563]</a><span class="cd"><span class="i">JMP</span> <span class="o"><a href="#IScripts_ProgressivelyAddGold">IScripts_ProgressivelyAddGold</a></span></span></span>
<span class="l"></span>
<a name=":8566:@LAB_PRG12__8566"></a><span class="l"><a class="anc" name="8566" href="#8566">[8566]</a><a href="#:8566:@LAB_PRG12__8566" class="lla">@LAB_PRG12__8566:</a><span class="ce">; [$8566]</span></span>
<span class="l"><a class="anc" name="8566" href="#8566">[8566]</a><span class="cd"><span class="i">DEC</span> <span class="o">a:<a href="RAM.html#Temp_0203">Temp_0203</a></span></span></span>
<span class="l"><a class="anc" name="8569" href="#8569">[8569]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$3c</span></span></span>
<span class="l"><a class="anc" name="856b" href="#856b">[856b]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#Temp_0202">Temp_0202</a></span></span></span>
<span class="l"></span>
<a name=":856e:@LAB_PRG12__856e"></a><span class="l"><a class="anc" name="856e" href="#856e">[856e]</a><a href="#:856e:@LAB_PRG12__856e" class="lla">@LAB_PRG12__856e:</a><span class="ce">; [$856e]</span></span>
<span class="l"><a class="anc" name="856e" href="#856e">[856e]</a><span class="cd"><span class="i">DEC</span> <span class="o">a:<a href="RAM.html#Temp_0202">Temp_0202</a></span></span></span>
<span class="l"><a class="anc" name="8571" href="#8571">[8571]</a><span class="cd"><span class="i">BNE</span> <span class="o"><a href="#IScripts_ProgressivelyAddGold">IScripts_ProgressivelyAddGold</a></span></span></span>
<span class="l"><a class="anc" name="8573" href="#8573">[8573]</a><span class="cd"><span class="i">RTS</span></span></span>
<span class="l"></span>
<span class="l"></span>
</pre><pre><a name="IScripts_PlayGoldChangeSound"></a><div class="cp">;============================================================================
; Play the gold change sound every 7 ticks.
;
; INPUTS:
;     <a href="RAM.html#InterruptCounter">InterruptCounter</a>:
;         The interrupt counter to control timing of sounds.
;
; OUTPUTS:
;     None
;
; XREFS:
;     <a href="#IScripts_ProgressivelyAddGold">IScripts_ProgressivelyAddGold</a>
;============================================================================
</div><span class="l"><a class="anc" name="8574" href="#8574">[8574]</a><a href="#IScripts_PlayGoldChangeSound" class="la">IScripts_PlayGoldChangeSound:</a><span class="ce">; [$8574]</span></span>
<span class="l"><a class="anc" name="8574" href="#8574">[8574]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="RAM.html#InterruptCounter">InterruptCounter</a></span></span><span class="ce">; Load the interrupt counter.</span></span>
<span class="l"><a class="anc" name="8576" href="#8576">[8576]</a><span class="cd"><span class="i">AND</span> <span class="o">#$03</span></span><span class="ce">; Check if we're ready to play a sound.</span></span>
<span class="l"><a class="anc" name="8578" href="#8578">[8578]</a><span class="cd"><span class="i">BNE</span> <span class="o"><a href="#@_return">@_return</a></span></span><span class="ce">; If not, return.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; We're ready to play the sound.
;
</div><span class="l"><a class="anc" name="857a" href="#857a">[857a]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$19</span></span><span class="ce">; 0x19 == Change gold amount sound</span></span>
<span class="l"><a class="anc" name="857c" href="#857c">[857c]</a><span class="cd"><span class="i">JSR</span> <span class="o">$d0e4</span></span><span class="ce">; Play the sound.</span></span>
<span class="l"></span>
<a name=":857f:@_return"></a><span class="l"><a class="anc" name="857f" href="#857f">[857f]</a><a href="#:857f:@_return" class="lla">@_return:</a><span class="ce">; [$857f]</span></span>
<span class="l"><a class="anc" name="857f" href="#857f">[857f]</a><span class="cd"><span class="i">RTS</span></span></span>
<span class="l"></span>
<span class="l"></span>
</pre><pre><a name="IScriptAction_AddMP"></a><div class="cp">;============================================================================
; IScript action for adding MP.
;
; This will read the first byte as the MP amount.
;
; If this is under the MP cap, it will begin the process of
; progressively adding MP to the user, animating filling up
; the HP.
;
; XREFS:
;     <a href="#IScriptActions_L">IScriptActions_L</a> [$PRG12::8285]
;============================================================================
</div><span class="l"><a class="anc" name="8580" href="#8580">[8580]</a><a href="#IScriptAction_AddMP" class="la">IScriptAction_AddMP:</a><span class="ce">; [$8580]</span></span>
<span class="l"><a class="anc" name="8580" href="#8580">[8580]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#IScripts_LoadByte">IScripts_LoadByte</a></span></span><span class="ce">; Load the MP amount from the script.</span></span>
<span class="l"><a class="anc" name="8583" href="#8583">[8583]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#IScript_HPOrMPValueToAdd">IScript_HPOrMPValueToAdd</a></span></span><span class="ce">; Store in the variable to fill MP up to.</span></span>
<span class="l"><a class="anc" name="8586" href="#8586">[8586]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#Player_MP">Player_MP</a></span></span><span class="ce">; Load the currently-added MP value we're filling from.</span></span>
<span class="l"><a class="anc" name="8589" href="#8589">[8589]</a><span class="cd"><span class="i">CMP</span> <span class="o">#$50</span></span><span class="ce">; Compare to the cap.</span></span>
<span class="l"><a class="anc" name="858b" href="#858b">[858b]</a><span class="cd"><span class="i">BCS</span> <span class="o"><a href="#thunk_IScripts_InvokeNextAction">thunk_IScripts_InvokeNextAction</a></span></span><span class="ce">; If at or over, we're done. Jump to invoke the next action.</span></span>
<span class="l"></span>
<a name=":858d:@_fillLoop"></a><span class="l"><a class="anc" name="858d" href="#858d">[858d]</a><a href="#:858d:@_fillLoop" class="lla">@_fillLoop:</a><span class="ce">; [$858d]</span></span>
<span class="l"><a class="anc" name="858d" href="#858d">[858d]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#IScripts_UpdatePortraitAnimation">IScripts_UpdatePortraitAnimation</a></span></span></span>
<span class="l"><a class="anc" name="8590" href="#8590">[8590]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#IScripts_PlayFillingSound">IScripts_PlayFillingSound</a></span></span><span class="ce">; Play the sound for filling a bit of MP.</span></span>
<span class="l"><a class="anc" name="8593" href="#8593">[8593]</a><span class="cd"><span class="i">LDX</span> <span class="o">a:<a href="RAM.html#Player_MP">Player_MP</a></span></span><span class="ce">; X = Remaining value to add.</span></span>
<span class="l"><a class="anc" name="8596" href="#8596">[8596]</a><span class="cd"><span class="i">INX</span></span><span class="ce">; X++</span></span>
<span class="l"><a class="anc" name="8597" href="#8597">[8597]</a><span class="cd"><span class="i">TXA</span></span><span class="ce">; A = X</span></span>
<span class="l"><a class="anc" name="8598" href="#8598">[8598]</a><span class="cd"><span class="i">JSR</span> <span class="o">$fa85</span></span><span class="ce">; Set the current mana points.</span></span>
<span class="l"><a class="anc" name="859b" href="#859b">[859b]</a><span class="cd"><span class="i">DEC</span> <span class="o">a:<a href="RAM.html#IScript_HPOrMPValueToAdd">IScript_HPOrMPValueToAdd</a></span></span><span class="ce">; Decrement the remaining value to add.</span></span>
<span class="l"><a class="anc" name="859e" href="#859e">[859e]</a><span class="cd"><span class="i">BNE</span> <span class="o"><a href="#@_fillLoop">@_fillLoop</a></span></span><span class="ce">; If we're not done, loop.</span></span>
<span class="l"></span>
<div class="c">;
; v-- Fall through --v
;
</div><span class="l"></span>
<span class="l"></span>
</pre><pre><a name="thunk_IScripts_InvokeNextAction"></a><div class="cp">;============================================================================
; Thunk for invoking the next IScript action.
;
; This is here so that other code can jump to it cleanly.
;
; XREFS:
;     <a href="#IScriptAction_AddHP">IScriptAction_AddHP</a>
;     <a href="#IScriptAction_AddMP">IScriptAction_AddMP</a>
;============================================================================
</div><span class="l"><a class="anc" name="85a0" href="#85a0">[85a0]</a><a href="#thunk_IScripts_InvokeNextAction" class="la">thunk_IScripts_InvokeNextAction:</a><span class="ce">; [$85a0]</span></span>
<span class="l"><a class="anc" name="85a0" href="#85a0">[85a0]</a><span class="cd"><span class="i">JMP</span> <span class="o"><a href="#IScripts_InvokeNextAction">IScripts_InvokeNextAction</a></span></span></span>
<span class="l"></span>
<span class="l"></span>
</pre><pre><a name="IScripts_PlayFillingSound"></a><div class="cp">;============================================================================
; Play a sound when filling the HP or MP bar.
;
; This will play every 7 ticks.
;
; INPUTS:
;     None
;
; OUTPUTS:
;     None
;
; XREFS:
;     <a href="#IScriptAction_AddHP">IScriptAction_AddHP</a>
;     <a href="#IScriptAction_AddMP">IScriptAction_AddMP</a>
;============================================================================
</div><span class="l"><a class="anc" name="85a3" href="#85a3">[85a3]</a><a href="#IScripts_PlayFillingSound" class="la">IScripts_PlayFillingSound:</a><span class="ce">; [$85a3]</span></span>
<span class="l"><a class="anc" name="85a3" href="#85a3">[85a3]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="RAM.html#InterruptCounter">InterruptCounter</a></span></span></span>
<span class="l"><a class="anc" name="85a5" href="#85a5">[85a5]</a><span class="cd"><span class="i">AND</span> <span class="o">#$03</span></span></span>
<span class="l"><a class="anc" name="85a7" href="#85a7">[85a7]</a><span class="cd"><span class="i">BNE</span> <span class="o"><a href="#RETURN_85AE">RETURN_85AE</a></span></span></span>
<span class="l"><a class="anc" name="85a9" href="#85a9">[85a9]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$13</span></span></span>
<span class="l"><a class="anc" name="85ab" href="#85ab">[85ab]</a><span class="cd"><span class="i">JSR</span> <span class="o">$d0e4</span></span></span>
<span class="l"></span>
<a name="RETURN_85AE"></a><div class="c">;
; XREFS:
;     <a href="#IScripts_PlayFillingSound">IScripts_PlayFillingSound</a>
;
</div><span class="l"><a class="anc" name="85ae" href="#85ae">[85ae]</a><a href="#RETURN_85AE" class="la">RETURN_85AE:</a><span class="ce">; [$85ae]</span></span>
<span class="l"><a class="anc" name="85ae" href="#85ae">[85ae]</a><span class="cd"><span class="i">RTS</span></span></span>
<span class="l"></span>
<span class="l"></span>
</pre><pre><a name="IScriptAction_AddHP"></a><div class="cp">;============================================================================
; IScript action for adding HP.
;
; This will read the first byte as the HP amount.
;
; If this is under the HP cap, it will begin the process of
; progressively adding HP to the user, animating filling up
; the HP.
;
; NOTE: If you look at the last couple instructions, it may
;       seem it's falling through to
;       <a href="#IScriptAction_IfQuestCompleted">IScriptAction_IfQuestCompleted</a>.
;
;       This does not happen. The combination of BEQ and BNE
;       ensures we jump to an <a href="#IScripts_InvokeNextAction">IScripts_InvokeNextAction</a>
;       and
;       ends.
;
; XREFS:
;     <a href="#IScriptActions_L">IScriptActions_L</a> [$PRG12::828e]
;============================================================================
</div><span class="l"><a class="anc" name="85af" href="#85af">[85af]</a><a href="#IScriptAction_AddHP" class="la">IScriptAction_AddHP:</a><span class="ce">; [$85af]</span></span>
<span class="l"><a class="anc" name="85af" href="#85af">[85af]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#IScripts_LoadByte">IScripts_LoadByte</a></span></span><span class="ce">; Load the HP value to add.</span></span>
<span class="l"><a class="anc" name="85b2" href="#85b2">[85b2]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#IScript_HPOrMPValueToAdd">IScript_HPOrMPValueToAdd</a></span></span><span class="ce">; Store in the variable to fill HP up to.</span></span>
<span class="l"><a class="anc" name="85b5" href="#85b5">[85b5]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#Temp_AddedHPValue">Temp_AddedHPValue</a></span></span><span class="ce">; Load the currently-added HP value we're filling from.</span></span>
<span class="l"><a class="anc" name="85b8" href="#85b8">[85b8]</a><span class="cd"><span class="i">CMP</span> <span class="o">#$50</span></span><span class="ce">; Compare against the cap of 80.</span></span>
<span class="l"><a class="anc" name="85ba" href="#85ba">[85ba]</a><span class="cd"><span class="i">BCS</span> <span class="o"><a href="#thunk_IScripts_InvokeNextAction">thunk_IScripts_InvokeNextAction</a></span></span><span class="ce">; If over, we're done. Invoke the next action.</span></span>
<span class="l"></span>
<a name=":85bc:@_fillLoop"></a><span class="l"><a class="anc" name="85bc" href="#85bc">[85bc]</a><a href="#:85bc:@_fillLoop" class="lla">@_fillLoop:</a><span class="ce">; [$85bc]</span></span>
<span class="l"><a class="anc" name="85bc" href="#85bc">[85bc]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#IScripts_UpdatePortraitAnimation">IScripts_UpdatePortraitAnimation</a></span></span></span>
<span class="l"><a class="anc" name="85bf" href="#85bf">[85bf]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#IScripts_PlayFillingSound">IScripts_PlayFillingSound</a></span></span><span class="ce">; Play the sound for filling a bit of HP.</span></span>
<span class="l"><a class="anc" name="85c2" href="#85c2">[85c2]</a><span class="cd"><span class="i">LDX</span> <span class="o">a:<a href="RAM.html#Temp_AddedHPValue">Temp_AddedHPValue</a></span></span><span class="ce">; X = Remaining value to add</span></span>
<span class="l"><a class="anc" name="85c5" href="#85c5">[85c5]</a><span class="cd"><span class="i">INX</span></span><span class="ce">; X++</span></span>
<span class="l"><a class="anc" name="85c6" href="#85c6">[85c6]</a><span class="cd"><span class="i">TXA</span></span><span class="ce">; A = X</span></span>
<span class="l"><a class="anc" name="85c7" href="#85c7">[85c7]</a><span class="cd"><span class="i">JSR</span> <span class="o">$fa75</span></span><span class="ce">; Draw the next bit of health.</span></span>
<span class="l"><a class="anc" name="85ca" href="#85ca">[85ca]</a><span class="cd"><span class="i">DEC</span> <span class="o">a:<a href="RAM.html#IScript_HPOrMPValueToAdd">IScript_HPOrMPValueToAdd</a></span></span><span class="ce">; Decrement the remaining amount to add.</span></span>
<span class="l"><a class="anc" name="85cd" href="#85cd">[85cd]</a><span class="cd"><span class="i">BNE</span> <span class="o"><a href="#@_fillLoop">@_fillLoop</a></span></span><span class="ce">; If there's more to add, loop.</span></span>
<span class="l"><a class="anc" name="85cf" href="#85cf">[85cf]</a><span class="cd"><span class="i">BEQ</span> <span class="o"><a href="#thunk_IScripts_InvokeNextAction">thunk_IScripts_InvokeNextAction</a></span></span><span class="ce">; Else, invoke the next action.</span></span>
<span class="l"></span>
<div class="c">;
; X-- Does not fall through -- Terminates at branches above --X
;
</div><span class="l"></span>
<span class="l"></span>
</pre><pre><a name="IScriptAction_IfQuestCompleted"></a><div class="cp">;============================================================================
; IScript action for a conditional check based on completed quests.
;
; This will read the next byte representing a quest index.
;
; If the player has completed the quests in the bitmask,
; this will read the next 2-byte address and jump to the
; script at that location.
;
; If they have not completed the quests, this will skip the
; address and invoke the following action.
;
; NOTE: This only checks the 3 least-significant bits of the
;       quests bitmask.
;
; XREFS:
;     <a href="#IScriptActions_L">IScriptActions_L</a> [$PRG12::8286]
;============================================================================
</div><span class="l"><a class="anc" name="85d1" href="#85d1">[85d1]</a><a href="#IScriptAction_IfQuestCompleted" class="la">IScriptAction_IfQuestCompleted:</a><span class="ce">; [$85d1]</span></span>
<span class="l"><a class="anc" name="85d1" href="#85d1">[85d1]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#IScripts_LoadByte">IScripts_LoadByte</a></span></span><span class="ce">; Load the next byte as the quest index into our table.</span></span>
<span class="l"><a class="anc" name="85d4" href="#85d4">[85d4]</a><span class="cd"><span class="i">TAX</span></span><span class="ce">; X = result</span></span>
<span class="l"><a class="anc" name="85d5" href="#85d5">[85d5]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#Quests">Quests</a></span></span><span class="ce">; Load the current player quests.</span></span>
<span class="l"><a class="anc" name="85d8" href="#85d8">[85d8]</a><span class="cd"><span class="i">AND</span> <span class="o">$85e2,X</span></span><span class="ce">; AND it to the bitmask at the given index.</span></span>
<span class="l"><a class="anc" name="85db" href="#85db">[85db]</a><span class="cd"><span class="i">BNE</span> <span class="o"><a href="#@_hasQuestCompleted">@_hasQuestCompleted</a></span></span></span>
<span class="l"><a class="anc" name="85dd" href="#85dd">[85dd]</a><span class="cd"><span class="i">JMP</span> <span class="o"><a href="#IScripts_SkipAddrAndInvoke">IScripts_SkipAddrAndInvoke</a></span></span><span class="ce">; Skip 2 bytes and invoke the following action.</span></span>
<span class="l"></span>
<a name=":85e0:@_hasQuestCompleted"></a><span class="l"><a class="anc" name="85e0" href="#85e0">[85e0]</a><a href="#:85e0:@_hasQuestCompleted" class="lla">@_hasQuestCompleted:</a><span class="ce">; [$85e0]</span></span>
<span class="l"><a class="anc" name="85e0" href="#85e0">[85e0]</a><span class="cd"><span class="i">JMP</span> <span class="o"><a href="#IScripts_JumpToNextAddr">IScripts_JumpToNextAddr</a></span></span></span>
<span class="l"></span>
<a name="ISCRIPTS_QUEST_BITS"></a><div class="c">;
; XREFS:
;     <a href="#IScriptAction_SetQuestComplete">IScriptAction_SetQuestComplete</a>
;
</div><span class="l"><a class="anc" name="85e3" href="#85e3">[85e3]</a><a href="#ISCRIPTS_QUEST_BITS" class="la">ISCRIPTS_QUEST_BITS:</a><span class="ce">; [$85e3]</span></span>
<span class="l"><a class="anc" name="85e3" href="#85e3">[85e3]</a><span class="cd"><span class="i">db</span> <span class="o">$01,$02,$04</span></span><span class="ce">; [$85e3] byte</span></span>
<span class="l"></span>
<span class="l"></span>
</pre><pre><a name="IScriptAction_SetQuestComplete"></a><div class="cp">;============================================================================
; IScript action for marking a quest as complete.
;
; This will read the next byte as a quest bitmask value
; and set it.
;
; It will then invoke the following action.
;
; XREFS:
;     <a href="#IScriptActions_L">IScriptActions_L</a> [$PRG12::8289]
;============================================================================
</div><span class="l"><a class="anc" name="85e6" href="#85e6">[85e6]</a><a href="#IScriptAction_SetQuestComplete" class="la">IScriptAction_SetQuestComplete:</a><span class="ce">; [$85e6]</span></span>
<span class="l"><a class="anc" name="85e6" href="#85e6">[85e6]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#IScripts_LoadByte">IScripts_LoadByte</a></span></span><span class="ce">; Load the next byte as the quest index into our table.</span></span>
<span class="l"><a class="anc" name="85e9" href="#85e9">[85e9]</a><span class="cd"><span class="i">TAX</span></span><span class="ce">; X = result</span></span>
<span class="l"><a class="anc" name="85ea" href="#85ea">[85ea]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#Quests">Quests</a></span></span><span class="ce">; Load the current player quests.</span></span>
<span class="l"><a class="anc" name="85ed" href="#85ed">[85ed]</a><span class="cd"><span class="i">ORA</span> <span class="o">$85e2,X</span></span><span class="ce">; OR it with the bit for this index.</span></span>
<span class="l"><a class="anc" name="85f0" href="#85f0">[85f0]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#Quests">Quests</a></span></span><span class="ce">; Store as the new quests bitmask.</span></span>
<span class="l"><a class="anc" name="85f3" href="#85f3">[85f3]</a><span class="cd"><span class="i">JMP</span> <span class="o"><a href="#IScripts_InvokeNextAction">IScripts_InvokeNextAction</a></span></span><span class="ce">; Invoke the next action.</span></span>
<span class="l"></span>
<span class="l"></span>
</pre><pre><a name="IScriptAction_IfPlayerHasTitle"></a><div class="cp">;============================================================================
; IScript action for a conditional check based on a player title.
;
; This will read the next byte as a player title.
;
; If the player has reached that title, this will read
; the next 2-byte address and jump to the script at that
; location.
;
; If not, this will skip the 2 bytes and invoke the
; following action.
;
; XREFS:
;     <a href="#IScriptActions_L">IScriptActions_L</a> [$PRG12::8287]
;============================================================================
</div><span class="l"><a class="anc" name="85f6" href="#85f6">[85f6]</a><a href="#IScriptAction_IfPlayerHasTitle" class="la">IScriptAction_IfPlayerHasTitle:</a><span class="ce">; [$85f6]</span></span>
<span class="l"><a class="anc" name="85f6" href="#85f6">[85f6]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#IScripts_LoadByte">IScripts_LoadByte</a></span></span><span class="ce">; Load the next byte as the player title to check.</span></span>
<span class="l"><a class="anc" name="85f9" href="#85f9">[85f9]</a><span class="cd"><span class="i">CMP</span> <span class="o">a:<a href="RAM.html#PlayerTitle">PlayerTitle</a></span></span><span class="ce">; Compare to the current player title.</span></span>
<span class="l"><a class="anc" name="85fc" href="#85fc">[85fc]</a><span class="cd"><span class="i">BEQ</span> <span class="o"><a href="#IScripts_JumpToNextAddr">IScripts_JumpToNextAddr</a></span></span><span class="ce">; If &lt;=, jump to the script address in the next argument.</span></span>
<span class="l"><a class="anc" name="85fe" href="#85fe">[85fe]</a><span class="cd"><span class="i">BCC</span> <span class="o"><a href="#IScripts_JumpToNextAddr">IScripts_JumpToNextAddr</a></span></span></span>
<span class="l"><a class="anc" name="8600" href="#8600">[8600]</a><span class="cd"><span class="i">JMP</span> <span class="o"><a href="#IScripts_SkipAddrAndInvoke">IScripts_SkipAddrAndInvoke</a></span></span><span class="ce">; Else, skip the address and invoke the next action.</span></span>
<span class="l"></span>
<span class="l"></span>
</pre><pre><a name="IScripts_JumpToNextAddr"></a><div class="cp">;============================================================================
; Jump to the next address found in an IScript.
;
; This will read the next 2-byte address and jump to the
; script at that location.
;
; INPUTS:
;     None
;
; OUTPUTS:
;     None
;
; XREFS:
;     <a href="#IScriptAction_CheckUpdatePlayerTitle">IScriptAction_CheckUpdatePlayerTitle</a>
;     <a href="#IScriptAction_IfPlayerHasGold">IScriptAction_IfPlayerHasGold</a>
;     <a href="#IScriptAction_IfPlayerHasItem">IScriptAction_IfPlayerHasItem</a>
;     <a href="#IScriptAction_IfPlayerHasTitle">IScriptAction_IfPlayerHasTitle</a>
;     <a href="#IScriptAction_IfQuestCompleted">IScriptAction_IfQuestCompleted</a>
;     <a href="#IScriptAction_Jump">IScriptAction_Jump</a>
;     <a href="#IScriptAction_ShowBuySellMenu">IScriptAction_ShowBuySellMenu</a>
;     <a href="#IScriptAction_ShowQuestionMessageCheckIfDismissed">IScriptAction_ShowQuestionMessageCheckIfDismissed</a>
;============================================================================
</div><span class="l"><a class="anc" name="8603" href="#8603">[8603]</a><a href="#IScripts_JumpToNextAddr" class="la">IScripts_JumpToNextAddr:</a><span class="ce">; [$8603]</span></span>
<div class="c">;
; Load the next two event bytes and use that as the
; address for the next event to invoke.
;
; The logic here is doing a bit more than it has to.
; It loads the lower byte, push it, then pop it, then
; store it. It should just store it.
;
</div><span class="l"><a class="anc" name="8603" href="#8603">[8603]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#IScripts_LoadByte">IScripts_LoadByte</a></span></span><span class="ce">; Load the next byte as the lower byte of the script address.</span></span>
<span class="l"><a class="anc" name="8606" href="#8606">[8606]</a><span class="cd"><span class="i">PHA</span></span><span class="ce">; Push to the stack.</span></span>
<span class="l"><a class="anc" name="8607" href="#8607">[8607]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#IScripts_LoadByte">IScripts_LoadByte</a></span></span><span class="ce">; Load the next byte as the upper byte of the script address.</span></span>
<span class="l"><a class="anc" name="860a" href="#860a">[860a]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#IScriptOrCHRAddr_U">IScriptOrCHRAddr_U</a></span></span><span class="ce">; Store it.</span></span>
<span class="l"><a class="anc" name="860c" href="#860c">[860c]</a><span class="cd"><span class="i">PLA</span></span><span class="ce">; Pop the lower byte.</span></span>
<span class="l"><a class="anc" name="860d" href="#860d">[860d]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#IScriptOrCHRAddr">IScriptOrCHRAddr</a></span></span><span class="ce">; Store it.</span></span>
<span class="l"><a class="anc" name="860f" href="#860f">[860f]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$00</span></span><span class="ce">; A = 0.</span></span>
<span class="l"><a class="anc" name="8611" href="#8611">[8611]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#IScriptOffset">IScriptOffset</a></span></span><span class="ce">; Store as the new script offset.</span></span>
<span class="l"><a class="anc" name="8613" href="#8613">[8613]</a><span class="cd"><span class="i">JMP</span> <span class="o"><a href="#IScripts_InvokeNextAction">IScripts_InvokeNextAction</a></span></span><span class="ce">; Invoke the action at that address</span></span>
<span class="l"></span>
<span class="l"></span>
</pre><pre><a name="IScripts_SkipAddrAndInvoke"></a><div class="cp">;============================================================================
; Skip the next 2-byte address and invoke the next IScript action.
;
; XREFS:
;     <a href="#IScriptAction_CheckUpdatePlayerTitle">IScriptAction_CheckUpdatePlayerTitle</a>
;     <a href="#IScriptAction_IfPlayerHasGold">IScriptAction_IfPlayerHasGold</a>
;     <a href="#IScriptAction_IfPlayerHasItem">IScriptAction_IfPlayerHasItem</a>
;     <a href="#IScriptAction_IfPlayerHasTitle">IScriptAction_IfPlayerHasTitle</a>
;     <a href="#IScriptAction_IfQuestCompleted">IScriptAction_IfQuestCompleted</a>
;     <a href="#IScriptAction_ShowBuySellMenu">IScriptAction_ShowBuySellMenu</a>
;     <a href="#IScriptAction_ShowQuestionMessageCheckIfDismissed">IScriptAction_ShowQuestionMessageCheckIfDismissed</a>
;============================================================================
</div><span class="l"><a class="anc" name="8616" href="#8616">[8616]</a><a href="#IScripts_SkipAddrAndInvoke" class="la">IScripts_SkipAddrAndInvoke:</a><span class="ce">; [$8616]</span></span>
<span class="l"><a class="anc" name="8616" href="#8616">[8616]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#IScripts_LoadByte">IScripts_LoadByte</a></span></span><span class="ce">; Load 2 bytes and throw them out.</span></span>
<span class="l"><a class="anc" name="8619" href="#8619">[8619]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#IScripts_LoadByte">IScripts_LoadByte</a></span></span></span>
<span class="l"><a class="anc" name="861c" href="#861c">[861c]</a><span class="cd"><span class="i">JMP</span> <span class="o"><a href="#IScripts_InvokeNextAction">IScripts_InvokeNextAction</a></span></span><span class="ce">; Invoke the next action.</span></span>
<span class="l"></span>
<span class="l"></span>
</pre><pre><a name="IScriptAction_IfPlayerHasGold"></a><div class="cp">;============================================================================
; IScript action for a conditional check based on gold.
;
; If the player has any gold, the next 2-byte address will
; be read and this will jump to the script at that location.
;
; If the player has no gold, the next 2 bytes will be skipped
; and the following action will be invoked.
;
; XREFS:
;     <a href="#IScriptActions_L">IScriptActions_L</a> [$PRG12::8288]
;============================================================================
</div><span class="l"><a class="anc" name="861f" href="#861f">[861f]</a><a href="#IScriptAction_IfPlayerHasGold" class="la">IScriptAction_IfPlayerHasGold:</a><span class="ce">; [$861f]</span></span>
<span class="l"><a class="anc" name="861f" href="#861f">[861f]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#Gold">Gold</a></span></span><span class="ce">; Load the lower byte of the player's gold.</span></span>
<span class="l"><a class="anc" name="8622" href="#8622">[8622]</a><span class="cd"><span class="i">ORA</span> <span class="o">a:<a href="RAM.html#Gold_M">Gold_M</a></span></span><span class="ce">; OR with the medium byte.</span></span>
<span class="l"><a class="anc" name="8625" href="#8625">[8625]</a><span class="cd"><span class="i">ORA</span> <span class="o">a:<a href="RAM.html#Gold_U">Gold_U</a></span></span><span class="ce">; And the upper byte.</span></span>
<span class="l"><a class="anc" name="8628" href="#8628">[8628]</a><span class="cd"><span class="i">BNE</span> <span class="o"><a href="#@_hasGold">@_hasGold</a></span></span><span class="ce">; If there's any value set, jump.</span></span>
<span class="l"><a class="anc" name="862a" href="#862a">[862a]</a><span class="cd"><span class="i">JMP</span> <span class="o"><a href="#IScripts_SkipAddrAndInvoke">IScripts_SkipAddrAndInvoke</a></span></span><span class="ce">; Else, skip the next 2 bytes and invoke the following action.</span></span>
<span class="l"></span>
<a name=":862d:@_hasGold"></a><span class="l"><a class="anc" name="862d" href="#862d">[862d]</a><a href="#:862d:@_hasGold" class="lla">@_hasGold:</a><span class="ce">; [$862d]</span></span>
<span class="l"><a class="anc" name="862d" href="#862d">[862d]</a><span class="cd"><span class="i">JMP</span> <span class="o"><a href="#IScripts_JumpToNextAddr">IScripts_JumpToNextAddr</a></span></span><span class="ce">; The player has gold, so jump to the next listed address.</span></span>
<span class="l"></span>
<span class="l"></span>
</pre><pre><a name="IScriptAction_ShowBuySellMenu"></a><div class="cp">;============================================================================
; IScript action for showing the Buy/Sell menu.
;
; This will first display the "Come here to buy or sell?"
; message. It'll listen for a choice.
;
; If the player chose "Buy", the next 2-byte address will
; be read from the script and this will jump to that
; address.
;
; If the player chose "Sell", this will skip the address
; and execute the next script action.
;
; XREFS:
;     <a href="#IScriptActions_L">IScriptActions_L</a> [$PRG12::828a]
;============================================================================
</div><span class="l"><a class="anc" name="8630" href="#8630">[8630]</a><a href="#IScriptAction_ShowBuySellMenu" class="la">IScriptAction_ShowBuySellMenu:</a><span class="ce">; [$8630]</span></span>
<div class="c">;
; Display the next "Come here to buy or sell?" message.
;
</div><span class="l"><a class="anc" name="8630" href="#8630">[8630]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$10</span></span><span class="ce">; 0x10 == "Did you come here to buy and sell?"</span></span>
<span class="l"><a class="anc" name="8632" href="#8632">[8632]</a><span class="cd"><span class="i">JSR</span> <span class="o">$f3e9</span></span><span class="ce">; Load and show that message in its entirety.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Set 2 strings for the menu.
;
</div><span class="l"><a class="anc" name="8635" href="#8635">[8635]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$02</span></span><span class="ce">; Queue 2 strings to draw.</span></span>
<span class="l"><a class="anc" name="8637" href="#8637">[8637]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#Arg_StringsCount">Arg_StringsCount</a></span></span><span class="ce">; Set it.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Set the start cursor position to Buy.
;
</div><span class="l"><a class="anc" name="863a" href="#863a">[863a]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$00</span></span><span class="ce">; Set the start cursor position to 0.</span></span>
<span class="l"><a class="anc" name="863c" href="#863c">[863c]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#Menu_CursorPos">Menu_CursorPos</a></span></span></span>
<span class="l"></span>
<span class="l"></span>
<a name=":863f:@_loop"></a><div class="c">;
; Render the menu and wait for button changes.
;
</div><span class="l"><a class="anc" name="863f" href="#863f">[863f]</a><a href="#:863f:@_loop" class="lla">@_loop:</a><span class="ce">; [$863f]</span></span>
<span class="l"><a class="anc" name="863f" href="#863f">[863f]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#IScripts_UpdatePortraitAnimation">IScripts_UpdatePortraitAnimation</a></span></span><span class="ce">; Update the portrait animation.</span></span>
<span class="l"><a class="anc" name="8642" href="#8642">[8642]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#Menu_UpdateAndDraw">Menu_UpdateAndDraw</a></span></span><span class="ce">; Update and draw the menu.</span></span>
<span class="l"><a class="anc" name="8645" href="#8645">[8645]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="RAM.html#Joy1_ChangedButtonMask">Joy1_ChangedButtonMask</a></span></span><span class="ce">; Load the changed button mask.</span></span>
<span class="l"><a class="anc" name="8647" href="#8647">[8647]</a><span class="cd"><span class="i">BMI</span> <span class="o"><a href="#@_choiceMade">@_choiceMade</a></span></span><span class="ce">; If the A button was pressed, jump.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Check any button presses since the last iteration.
;
</div><span class="l"><a class="anc" name="8649" href="#8649">[8649]</a><span class="cd"><span class="i">ASL</span> <span class="o">A</span></span><span class="ce">; Increment the bit to check in the button mask.</span></span>
<span class="l"><a class="anc" name="864a" href="#864a">[864a]</a><span class="cd"><span class="i">BPL</span> <span class="o"><a href="#@_loop">@_loop</a></span></span><span class="ce">; If any other button was pressed, loop.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; End the script.
;
</div><span class="l"><a class="anc" name="864c" href="#864c">[864c]</a><span class="cd"><span class="i">JMP</span> <span class="o"><a href="#IScriptAction_EndScript">IScriptAction_EndScript</a></span></span></span>
<span class="l"></span>
<span class="l"></span>
<a name=":864f:@_choiceMade"></a><div class="c">;
; Perform the next action based on the choice.
;
</div><span class="l"><a class="anc" name="864f" href="#864f">[864f]</a><a href="#:864f:@_choiceMade" class="lla">@_choiceMade:</a><span class="ce">; [$864f]</span></span>
<span class="l"><a class="anc" name="864f" href="#864f">[864f]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#Menu_CursorPos">Menu_CursorPos</a></span></span><span class="ce">; Check the cursor position.</span></span>
<span class="l"><a class="anc" name="8652" href="#8652">[8652]</a><span class="cd"><span class="i">BEQ</span> <span class="o"><a href="#IScripts_JumpToNextAddr">IScripts_JumpToNextAddr</a></span></span><span class="ce">; If it's the first item, jump to the next address in the script.</span></span>
<span class="l"><a class="anc" name="8654" href="#8654">[8654]</a><span class="cd"><span class="i">JMP</span> <span class="o"><a href="#IScripts_SkipAddrAndInvoke">IScripts_SkipAddrAndInvoke</a></span></span><span class="ce">; Else, skip the address and invoke the next action.</span></span>
<span class="l"></span>
<span class="l"></span>
</pre><pre><a name="IScriptAction_ConsumeItem"></a><div class="cp">;============================================================================
; IScript action for consuming a player's item.
;
; This will load the next byte as an inventory item type
; and remove it from the player's inventory.
;
; It will then invoke the next action in the script.
;
; XREFS:
;     <a href="#IScriptActions_L">IScriptActions_L</a> [$PRG12::828b]
;============================================================================
</div><span class="l"><a class="anc" name="8657" href="#8657">[8657]</a><a href="#IScriptAction_ConsumeItem" class="la">IScriptAction_ConsumeItem:</a><span class="ce">; [$8657]</span></span>
<span class="l"><a class="anc" name="8657" href="#8657">[8657]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#IScripts_LoadByte">IScripts_LoadByte</a></span></span><span class="ce">; Load the next byte as the item ID.</span></span>
<span class="l"><a class="anc" name="865a" href="#865a">[865a]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#Player_RemoveItem">Player_RemoveItem</a></span></span><span class="ce">; Remove the item from the player's inventory.</span></span>
<span class="l"><a class="anc" name="865d" href="#865d">[865d]</a><span class="cd"><span class="i">JMP</span> <span class="o"><a href="#IScripts_InvokeNextAction">IScripts_InvokeNextAction</a></span></span><span class="ce">; Invoke the next action.</span></span>
<span class="l"></span>
</pre><pre><a name="IScriptAction_ShowSellMenu"></a><div class="cp">;============================================================================
; TODO: Document IScriptAction_ShowSellMenu
;
; INPUTS:
;     None.
;
; OUTPUTS:
;     TODO
;
; XREFS:
;     <a href="#IScriptActions_L">IScriptActions_L</a> [$PRG12::828c]
;============================================================================
</div><span class="l"><a class="anc" name="8660" href="#8660">[8660]</a><a href="#IScriptAction_ShowSellMenu" class="la">IScriptAction_ShowSellMenu:</a><span class="ce">; [$8660]</span></span>
<span class="l"><a class="anc" name="8660" href="#8660">[8660]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#IScripts_LoadByte">IScripts_LoadByte</a></span></span></span>
<span class="l"><a class="anc" name="8663" href="#8663">[8663]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Temp_Int24">Temp_Int24</a></span></span></span>
<span class="l"><a class="anc" name="8665" href="#8665">[8665]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#IScripts_LoadByte">IScripts_LoadByte</a></span></span></span>
<span class="l"><a class="anc" name="8668" href="#8668">[8668]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Temp_Int24_M">Temp_Int24_M</a></span></span></span>
<span class="l"><a class="anc" name="866a" href="#866a">[866a]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$00</span></span></span>
<span class="l"><a class="anc" name="866c" href="#866c">[866c]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#Arg_StringsCount">Arg_StringsCount</a></span></span></span>
<span class="l"><a class="anc" name="866f" href="#866f">[866f]</a><span class="cd"><span class="i">LDX</span> <span class="o">#$04</span></span></span>
<span class="l"></span>
<a name=":8671:@LAB_PRG12__8671"></a><span class="l"><a class="anc" name="8671" href="#8671">[8671]</a><a href="#:8671:@LAB_PRG12__8671" class="lla">@LAB_PRG12__8671:</a><span class="ce">; [$8671]</span></span>
<span class="l"><a class="anc" name="8671" href="#8671">[8671]</a><span class="cd"><span class="i">LDY</span> <span class="o"><a href="RAM.html#NumberOfWeapons">NumberOfWeapons</a>,X</span></span></span>
<span class="l"><a class="anc" name="8674" href="#8674">[8674]</a><span class="cd"><span class="i">BEQ</span> <span class="o"><a href="#@LAB_PRG12__86b7">@LAB_PRG12__86b7</a></span></span></span>
<span class="l"><a class="anc" name="8676" href="#8676">[8676]</a><span class="cd"><span class="i">TXA</span></span></span>
<span class="l"><a class="anc" name="8677" href="#8677">[8677]</a><span class="cd"><span class="i">PHA</span></span></span>
<span class="l"><a class="anc" name="8678" href="#8678">[8678]</a><span class="cd"><span class="i">JSR</span> <span class="o">$f78b</span></span></span>
<span class="l"><a class="anc" name="867b" href="#867b">[867b]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#Maybe_Shop_InventoryBitmask">Maybe_Shop_InventoryBitmask</a></span></span></span>
<span class="l"><a class="anc" name="867e" href="#867e">[867e]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="#INVENTORY_CATEGORY_L">INVENTORY_CATEGORY_L</a>,X</span></span></span>
<span class="l"><a class="anc" name="8681" href="#8681">[8681]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Temp_Int24_U">Temp_Int24_U</a></span></span></span>
<span class="l"><a class="anc" name="8683" href="#8683">[8683]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="#INVENTORY_CATEGORY_U">INVENTORY_CATEGORY_U</a>,X</span></span></span>
<span class="l"><a class="anc" name="8686" href="#8686">[8686]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Maybe_Temp4">Maybe_Temp4</a></span></span></span>
<span class="l"><a class="anc" name="8688" href="#8688">[8688]</a><span class="cd"><span class="i">DEY</span></span></span>
<span class="l"></span>
<a name=":8689:@LAB_PRG12__8689"></a><span class="l"><a class="anc" name="8689" href="#8689">[8689]</a><a href="#:8689:@LAB_PRG12__8689" class="lla">@LAB_PRG12__8689:</a><span class="ce">; [$8689]</span></span>
<span class="l"><a class="anc" name="8689" href="#8689">[8689]</a><span class="cd"><span class="i">TYA</span></span></span>
<span class="l"><a class="anc" name="868a" href="#868a">[868a]</a><span class="cd"><span class="i">PHA</span></span></span>
<span class="l"><a class="anc" name="868b" href="#868b">[868b]</a><span class="cd"><span class="i">LDA</span> <span class="o">($ee),Y</span></span></span>
<span class="l"><a class="anc" name="868d" href="#868d">[868d]</a><span class="cd"><span class="i">ORA</span> <span class="o">a:<a href="RAM.html#Maybe_Shop_InventoryBitmask">Maybe_Shop_InventoryBitmask</a></span></span></span>
<span class="l"><a class="anc" name="8690" href="#8690">[8690]</a><span class="cd"><span class="i">TAX</span></span></span>
<span class="l"><a class="anc" name="8691" href="#8691">[8691]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#IScripts_SellMenu_Something8704">IScripts_SellMenu_Something8704</a></span></span></span>
<span class="l"><a class="anc" name="8694" href="#8694">[8694]</a><span class="cd"><span class="i">BNE</span> <span class="o"><a href="#@LAB_PRG12__86b0">@LAB_PRG12__86b0</a></span></span></span>
<span class="l"><a class="anc" name="8696" href="#8696">[8696]</a><span class="cd"><span class="i">LDX</span> <span class="o">a:<a href="RAM.html#Arg_StringsCount">Arg_StringsCount</a></span></span></span>
<span class="l"><a class="anc" name="8699" href="#8699">[8699]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#DataArray">DataArray</a>,X</span></span></span>
<span class="l"><a class="anc" name="869c" href="#869c">[869c]</a><span class="cd"><span class="i">INY</span></span></span>
<span class="l"><a class="anc" name="869d" href="#869d">[869d]</a><span class="cd"><span class="i">LDA</span> <span class="o">(<a href="RAM.html#Temp_Int24">Temp_Int24</a>),Y</span></span></span>
<span class="l"><a class="anc" name="869f" href="#869f">[869f]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#ShopItemCostsL">ShopItemCostsL</a>,X</span></span></span>
<span class="l"><a class="anc" name="86a2" href="#86a2">[86a2]</a><span class="cd"><span class="i">INY</span></span></span>
<span class="l"><a class="anc" name="86a3" href="#86a3">[86a3]</a><span class="cd"><span class="i">LDA</span> <span class="o">(<a href="RAM.html#Temp_Int24">Temp_Int24</a>),Y</span></span></span>
<span class="l"><a class="anc" name="86a5" href="#86a5">[86a5]</a><span class="cd"><span class="i">LSR</span> <span class="o">A</span></span></span>
<span class="l"><a class="anc" name="86a6" href="#86a6">[86a6]</a><span class="cd"><span class="i">ROR</span> <span class="o"><a href="RAM.html#ShopItemCostsL">ShopItemCostsL</a>,X</span></span></span>
<span class="l"><a class="anc" name="86a9" href="#86a9">[86a9]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#ShopItemCostsU">ShopItemCostsU</a>,X</span></span></span>
<span class="l"><a class="anc" name="86ac" href="#86ac">[86ac]</a><span class="cd"><span class="i">INX</span></span></span>
<span class="l"><a class="anc" name="86ad" href="#86ad">[86ad]</a><span class="cd"><span class="i">STX</span> <span class="o">a:<a href="RAM.html#Arg_StringsCount">Arg_StringsCount</a></span></span></span>
<span class="l"></span>
<a name=":86b0:@LAB_PRG12__86b0"></a><span class="l"><a class="anc" name="86b0" href="#86b0">[86b0]</a><a href="#:86b0:@LAB_PRG12__86b0" class="lla">@LAB_PRG12__86b0:</a><span class="ce">; [$86b0]</span></span>
<span class="l"><a class="anc" name="86b0" href="#86b0">[86b0]</a><span class="cd"><span class="i">PLA</span></span></span>
<span class="l"><a class="anc" name="86b1" href="#86b1">[86b1]</a><span class="cd"><span class="i">TAY</span></span></span>
<span class="l"><a class="anc" name="86b2" href="#86b2">[86b2]</a><span class="cd"><span class="i">DEY</span></span></span>
<span class="l"><a class="anc" name="86b3" href="#86b3">[86b3]</a><span class="cd"><span class="i">BPL</span> <span class="o"><a href="#@LAB_PRG12__8689">@LAB_PRG12__8689</a></span></span></span>
<span class="l"><a class="anc" name="86b5" href="#86b5">[86b5]</a><span class="cd"><span class="i">PLA</span></span></span>
<span class="l"><a class="anc" name="86b6" href="#86b6">[86b6]</a><span class="cd"><span class="i">TAX</span></span></span>
<span class="l"></span>
<a name=":86b7:@LAB_PRG12__86b7"></a><span class="l"><a class="anc" name="86b7" href="#86b7">[86b7]</a><a href="#:86b7:@LAB_PRG12__86b7" class="lla">@LAB_PRG12__86b7:</a><span class="ce">; [$86b7]</span></span>
<span class="l"><a class="anc" name="86b7" href="#86b7">[86b7]</a><span class="cd"><span class="i">INX</span></span></span>
<span class="l"><a class="anc" name="86b8" href="#86b8">[86b8]</a><span class="cd"><span class="i">CPX</span> <span class="o">#$05</span></span></span>
<span class="l"><a class="anc" name="86ba" href="#86ba">[86ba]</a><span class="cd"><span class="i">BNE</span> <span class="o"><a href="#@LAB_PRG12__8671">@LAB_PRG12__8671</a></span></span></span>
<span class="l"><a class="anc" name="86bc" href="#86bc">[86bc]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#Arg_StringsCount">Arg_StringsCount</a></span></span></span>
<span class="l"><a class="anc" name="86bf" href="#86bf">[86bf]</a><span class="cd"><span class="i">BNE</span> <span class="o"><a href="#@LAB_PRG12__86c6">@LAB_PRG12__86c6</a></span></span></span>
<span class="l"><a class="anc" name="86c1" href="#86c1">[86c1]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$12</span></span></span>
<span class="l"><a class="anc" name="86c3" href="#86c3">[86c3]</a><span class="cd"><span class="i">JMP</span> <span class="o"><a href="#IScripts_ShowFinalMessage">IScripts_ShowFinalMessage</a></span></span></span>
<span class="l"></span>
<a name=":86c6:@LAB_PRG12__86c6"></a><span class="l"><a class="anc" name="86c6" href="#86c6">[86c6]</a><a href="#:86c6:@LAB_PRG12__86c6" class="lla">@LAB_PRG12__86c6:</a><span class="ce">; [$86c6]</span></span>
<span class="l"><a class="anc" name="86c6" href="#86c6">[86c6]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$13</span></span></span>
<span class="l"><a class="anc" name="86c8" href="#86c8">[86c8]</a><span class="cd"><span class="i">JSR</span> <span class="o">$f3f5</span></span></span>
<span class="l"></span>
<a name=":86cb:@LAB_PRG12__86cb"></a><span class="l"><a class="anc" name="86cb" href="#86cb">[86cb]</a><a href="#:86cb:@LAB_PRG12__86cb" class="lla">@LAB_PRG12__86cb:</a><span class="ce">; [$86cb]</span></span>
<span class="l"><a class="anc" name="86cb" href="#86cb">[86cb]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#IScripts_UpdatePortraitAnimation">IScripts_UpdatePortraitAnimation</a></span></span></span>
<span class="l"><a class="anc" name="86ce" href="#86ce">[86ce]</a><span class="cd"><span class="i">JSR</span> <span class="o">$f466</span></span></span>
<span class="l"><a class="anc" name="86d1" href="#86d1">[86d1]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#TextBox_CheckShouldContinueOrDismissMessage">TextBox_CheckShouldContinueOrDismissMessage</a></span></span></span>
<span class="l"><a class="anc" name="86d4" href="#86d4">[86d4]</a><span class="cd"><span class="i">BCS</span> <span class="o"><a href="#@_endScript">@_endScript</a></span></span></span>
<span class="l"><a class="anc" name="86d6" href="#86d6">[86d6]</a><span class="cd"><span class="i">BNE</span> <span class="o"><a href="#@LAB_PRG12__86cb">@LAB_PRG12__86cb</a></span></span></span>
<span class="l"><a class="anc" name="86d8" href="#86d8">[86d8]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#Shop_Draw">Shop_Draw</a></span></span></span>
<span class="l"><a class="anc" name="86db" href="#86db">[86db]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#IScripts_WaitForMenuInput">IScripts_WaitForMenuInput</a></span></span></span>
<span class="l"><a class="anc" name="86de" href="#86de">[86de]</a><span class="cd"><span class="i">BCS</span> <span class="o"><a href="#@_endScript">@_endScript</a></span></span></span>
<span class="l"><a class="anc" name="86e0" href="#86e0">[86e0]</a><span class="cd"><span class="i">LDX</span> <span class="o">a:<a href="RAM.html#Menu_CursorPos">Menu_CursorPos</a></span></span></span>
<span class="l"><a class="anc" name="86e3" href="#86e3">[86e3]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="RAM.html#ShopItemCostsL">ShopItemCostsL</a>,X</span></span></span>
<span class="l"><a class="anc" name="86e6" href="#86e6">[86e6]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#Temp_0202">Temp_0202</a></span></span></span>
<span class="l"><a class="anc" name="86e9" href="#86e9">[86e9]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="RAM.html#ShopItemCostsU">ShopItemCostsU</a>,X</span></span></span>
<span class="l"><a class="anc" name="86ec" href="#86ec">[86ec]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#Temp_0203">Temp_0203</a></span></span></span>
<span class="l"><a class="anc" name="86ef" href="#86ef">[86ef]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="RAM.html#DataArray">DataArray</a>,X</span></span></span>
<span class="l"><a class="anc" name="86f2" href="#86f2">[86f2]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#Player_RemoveItem">Player_RemoveItem</a></span></span></span>
<span class="l"><a class="anc" name="86f5" href="#86f5">[86f5]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#IScripts_ProgressivelyAddGold">IScripts_ProgressivelyAddGold</a></span></span></span>
<span class="l"><a class="anc" name="86f8" href="#86f8">[86f8]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#TextBox_Close">TextBox_Close</a></span></span></span>
<span class="l"><a class="anc" name="86fb" href="#86fb">[86fb]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#TextBox_OpenForNPC">TextBox_OpenForNPC</a></span></span></span>
<span class="l"><a class="anc" name="86fe" href="#86fe">[86fe]</a><span class="cd"><span class="i">JMP</span> <span class="o"><a href="#IScripts_InvokeNextAction">IScripts_InvokeNextAction</a></span></span></span>
<span class="l"></span>
<a name=":8701:@_endScript"></a><span class="l"><a class="anc" name="8701" href="#8701">[8701]</a><a href="#:8701:@_endScript" class="lla">@_endScript:</a><span class="ce">; [$8701]</span></span>
<span class="l"><a class="anc" name="8701" href="#8701">[8701]</a><span class="cd"><span class="i">JMP</span> <span class="o"><a href="#IScriptAction_EndScript">IScriptAction_EndScript</a></span></span></span>
<span class="l"></span>
</pre><pre><a name="IScripts_SellMenu_Something8704"></a><div class="cp">;============================================================================
; TODO: Document IScripts_SellMenu_Something8704
;
; INPUTS:
;     X
;
; OUTPUTS:
;     TODO
;
; XREFS:
;     <a href="#IScriptAction_ShowSellMenu">IScriptAction_ShowSellMenu</a>
;============================================================================
</div><span class="l"><a class="anc" name="8704" href="#8704">[8704]</a><a href="#IScripts_SellMenu_Something8704" class="la">IScripts_SellMenu_Something8704:</a><span class="ce">; [$8704]</span></span>
<span class="l"><a class="anc" name="8704" href="#8704">[8704]</a><span class="cd"><span class="i">LDY</span> <span class="o">#$00</span></span></span>
<span class="l"></span>
<a name=":8706:@_loop"></a><span class="l"><a class="anc" name="8706" href="#8706">[8706]</a><a href="#:8706:@_loop" class="lla">@_loop:</a><span class="ce">; [$8706]</span></span>
<span class="l"><a class="anc" name="8706" href="#8706">[8706]</a><span class="cd"><span class="i">LDA</span> <span class="o">(<a href="RAM.html#Temp_Int24">Temp_Int24</a>),Y</span></span></span>
<span class="l"><a class="anc" name="8708" href="#8708">[8708]</a><span class="cd"><span class="i">CMP</span> <span class="o">#$ff</span></span></span>
<span class="l"><a class="anc" name="870a" href="#870a">[870a]</a><span class="cd"><span class="i">BEQ</span> <span class="o"><a href="#@LAB_PRG12__8716">@LAB_PRG12__8716</a></span></span></span>
<span class="l"><a class="anc" name="870c" href="#870c">[870c]</a><span class="cd"><span class="i">TXA</span></span></span>
<span class="l"><a class="anc" name="870d" href="#870d">[870d]</a><span class="cd"><span class="i">CMP</span> <span class="o">(<a href="RAM.html#Temp_Int24">Temp_Int24</a>),Y</span></span></span>
<span class="l"><a class="anc" name="870f" href="#870f">[870f]</a><span class="cd"><span class="i">BEQ</span> <span class="o"><a href="#@_return">@_return</a></span></span></span>
<span class="l"><a class="anc" name="8711" href="#8711">[8711]</a><span class="cd"><span class="i">INY</span></span></span>
<span class="l"><a class="anc" name="8712" href="#8712">[8712]</a><span class="cd"><span class="i">INY</span></span></span>
<span class="l"><a class="anc" name="8713" href="#8713">[8713]</a><span class="cd"><span class="i">INY</span></span></span>
<span class="l"><a class="anc" name="8714" href="#8714">[8714]</a><span class="cd"><span class="i">BNE</span> <span class="o"><a href="#@_loop">@_loop</a></span></span></span>
<span class="l"></span>
<a name=":8716:@LAB_PRG12__8716"></a><span class="l"><a class="anc" name="8716" href="#8716">[8716]</a><a href="#:8716:@LAB_PRG12__8716" class="lla">@LAB_PRG12__8716:</a><span class="ce">; [$8716]</span></span>
<span class="l"><a class="anc" name="8716" href="#8716">[8716]</a><span class="cd"><span class="i">TAX</span></span></span>
<span class="l"></span>
<a name=":8717:@_return"></a><span class="l"><a class="anc" name="8717" href="#8717">[8717]</a><a href="#:8717:@_return" class="lla">@_return:</a><span class="ce">; [$8717]</span></span>
<span class="l"><a class="anc" name="8717" href="#8717">[8717]</a><span class="cd"><span class="i">RTS</span></span></span>
<span class="l"></span>
<span class="l"></span>
</pre><pre><a name="IScriptAction_IfPlayerHasItem"></a><div class="cp">;============================================================================
; IScript Action $12: If Player Has Item.
;
; This will load the next byte as an inventory item type.
;
; If the player has the item, the next 2-byte address will
; be loaded and this will jump to that address.
;
; If the item is not in the inventory, the address will
; be skipped and the following action will be invoked.
;
; Script Parameters:
;
;     1. Item ID (1 byte)
;     2. Jump address (2 bytes)
;
; XREFS:
;     <a href="#IScriptActions_L">IScriptActions_L</a> [$PRG12::828d]
;============================================================================
</div><span class="l"><a class="anc" name="8718" href="#8718">[8718]</a><a href="#IScriptAction_IfPlayerHasItem" class="la">IScriptAction_IfPlayerHasItem:</a><span class="ce">; [$8718]</span></span>
<span class="l"><a class="anc" name="8718" href="#8718">[8718]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#IScripts_LoadByte">IScripts_LoadByte</a></span></span><span class="ce">; Load the next byte as the item ID.</span></span>
<span class="l"><a class="anc" name="871b" href="#871b">[871b]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#Player_LacksItem">Player_LacksItem</a></span></span><span class="ce">; Check if the player lacks this item.</span></span>
<span class="l"><a class="anc" name="871e" href="#871e">[871e]</a><span class="cd"><span class="i">BCC</span> <span class="o"><a href="#@_invokeElse">@_invokeElse</a></span></span><span class="ce">; If they have it, jump.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; The player does not have the item.
;
</div><span class="l"><a class="anc" name="8720" href="#8720">[8720]</a><span class="cd"><span class="i">JMP</span> <span class="o"><a href="#IScripts_SkipAddrAndInvoke">IScripts_SkipAddrAndInvoke</a></span></span><span class="ce">; Skip the next 2 bytes and invoke the following action.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name=":8723:@_invokeElse"></a><div class="c">;
; The player has the item.
;
</div><span class="l"><a class="anc" name="8723" href="#8723">[8723]</a><a href="#:8723:@_invokeElse" class="lla">@_invokeElse:</a><span class="ce">; [$8723]</span></span>
<span class="l"><a class="anc" name="8723" href="#8723">[8723]</a><span class="cd"><span class="i">JMP</span> <span class="o"><a href="#IScripts_JumpToNextAddr">IScripts_JumpToNextAddr</a></span></span><span class="ce">; Jump to the next address in the script.</span></span>
<span class="l"></span>
<span class="l"></span>
</pre><pre><a name="IScriptAction_CheckUpdatePlayerTitle"></a><div class="cp">;============================================================================
; IScript Action $04: Check and Update Player Title
;
; If the player was eligible for a new title, their title
; will be increased and the next 2-byte address in the
; script be loaded and this will jump to that address.
;
; If not, the address will be skipped and the next action
; will be invoked.
;
; Script Parameters:
;
;     1. If-Updated Jump Address (2 bytes)
;
; XREFS:
;     <a href="#IScriptActions_L">IScriptActions_L</a> [$PRG12::827f]
;============================================================================
</div><span class="l"><a class="anc" name="8726" href="#8726">[8726]</a><a href="#IScriptAction_CheckUpdatePlayerTitle" class="la">IScriptAction_CheckUpdatePlayerTitle:</a><span class="ce">; [$8726]</span></span>
<span class="l"><a class="anc" name="8726" href="#8726">[8726]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#NextPlayerTitle">NextPlayerTitle</a></span></span><span class="ce">; Load the next player title.</span></span>
<span class="l"><a class="anc" name="8729" href="#8729">[8729]</a><span class="cd"><span class="i">CMP</span> <span class="o">a:<a href="RAM.html#PlayerTitle">PlayerTitle</a></span></span><span class="ce">; Compare against the current title.</span></span>
<span class="l"><a class="anc" name="872c" href="#872c">[872c]</a><span class="cd"><span class="i">BEQ</span> <span class="o"><a href="#@_invokeElse">@_invokeElse</a></span></span><span class="ce">; If they're the same, jump.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; The player title is not a match. Update it.
;
</div><span class="l"><a class="anc" name="872e" href="#872e">[872e]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#PlayerTitle">PlayerTitle</a></span></span><span class="ce">; Advance the player title.</span></span>
<span class="l"><a class="anc" name="8731" href="#8731">[8731]</a><span class="cd"><span class="i">JMP</span> <span class="o"><a href="#IScripts_JumpToNextAddr">IScripts_JumpToNextAddr</a></span></span><span class="ce">; Read the next 2 bytes as an address and jump to it.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name=":8734:@_invokeElse"></a><div class="c">;
; The player already has that title.
;
</div><span class="l"><a class="anc" name="8734" href="#8734">[8734]</a><a href="#:8734:@_invokeElse" class="lla">@_invokeElse:</a><span class="ce">; [$8734]</span></span>
<span class="l"><a class="anc" name="8734" href="#8734">[8734]</a><span class="cd"><span class="i">JMP</span> <span class="o"><a href="#IScripts_SkipAddrAndInvoke">IScripts_SkipAddrAndInvoke</a></span></span><span class="ce">; Skip the next 2 bytes and invoke the following action.</span></span>
<span class="l"></span>
<span class="l"></span>
</pre><pre><a name="IScriptAction_ShowPassword"></a><div class="cp">;============================================================================
; IScript Action $14: Show Password
;
; This is used when interacting with Gurus. The current
; state of the game will be encoded as a password and
; displayed.
;
; Script Parameters:
;     None.
;
; XREFS:
;     <a href="#IScriptActions_L">IScriptActions_L</a> [$PRG12::828f]
;============================================================================
</div><span class="l"><a class="anc" name="8737" href="#8737">[8737]</a><a href="#IScriptAction_ShowPassword" class="la">IScriptAction_ShowPassword:</a><span class="ce">; [$8737]</span></span>
<span class="l"><a class="anc" name="8737" href="#8737">[8737]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#Password_GenerateStateAndReset">Password_GenerateStateAndReset</a></span></span><span class="ce">; Generate the password state.</span></span>
<span class="l"><a class="anc" name="873a" href="#873a">[873a]</a><span class="cd"><span class="i">JSR</span> <span class="o">$f434</span></span><span class="ce">; Clear the textbox.</span></span>
<span class="l"><a class="anc" name="873d" href="#873d">[873d]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$00</span></span></span>
<span class="l"><a class="anc" name="873f" href="#873f">[873f]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#IScripts_Unused_207">IScripts_Unused_207</a></span></span><span class="ce">; DEADCODE: Set to 0.</span></span>
<span class="l"></span>
<a name=":8742:@_charLoop"></a><span class="l"><a class="anc" name="8742" href="#8742">[8742]</a><a href="#:8742:@_charLoop" class="lla">@_charLoop:</a><span class="ce">; [$8742]</span></span>
<span class="l"><a class="anc" name="8742" href="#8742">[8742]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#IScripts_UpdatePortraitAnimation">IScripts_UpdatePortraitAnimation</a></span></span><span class="ce">; Update the portrait animation.</span></span>
<span class="l"><a class="anc" name="8745" href="#8745">[8745]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#PasswordScreen_ShowNextChar">PasswordScreen_ShowNextChar</a></span></span><span class="ce">; Show the next character in the password.</span></span>
<span class="l"><a class="anc" name="8748" href="#8748">[8748]</a><span class="cd"><span class="i">BCC</span> <span class="o"><a href="#@_charLoop">@_charLoop</a></span></span><span class="ce">; If not done, loop.</span></span>
<span class="l"></span>
<a name=":874a:@_portraitLoop"></a><span class="l"><a class="anc" name="874a" href="#874a">[874a]</a><a href="#:874a:@_portraitLoop" class="lla">@_portraitLoop:</a><span class="ce">; [$874a]</span></span>
<span class="l"><a class="anc" name="874a" href="#874a">[874a]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#IScripts_UpdatePortraitAnimation">IScripts_UpdatePortraitAnimation</a></span></span><span class="ce">; Update the portrait animation.</span></span>
<span class="l"><a class="anc" name="874d" href="#874d">[874d]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#TextBox_DrawUpArrowTerminatorSymbol">TextBox_DrawUpArrowTerminatorSymbol</a></span></span><span class="ce">; Draw the Up Arrow in the textbox.</span></span>
<span class="l"><a class="anc" name="8750" href="#8750">[8750]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="RAM.html#Joy1_ChangedButtonMask">Joy1_ChangedButtonMask</a></span></span><span class="ce">; A = Changed button mask</span></span>
<span class="l"><a class="anc" name="8752" href="#8752">[8752]</a><span class="cd"><span class="i">BPL</span> <span class="o"><a href="#@_portraitLoop">@_portraitLoop</a></span></span><span class="ce">; If not dismissed, loop.</span></span>
<span class="l"><a class="anc" name="8754" href="#8754">[8754]</a><span class="cd"><span class="i">JMP</span> <span class="o"><a href="#IScripts_InvokeNextAction">IScripts_InvokeNextAction</a></span></span><span class="ce">; Invoke the next action in the script.</span></span>
<span class="l"></span>
<span class="l"></span>
</pre><pre><a name="PasswordScreen_ShowNextChar"></a><div class="cp">;============================================================================
; Show the next character of a password.
;
; This will fetch the next 6 bits of a password and look
; that up in the character display lookup table.
;
; INPUTS:
;     <a href="#PASSWORD_ENTERED_CHARS">PASSWORD_ENTERED_CHARS</a>
;         The lookup table of characters.
;
; OUTPUTS:
;     C:
;         1 if finished with the password.
;         0 if there are characters remaining.
;
; CALLS:
;     <a href="#Password_GetNext6Bits">Password_GetNext6Bits</a>
;     <a href="PRG15_MIRROR.html#TextBox_ShowMessage">TextBox_ShowMessage</a>
;
; XREFS:
;     <a href="#IScriptAction_ShowPassword">IScriptAction_ShowPassword</a>
;============================================================================
</div><span class="l"><a class="anc" name="8757" href="#8757">[8757]</a><a href="#PasswordScreen_ShowNextChar" class="la">PasswordScreen_ShowNextChar:</a><span class="ce">; [$8757]</span></span>
<span class="l"><a class="anc" name="8757" href="#8757">[8757]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#Password_GetNext6Bits">Password_GetNext6Bits</a></span></span><span class="ce">; Get the next 6 bits of password state for the character offset.</span></span>
<span class="l"><a class="anc" name="875a" href="#875a">[875a]</a><span class="cd"><span class="i">PHP</span></span><span class="ce">; Push flags to stack.</span></span>
<span class="l"><a class="anc" name="875b" href="#875b">[875b]</a><span class="cd"><span class="i">TAY</span></span><span class="ce">; Y = A (index)</span></span>
<span class="l"><a class="anc" name="875c" href="#875c">[875c]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="#PASSWORD_ENTERED_CHARS">PASSWORD_ENTERED_CHARS</a>,Y</span></span><span class="ce">; A = character at index Y</span></span>
<span class="l"><a class="anc" name="875f" href="#875f">[875f]</a><span class="cd"><span class="i">JSR</span> <span class="o">$f4ff</span></span><span class="ce">; Show the character in the textbox.</span></span>
<span class="l"><a class="anc" name="8762" href="#8762">[8762]</a><span class="cd"><span class="i">PLP</span></span><span class="ce">; Pop flags.</span></span>
<span class="l"><a class="anc" name="8763" href="#8763">[8763]</a><span class="cd"><span class="i">RTS</span></span></span>
<span class="l"></span>
<span class="l"></span>
<a name="PASSWORD_ENTERED_CHARS"></a><div class="cp">;============================================================================
; List of password characters by index.
;
; XREFS:
;     <a href="#PasswordScreen_DrawAtCursorPosition">PasswordScreen_DrawAtCursorPosition</a>
;     <a href="#PasswordScreen_ShowNextChar">PasswordScreen_ShowNextChar</a>
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#PasswordScreen_DrawAtCursorPosition">PasswordScreen_DrawAtCursorPosition</a>
;     <a href="#PasswordScreen_ShowNextChar">PasswordScreen_ShowNextChar</a>
;
</div><span class="l"><a class="anc" name="8764" href="#8764">[8764]</a><a href="#PASSWORD_ENTERED_CHARS" class="la">PASSWORD_ENTERED_CHARS:</a><span class="ce">; [$8764]</span></span>
<span class="l"><a class="anc" name="8764" href="#8764">[8764]</a><span class="cd"><span class="i">db</span> <span class="o">"ABCDEFGHIJKLMNOP"</span></span><span class="ce">; [$8764] char</span></span>
<span class="l"><a class="anc" name="8774" href="#8774">[8774]</a><span class="cd"><span class="i">db</span> <span class="o">"QRSTUVWXYZabcdef"</span></span><span class="ce">; [$8774] char</span></span>
<span class="l"><a class="anc" name="8784" href="#8784">[8784]</a><span class="cd"><span class="i">db</span> <span class="o">"ghijklmnopqrstuv"</span></span><span class="ce">; [$8784] char</span></span>
<span class="l"><a class="anc" name="8794" href="#8794">[8794]</a><span class="cd"><span class="i">db</span> <span class="o">"wxyz0123456789,?"</span></span><span class="ce">; [$8794] char</span></span>
<span class="l"></span>
<span class="l"></span>
</pre><pre><a name="IScripts_LoadByte"></a><div class="cp">;============================================================================
; Load the next byte from the IScript.
;
; This will load the byte and update the offset.
;
; If the offset wraps around from 0xFF to 0, the upper
; bound of the address will wrap.
;
; INPUTS:
;     <a href="RAM.html#IScriptOrCHRAddr">IScriptOrCHRAddr</a>:
;         The start address of the script to read from.
;
;     <a href="RAM.html#IScriptOffset">IScriptOffset</a>:
;         The offset within the script.
;
; OUTPUTS:
;     A:
;         The resulting byte.
;
; XREFS:
;     <a href="#IScriptAction_AddGold">IScriptAction_AddGold</a>
;     <a href="#IScriptAction_AddHP">IScriptAction_AddHP</a>
;     <a href="#IScriptAction_AddInventoryItem">IScriptAction_AddInventoryItem</a>
;     <a href="#IScriptAction_AddMP">IScriptAction_AddMP</a>
;     <a href="#IScriptAction_ConsumeItem">IScriptAction_ConsumeItem</a>
;     <a href="#IScriptAction_IfPlayerHasItem">IScriptAction_IfPlayerHasItem</a>
;     <a href="#IScriptAction_IfPlayerHasTitle">IScriptAction_IfPlayerHasTitle</a>
;     <a href="#IScriptAction_IfQuestCompleted">IScriptAction_IfQuestCompleted</a>
;     <a href="#IScriptAction_OpenShop">IScriptAction_OpenShop</a>
;     <a href="#IScriptAction_SetQuestComplete">IScriptAction_SetQuestComplete</a>
;     <a href="#IScriptAction_SetSpawnPoint">IScriptAction_SetSpawnPoint</a>
;     <a href="#IScriptAction_ShowMessage">IScriptAction_ShowMessage</a>
;     <a href="#IScriptAction_ShowQuestionMessage">IScriptAction_ShowQuestionMessage</a>
;     <a href="#IScriptAction_ShowQuestionMessageCheckIfDismissed">IScriptAction_ShowQuestionMessageCheckIfDismissed</a>
;     <a href="#IScriptAction_ShowSellMenu">IScriptAction_ShowSellMenu</a>
;     <a href="#IScriptAction_ShowUnskippableMessage">IScriptAction_ShowUnskippableMessage</a>
;     <a href="#IScriptAction_SpendGold">IScriptAction_SpendGold</a>
;     <a href="#IScripts_InvokeNextAction">IScripts_InvokeNextAction</a>
;     <a href="#IScripts_JumpToNextAddr">IScripts_JumpToNextAddr</a>
;     <a href="#IScripts_SkipAddrAndInvoke">IScripts_SkipAddrAndInvoke</a>
;============================================================================
</div><span class="l"><a class="anc" name="87a4" href="#87a4">[87a4]</a><a href="#IScripts_LoadByte" class="la">IScripts_LoadByte:</a><span class="ce">; [$87a4]</span></span>
<span class="l"><a class="anc" name="87a4" href="#87a4">[87a4]</a><span class="cd"><span class="i">LDY</span> <span class="o"><a href="RAM.html#IScriptOffset">IScriptOffset</a></span></span><span class="ce">; Y = current event offset</span></span>
<span class="l"><a class="anc" name="87a6" href="#87a6">[87a6]</a><span class="cd"><span class="i">LDA</span> <span class="o">(<a href="RAM.html#IScriptOrCHRAddr">IScriptOrCHRAddr</a>),Y</span></span><span class="ce">; A = byte in the script at the offset</span></span>
<span class="l"><a class="anc" name="87a8" href="#87a8">[87a8]</a><span class="cd"><span class="i">INY</span></span><span class="ce">; Y++</span></span>
<span class="l"><a class="anc" name="87a9" href="#87a9">[87a9]</a><span class="cd"><span class="i">BNE</span> <span class="o"><a href="#@_incOffset">@_incOffset</a></span></span><span class="ce">; If byte is not 0, update event and return.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; The offset wrapped from 0xFF to 0. Update the upper byte
; of the script address for the next read.
;
</div><span class="l"><a class="anc" name="87ab" href="#87ab">[87ab]</a><span class="cd"><span class="i">INC</span> <span class="o"><a href="RAM.html#IScriptOrCHRAddr_U">IScriptOrCHRAddr_U</a></span></span><span class="ce">; Increment the address</span></span>
<span class="l"></span>
<a name=":87ad:@_incOffset"></a><span class="l"><a class="anc" name="87ad" href="#87ad">[87ad]</a><a href="#:87ad:@_incOffset" class="lla">@_incOffset:</a><span class="ce">; [$87ad]</span></span>
<span class="l"><a class="anc" name="87ad" href="#87ad">[87ad]</a><span class="cd"><span class="i">STY</span> <span class="o"><a href="RAM.html#IScriptOffset">IScriptOffset</a></span></span><span class="ce">; Set new offset</span></span>
<span class="l"></span>
<a name="RETURN_87AF"></a><div class="c">;
; XREFS:
;     <a href="#IScripts_UpdatePortraitAnimation">IScripts_UpdatePortraitAnimation</a>
;
</div><span class="l"><a class="anc" name="87af" href="#87af">[87af]</a><a href="#RETURN_87AF" class="la">RETURN_87AF:</a><span class="ce">; [$87af]</span></span>
<span class="l"><a class="anc" name="87af" href="#87af">[87af]</a><span class="cd"><span class="i">RTS</span></span></span>
<span class="l"></span>
<span class="l"></span>
</pre><pre><a name="IScripts_UpdatePortraitAnimation"></a><div class="cp">;============================================================================
; Update the portrait animation during message display.
;
; This will redraw the screen in a frozen state, and then
; compute what frame of animation to show for the portrait.
;
; If there's no message to display, or the drawing of the
; message finished, then portrait frame 0 will be shown.
; Otherwise, the frame will be based on the animation counter,
; using frames 0..2.
;
; INPUTS:
;     <a href="RAM.html#InterruptCounter">InterruptCounter</a>:
;         The current interrupt counter.
;
;     <a href="RAM.html#MessageID">MessageID</a>:
;         The currently-displaying message ID.
;
;     <a href="RAM.html#Temp_0201">Temp_0201</a>:
;         The portrait ID.
;
;     <a href="RAM.html#TextBox_MessagePaused">TextBox_MessagePaused</a>:
;         The message display ended flag.
;
; OUTPUTS:
;     None.
;
; CALLS:
;     <a href="PRG15_MIRROR.html#Game_DrawScreenInFrozenState">Game_DrawScreenInFrozenState</a>
;     <a href="PRG15_MIRROR.html#Sprites_ResetForGameScreen">Sprites_ResetForGameScreen</a>
;     <a href="PRG15_MIRROR.html#IScripts_DrawPortraitAnimationFrame">IScripts_DrawPortraitAnimationFrame</a>
;     <a href="#IScripts_SetPortraitSpriteXY">IScripts_SetPortraitSpriteXY</a>
;     <a href="PRG15_MIRROR.html#WaitForNextFrame">WaitForNextFrame</a>
;
; XREFS:
;     <a href="#IScriptAction_AddHP">IScriptAction_AddHP</a>
;     <a href="#IScriptAction_AddInventoryItem">IScriptAction_AddInventoryItem</a>
;     <a href="#IScriptAction_AddMP">IScriptAction_AddMP</a>
;     <a href="#IScriptAction_EndScript">IScriptAction_EndScript</a>
;     <a href="#IScriptAction_OpenShop">IScriptAction_OpenShop</a>
;     <a href="#IScriptAction_ShowBuySellMenu">IScriptAction_ShowBuySellMenu</a>
;     <a href="#IScriptAction_ShowMessage">IScriptAction_ShowMessage</a>
;     <a href="#IScriptAction_ShowPassword">IScriptAction_ShowPassword</a>
;     <a href="#IScriptAction_ShowQuestionMessage">IScriptAction_ShowQuestionMessage</a>
;     <a href="#IScriptAction_ShowQuestionMessageCheckIfDismissed">IScriptAction_ShowQuestionMessageCheckIfDismissed</a>
;     <a href="#IScriptAction_ShowSellMenu">IScriptAction_ShowSellMenu</a>
;     <a href="#IScriptAction_ShowUnskippableMessage">IScriptAction_ShowUnskippableMessage</a>
;     <a href="#IScripts_ProgressivelyAddGold">IScripts_ProgressivelyAddGold</a>
;     <a href="#IScripts_ProgressivelySubtractGold">IScripts_ProgressivelySubtractGold</a>
;     <a href="#IScripts_ShowFinalMessage">IScripts_ShowFinalMessage</a>
;     <a href="#IScripts_WaitForMenuInput">IScripts_WaitForMenuInput</a>
;     <a href="#Maybe_Shop_DrawTextBox">Maybe_Shop_DrawTextBox</a>
;============================================================================
</div><span class="l"><a class="anc" name="87b0" href="#87b0">[87b0]</a><a href="#IScripts_UpdatePortraitAnimation" class="la">IScripts_UpdatePortraitAnimation:</a><span class="ce">; [$87b0]</span></span>
<span class="l"><a class="anc" name="87b0" href="#87b0">[87b0]</a><span class="cd"><span class="i">JSR</span> <span class="o">$ca25</span></span><span class="ce">; Wait for the next frame.</span></span>
<span class="l"><a class="anc" name="87b3" href="#87b3">[87b3]</a><span class="cd"><span class="i">JSR</span> <span class="o">$cb47</span></span><span class="ce">; Set up state for a screen draw.</span></span>
<span class="l"><a class="anc" name="87b6" href="#87b6">[87b6]</a><span class="cd"><span class="i">JSR</span> <span class="o">$dc46</span></span><span class="ce">; Draw the screen in a frozen animation state.</span></span>
<span class="l"><a class="anc" name="87b9" href="#87b9">[87b9]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#Temp_0201">Temp_0201</a></span></span><span class="ce">; Load the portrait ID.</span></span>
<span class="l"><a class="anc" name="87bc" href="#87bc">[87bc]</a><span class="cd"><span class="i">BPL</span> <span class="o"><a href="#RETURN_87AF">RETURN_87AF</a></span></span><span class="ce">; If no portrait, return.</span></span>
<span class="l"><a class="anc" name="87be" href="#87be">[87be]</a><span class="cd"><span class="i">JMP</span> <span class="o"><a href="#@_updatePortrait">@_updatePortrait</a></span></span><span class="ce">; Else, jump to update portrait (oddly, since we could fall through).</span></span>
<span class="l"></span>
<a name=":87c1:@_updatePortrait"></a><span class="l"><a class="anc" name="87c1" href="#87c1">[87c1]</a><a href="#:87c1:@_updatePortrait" class="lla">@_updatePortrait:</a><span class="ce">; [$87c1]</span></span>
<span class="l"><a class="anc" name="87c1" href="#87c1">[87c1]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#MessageID">MessageID</a></span></span><span class="ce">; Load the current message ID.</span></span>
<span class="l"><a class="anc" name="87c4" href="#87c4">[87c4]</a><span class="cd"><span class="i">BEQ</span> <span class="o"><a href="#@_messageIsUnset">@_messageIsUnset</a></span></span><span class="ce">; If unset, jump.</span></span>
<span class="l"><a class="anc" name="87c6" href="#87c6">[87c6]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#TextBox_MessagePaused">TextBox_MessagePaused</a></span></span><span class="ce">; Load the message-ended flag.</span></span>
<span class="l"><a class="anc" name="87c9" href="#87c9">[87c9]</a><span class="cd"><span class="i">BNE</span> <span class="o"><a href="#@_messageIsUnset">@_messageIsUnset</a></span></span><span class="ce">; If the message ended, jump.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; The message is still animating, so choose the next
; animation frame.
;
</div><span class="l"><a class="anc" name="87cb" href="#87cb">[87cb]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="RAM.html#InterruptCounter">InterruptCounter</a></span></span><span class="ce">; Load the interrupt counter.</span></span>
<span class="l"><a class="anc" name="87cd" href="#87cd">[87cd]</a><span class="cd"><span class="i">LSR</span> <span class="o">A</span></span><span class="ce">; Divide by 8.</span></span>
<span class="l"><a class="anc" name="87ce" href="#87ce">[87ce]</a><span class="cd"><span class="i">LSR</span> <span class="o">A</span></span></span>
<span class="l"><a class="anc" name="87cf" href="#87cf">[87cf]</a><span class="cd"><span class="i">LSR</span> <span class="o">A</span></span></span>
<span class="l"><a class="anc" name="87d0" href="#87d0">[87d0]</a><span class="cd"><span class="i">AND</span> <span class="o">#$03</span></span><span class="ce">; Keep bits 0-1 as the new animation frame.</span></span>
<span class="l"><a class="anc" name="87d2" href="#87d2">[87d2]</a><span class="cd"><span class="i">BPL</span> <span class="o"><a href="#@_drawFrame">@_drawFrame</a></span></span><span class="ce">; Jump to finish the update.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name=":87d4:@_messageIsUnset"></a><div class="c">;
; There's no message to continue showing, so freeze the
; animation to frame 0.
;
</div><span class="l"><a class="anc" name="87d4" href="#87d4">[87d4]</a><a href="#:87d4:@_messageIsUnset" class="lla">@_messageIsUnset:</a><span class="ce">; [$87d4]</span></span>
<span class="l"><a class="anc" name="87d4" href="#87d4">[87d4]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$00</span></span><span class="ce">; Force animation frame to 0.</span></span>
<span class="l"></span>
<a name=":87d6:@_drawFrame"></a><span class="l"><a class="anc" name="87d6" href="#87d6">[87d6]</a><a href="#:87d6:@_drawFrame" class="lla">@_drawFrame:</a><span class="ce">; [$87d6]</span></span>
<span class="l"><a class="anc" name="87d6" href="#87d6">[87d6]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#IScripts_SetPortraitSpriteXY">IScripts_SetPortraitSpriteXY</a></span></span><span class="ce">; Set the X/Y location for the portrait sprite.</span></span>
<span class="l"><a class="anc" name="87d9" href="#87d9">[87d9]</a><span class="cd"><span class="i">JMP</span> <span class="o">$f29b</span></span><span class="ce">; Draw the computed animation frame.</span></span>
<span class="l"></span>
<span class="l"></span>
</pre><pre><a name="IScripts_CheckEnoughMoney"></a><div class="cp">;============================================================================
; Check if the user has enough money.
;
; This will determine a result based on the values stored
; in GoldMRequired and GoldLRequired.
;
; If Gold_U is at all set, it's assumed the player has
; enough money, because all checks are under this amount.
;
; Else, if Gold_M has more than the requested amount, or
; is equal and Gold_L has more, then the player has enough.
;
; INPUTS:
;     <a href="RAM.html#Temp_Int24">Temp_Int24</a>:
;     <a href="RAM.html#Temp_Int24">Temp_Int24</a>+1:
;         The amount of gold required for a true result.
;
;     <a href="RAM.html#Gold">Gold</a>:
;     <a href="RAM.html#Gold_M">Gold_M</a>:
;     <a href="RAM.html#Gold_U">Gold_U</a>:
;         The amount of gold the player has.
;
; OUTPUTS:
;     C:
;         1 if the player has enough gold.
;         0 if the player does not.;
;
; XREFS:
;     <a href="#IScriptAction_OpenShop">IScriptAction_OpenShop</a>
;     <a href="#IScriptAction_SpendGold">IScriptAction_SpendGold</a>
;============================================================================
</div><span class="l"><a class="anc" name="87dc" href="#87dc">[87dc]</a><a href="#IScripts_CheckEnoughMoney" class="la">IScripts_CheckEnoughMoney:</a><span class="ce">; [$87dc]</span></span>
<div class="c">;
; Check the upper byte of the gold.
;
</div><span class="l"><a class="anc" name="87dc" href="#87dc">[87dc]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#Gold_U">Gold_U</a></span></span><span class="ce">; Load the upper byte of the player's gold amount.</span></span>
<span class="l"><a class="anc" name="87df" href="#87df">[87df]</a><span class="cd"><span class="i">CMP</span> <span class="o">#$00</span></span><span class="ce">; Is it 0?</span></span>
<span class="l"><a class="anc" name="87e1" href="#87e1">[87e1]</a><span class="cd"><span class="i">BNE</span> <span class="o"><a href="#@_return">@_return</a></span></span><span class="ce">; If no, return. CMP set Carry as our result.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Check the middle byte of the gold.
;
</div><span class="l"><a class="anc" name="87e3" href="#87e3">[87e3]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#Gold_M">Gold_M</a></span></span><span class="ce">; Load the middle byte of the player's gold amount.</span></span>
<span class="l"><a class="anc" name="87e6" href="#87e6">[87e6]</a><span class="cd"><span class="i">CMP</span> <span class="o"><a href="RAM.html#Temp_Int24_M">Temp_Int24_M</a></span></span><span class="ce">; Compare to the required amount.</span></span>
<span class="l"><a class="anc" name="87e8" href="#87e8">[87e8]</a><span class="cd"><span class="i">BNE</span> <span class="o"><a href="#@_return">@_return</a></span></span><span class="ce">; If not 0, return. CMP set Carry as our result.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Check the lower byte of the gold.
;
</div><span class="l"><a class="anc" name="87ea" href="#87ea">[87ea]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#Gold">Gold</a></span></span><span class="ce">; Load the lower byte of the gold amount.</span></span>
<span class="l"><a class="anc" name="87ed" href="#87ed">[87ed]</a><span class="cd"><span class="i">CMP</span> <span class="o"><a href="RAM.html#Temp_Int24">Temp_Int24</a></span></span><span class="ce">; Compare to get our final result as the Carry flag.</span></span>
<span class="l"></span>
<a name=":87ef:@_return"></a><span class="l"><a class="anc" name="87ef" href="#87ef">[87ef]</a><a href="#:87ef:@_return" class="lla">@_return:</a><span class="ce">; [$87ef]</span></span>
<span class="l"><a class="anc" name="87ef" href="#87ef">[87ef]</a><span class="cd"><span class="i">RTS</span></span></span>
<span class="l"></span>
<span class="l"></span>
</pre><pre><a name="TextBox_GetXPixelCoord"></a><div class="cp">;============================================================================
; Return a pixel X position for the current textbox position.
;
; INPUTS:
;     <a href="RAM.html#TextBox_X">TextBox_X</a>:
;         The textbox X position.
;
; OUTPUTS:
;     A:
;         The pixel X position.
;
; XREFS:
;     <a href="#Menu_UpdateAndDraw">Menu_UpdateAndDraw</a>
;============================================================================
</div><span class="l"><a class="anc" name="87f0" href="#87f0">[87f0]</a><a href="#TextBox_GetXPixelCoord" class="la">TextBox_GetXPixelCoord:</a><span class="ce">; [$87f0]</span></span>
<span class="l"><a class="anc" name="87f0" href="#87f0">[87f0]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#TextBox_X">TextBox_X</a></span></span><span class="ce">; Load the X tile position.</span></span>
<span class="l"><a class="anc" name="87f3" href="#87f3">[87f3]</a><span class="cd"><span class="i">ASL</span> <span class="o">A</span></span><span class="ce">; Multiply by 8 to convert to a pixel position.</span></span>
<span class="l"><a class="anc" name="87f4" href="#87f4">[87f4]</a><span class="cd"><span class="i">ASL</span> <span class="o">A</span></span></span>
<span class="l"><a class="anc" name="87f5" href="#87f5">[87f5]</a><span class="cd"><span class="i">ASL</span> <span class="o">A</span></span></span>
<span class="l"><a class="anc" name="87f6" href="#87f6">[87f6]</a><span class="cd"><span class="i">RTS</span></span><span class="ce">; Return it.</span></span>
<span class="l"></span>
<span class="l"></span>
</pre><pre><a name="TextBox_GetYPixelCoord"></a><div class="cp">;============================================================================
; Return a pixel Y position for the current textbox position.
;
; INPUTS:
;     <a href="RAM.html#TextBox_Y">TextBox_Y</a>:
;         The textbox Y position.
;
; OUTPUTS:
;     A:
;         The pixel Y position.
;
; XREFS:
;     <a href="#Menu_UpdateAndDraw">Menu_UpdateAndDraw</a>
;============================================================================
</div><span class="l"><a class="anc" name="87f7" href="#87f7">[87f7]</a><a href="#TextBox_GetYPixelCoord" class="la">TextBox_GetYPixelCoord:</a><span class="ce">; [$87f7]</span></span>
<span class="l"><a class="anc" name="87f7" href="#87f7">[87f7]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#TextBox_Y">TextBox_Y</a></span></span><span class="ce">; Load the Y tile position.</span></span>
<span class="l"><a class="anc" name="87fa" href="#87fa">[87fa]</a><span class="cd"><span class="i">ASL</span> <span class="o">A</span></span><span class="ce">; Multiply by 8 to convert to a pixel position.</span></span>
<span class="l"><a class="anc" name="87fb" href="#87fb">[87fb]</a><span class="cd"><span class="i">ASL</span> <span class="o">A</span></span></span>
<span class="l"><a class="anc" name="87fc" href="#87fc">[87fc]</a><span class="cd"><span class="i">ASL</span> <span class="o">A</span></span></span>
<span class="l"><a class="anc" name="87fd" href="#87fd">[87fd]</a><span class="cd"><span class="i">RTS</span></span><span class="ce">; Return it.</span></span>
<span class="l"></span>
</pre><pre><a name="TextBox_GetNextAttributeDataOffset"></a><div class="cp">;============================================================================
; TODO: Document TextBox_GetNextAttributeDataOffset
;
; INPUTS:
;     None.
;
; OUTPUTS:
;     A
;
; XREFS:
;     <a href="#TextBox_FillBackground">TextBox_FillBackground</a>
;     <a href="#TextBox_SetNextAttributeData">TextBox_SetNextAttributeData</a>
;============================================================================
</div><span class="l"><a class="anc" name="87fe" href="#87fe">[87fe]</a><a href="#TextBox_GetNextAttributeDataOffset" class="la">TextBox_GetNextAttributeDataOffset:</a><span class="ce">; [$87fe]</span></span>
<span class="l"><a class="anc" name="87fe" href="#87fe">[87fe]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="RAM.html#TextBox_ContentsY">TextBox_ContentsY</a></span></span></span>
<span class="l"><a class="anc" name="8800" href="#8800">[8800]</a><span class="cd"><span class="i">ASL</span> <span class="o">A</span></span></span>
<span class="l"><a class="anc" name="8801" href="#8801">[8801]</a><span class="cd"><span class="i">ASL</span> <span class="o">A</span></span></span>
<span class="l"><a class="anc" name="8802" href="#8802">[8802]</a><span class="cd"><span class="i">AND</span> <span class="o">#$f8</span></span></span>
<span class="l"><a class="anc" name="8804" href="#8804">[8804]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Temp_Int24_M">Temp_Int24_M</a></span></span></span>
<span class="l"><a class="anc" name="8806" href="#8806">[8806]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="RAM.html#TextBox_ContentsX">TextBox_ContentsX</a></span></span></span>
<span class="l"><a class="anc" name="8808" href="#8808">[8808]</a><span class="cd"><span class="i">LSR</span> <span class="o">A</span></span></span>
<span class="l"><a class="anc" name="8809" href="#8809">[8809]</a><span class="cd"><span class="i">ORA</span> <span class="o"><a href="RAM.html#Temp_Int24_M">Temp_Int24_M</a></span></span></span>
<span class="l"><a class="anc" name="880b" href="#880b">[880b]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Temp_Int24_M">Temp_Int24_M</a></span></span></span>
<span class="l"><a class="anc" name="880d" href="#880d">[880d]</a><span class="cd"><span class="i">RTS</span></span></span>
<span class="l"></span>
</pre><pre><a name="TextBox_SetNextAttributeData"></a><div class="cp">;============================================================================
; TODO: Document TextBox_SetNextAttributeData
;
; INPUTS:
;     A
;
; OUTPUTS:
;     TODO
;
; XREFS:
;     <a href="#TextBox_FillBackground">TextBox_FillBackground</a>
;============================================================================
</div><span class="l"><a class="anc" name="880e" href="#880e">[880e]</a><a href="#TextBox_SetNextAttributeData" class="la">TextBox_SetNextAttributeData:</a><span class="ce">; [$880e]</span></span>
<span class="l"><a class="anc" name="880e" href="#880e">[880e]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Temp_Int24">Temp_Int24</a></span></span></span>
<span class="l"><a class="anc" name="8810" href="#8810">[8810]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#TextBox_GetNextAttributeDataOffset">TextBox_GetNextAttributeDataOffset</a></span></span></span>
<span class="l"><a class="anc" name="8813" href="#8813">[8813]</a><span class="cd"><span class="i">TAX</span></span></span>
<span class="l"><a class="anc" name="8814" href="#8814">[8814]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="RAM.html#TextBox_ContentsY">TextBox_ContentsY</a></span></span></span>
<span class="l"><a class="anc" name="8816" href="#8816">[8816]</a><span class="cd"><span class="i">LSR</span> <span class="o">A</span></span></span>
<span class="l"><a class="anc" name="8817" href="#8817">[8817]</a><span class="cd"><span class="i">BCS</span> <span class="o"><a href="#@LAB_PRG12__8842">@LAB_PRG12__8842</a></span></span></span>
<span class="l"><a class="anc" name="8819" href="#8819">[8819]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="RAM.html#TextBox_ContentsX">TextBox_ContentsX</a></span></span></span>
<span class="l"><a class="anc" name="881b" href="#881b">[881b]</a><span class="cd"><span class="i">LSR</span> <span class="o">A</span></span></span>
<span class="l"><a class="anc" name="881c" href="#881c">[881c]</a><span class="cd"><span class="i">BCS</span> <span class="o"><a href="#@LAB_PRG12__882f">@LAB_PRG12__882f</a></span></span></span>
<span class="l"><a class="anc" name="881e" href="#881e">[881e]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="RAM.html#TextBox_AttributeData">TextBox_AttributeData</a>,X</span></span></span>
<span class="l"><a class="anc" name="8821" href="#8821">[8821]</a><span class="cd"><span class="i">AND</span> <span class="o">#$fc</span></span></span>
<span class="l"><a class="anc" name="8823" href="#8823">[8823]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Temp_Int24_M">Temp_Int24_M</a></span></span></span>
<span class="l"><a class="anc" name="8825" href="#8825">[8825]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="RAM.html#Temp_Int24">Temp_Int24</a></span></span></span>
<span class="l"><a class="anc" name="8827" href="#8827">[8827]</a><span class="cd"><span class="i">AND</span> <span class="o">#$03</span></span></span>
<span class="l"><a class="anc" name="8829" href="#8829">[8829]</a><span class="cd"><span class="i">ORA</span> <span class="o"><a href="RAM.html#Temp_Int24_M">Temp_Int24_M</a></span></span></span>
<span class="l"><a class="anc" name="882b" href="#882b">[882b]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#TextBox_AttributeData">TextBox_AttributeData</a>,X</span></span></span>
<span class="l"><a class="anc" name="882e" href="#882e">[882e]</a><span class="cd"><span class="i">RTS</span></span></span>
<span class="l"></span>
<a name=":882f:@LAB_PRG12__882f"></a><span class="l"><a class="anc" name="882f" href="#882f">[882f]</a><a href="#:882f:@LAB_PRG12__882f" class="lla">@LAB_PRG12__882f:</a><span class="ce">; [$882f]</span></span>
<span class="l"><a class="anc" name="882f" href="#882f">[882f]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="RAM.html#TextBox_AttributeData">TextBox_AttributeData</a>,X</span></span></span>
<span class="l"><a class="anc" name="8832" href="#8832">[8832]</a><span class="cd"><span class="i">AND</span> <span class="o">#$f3</span></span></span>
<span class="l"><a class="anc" name="8834" href="#8834">[8834]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Temp_Int24_M">Temp_Int24_M</a></span></span></span>
<span class="l"><a class="anc" name="8836" href="#8836">[8836]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="RAM.html#Temp_Int24">Temp_Int24</a></span></span></span>
<span class="l"><a class="anc" name="8838" href="#8838">[8838]</a><span class="cd"><span class="i">ASL</span> <span class="o">A</span></span></span>
<span class="l"><a class="anc" name="8839" href="#8839">[8839]</a><span class="cd"><span class="i">ASL</span> <span class="o">A</span></span></span>
<span class="l"><a class="anc" name="883a" href="#883a">[883a]</a><span class="cd"><span class="i">AND</span> <span class="o">#$0c</span></span></span>
<span class="l"><a class="anc" name="883c" href="#883c">[883c]</a><span class="cd"><span class="i">ORA</span> <span class="o"><a href="RAM.html#Temp_Int24_M">Temp_Int24_M</a></span></span></span>
<span class="l"><a class="anc" name="883e" href="#883e">[883e]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#TextBox_AttributeData">TextBox_AttributeData</a>,X</span></span></span>
<span class="l"><a class="anc" name="8841" href="#8841">[8841]</a><span class="cd"><span class="i">RTS</span></span></span>
<span class="l"></span>
<a name=":8842:@LAB_PRG12__8842"></a><span class="l"><a class="anc" name="8842" href="#8842">[8842]</a><a href="#:8842:@LAB_PRG12__8842" class="lla">@LAB_PRG12__8842:</a><span class="ce">; [$8842]</span></span>
<span class="l"><a class="anc" name="8842" href="#8842">[8842]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="RAM.html#TextBox_ContentsX">TextBox_ContentsX</a></span></span></span>
<span class="l"><a class="anc" name="8844" href="#8844">[8844]</a><span class="cd"><span class="i">LSR</span> <span class="o">A</span></span></span>
<span class="l"><a class="anc" name="8845" href="#8845">[8845]</a><span class="cd"><span class="i">BCS</span> <span class="o"><a href="#@LAB_PRG12__885c">@LAB_PRG12__885c</a></span></span></span>
<span class="l"><a class="anc" name="8847" href="#8847">[8847]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="RAM.html#TextBox_AttributeData">TextBox_AttributeData</a>,X</span></span></span>
<span class="l"><a class="anc" name="884a" href="#884a">[884a]</a><span class="cd"><span class="i">AND</span> <span class="o">#$cf</span></span></span>
<span class="l"><a class="anc" name="884c" href="#884c">[884c]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Temp_Int24_M">Temp_Int24_M</a></span></span></span>
<span class="l"><a class="anc" name="884e" href="#884e">[884e]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="RAM.html#Temp_Int24">Temp_Int24</a></span></span></span>
<span class="l"><a class="anc" name="8850" href="#8850">[8850]</a><span class="cd"><span class="i">ASL</span> <span class="o">A</span></span></span>
<span class="l"><a class="anc" name="8851" href="#8851">[8851]</a><span class="cd"><span class="i">ASL</span> <span class="o">A</span></span></span>
<span class="l"><a class="anc" name="8852" href="#8852">[8852]</a><span class="cd"><span class="i">ASL</span> <span class="o">A</span></span></span>
<span class="l"><a class="anc" name="8853" href="#8853">[8853]</a><span class="cd"><span class="i">ASL</span> <span class="o">A</span></span></span>
<span class="l"><a class="anc" name="8854" href="#8854">[8854]</a><span class="cd"><span class="i">AND</span> <span class="o">#$30</span></span></span>
<span class="l"><a class="anc" name="8856" href="#8856">[8856]</a><span class="cd"><span class="i">ORA</span> <span class="o"><a href="RAM.html#Temp_Int24_M">Temp_Int24_M</a></span></span></span>
<span class="l"><a class="anc" name="8858" href="#8858">[8858]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#TextBox_AttributeData">TextBox_AttributeData</a>,X</span></span></span>
<span class="l"><a class="anc" name="885b" href="#885b">[885b]</a><span class="cd"><span class="i">RTS</span></span></span>
<span class="l"></span>
<a name=":885c:@LAB_PRG12__885c"></a><span class="l"><a class="anc" name="885c" href="#885c">[885c]</a><a href="#:885c:@LAB_PRG12__885c" class="lla">@LAB_PRG12__885c:</a><span class="ce">; [$885c]</span></span>
<span class="l"><a class="anc" name="885c" href="#885c">[885c]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="RAM.html#TextBox_AttributeData">TextBox_AttributeData</a>,X</span></span></span>
<span class="l"><a class="anc" name="885f" href="#885f">[885f]</a><span class="cd"><span class="i">AND</span> <span class="o">#$3f</span></span></span>
<span class="l"><a class="anc" name="8861" href="#8861">[8861]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Temp_Int24_M">Temp_Int24_M</a></span></span></span>
<span class="l"><a class="anc" name="8863" href="#8863">[8863]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="RAM.html#Temp_Int24">Temp_Int24</a></span></span></span>
<span class="l"><a class="anc" name="8865" href="#8865">[8865]</a><span class="cd"><span class="i">ASL</span> <span class="o">A</span></span></span>
<span class="l"><a class="anc" name="8866" href="#8866">[8866]</a><span class="cd"><span class="i">ASL</span> <span class="o">A</span></span></span>
<span class="l"><a class="anc" name="8867" href="#8867">[8867]</a><span class="cd"><span class="i">ASL</span> <span class="o">A</span></span></span>
<span class="l"><a class="anc" name="8868" href="#8868">[8868]</a><span class="cd"><span class="i">ASL</span> <span class="o">A</span></span></span>
<span class="l"><a class="anc" name="8869" href="#8869">[8869]</a><span class="cd"><span class="i">ASL</span> <span class="o">A</span></span></span>
<span class="l"><a class="anc" name="886a" href="#886a">[886a]</a><span class="cd"><span class="i">ASL</span> <span class="o">A</span></span></span>
<span class="l"><a class="anc" name="886b" href="#886b">[886b]</a><span class="cd"><span class="i">AND</span> <span class="o">#$c0</span></span></span>
<span class="l"><a class="anc" name="886d" href="#886d">[886d]</a><span class="cd"><span class="i">ORA</span> <span class="o"><a href="RAM.html#Temp_Int24_M">Temp_Int24_M</a></span></span></span>
<span class="l"><a class="anc" name="886f" href="#886f">[886f]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#TextBox_AttributeData">TextBox_AttributeData</a>,X</span></span></span>
<span class="l"><a class="anc" name="8872" href="#8872">[8872]</a><span class="cd"><span class="i">RTS</span></span></span>
<span class="l"></span>
<a name="PLAYER_TOP_MENU_ITEM_STRINGS"></a><span class="l"><a class="anc" name="8873" href="#8873">[8873]</a><a href="#PLAYER_TOP_MENU_ITEM_STRINGS" class="la">PLAYER_TOP_MENU_ITEM_STRINGS:</a><span class="ce">; [$8873]</span></span>
<span class="l"><a class="anc" name="8873" href="#8873">[8873]</a><span class="cd"><span class="i">db</span> <span class="o">$06,"WEAPON         "</span></span><span class="ce">; [$8873] char</span></span>
<span class="l"><a class="anc" name="8883" href="#8883">[8883]</a><span class="cd"><span class="i">db</span> <span class="o">$05,"ARMOR          "</span></span><span class="ce">; [$8883] char</span></span>
<span class="l"><a class="anc" name="8893" href="#8893">[8893]</a><span class="cd"><span class="i">db</span> <span class="o">$06,"SHIELD         "</span></span><span class="ce">; [$8893] char</span></span>
<span class="l"><a class="anc" name="88a3" href="#88a3">[88a3]</a><span class="cd"><span class="i">db</span> <span class="o">$05,"MAGIC          "</span></span><span class="ce">; [$88a3] char</span></span>
<span class="l"><a class="anc" name="88b3" href="#88b3">[88b3]</a><span class="cd"><span class="i">db</span> <span class="o">$04,"ITEM           "</span></span><span class="ce">; [$88b3] char</span></span>
<span class="l"><a class="anc" name="88c3" href="#88c3">[88c3]</a><span class="cd"><span class="i">db</span> <span class="o">$06,"PLAYER         "</span></span><span class="ce">; [$88c3] char</span></span>
<span class="l"></span>
<a name="PLAYER_STATUS_MENU_STRINGS"></a><span class="l"><a class="anc" name="88d3" href="#88d3">[88d3]</a><a href="#PLAYER_STATUS_MENU_STRINGS" class="la">PLAYER_STATUS_MENU_STRINGS:</a><span class="ce">; [$88d3]</span></span>
<span class="l"><a class="anc" name="88d3" href="#88d3">[88d3]</a><span class="cd"><span class="i">db</span> <span class="o">$09,"    RANK:      "</span></span><span class="ce">; [$88d3] char</span></span>
<span class="l"><a class="anc" name="88e3" href="#88e3">[88e3]</a><span class="cd"><span class="i">db</span> <span class="o">$09,"NEXT EXP:      "</span></span><span class="ce">; [$88e3] char</span></span>
<span class="l"><a class="anc" name="88f3" href="#88f3">[88f3]</a><span class="cd"><span class="i">db</span> <span class="o">$09,"WEAPON:        "</span></span><span class="ce">; [$88f3] char</span></span>
<span class="l"><a class="anc" name="8903" href="#8903">[8903]</a><span class="cd"><span class="i">db</span> <span class="o">$09," ARMOR:        "</span></span><span class="ce">; [$8903] char</span></span>
<span class="l"><a class="anc" name="8913" href="#8913">[8913]</a><span class="cd"><span class="i">db</span> <span class="o">$09,"SHIELD:        "</span></span><span class="ce">; [$8913] char</span></span>
<span class="l"><a class="anc" name="8923" href="#8923">[8923]</a><span class="cd"><span class="i">db</span> <span class="o">$09," MAGIC:        "</span></span><span class="ce">; [$8923] char</span></span>
<span class="l"><a class="anc" name="8933" href="#8933">[8933]</a><span class="cd"><span class="i">db</span> <span class="o">$09,"  ITEM:        "</span></span><span class="ce">; [$8933] char</span></span>
<span class="l"></span>
<a name="PLAYER_STATUS_MENU_TITLES"></a><span class="l"><a class="anc" name="8943" href="#8943">[8943]</a><a href="#PLAYER_STATUS_MENU_TITLES" class="la">PLAYER_STATUS_MENU_TITLES:</a><span class="ce">; [$8943]</span></span>
<span class="l"><a class="anc" name="8943" href="#8943">[8943]</a><span class="cd"><span class="i">db</span> <span class="o">$09,"NOVICE         "</span></span><span class="ce">; [$8943] char</span></span>
<span class="l"><a class="anc" name="8953" href="#8953">[8953]</a><span class="cd"><span class="i">db</span> <span class="o">$09,"ASPIRANT       "</span></span><span class="ce">; [$8953] char</span></span>
<span class="l"><a class="anc" name="8963" href="#8963">[8963]</a><span class="cd"><span class="i">db</span> <span class="o">$09,"BATTLER        "</span></span><span class="ce">; [$8963] char</span></span>
<span class="l"><a class="anc" name="8973" href="#8973">[8973]</a><span class="cd"><span class="i">db</span> <span class="o">$09,"FIGHTER        "</span></span><span class="ce">; [$8973] char</span></span>
<span class="l"><a class="anc" name="8983" href="#8983">[8983]</a><span class="cd"><span class="i">db</span> <span class="o">$09,"ADEPT          "</span></span><span class="ce">; [$8983] char</span></span>
<span class="l"><a class="anc" name="8993" href="#8993">[8993]</a><span class="cd"><span class="i">db</span> <span class="o">$09,"CHEVALIER      "</span></span><span class="ce">; [$8993] char</span></span>
<span class="l"><a class="anc" name="89a3" href="#89a3">[89a3]</a><span class="cd"><span class="i">db</span> <span class="o">$09,"VETERAN        "</span></span><span class="ce">; [$89a3] char</span></span>
<span class="l"><a class="anc" name="89b3" href="#89b3">[89b3]</a><span class="cd"><span class="i">db</span> <span class="o">$09,"WARRIOR        "</span></span><span class="ce">; [$89b3] char</span></span>
<span class="l"><a class="anc" name="89c3" href="#89c3">[89c3]</a><span class="cd"><span class="i">db</span> <span class="o">$09,"SWORDMAN       "</span></span><span class="ce">; [$89c3] char</span></span>
<span class="l"><a class="anc" name="89d3" href="#89d3">[89d3]</a><span class="cd"><span class="i">db</span> <span class="o">$09,"HERO           "</span></span><span class="ce">; [$89d3] char</span></span>
<span class="l"><a class="anc" name="89e3" href="#89e3">[89e3]</a><span class="cd"><span class="i">db</span> <span class="o">$09,"SOLDIER        "</span></span><span class="ce">; [$89e3] char</span></span>
<span class="l"><a class="anc" name="89f3" href="#89f3">[89f3]</a><span class="cd"><span class="i">db</span> <span class="o">$09,"MYRMIDON       "</span></span><span class="ce">; [$89f3] char</span></span>
<span class="l"><a class="anc" name="8a03" href="#8a03">[8a03]</a><span class="cd"><span class="i">db</span> <span class="o">$09,"CHAMPION       "</span></span><span class="ce">; [$8a03] char</span></span>
<span class="l"><a class="anc" name="8a13" href="#8a13">[8a13]</a><span class="cd"><span class="i">db</span> <span class="o">$09,"SUPERHERO      "</span></span><span class="ce">; [$8a13] char</span></span>
<span class="l"><a class="anc" name="8a23" href="#8a23">[8a23]</a><span class="cd"><span class="i">db</span> <span class="o">$09,"PALADIN        "</span></span><span class="ce">; [$8a23] char</span></span>
<span class="l"><a class="anc" name="8a33" href="#8a33">[8a33]</a><span class="cd"><span class="i">db</span> <span class="o">$09,"LORD           "</span></span><span class="ce">; [$8a33] char</span></span>
<span class="l"><a class="anc" name="8a43" href="#8a43">[8a43]</a><span class="cd"><span class="i">db</span> <span class="o">$09,"NO WEAPON      "</span></span><span class="ce">; [$8a43] char</span></span>
<span class="l"><a class="anc" name="8a53" href="#8a53">[8a53]</a><span class="cd"><span class="i">db</span> <span class="o">$09,"NO ARMOR       "</span></span><span class="ce">; [$8a53] char</span></span>
<span class="l"><a class="anc" name="8a63" href="#8a63">[8a63]</a><span class="cd"><span class="i">db</span> <span class="o">$09,"NO SHIELD      "</span></span><span class="ce">; [$8a63] char</span></span>
<span class="l"><a class="anc" name="8a73" href="#8a73">[8a73]</a><span class="cd"><span class="i">db</span> <span class="o">$09,"NO MAGIC       "</span></span><span class="ce">; [$8a73] char</span></span>
<span class="l"><a class="anc" name="8a83" href="#8a83">[8a83]</a><span class="cd"><span class="i">db</span> <span class="o">$09,"NO ITEM        "</span></span><span class="ce">; [$8a83] char</span></span>
<span class="l"></span>
</pre><pre><a name="PlayerMenu_Show"></a><div class="cp">;============================================================================
; TODO: Document PlayerMenu_Show
;
; INPUTS:
;     None.
;
; OUTPUTS:
;     TODO
;
; XREFS:
;     <a href="PRG15_MIRROR.html#GameLoop_CheckShowPlayerMenu">GameLoop_CheckShowPlayerMenu</a>
;============================================================================
</div><span class="l"><a class="anc" name="8a93" href="#8a93">[8a93]</a><a href="#PlayerMenu_Show" class="la">PlayerMenu_Show:</a><span class="ce">; [$8a93]</span></span>
<span class="l"><a class="anc" name="8a93" href="#8a93">[8a93]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$06</span></span></span>
<span class="l"><a class="anc" name="8a95" href="#8a95">[8a95]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#Arg_StringsCount">Arg_StringsCount</a></span></span></span>
<span class="l"><a class="anc" name="8a98" href="#8a98">[8a98]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$00</span></span></span>
<span class="l"><a class="anc" name="8a9a" href="#8a9a">[8a9a]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#Menu_CursorPos">Menu_CursorPos</a></span></span></span>
<span class="l"><a class="anc" name="8a9d" href="#8a9d">[8a9d]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$02</span></span></span>
<span class="l"><a class="anc" name="8a9f" href="#8a9f">[8a9f]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#TextBox_X">TextBox_X</a></span></span></span>
<span class="l"><a class="anc" name="8aa2" href="#8aa2">[8aa2]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$06</span></span></span>
<span class="l"><a class="anc" name="8aa4" href="#8aa4">[8aa4]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#TextBox_Y">TextBox_Y</a></span></span></span>
<span class="l"><a class="anc" name="8aa7" href="#8aa7">[8aa7]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$0a</span></span></span>
<span class="l"><a class="anc" name="8aa9" href="#8aa9">[8aa9]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#TextBox_Width">TextBox_Width</a></span></span></span>
<span class="l"><a class="anc" name="8aac" href="#8aac">[8aac]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$0e</span></span></span>
<span class="l"><a class="anc" name="8aae" href="#8aae">[8aae]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#TextBox_Height">TextBox_Height</a></span></span></span>
<span class="l"><a class="anc" name="8ab1" href="#8ab1">[8ab1]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$18</span></span></span>
<span class="l"><a class="anc" name="8ab3" href="#8ab3">[8ab3]</a><span class="cd"><span class="i">JSR</span> <span class="o">$d0e4</span></span></span>
<span class="l"><a class="anc" name="8ab6" href="#8ab6">[8ab6]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#TextBox_Open">TextBox_Open</a></span></span></span>
<span class="l"><a class="anc" name="8ab9" href="#8ab9">[8ab9]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$73</span></span></span>
<span class="l"><a class="anc" name="8abb" href="#8abb">[8abb]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Temp_Int24">Temp_Int24</a></span></span></span>
<span class="l"><a class="anc" name="8abd" href="#8abd">[8abd]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$88</span></span></span>
<span class="l"><a class="anc" name="8abf" href="#8abf">[8abf]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Temp_Int24_M">Temp_Int24_M</a></span></span></span>
<span class="l"><a class="anc" name="8ac1" href="#8ac1">[8ac1]</a><span class="cd"><span class="i">LDX</span> <span class="o">#$00</span></span></span>
<span class="l"><a class="anc" name="8ac3" href="#8ac3">[8ac3]</a><span class="cd"><span class="i">STX</span> <span class="o">a:<a href="RAM.html#DataArray">DataArray</a></span></span></span>
<span class="l"><a class="anc" name="8ac6" href="#8ac6">[8ac6]</a><span class="cd"><span class="i">INX</span></span></span>
<span class="l"><a class="anc" name="8ac7" href="#8ac7">[8ac7]</a><span class="cd"><span class="i">STX</span> <span class="o">a:<a href="RAM.html#DataArray_1_">DataArray_1_</a></span></span></span>
<span class="l"><a class="anc" name="8aca" href="#8aca">[8aca]</a><span class="cd"><span class="i">INX</span></span></span>
<span class="l"><a class="anc" name="8acb" href="#8acb">[8acb]</a><span class="cd"><span class="i">STX</span> <span class="o">a:<a href="RAM.html#DataArray_2_">DataArray_2_</a></span></span></span>
<span class="l"><a class="anc" name="8ace" href="#8ace">[8ace]</a><span class="cd"><span class="i">INX</span></span></span>
<span class="l"><a class="anc" name="8acf" href="#8acf">[8acf]</a><span class="cd"><span class="i">STX</span> <span class="o">a:<a href="RAM.html#DataArray_3_">DataArray_3_</a></span></span></span>
<span class="l"><a class="anc" name="8ad2" href="#8ad2">[8ad2]</a><span class="cd"><span class="i">INX</span></span></span>
<span class="l"><a class="anc" name="8ad3" href="#8ad3">[8ad3]</a><span class="cd"><span class="i">STX</span> <span class="o">a:<a href="RAM.html#DataArray_4_">DataArray_4_</a></span></span></span>
<span class="l"><a class="anc" name="8ad6" href="#8ad6">[8ad6]</a><span class="cd"><span class="i">INX</span></span></span>
<span class="l"><a class="anc" name="8ad7" href="#8ad7">[8ad7]</a><span class="cd"><span class="i">STX</span> <span class="o">a:<a href="RAM.html#DataArray_5_">DataArray_5_</a></span></span></span>
<span class="l"><a class="anc" name="8ada" href="#8ada">[8ada]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#TextBox_DrawStringLines">TextBox_DrawStringLines</a></span></span></span>
<span class="l"></span>
<a name=":8add:@_inputLoop"></a><span class="l"><a class="anc" name="8add" href="#8add">[8add]</a><a href="#:8add:@_inputLoop" class="lla">@_inputLoop:</a><span class="ce">; [$8add]</span></span>
<span class="l"><a class="anc" name="8add" href="#8add">[8add]</a><span class="cd"><span class="i">JSR</span> <span class="o">$ca25</span></span></span>
<span class="l"><a class="anc" name="8ae0" href="#8ae0">[8ae0]</a><span class="cd"><span class="i">JSR</span> <span class="o">$cb47</span></span></span>
<span class="l"><a class="anc" name="8ae3" href="#8ae3">[8ae3]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#Menu_UpdateAndDraw">Menu_UpdateAndDraw</a></span></span></span>
<span class="l"><a class="anc" name="8ae6" href="#8ae6">[8ae6]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="RAM.html#Joy1_ChangedButtonMask">Joy1_ChangedButtonMask</a></span></span></span>
<span class="l"><a class="anc" name="8ae8" href="#8ae8">[8ae8]</a><span class="cd"><span class="i">BMI</span> <span class="o"><a href="#@_loadMenuIDs">@_loadMenuIDs</a></span></span></span>
<span class="l"><a class="anc" name="8aea" href="#8aea">[8aea]</a><span class="cd"><span class="i">ASL</span> <span class="o">A</span></span></span>
<span class="l"><a class="anc" name="8aeb" href="#8aeb">[8aeb]</a><span class="cd"><span class="i">BPL</span> <span class="o"><a href="#@_inputLoop">@_inputLoop</a></span></span></span>
<span class="l"><a class="anc" name="8aed" href="#8aed">[8aed]</a><span class="cd"><span class="i">JMP</span> <span class="o"><a href="#TextBox_Close">TextBox_Close</a></span></span></span>
<span class="l"></span>
<a name=":8af0:@_loadMenuIDs"></a><span class="l"><a class="anc" name="8af0" href="#8af0">[8af0]</a><a href="#:8af0:@_loadMenuIDs" class="lla">@_loadMenuIDs:</a><span class="ce">; [$8af0]</span></span>
<span class="l"><a class="anc" name="8af0" href="#8af0">[8af0]</a><span class="cd"><span class="i">LDX</span> <span class="o">a:<a href="RAM.html#Menu_CursorPos">Menu_CursorPos</a></span></span></span>
<span class="l"><a class="anc" name="8af3" href="#8af3">[8af3]</a><span class="cd"><span class="i">CPX</span> <span class="o">#$05</span></span></span>
<span class="l"><a class="anc" name="8af5" href="#8af5">[8af5]</a><span class="cd"><span class="i">BNE</span> <span class="o"><a href="#PlayerMenu_ShowSubmenu">PlayerMenu_ShowSubmenu</a></span></span></span>
<span class="l"><a class="anc" name="8af7" href="#8af7">[8af7]</a><span class="cd"><span class="i">JMP</span> <span class="o"><a href="#PlayerMenu_ShowStatusMenu">PlayerMenu_ShowStatusMenu</a></span></span></span>
<span class="l"></span>
</pre><pre><a name="PlayerMenu_ShowSubmenu"></a><div class="cp">;============================================================================
; TODO: Document PlayerMenu_ShowSubmenu
;
; INPUTS:
;     None.
;
; OUTPUTS:
;     TODO
;
; XREFS:
;     <a href="#PlayerMenu_Show">PlayerMenu_Show</a>
;============================================================================
</div><span class="l"><a class="anc" name="8afa" href="#8afa">[8afa]</a><a href="#PlayerMenu_ShowSubmenu" class="la">PlayerMenu_ShowSubmenu:</a><span class="ce">; [$8afa]</span></span>
<span class="l"><a class="anc" name="8afa" href="#8afa">[8afa]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$04</span></span></span>
<span class="l"><a class="anc" name="8afc" href="#8afc">[8afc]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#TextBox_X">TextBox_X</a></span></span></span>
<span class="l"><a class="anc" name="8aff" href="#8aff">[8aff]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$08</span></span></span>
<span class="l"><a class="anc" name="8b01" href="#8b01">[8b01]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#TextBox_Y">TextBox_Y</a></span></span></span>
<span class="l"><a class="anc" name="8b04" href="#8b04">[8b04]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$14</span></span></span>
<span class="l"><a class="anc" name="8b06" href="#8b06">[8b06]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#TextBox_Width">TextBox_Width</a></span></span></span>
<span class="l"><a class="anc" name="8b09" href="#8b09">[8b09]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$12</span></span></span>
<span class="l"><a class="anc" name="8b0b" href="#8b0b">[8b0b]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#TextBox_Height">TextBox_Height</a></span></span></span>
<span class="l"><a class="anc" name="8b0e" href="#8b0e">[8b0e]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#TextBox_Open">TextBox_Open</a></span></span></span>
<span class="l"><a class="anc" name="8b11" href="#8b11">[8b11]</a><span class="cd"><span class="i">LDX</span> <span class="o">a:<a href="RAM.html#Menu_CursorPos">Menu_CursorPos</a></span></span></span>
<span class="l"><a class="anc" name="8b14" href="#8b14">[8b14]</a><span class="cd"><span class="i">STX</span> <span class="o">a:<a href="RAM.html#PlayerMenu_SelectedInventory">PlayerMenu_SelectedInventory</a></span></span></span>
<span class="l"><a class="anc" name="8b17" href="#8b17">[8b17]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="RAM.html#NumberOfWeapons">NumberOfWeapons</a>,X</span></span></span>
<span class="l"><a class="anc" name="8b1a" href="#8b1a">[8b1a]</a><span class="cd"><span class="i">BNE</span> <span class="o"><a href="#PlayerMenu_ShowInventoryMenu">PlayerMenu_ShowInventoryMenu</a></span></span></span>
<span class="l"><a class="anc" name="8b1c" href="#8b1c">[8b1c]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#TextBox_X">TextBox_X</a></span></span></span>
<span class="l"><a class="anc" name="8b1f" href="#8b1f">[8b1f]</a><span class="cd"><span class="i">CLC</span></span></span>
<span class="l"><a class="anc" name="8b20" href="#8b20">[8b20]</a><span class="cd"><span class="i">ADC</span> <span class="o">#$02</span></span></span>
<span class="l"><a class="anc" name="8b22" href="#8b22">[8b22]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#TextBox_ContentsX">TextBox_ContentsX</a></span></span></span>
<span class="l"><a class="anc" name="8b24" href="#8b24">[8b24]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#TextBox_Y">TextBox_Y</a></span></span></span>
<span class="l"><a class="anc" name="8b27" href="#8b27">[8b27]</a><span class="cd"><span class="i">CLC</span></span></span>
<span class="l"><a class="anc" name="8b28" href="#8b28">[8b28]</a><span class="cd"><span class="i">ADC</span> <span class="o">#$02</span></span></span>
<span class="l"><a class="anc" name="8b2a" href="#8b2a">[8b2a]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#TextBox_ContentsY">TextBox_ContentsY</a></span></span></span>
<span class="l"><a class="anc" name="8b2c" href="#8b2c">[8b2c]</a><span class="cd"><span class="i">JSR</span> <span class="o">$f804</span></span></span>
<span class="l"><a class="anc" name="8b2f" href="#8b2f">[8b2f]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$43</span></span></span>
<span class="l"><a class="anc" name="8b31" href="#8b31">[8b31]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Temp_Int24">Temp_Int24</a></span></span></span>
<span class="l"><a class="anc" name="8b33" href="#8b33">[8b33]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$8a</span></span></span>
<span class="l"><a class="anc" name="8b35" href="#8b35">[8b35]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Temp_Int24_M">Temp_Int24_M</a></span></span></span>
<span class="l"><a class="anc" name="8b37" href="#8b37">[8b37]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#Menu_CursorPos">Menu_CursorPos</a></span></span></span>
<span class="l"><a class="anc" name="8b3a" href="#8b3a">[8b3a]</a><span class="cd"><span class="i">JSR</span> <span class="o">$f78c</span></span></span>
<span class="l"><a class="anc" name="8b3d" href="#8b3d">[8b3d]</a><span class="cd"><span class="i">TAY</span></span></span>
<span class="l"><a class="anc" name="8b3e" href="#8b3e">[8b3e]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#UI_DrawString">UI_DrawString</a></span></span></span>
<span class="l"></span>
<a name=":8b41:@_inputLoop"></a><span class="l"><a class="anc" name="8b41" href="#8b41">[8b41]</a><a href="#:8b41:@_inputLoop" class="lla">@_inputLoop:</a><span class="ce">; [$8b41]</span></span>
<span class="l"><a class="anc" name="8b41" href="#8b41">[8b41]</a><span class="cd"><span class="i">JSR</span> <span class="o">$ca25</span></span></span>
<span class="l"><a class="anc" name="8b44" href="#8b44">[8b44]</a><span class="cd"><span class="i">JSR</span> <span class="o">$cb47</span></span></span>
<span class="l"><a class="anc" name="8b47" href="#8b47">[8b47]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="RAM.html#Joy1_ChangedButtonMask">Joy1_ChangedButtonMask</a></span></span></span>
<span class="l"><a class="anc" name="8b49" href="#8b49">[8b49]</a><span class="cd"><span class="i">ASL</span> <span class="o">A</span></span></span>
<span class="l"><a class="anc" name="8b4a" href="#8b4a">[8b4a]</a><span class="cd"><span class="i">BPL</span> <span class="o"><a href="#@_inputLoop">@_inputLoop</a></span></span></span>
<span class="l"><a class="anc" name="8b4c" href="#8b4c">[8b4c]</a><span class="cd"><span class="i">JMP</span> <span class="o"><a href="#PlayerMenu_Close">PlayerMenu_Close</a></span></span></span>
<span class="l"></span>
</pre><pre><a name="PlayerMenu_ShowInventoryMenu"></a><div class="cp">;============================================================================
; TODO: Document PlayerMenu_ShowInventoryMenu
;
; INPUTS:
;     A
;     X
;
; OUTPUTS:
;     TODO
;
; XREFS:
;     <a href="#PlayerMenu_ShowSubmenu">PlayerMenu_ShowSubmenu</a>
;============================================================================
</div><span class="l"><a class="anc" name="8b4f" href="#8b4f">[8b4f]</a><a href="#PlayerMenu_ShowInventoryMenu" class="la">PlayerMenu_ShowInventoryMenu:</a><span class="ce">; [$8b4f]</span></span>
<span class="l"><a class="anc" name="8b4f" href="#8b4f">[8b4f]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#Arg_StringsCount">Arg_StringsCount</a></span></span></span>
<span class="l"><a class="anc" name="8b52" href="#8b52">[8b52]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="#INVENTORY_CATEGORY_L">INVENTORY_CATEGORY_L</a>,X</span></span></span>
<span class="l"><a class="anc" name="8b55" href="#8b55">[8b55]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Temp_Int24">Temp_Int24</a></span></span></span>
<span class="l"><a class="anc" name="8b57" href="#8b57">[8b57]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="#INVENTORY_CATEGORY_U">INVENTORY_CATEGORY_U</a>,X</span></span></span>
<span class="l"><a class="anc" name="8b5a" href="#8b5a">[8b5a]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Temp_Int24_M">Temp_Int24_M</a></span></span></span>
<span class="l"><a class="anc" name="8b5c" href="#8b5c">[8b5c]</a><span class="cd"><span class="i">LDY</span> <span class="o">#$00</span></span></span>
<span class="l"></span>
<a name=":8b5e:@_loadMenuIDs"></a><span class="l"><a class="anc" name="8b5e" href="#8b5e">[8b5e]</a><a href="#:8b5e:@_loadMenuIDs" class="lla">@_loadMenuIDs:</a><span class="ce">; [$8b5e]</span></span>
<span class="l"><a class="anc" name="8b5e" href="#8b5e">[8b5e]</a><span class="cd"><span class="i">LDA</span> <span class="o">(<a href="RAM.html#Temp_Int24">Temp_Int24</a>),Y</span></span></span>
<span class="l"><a class="anc" name="8b60" href="#8b60">[8b60]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#DataArray">DataArray</a>,Y</span></span></span>
<span class="l"><a class="anc" name="8b63" href="#8b63">[8b63]</a><span class="cd"><span class="i">INY</span></span></span>
<span class="l"><a class="anc" name="8b64" href="#8b64">[8b64]</a><span class="cd"><span class="i">CPY</span> <span class="o">a:<a href="RAM.html#Arg_StringsCount">Arg_StringsCount</a></span></span></span>
<span class="l"><a class="anc" name="8b67" href="#8b67">[8b67]</a><span class="cd"><span class="i">BNE</span> <span class="o"><a href="#@_loadMenuIDs">@_loadMenuIDs</a></span></span></span>
<span class="l"><a class="anc" name="8b69" href="#8b69">[8b69]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#PlayerMenu_DrawInventoryItems">PlayerMenu_DrawInventoryItems</a></span></span></span>
<span class="l"><a class="anc" name="8b6c" href="#8b6c">[8b6c]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$00</span></span></span>
<span class="l"><a class="anc" name="8b6e" href="#8b6e">[8b6e]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#Menu_CursorPos">Menu_CursorPos</a></span></span><span class="ce">; Set the menu cursor position to 0.</span></span>
<span class="l"></span>
<div class="c">;
; v-- Fall through --v
;
</div></pre><pre><a name="PlayerMenu_HandleInventoryMenuInput"></a><div class="cp">;============================================================================
; TODO: Document PlayerMenu_HandleInventoryMenuInput
;
; INPUTS:
;     None.
;
; OUTPUTS:
;     TODO
;
; XREFS:
;     <a href="#PlayerMenu_HandleInvalidChoice">PlayerMenu_HandleInvalidChoice</a>
;     <a href="#PlayerMenu_HandleInventoryMenuInput">PlayerMenu_HandleInventoryMenuInput</a>
;============================================================================
</div><span class="l"><a class="anc" name="8b71" href="#8b71">[8b71]</a><a href="#PlayerMenu_HandleInventoryMenuInput" class="la">PlayerMenu_HandleInventoryMenuInput:</a><span class="ce">; [$8b71]</span></span>
<div class="c">;
; Wait for input on the menu.
;
</div><span class="l"><a class="anc" name="8b71" href="#8b71">[8b71]</a><span class="cd"><span class="i">JSR</span> <span class="o">$ca25</span></span><span class="ce">; Wait for the next frame.</span></span>
<span class="l"><a class="anc" name="8b74" href="#8b74">[8b74]</a><span class="cd"><span class="i">JSR</span> <span class="o">$cb47</span></span><span class="ce">; Set up draw state.</span></span>
<span class="l"><a class="anc" name="8b77" href="#8b77">[8b77]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#Menu_UpdateAndDraw">Menu_UpdateAndDraw</a></span></span><span class="ce">; Update and draw the menu.</span></span>
<span class="l"><a class="anc" name="8b7a" href="#8b7a">[8b7a]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="RAM.html#Joy1_ChangedButtonMask">Joy1_ChangedButtonMask</a></span></span><span class="ce">; Check for a changed button.</span></span>
<span class="l"><a class="anc" name="8b7c" href="#8b7c">[8b7c]</a><span class="cd"><span class="i">BMI</span> <span class="o"><a href="#@_hasInput">@_hasInput</a></span></span><span class="ce">; If the the "A" button is pressed, jump to handle input.</span></span>
<span class="l"><a class="anc" name="8b7e" href="#8b7e">[8b7e]</a><span class="cd"><span class="i">ASL</span> <span class="o">A</span></span><span class="ce">; Shift the button mask left.</span></span>
<span class="l"><a class="anc" name="8b7f" href="#8b7f">[8b7f]</a><span class="cd"><span class="i">BMI</span> <span class="o"><a href="#PlayerMenu_Close">PlayerMenu_Close</a></span></span><span class="ce">; If the "B" button is pressed, close the menu.</span></span>
<span class="l"><a class="anc" name="8b81" href="#8b81">[8b81]</a><span class="cd"><span class="i">BPL</span> <span class="o"><a href="#PlayerMenu_HandleInventoryMenuInput">PlayerMenu_HandleInventoryMenuInput</a></span></span></span>
<span class="l"></span>
<a name=":8b83:@_hasInput"></a><span class="l"><a class="anc" name="8b83" href="#8b83">[8b83]</a><a href="#:8b83:@_hasInput" class="lla">@_hasInput:</a><span class="ce">; [$8b83]</span></span>
<span class="l"><a class="anc" name="8b83" href="#8b83">[8b83]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#Area_CurrentArea">Area_CurrentArea</a></span></span><span class="ce">; Load the current area.</span></span>
<span class="l"><a class="anc" name="8b86" href="#8b86">[8b86]</a><span class="cd"><span class="i">CMP</span> <span class="o">#$04</span></span><span class="ce">; Is the player inside/in a place where they can't equip?</span></span>
<span class="l"><a class="anc" name="8b88" href="#8b88">[8b88]</a><span class="cd"><span class="i">BEQ</span> <span class="o"><a href="#PlayerMenu_HandleInvalidChoice">PlayerMenu_HandleInvalidChoice</a></span></span><span class="ce">; If so, it's an invalid choice.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; The player is in an area where they can equip. See if
; this inventory allows equipping (only Magic and Item).
;
</div><span class="l"><a class="anc" name="8b8a" href="#8b8a">[8b8a]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#PlayerMenu_SelectedInventory">PlayerMenu_SelectedInventory</a></span></span><span class="ce">; Load the selected inventory index.</span></span>
<span class="l"><a class="anc" name="8b8d" href="#8b8d">[8b8d]</a><span class="cd"><span class="i">CMP</span> <span class="o">#$03</span></span><span class="ce">; Is it the Magic or Item inventory?</span></span>
<span class="l"><a class="anc" name="8b8f" href="#8b8f">[8b8f]</a><span class="cd"><span class="i">BCS</span> <span class="o"><a href="#PlayerMenu_EquipItem">PlayerMenu_EquipItem</a></span></span><span class="ce">; If so, always allow equipping the item.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Check the selected weapon and see if it's the Dragon Slayer
; (which also implies the Battle Suit and Battle Helmet).
;
; If they have these, they cannot select a new item. If they
; don't, they can.
;
</div><span class="l"><a class="anc" name="8b91" href="#8b91">[8b91]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#SelectedWeapon">SelectedWeapon</a></span></span><span class="ce">; Load the selected weapon.</span></span>
<span class="l"><a class="anc" name="8b94" href="#8b94">[8b94]</a><span class="cd"><span class="i">CMP</span> <span class="o">#$03</span></span><span class="ce">; Is it the Dragon Slayer?</span></span>
<span class="l"><a class="anc" name="8b96" href="#8b96">[8b96]</a><span class="cd"><span class="i">BEQ</span> <span class="o"><a href="#PlayerMenu_HandleInvalidChoice">PlayerMenu_HandleInvalidChoice</a></span></span><span class="ce">; If not, it's an invalid choice.</span></span>
<span class="l"><a class="anc" name="8b98" href="#8b98">[8b98]</a><span class="cd"><span class="i">LDX</span> <span class="o">a:<a href="RAM.html#Menu_CursorPos">Menu_CursorPos</a></span></span><span class="ce">; X = Menu cursor position.</span></span>
<span class="l"><a class="anc" name="8b9b" href="#8b9b">[8b9b]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="RAM.html#DataArray">DataArray</a>,X</span></span><span class="ce">; A = Item ID at the cursor position.</span></span>
<span class="l"><a class="anc" name="8b9e" href="#8b9e">[8b9e]</a><span class="cd"><span class="i">CMP</span> <span class="o">#$03</span></span><span class="ce">; Is the item ID 3 (Dragon Slayer)?</span></span>
<span class="l"><a class="anc" name="8ba0" href="#8ba0">[8ba0]</a><span class="cd"><span class="i">BNE</span> <span class="o"><a href="#PlayerMenu_EquipItem">PlayerMenu_EquipItem</a></span></span><span class="ce">; If not, proceed to equip the item normally.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; The player selected a Dragon Slayer, Battle Suit, or Battle
; Helmet. Check if they have all three, and if so, they'll all
; be equipped.
;
; First, check for the Dragon Slayer.
;
</div><span class="l"><a class="anc" name="8ba2" href="#8ba2">[8ba2]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$03</span></span><span class="ce">; 0x03 == Dragon Slayer</span></span>
<span class="l"><a class="anc" name="8ba4" href="#8ba4">[8ba4]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#Player_LacksItem">Player_LacksItem</a></span></span><span class="ce">; Does the player have it?</span></span>
<span class="l"><a class="anc" name="8ba7" href="#8ba7">[8ba7]</a><span class="cd"><span class="i">BCS</span> <span class="o"><a href="#PlayerMenu_HandleInvalidChoice">PlayerMenu_HandleInvalidChoice</a></span></span><span class="ce">; If not, it's an invalid choice.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; They have the Dragon Slayer. Check for the Battle Suit.
;
</div><span class="l"><a class="anc" name="8ba9" href="#8ba9">[8ba9]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$23</span></span><span class="ce">; 0x23 == Battle Suit.</span></span>
<span class="l"><a class="anc" name="8bab" href="#8bab">[8bab]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#Player_LacksItem">Player_LacksItem</a></span></span><span class="ce">; Does the player have it?</span></span>
<span class="l"><a class="anc" name="8bae" href="#8bae">[8bae]</a><span class="cd"><span class="i">BCS</span> <span class="o"><a href="#PlayerMenu_HandleInvalidChoice">PlayerMenu_HandleInvalidChoice</a></span></span><span class="ce">; If not, it's an invalid choice.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; They have the Dragon Slayer and Battle Suit. Check for the
; Battle Helmet.
;
</div><span class="l"><a class="anc" name="8bb0" href="#8bb0">[8bb0]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$43</span></span><span class="ce">; 0x43 == Battle Helmet.</span></span>
<span class="l"><a class="anc" name="8bb2" href="#8bb2">[8bb2]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#Player_LacksItem">Player_LacksItem</a></span></span><span class="ce">; Does the player have it?</span></span>
<span class="l"><a class="anc" name="8bb5" href="#8bb5">[8bb5]</a><span class="cd"><span class="i">BCS</span> <span class="o"><a href="#PlayerMenu_HandleInvalidChoice">PlayerMenu_HandleInvalidChoice</a></span></span><span class="ce">; If not, it's an invalid choice.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; They have all three. Equip them all and close the menu.
;
</div><span class="l"><a class="anc" name="8bb7" href="#8bb7">[8bb7]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$08</span></span><span class="ce">; 0x08 == Item Pick-Up sound.</span></span>
<span class="l"><a class="anc" name="8bb9" href="#8bb9">[8bb9]</a><span class="cd"><span class="i">JSR</span> <span class="o">$d0e4</span></span><span class="ce">; Play it.</span></span>
<span class="l"><a class="anc" name="8bbc" href="#8bbc">[8bbc]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$03</span></span><span class="ce">; 0x03 == Dragon Slayer.</span></span>
<span class="l"><a class="anc" name="8bbe" href="#8bbe">[8bbe]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#Player_Equip">Player_Equip</a></span></span><span class="ce">; Equip it.</span></span>
<span class="l"><a class="anc" name="8bc1" href="#8bc1">[8bc1]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$23</span></span><span class="ce">; 0x23 == Battle Suit.</span></span>
<span class="l"><a class="anc" name="8bc3" href="#8bc3">[8bc3]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#Player_Equip">Player_Equip</a></span></span><span class="ce">; Equip it.</span></span>
<span class="l"><a class="anc" name="8bc6" href="#8bc6">[8bc6]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$43</span></span><span class="ce">; 0x43 == Battle Helmet.</span></span>
<span class="l"><a class="anc" name="8bc8" href="#8bc8">[8bc8]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#Player_Equip">Player_Equip</a></span></span><span class="ce">; Equip it.</span></span>
<span class="l"><a class="anc" name="8bcb" href="#8bcb">[8bcb]</a><span class="cd"><span class="i">JMP</span> <span class="o"><a href="#PlayerMenu_Close">PlayerMenu_Close</a></span></span><span class="ce">; Close the Player Menu.</span></span>
<span class="l"></span>
</pre><pre><a name="PlayerMenu_EquipItem"></a><div class="cp">;============================================================================
; TODO: Document PlayerMenu_EquipItem
;
; INPUTS:
;     None.
;
; OUTPUTS:
;     TODO
;
; XREFS:
;     <a href="#PlayerMenu_HandleInventoryMenuInput">PlayerMenu_HandleInventoryMenuInput</a>
;============================================================================
</div><span class="l"><a class="anc" name="8bce" href="#8bce">[8bce]</a><a href="#PlayerMenu_EquipItem" class="la">PlayerMenu_EquipItem:</a><span class="ce">; [$8bce]</span></span>
<span class="l"><a class="anc" name="8bce" href="#8bce">[8bce]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$08</span></span><span class="ce">; 0x08 == Item pick-up sound.</span></span>
<span class="l"><a class="anc" name="8bd0" href="#8bd0">[8bd0]</a><span class="cd"><span class="i">JSR</span> <span class="o">$d0e4</span></span><span class="ce">; Play it.</span></span>
<span class="l"><a class="anc" name="8bd3" href="#8bd3">[8bd3]</a><span class="cd"><span class="i">LDX</span> <span class="o">a:<a href="RAM.html#Menu_CursorPos">Menu_CursorPos</a></span></span><span class="ce">; X = Menu cursor position.</span></span>
<span class="l"><a class="anc" name="8bd6" href="#8bd6">[8bd6]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#PlayerMenu_SelectedInventory">PlayerMenu_SelectedInventory</a></span></span><span class="ce">; A = Selected inventory.</span></span>
<span class="l"><a class="anc" name="8bd9" href="#8bd9">[8bd9]</a><span class="cd"><span class="i">JSR</span> <span class="o">$f78b</span></span><span class="ce">; Get the inventory bits.</span></span>
<span class="l"><a class="anc" name="8bdc" href="#8bdc">[8bdc]</a><span class="cd"><span class="i">ORA</span> <span class="o"><a href="RAM.html#DataArray">DataArray</a>,X</span></span><span class="ce">; OR it with the selected item index as an item ID.</span></span>
<span class="l"><a class="anc" name="8bdf" href="#8bdf">[8bdf]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#Player_Equip">Player_Equip</a></span></span><span class="ce">; Equip the resulting item.</span></span>
<span class="l"><a class="anc" name="8be2" href="#8be2">[8be2]</a><span class="cd"><span class="i">JMP</span> <span class="o"><a href="#PlayerMenu_Close">PlayerMenu_Close</a></span></span><span class="ce">; Close the Player Menu.</span></span>
<span class="l"></span>
</pre><pre><a name="PlayerMenu_HandleInvalidChoice"></a><div class="cp">;============================================================================
; TODO: Document PlayerMenu_HandleInvalidChoice
;
; INPUTS:
;     None.
;
; OUTPUTS:
;     TODO
;
; XREFS:
;     <a href="#PlayerMenu_HandleInventoryMenuInput">PlayerMenu_HandleInventoryMenuInput</a>
;============================================================================
</div><span class="l"><a class="anc" name="8be5" href="#8be5">[8be5]</a><a href="#PlayerMenu_HandleInvalidChoice" class="la">PlayerMenu_HandleInvalidChoice:</a><span class="ce">; [$8be5]</span></span>
<span class="l"><a class="anc" name="8be5" href="#8be5">[8be5]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$0d</span></span><span class="ce">; 0x0D == Invalid Choice sound effect.</span></span>
<span class="l"><a class="anc" name="8be7" href="#8be7">[8be7]</a><span class="cd"><span class="i">JSR</span> <span class="o">$d0e4</span></span><span class="ce">; Play it.</span></span>
<span class="l"><a class="anc" name="8bea" href="#8bea">[8bea]</a><span class="cd"><span class="i">JMP</span> <span class="o"><a href="#PlayerMenu_HandleInventoryMenuInput">PlayerMenu_HandleInventoryMenuInput</a></span></span><span class="ce">; Resume handling of the inventory menu.</span></span>
<span class="l"></span>
<span class="l"></span>
</pre><pre><a name="PlayerMenu_Close"></a><div class="cp">;============================================================================
; Close the Player Menu.
;
; INPUTS:
;     None.
;
; OUTPUTS:
;     <a href="RAM.html#TextBox_X">TextBox_X</a>:
;     <a href="RAM.html#TextBox_Y">TextBox_Y</a>:
;     <a href="RAM.html#TextBox_Width">TextBox_Width</a>:
;     <a href="RAM.html#TextBox_Height">TextBox_Height</a>:
;         Clobbered.
;
; CALLS:
;     <a href="#TextBox_Close">TextBox_Close</a>
;
; XREFS:
;     <a href="#PlayerMenu_EquipItem">PlayerMenu_EquipItem</a>
;     <a href="#PlayerMenu_HandleInventoryMenuInput">PlayerMenu_HandleInventoryMenuInput</a>
;     <a href="#PlayerMenu_ShowSubmenu">PlayerMenu_ShowSubmenu</a>
;============================================================================
</div><span class="l"><a class="anc" name="8bed" href="#8bed">[8bed]</a><a href="#PlayerMenu_Close" class="la">PlayerMenu_Close:</a><span class="ce">; [$8bed]</span></span>
<span class="l"><a class="anc" name="8bed" href="#8bed">[8bed]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$02</span></span></span>
<span class="l"><a class="anc" name="8bef" href="#8bef">[8bef]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#TextBox_X">TextBox_X</a></span></span><span class="ce">; Set box X coordinate to 2.</span></span>
<span class="l"><a class="anc" name="8bf2" href="#8bf2">[8bf2]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$06</span></span></span>
<span class="l"><a class="anc" name="8bf4" href="#8bf4">[8bf4]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#TextBox_Y">TextBox_Y</a></span></span><span class="ce">; Set box Y coordinate to 6.</span></span>
<span class="l"><a class="anc" name="8bf7" href="#8bf7">[8bf7]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$16</span></span></span>
<span class="l"><a class="anc" name="8bf9" href="#8bf9">[8bf9]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#TextBox_Width">TextBox_Width</a></span></span><span class="ce">; Set box width to 22.</span></span>
<span class="l"><a class="anc" name="8bfc" href="#8bfc">[8bfc]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$14</span></span></span>
<span class="l"><a class="anc" name="8bfe" href="#8bfe">[8bfe]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#TextBox_Height">TextBox_Height</a></span></span><span class="ce">; Set box height to 20.</span></span>
<span class="l"><a class="anc" name="8c01" href="#8c01">[8c01]</a><span class="cd"><span class="i">JMP</span> <span class="o"><a href="#TextBox_Close">TextBox_Close</a></span></span><span class="ce">; Close the Player Menu.</span></span>
<span class="l"></span>
</pre><pre><a name="PlayerMenu_DrawInventoryItems"></a><div class="cp">;============================================================================
; TODO: Document PlayerMenu_DrawInventoryItems
;
; INPUTS:
;     None.
;
; OUTPUTS:
;     TODO
;
; XREFS:
;     <a href="#PlayerMenu_ShowInventoryMenu">PlayerMenu_ShowInventoryMenu</a>
;============================================================================
</div><span class="l"><a class="anc" name="8c04" href="#8c04">[8c04]</a><a href="#PlayerMenu_DrawInventoryItems" class="la">PlayerMenu_DrawInventoryItems:</a><span class="ce">; [$8c04]</span></span>
<span class="l"><a class="anc" name="8c04" href="#8c04">[8c04]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#TextBox_Y">TextBox_Y</a></span></span></span>
<span class="l"><a class="anc" name="8c07" href="#8c07">[8c07]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#TextBox_ContentsY">TextBox_ContentsY</a></span></span></span>
<span class="l"><a class="anc" name="8c09" href="#8c09">[8c09]</a><span class="cd"><span class="i">LDX</span> <span class="o">#$00</span></span></span>
<span class="l"></span>
<a name=":8c0b:@LAB_PRG12__8c0b"></a><span class="l"><a class="anc" name="8c0b" href="#8c0b">[8c0b]</a><a href="#:8c0b:@LAB_PRG12__8c0b" class="lla">@LAB_PRG12__8c0b:</a><span class="ce">; [$8c0b]</span></span>
<span class="l"><a class="anc" name="8c0b" href="#8c0b">[8c0b]</a><span class="cd"><span class="i">TXA</span></span></span>
<span class="l"><a class="anc" name="8c0c" href="#8c0c">[8c0c]</a><span class="cd"><span class="i">PHA</span></span></span>
<span class="l"><a class="anc" name="8c0d" href="#8c0d">[8c0d]</a><span class="cd"><span class="i">INC</span> <span class="o"><a href="RAM.html#TextBox_ContentsY">TextBox_ContentsY</a></span></span></span>
<span class="l"><a class="anc" name="8c0f" href="#8c0f">[8c0f]</a><span class="cd"><span class="i">LDY</span> <span class="o">a:<a href="RAM.html#TextBox_X">TextBox_X</a></span></span></span>
<span class="l"><a class="anc" name="8c12" href="#8c12">[8c12]</a><span class="cd"><span class="i">INY</span></span></span>
<span class="l"><a class="anc" name="8c13" href="#8c13">[8c13]</a><span class="cd"><span class="i">INY</span></span></span>
<span class="l"><a class="anc" name="8c14" href="#8c14">[8c14]</a><span class="cd"><span class="i">STY</span> <span class="o"><a href="RAM.html#TextBox_ContentsX">TextBox_ContentsX</a></span></span></span>
<span class="l"><a class="anc" name="8c16" href="#8c16">[8c16]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#PlayerMenu_SelectedInventory">PlayerMenu_SelectedInventory</a></span></span></span>
<span class="l"><a class="anc" name="8c19" href="#8c19">[8c19]</a><span class="cd"><span class="i">JSR</span> <span class="o">$f78b</span></span></span>
<span class="l"><a class="anc" name="8c1c" href="#8c1c">[8c1c]</a><span class="cd"><span class="i">ORA</span> <span class="o"><a href="RAM.html#DataArray">DataArray</a>,X</span></span></span>
<span class="l"><a class="anc" name="8c1f" href="#8c1f">[8c1f]</a><span class="cd"><span class="i">PHA</span></span></span>
<span class="l"><a class="anc" name="8c20" href="#8c20">[8c20]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#TextBox_DrawItemImage">TextBox_DrawItemImage</a></span></span></span>
<span class="l"><a class="anc" name="8c23" href="#8c23">[8c23]</a><span class="cd"><span class="i">PLA</span></span></span>
<span class="l"><a class="anc" name="8c24" href="#8c24">[8c24]</a><span class="cd"><span class="i">INC</span> <span class="o"><a href="RAM.html#TextBox_ContentsY">TextBox_ContentsY</a></span></span></span>
<span class="l"><a class="anc" name="8c26" href="#8c26">[8c26]</a><span class="cd"><span class="i">INC</span> <span class="o"><a href="RAM.html#TextBox_ContentsX">TextBox_ContentsX</a></span></span></span>
<span class="l"><a class="anc" name="8c28" href="#8c28">[8c28]</a><span class="cd"><span class="i">INC</span> <span class="o"><a href="RAM.html#TextBox_ContentsX">TextBox_ContentsX</a></span></span></span>
<span class="l"><a class="anc" name="8c2a" href="#8c2a">[8c2a]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#TextBox_DrawItemName">TextBox_DrawItemName</a></span></span></span>
<span class="l"><a class="anc" name="8c2d" href="#8c2d">[8c2d]</a><span class="cd"><span class="i">PLA</span></span></span>
<span class="l"><a class="anc" name="8c2e" href="#8c2e">[8c2e]</a><span class="cd"><span class="i">TAX</span></span></span>
<span class="l"><a class="anc" name="8c2f" href="#8c2f">[8c2f]</a><span class="cd"><span class="i">INX</span></span></span>
<span class="l"><a class="anc" name="8c30" href="#8c30">[8c30]</a><span class="cd"><span class="i">CPX</span> <span class="o">a:<a href="RAM.html#Arg_StringsCount">Arg_StringsCount</a></span></span></span>
<span class="l"><a class="anc" name="8c33" href="#8c33">[8c33]</a><span class="cd"><span class="i">BNE</span> <span class="o"><a href="#@LAB_PRG12__8c0b">@LAB_PRG12__8c0b</a></span></span></span>
<span class="l"><a class="anc" name="8c35" href="#8c35">[8c35]</a><span class="cd"><span class="i">RTS</span></span></span>
<span class="l"></span>
</pre><pre><a name="TextBox_DrawItemName"></a><div class="cp">;============================================================================
; TODO: Document TextBox_DrawItemName
;
; INPUTS:
;     A
;
; OUTPUTS:
;     TODO
;
; XREFS:
;     <a href="#IScriptAction_AddInventoryItem">IScriptAction_AddInventoryItem</a>
;     <a href="#PlayerMenu_DrawInventoryItems">PlayerMenu_DrawInventoryItems</a>
;     <a href="#PlayerMenu_ShowStatusMenu">PlayerMenu_ShowStatusMenu</a>
;     <a href="#Shop_Draw">Shop_Draw</a>
;============================================================================
</div><span class="l"><a class="anc" name="8c36" href="#8c36">[8c36]</a><a href="#TextBox_DrawItemName" class="la">TextBox_DrawItemName:</a><span class="ce">; [$8c36]</span></span>
<span class="l"><a class="anc" name="8c36" href="#8c36">[8c36]</a><span class="cd"><span class="i">PHA</span></span></span>
<span class="l"><a class="anc" name="8c37" href="#8c37">[8c37]</a><span class="cd"><span class="i">PHA</span></span></span>
<span class="l"><a class="anc" name="8c38" href="#8c38">[8c38]</a><span class="cd"><span class="i">JSR</span> <span class="o">$f804</span></span></span>
<span class="l"><a class="anc" name="8c3b" href="#8c3b">[8c3b]</a><span class="cd"><span class="i">PLA</span></span></span>
<span class="l"><a class="anc" name="8c3c" href="#8c3c">[8c3c]</a><span class="cd"><span class="i">JSR</span> <span class="o">$f785</span></span></span>
<span class="l"><a class="anc" name="8c3f" href="#8c3f">[8c3f]</a><span class="cd"><span class="i">TAX</span></span></span>
<span class="l"><a class="anc" name="8c40" href="#8c40">[8c40]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="#ITEM_NAME_CATEGORIES_L">ITEM_NAME_CATEGORIES_L</a>,X</span></span></span>
<span class="l"><a class="anc" name="8c43" href="#8c43">[8c43]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Temp_Int24">Temp_Int24</a></span></span></span>
<span class="l"><a class="anc" name="8c45" href="#8c45">[8c45]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="#ITEM_NAME_CATEGORIES_U">ITEM_NAME_CATEGORIES_U</a>,X</span></span></span>
<span class="l"><a class="anc" name="8c48" href="#8c48">[8c48]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Temp_Int24_M">Temp_Int24_M</a></span></span></span>
<span class="l"><a class="anc" name="8c4a" href="#8c4a">[8c4a]</a><span class="cd"><span class="i">PLA</span></span></span>
<span class="l"><a class="anc" name="8c4b" href="#8c4b">[8c4b]</a><span class="cd"><span class="i">AND</span> <span class="o">#$1f</span></span></span>
<span class="l"><a class="anc" name="8c4d" href="#8c4d">[8c4d]</a><span class="cd"><span class="i">JSR</span> <span class="o">$f78c</span></span></span>
<span class="l"><a class="anc" name="8c50" href="#8c50">[8c50]</a><span class="cd"><span class="i">BCC</span> <span class="o"><a href="#@LAB_PRG12__8c54">@LAB_PRG12__8c54</a></span></span></span>
<span class="l"><a class="anc" name="8c52" href="#8c52">[8c52]</a><span class="cd"><span class="i">INC</span> <span class="o"><a href="RAM.html#Temp_Int24_M">Temp_Int24_M</a></span></span></span>
<span class="l"></span>
<a name=":8c54:@LAB_PRG12__8c54"></a><span class="l"><a class="anc" name="8c54" href="#8c54">[8c54]</a><a href="#:8c54:@LAB_PRG12__8c54" class="lla">@LAB_PRG12__8c54:</a><span class="ce">; [$8c54]</span></span>
<span class="l"><a class="anc" name="8c54" href="#8c54">[8c54]</a><span class="cd"><span class="i">TAY</span></span></span>
<span class="l"><a class="anc" name="8c55" href="#8c55">[8c55]</a><span class="cd"><span class="i">JMP</span> <span class="o"><a href="#UI_DrawString">UI_DrawString</a></span></span></span>
<span class="l"></span>
<span class="l"></span>
</pre><pre><a name="TextBox_DrawItemImage"></a><div class="cp">;============================================================================
; Draw the image for an item in a textbox.
;
; This is used when acquiring an item. The image's tileset
; will be queued into the PPU buffer, followed by the
; indexes of the tiles to draw for the item.
;
; These will be positioned within the textbox where the first
; character of text would normally be.
;
; INPUTS:
;     A:
;         The ID of the item to draw.
;
;     X:
;         The offset within the loaded PPU tiles containing
;         the tiles to display. Each value represents a
;         4-tile span of 64 bytes.
;
; OUTPUTS:
;     <a href="RAM.html#PPU_TargetAddr">PPU_TargetAddr</a>:
;         Clobbered.
;
; CALLS:
;     <a href="PRG15_MIRROR.html#PPU_SetAddrForTextBoxPos">PPU_SetAddrForTextBoxPos</a>
;     <a href="PRG15_MIRROR.html#PPU_IncrementAddrBy32">PPU_IncrementAddrBy32</a>
;     <a href="PRG15_MIRROR.html#PPUBuffer_QueueCommandOrLength">PPUBuffer_QueueCommandOrLength</a>
;     <a href="PRG15_MIRROR.html#PPUBuffer_Set">PPUBuffer_Set</a>
;     <a href="PRG15_MIRROR.html#TextBox_LoadItemSourceTiles">TextBox_LoadItemSourceTiles</a>
;
; XREFS:
;     <a href="#IScriptAction_AddInventoryItem">IScriptAction_AddInventoryItem</a>
;     <a href="#PlayerMenu_DrawInventoryItems">PlayerMenu_DrawInventoryItems</a>
;     <a href="#PlayerMenu_ShowStatusMenu">PlayerMenu_ShowStatusMenu</a>
;     <a href="#Shop_Draw">Shop_Draw</a>
;============================================================================
</div><span class="l"><a class="anc" name="8c58" href="#8c58">[8c58]</a><a href="#TextBox_DrawItemImage" class="la">TextBox_DrawItemImage:</a><span class="ce">; [$8c58]</span></span>
<div class="c">;
; Save the registers temporarily.
;
</div><span class="l"><a class="anc" name="8c58" href="#8c58">[8c58]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Temp_Int24">Temp_Int24</a></span></span><span class="ce">; Store the item ID temporarily.</span></span>
<span class="l"><a class="anc" name="8c5a" href="#8c5a">[8c5a]</a><span class="cd"><span class="i">TYA</span></span><span class="ce">; A = Y</span></span>
<span class="l"><a class="anc" name="8c5b" href="#8c5b">[8c5b]</a><span class="cd"><span class="i">PHA</span></span><span class="ce">; Push to the stack.</span></span>
<span class="l"><a class="anc" name="8c5c" href="#8c5c">[8c5c]</a><span class="cd"><span class="i">TXA</span></span><span class="ce">; A = X</span></span>
<span class="l"><a class="anc" name="8c5d" href="#8c5d">[8c5d]</a><span class="cd"><span class="i">PHA</span></span><span class="ce">; Push to the stack.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Set the target PPU address to load tiles into. The following
; code is equivalent to:
;
;     addr = $1400 + (index * 64)
;
; 64 is the number of bytes for a full item image
; (8 bytes * 4 tiles). This will be used again below.
;
</div><span class="l"><a class="anc" name="8c5e" href="#8c5e">[8c5e]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$00</span></span><span class="ce">; A = 0</span></span>
<span class="l"><a class="anc" name="8c60" href="#8c60">[8c60]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#PPU_TargetAddr">PPU_TargetAddr</a></span></span><span class="ce">; Set as the lower byte.</span></span>
<span class="l"><a class="anc" name="8c62" href="#8c62">[8c62]</a><span class="cd"><span class="i">TXA</span></span><span class="ce">; A = X (item index)</span></span>
<span class="l"><a class="anc" name="8c63" href="#8c63">[8c63]</a><span class="cd"><span class="i">PHA</span></span><span class="ce">; Push to the stack, twice.</span></span>
<span class="l"><a class="anc" name="8c64" href="#8c64">[8c64]</a><span class="cd"><span class="i">PHA</span></span></span>
<span class="l"><a class="anc" name="8c65" href="#8c65">[8c65]</a><span class="cd"><span class="i">LSR</span> <span class="o">A</span></span><span class="ce">; C = bit0(index)</span></span>
<span class="l"><a class="anc" name="8c66" href="#8c66">[8c66]</a><span class="cd"><span class="i">ROR</span> <span class="o"><a href="RAM.html#PPU_TargetAddr">PPU_TargetAddr</a></span></span><span class="ce">; If C == 0, then set to 0.
Else, set to 0x80.</span></span>
<span class="l"><a class="anc" name="8c68" href="#8c68">[8c68]</a><span class="cd"><span class="i">LSR</span> <span class="o">A</span></span><span class="ce">; A = itemID &gt;&gt; 2
C = bit1(index)</span></span>
<span class="l"><a class="anc" name="8c69" href="#8c69">[8c69]</a><span class="cd"><span class="i">ROR</span> <span class="o"><a href="RAM.html#PPU_TargetAddr">PPU_TargetAddr</a></span></span><span class="ce">; Set to (bit1(index) &lt;&lt; 7) | (bit0(index) &lt;&lt; 6.
== (index &amp; 3) * 64.</span></span>
<span class="l"><a class="anc" name="8c6b" href="#8c6b">[8c6b]</a><span class="cd"><span class="i">ADC</span> <span class="o">#$14</span></span><span class="ce">; A = 0x14 + C.</span></span>
<span class="l"><a class="anc" name="8c6d" href="#8c6d">[8c6d]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#PPU_TargetAddr_U">PPU_TargetAddr_U</a></span></span><span class="ce">; Set as the upper byte.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Queue the address for the source tiles for the item into the
; PPU at the address above. The indexes following this will be
; relative to that address.
;
</div><span class="l"><a class="anc" name="8c6f" href="#8c6f">[8c6f]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="RAM.html#Temp_Int24">Temp_Int24</a></span></span><span class="ce">; Load the item ID.</span></span>
<span class="l"><a class="anc" name="8c71" href="#8c71">[8c71]</a><span class="cd"><span class="i">JSR</span> <span class="o">$fc18</span></span><span class="ce">; Load the source tiles address in the PPU.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Position the image where the text would normally go.
;
</div><span class="l"><a class="anc" name="8c74" href="#8c74">[8c74]</a><span class="cd"><span class="i">JSR</span> <span class="o">$f804</span></span><span class="ce">; Set the draw position for the image.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Draw the top two tiles of the image in the PPU buffer.
;
; There are:
;
;     Tile1 = 64 + (itemID * 16)
;     Tile2 = Tile1 + 1
;
; (16 == 8 bytes * 2 tiles)
;
</div><span class="l"><a class="anc" name="8c77" href="#8c77">[8c77]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$02</span></span><span class="ce">; A = 2 (tiles)</span></span>
<span class="l"><a class="anc" name="8c79" href="#8c79">[8c79]</a><span class="cd"><span class="i">JSR</span> <span class="o">$cfdc</span></span><span class="ce">; Write the length to the PPU buffer.</span></span>
<span class="l"><a class="anc" name="8c7c" href="#8c7c">[8c7c]</a><span class="cd"><span class="i">PLA</span></span><span class="ce">; Pull the index from the stack.</span></span>
<span class="l"><a class="anc" name="8c7d" href="#8c7d">[8c7d]</a><span class="cd"><span class="i">ASL</span> <span class="o">A</span></span><span class="ce">; Multiply by 16.</span></span>
<span class="l"><a class="anc" name="8c7e" href="#8c7e">[8c7e]</a><span class="cd"><span class="i">ASL</span> <span class="o">A</span></span></span>
<span class="l"><a class="anc" name="8c7f" href="#8c7f">[8c7f]</a><span class="cd"><span class="i">ADC</span> <span class="o">#$40</span></span><span class="ce">; Add 64 + C.</span></span>
<span class="l"><a class="anc" name="8c81" href="#8c81">[8c81]</a><span class="cd"><span class="i">JSR</span> <span class="o">$f845</span></span><span class="ce">; Add to the PPU buffer.</span></span>
<span class="l"><a class="anc" name="8c84" href="#8c84">[8c84]</a><span class="cd"><span class="i">CLC</span></span></span>
<span class="l"><a class="anc" name="8c85" href="#8c85">[8c85]</a><span class="cd"><span class="i">ADC</span> <span class="o">#$01</span></span><span class="ce">; Add 1.</span></span>
<span class="l"><a class="anc" name="8c87" href="#8c87">[8c87]</a><span class="cd"><span class="i">JSR</span> <span class="o">$f845</span></span><span class="ce">; Add to the PPU buffer.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Advane to the target address to the next position (bottom
; 2 tiles of the image).
;
</div><span class="l"><a class="anc" name="8c8a" href="#8c8a">[8c8a]</a><span class="cd"><span class="i">STX</span> <span class="o"><a href="RAM.html#PPUBuffer_WriteOffset">PPUBuffer_WriteOffset</a></span></span><span class="ce">; Store the new PPU buffer write offset.</span></span>
<span class="l"><a class="anc" name="8c8c" href="#8c8c">[8c8c]</a><span class="cd"><span class="i">JSR</span> <span class="o">$f826</span></span><span class="ce">; Increment the PPU address by 32.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Draw the second part of the image in the PPU buffer.
;
; There are:
;
;     Tile3 = 66 + (index * 16)
;     Tile4 = Tile3 + 1
;
; (16 == 8 bytes * 2 tiles)
;
</div><span class="l"><a class="anc" name="8c8f" href="#8c8f">[8c8f]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$02</span></span><span class="ce">; A = 2 (tiles)</span></span>
<span class="l"><a class="anc" name="8c91" href="#8c91">[8c91]</a><span class="cd"><span class="i">JSR</span> <span class="o">$cfdc</span></span><span class="ce">; Write the length to the PPU buffer.</span></span>
<span class="l"><a class="anc" name="8c94" href="#8c94">[8c94]</a><span class="cd"><span class="i">PLA</span></span><span class="ce">; Pull the index from the stack.</span></span>
<span class="l"><a class="anc" name="8c95" href="#8c95">[8c95]</a><span class="cd"><span class="i">ASL</span> <span class="o">A</span></span><span class="ce">; Multiply by 16.</span></span>
<span class="l"><a class="anc" name="8c96" href="#8c96">[8c96]</a><span class="cd"><span class="i">ASL</span> <span class="o">A</span></span></span>
<span class="l"><a class="anc" name="8c97" href="#8c97">[8c97]</a><span class="cd"><span class="i">ADC</span> <span class="o">#$42</span></span><span class="ce">; Add 66 + C.</span></span>
<span class="l"><a class="anc" name="8c99" href="#8c99">[8c99]</a><span class="cd"><span class="i">JSR</span> <span class="o">$f845</span></span><span class="ce">; Add left tile index the PPU buffer.</span></span>
<span class="l"><a class="anc" name="8c9c" href="#8c9c">[8c9c]</a><span class="cd"><span class="i">CLC</span></span></span>
<span class="l"><a class="anc" name="8c9d" href="#8c9d">[8c9d]</a><span class="cd"><span class="i">ADC</span> <span class="o">#$01</span></span><span class="ce">; Add 1.</span></span>
<span class="l"><a class="anc" name="8c9f" href="#8c9f">[8c9f]</a><span class="cd"><span class="i">JSR</span> <span class="o">$f845</span></span><span class="ce">; Add right tile to the PPU buffer.</span></span>
<span class="l"><a class="anc" name="8ca2" href="#8ca2">[8ca2]</a><span class="cd"><span class="i">STX</span> <span class="o"><a href="RAM.html#PPUBuffer_WriteOffset">PPUBuffer_WriteOffset</a></span></span><span class="ce">; Store the new PPU buffer write offset.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Restore the registers saved at the top of the function.
;
</div><span class="l"><a class="anc" name="8ca4" href="#8ca4">[8ca4]</a><span class="cd"><span class="i">PLA</span></span><span class="ce">; Pop the X register value.</span></span>
<span class="l"><a class="anc" name="8ca5" href="#8ca5">[8ca5]</a><span class="cd"><span class="i">TAX</span></span><span class="ce">; Set it back on X.</span></span>
<span class="l"><a class="anc" name="8ca6" href="#8ca6">[8ca6]</a><span class="cd"><span class="i">PLA</span></span><span class="ce">; Pop the Y register value.</span></span>
<span class="l"><a class="anc" name="8ca7" href="#8ca7">[8ca7]</a><span class="cd"><span class="i">TAY</span></span><span class="ce">; Set it back on Y.</span></span>
<span class="l"><a class="anc" name="8ca8" href="#8ca8">[8ca8]</a><span class="cd"><span class="i">RTS</span></span><span class="ce">; And return.</span></span>
<span class="l"></span>
<span class="l"></span>
</pre><pre><a name="Player_Equip"></a><div class="cp">;============================================================================
; Equip an item from the inventory.
;
; INPUTS:
;     A:
;         The inventory item, with bits set indicating the
;         inventory.
;
;     <a href="RAM.html#SelectedWeapon">SelectedWeapon</a>
;         The starting range of inventories to look up
;         items from.
;
; OUTPUTS:
;     <a href="RAM.html#Temp_EquipingItem">Temp_EquipingItem</a>:
;     <a href="RAM.html#Temp_PrevInventoryItem">Temp_PrevInventoryItem</a>:
;         Clobbered.
;
; CALLS:
;     <a href="#Player_AddToInventory">Player_AddToInventory</a>
;     <a href="PRG15_MIRROR.html#Player_GetInventoryIndexForItem">Player_GetInventoryIndexForItem</a>
;     <a href="#Player_RemoveItem">Player_RemoveItem</a>
;     <a href="PRG15_MIRROR.html#Player_SetArmor">Player_SetArmor</a>
;     <a href="PRG15_MIRROR.html#Player_SetItem">Player_SetItem</a>
;     <a href="#Player_SetMagic">Player_SetMagic</a>
;     <a href="PRG15_MIRROR.html#Player_SetShield">Player_SetShield</a>
;     <a href="PRG15_MIRROR.html#Player_SetWeapon">Player_SetWeapon</a>
;
; XREFS:
;     <a href="#PlayerMenu_EquipItem">PlayerMenu_EquipItem</a>
;     <a href="#PlayerMenu_HandleInventoryMenuInput">PlayerMenu_HandleInventoryMenuInput</a>
;============================================================================
</div><span class="l"><a class="anc" name="8ca9" href="#8ca9">[8ca9]</a><a href="#Player_Equip" class="la">Player_Equip:</a><span class="ce">; [$8ca9]</span></span>
<div class="c">;
; Calculate the target inventory and store the old and
; new items temporary.
;
</div><span class="l"><a class="anc" name="8ca9" href="#8ca9">[8ca9]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#Temp_EquipingItem">Temp_EquipingItem</a></span></span><span class="ce">; Store the item that we're equipping.</span></span>
<span class="l"><a class="anc" name="8cac" href="#8cac">[8cac]</a><span class="cd"><span class="i">JSR</span> <span class="o">$f785</span></span><span class="ce">; Compute the inventory index of the item.</span></span>
<span class="l"><a class="anc" name="8caf" href="#8caf">[8caf]</a><span class="cd"><span class="i">TAX</span></span><span class="ce">; Set X = the inventory index we computed</span></span>
<span class="l"><a class="anc" name="8cb0" href="#8cb0">[8cb0]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="RAM.html#SelectedWeapon">SelectedWeapon</a>,X</span></span><span class="ce">; Get the current item in the target inventory.</span></span>
<span class="l"><a class="anc" name="8cb3" href="#8cb3">[8cb3]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#Temp_PrevInventoryItem">Temp_PrevInventoryItem</a></span></span><span class="ce">; Store the old item we're unequipping.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Unequip the old item.
;
</div><span class="l"><a class="anc" name="8cb6" href="#8cb6">[8cb6]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#Temp_EquipingItem">Temp_EquipingItem</a></span></span></span>
<span class="l"><a class="anc" name="8cb9" href="#8cb9">[8cb9]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#Player_RemoveItem">Player_RemoveItem</a></span></span><span class="ce">; Unequip the old item.</span></span>
<span class="l"><a class="anc" name="8cbc" href="#8cbc">[8cbc]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#Temp_PrevInventoryItem">Temp_PrevInventoryItem</a></span></span><span class="ce">; Load back the previous item.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Only add to the inventory if we didn't already have one.
;
</div><span class="l"><a class="anc" name="8cbf" href="#8cbf">[8cbf]</a><span class="cd"><span class="i">BMI</span> <span class="o"><a href="#@_inInventory">@_inInventory</a></span></span><span class="ce">; Branch if we don't need to add to the inventory.</span></span>
<span class="l"><a class="anc" name="8cc1" href="#8cc1">[8cc1]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#Temp_EquipingItem">Temp_EquipingItem</a></span></span><span class="ce">; Load the item we're equipping.</span></span>
<span class="l"><a class="anc" name="8cc4" href="#8cc4">[8cc4]</a><span class="cd"><span class="i">AND</span> <span class="o">#$e0</span></span><span class="ce">; Clear out all but the inventory bits.</span></span>
<span class="l"><a class="anc" name="8cc6" href="#8cc6">[8cc6]</a><span class="cd"><span class="i">ORA</span> <span class="o">a:<a href="RAM.html#Temp_PrevInventoryItem">Temp_PrevInventoryItem</a></span></span><span class="ce">; Add the item's value.</span></span>
<span class="l"><a class="anc" name="8cc9" href="#8cc9">[8cc9]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#Player_AddToInventory">Player_AddToInventory</a></span></span><span class="ce">; Now add to the inventory.</span></span>
<span class="l"></span>
<a name=":8ccc:@_inInventory"></a><span class="l"><a class="anc" name="8ccc" href="#8ccc">[8ccc]</a><a href="#:8ccc:@_inInventory" class="lla">@_inInventory:</a><span class="ce">; [$8ccc]</span></span>
<span class="l"><a class="anc" name="8ccc" href="#8ccc">[8ccc]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#Temp_EquipingItem">Temp_EquipingItem</a></span></span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Set the normalized value within the inventory.
;
</div><span class="l"><a class="anc" name="8ccf" href="#8ccf">[8ccf]</a><span class="cd"><span class="i">JSR</span> <span class="o">$f785</span></span><span class="ce">; Calculate the inventory slot again.</span></span>
<span class="l"><a class="anc" name="8cd2" href="#8cd2">[8cd2]</a><span class="cd"><span class="i">TAY</span></span><span class="ce">; Set Y = inventory slot</span></span>
<span class="l"><a class="anc" name="8cd3" href="#8cd3">[8cd3]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#Temp_EquipingItem">Temp_EquipingItem</a></span></span><span class="ce">; Set A = new item</span></span>
<span class="l"><a class="anc" name="8cd6" href="#8cd6">[8cd6]</a><span class="cd"><span class="i">AND</span> <span class="o">#$1f</span></span><span class="ce">; Clear out the inventory bits, yielding the item value.</span></span>
<span class="l"><a class="anc" name="8cd8" href="#8cd8">[8cd8]</a><span class="cd"><span class="i">DEY</span></span></span>
<span class="l"><a class="anc" name="8cd9" href="#8cd9">[8cd9]</a><span class="cd"><span class="i">BEQ</span> <span class="o"><a href="#@_isArmor">@_isArmor</a></span></span><span class="ce">; Check if it's armor.</span></span>
<span class="l"><a class="anc" name="8cdb" href="#8cdb">[8cdb]</a><span class="cd"><span class="i">DEY</span></span></span>
<span class="l"><a class="anc" name="8cdc" href="#8cdc">[8cdc]</a><span class="cd"><span class="i">BEQ</span> <span class="o"><a href="#@_isShield">@_isShield</a></span></span><span class="ce">; Check if it's a shield.</span></span>
<span class="l"><a class="anc" name="8cde" href="#8cde">[8cde]</a><span class="cd"><span class="i">DEY</span></span></span>
<span class="l"><a class="anc" name="8cdf" href="#8cdf">[8cdf]</a><span class="cd"><span class="i">BEQ</span> <span class="o"><a href="#@_isMagic">@_isMagic</a></span></span><span class="ce">; Check if it's magic.</span></span>
<span class="l"><a class="anc" name="8ce1" href="#8ce1">[8ce1]</a><span class="cd"><span class="i">DEY</span></span></span>
<span class="l"><a class="anc" name="8ce2" href="#8ce2">[8ce2]</a><span class="cd"><span class="i">BEQ</span> <span class="o"><a href="#@_isItem">@_isItem</a></span></span><span class="ce">; Check if it's an item.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Inventory 0 (weapons)
;
</div><span class="l"><a class="anc" name="8ce4" href="#8ce4">[8ce4]</a><span class="cd"><span class="i">JMP</span> <span class="o">$edec</span></span><span class="ce">; Set the current weapon.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name=":8ce7:@_isArmor"></a><div class="c">;
; Inventory 1 (armor)
;
</div><span class="l"><a class="anc" name="8ce7" href="#8ce7">[8ce7]</a><a href="#:8ce7:@_isArmor" class="lla">@_isArmor:</a><span class="ce">; [$8ce7]</span></span>
<span class="l"><a class="anc" name="8ce7" href="#8ce7">[8ce7]</a><span class="cd"><span class="i">JMP</span> <span class="o">$ee05</span></span><span class="ce">; Set the current armor.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name=":8cea:@_isShield"></a><div class="c">;
; Inventory 2 (shield)
;
</div><span class="l"><a class="anc" name="8cea" href="#8cea">[8cea]</a><a href="#:8cea:@_isShield" class="lla">@_isShield:</a><span class="ce">; [$8cea]</span></span>
<span class="l"><a class="anc" name="8cea" href="#8cea">[8cea]</a><span class="cd"><span class="i">JMP</span> <span class="o">$ee0d</span></span><span class="ce">; Set the current shield.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name=":8ced:@_isMagic"></a><div class="c">;
; Inventory 3 (magic)
;
</div><span class="l"><a class="anc" name="8ced" href="#8ced">[8ced]</a><a href="#:8ced:@_isMagic" class="lla">@_isMagic:</a><span class="ce">; [$8ced]</span></span>
<span class="l"><a class="anc" name="8ced" href="#8ced">[8ced]</a><span class="cd"><span class="i">JMP</span> <span class="o"><a href="#Player_SetMagic">Player_SetMagic</a></span></span><span class="ce">; Set the current magic.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name=":8cf0:@_isItem"></a><div class="c">;
; Inventory 4 (normal items)
;
</div><span class="l"><a class="anc" name="8cf0" href="#8cf0">[8cf0]</a><a href="#:8cf0:@_isItem" class="lla">@_isItem:</a><span class="ce">; [$8cf0]</span></span>
<span class="l"><a class="anc" name="8cf0" href="#8cf0">[8cf0]</a><span class="cd"><span class="i">JMP</span> <span class="o">$fc0b</span></span><span class="ce">; Set the current item.</span></span>
<span class="l"></span>
<span class="l"></span>
</pre><pre><a name="Player_SetMagic"></a><div class="cp">;============================================================================
; Set the player's current magic spell.
;
; INPUTS:
;     A:
;         The magic spell to set.
;
; OUTPUTS:
;     <a href="RAM.html#SelectedMagic">SelectedMagic</a>:
;         The updated magic spell.
;
; XREFS:
;     <a href="#Player_Equip">Player_Equip</a>
;============================================================================
</div><span class="l"><a class="anc" name="8cf3" href="#8cf3">[8cf3]</a><a href="#Player_SetMagic" class="la">Player_SetMagic:</a><span class="ce">; [$8cf3]</span></span>
<span class="l"><a class="anc" name="8cf3" href="#8cf3">[8cf3]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#SelectedMagic">SelectedMagic</a></span></span><span class="ce">; Store the provided A value as the selected magic.</span></span>
<span class="l"><a class="anc" name="8cf6" href="#8cf6">[8cf6]</a><span class="cd"><span class="i">RTS</span></span></span>
<span class="l"></span>
<span class="l"></span>
</pre><pre><a name="Player_LacksItem"></a><div class="cp">;============================================================================
; Return whether the player lacks an item in the inventory.
;
; This will inspect the inventory bits of the item (the 3
; most significant bits), using the remaining bits as the
; value of the item in the inventory.
;
; INPUTS:
;     A:
;         The item index with inventory bits to check.
;
;     <a href="RAM.html#NumberOfWeapons">NumberOfWeapons</a>:
;         The starting range of inventory counters,
;         indexed by inventory IDs.
;
;     <a href="RAM.html#SelectedWeapon">SelectedWeapon</a>:
;         The starting range of selected item memory,
;         indexed by the inventory IDs.
;
;     <a href="RAM.html#WeaponInventory">WeaponInventory</a>:
;         The starting range of inventories, indexed
;         by the inventory IDs.
;
;     <a href="#INVENTORY_CATEGORY_U">INVENTORY_CATEGORY_U</a>:
;     <a href="#INVENTORY_CATEGORY_L">INVENTORY_CATEGORY_L</a>:
;         A lookup table of inventory ID to address.
;
;     <a href="#SPECIAL_ITEM_BITMASKS">SPECIAL_ITEM_BITMASKS</a>:
;         A lookup table of item indexes to special items
;         bitmasks.
;
; OUTPUTS:
;     C:
;         1 if the item is not in the inventory.
;         0 if it is.
;
;     <a href="RAM.html#Temp_Int24">Temp_Int24</a>:
;     <a href="RAM.html#Temp_Int24">Temp_Int24</a>+1:
;         Clobbered.
;
; CALLS:
;     <a href="PRG15_MIRROR.html#Player_GetInventoryIndexForItem">Player_GetInventoryIndexForItem</a>
;
; XREFS:
;     <a href="#IScriptAction_IfPlayerHasItem">IScriptAction_IfPlayerHasItem</a>
;     <a href="#PlayerMenu_HandleInventoryMenuInput">PlayerMenu_HandleInventoryMenuInput</a>
;============================================================================
</div><span class="l"><a class="anc" name="8cf7" href="#8cf7">[8cf7]</a><a href="#Player_LacksItem" class="la">Player_LacksItem:</a><span class="ce">; [$8cf7]</span></span>
<div class="c">;
; Check if this is a special item.
;
; Each special item type will be converted into an index in
; the <a href="#SPECIAL_ITEMS_BITMASKS">SPECIAL_ITEMS_BITMASKS</a> lookup table.
;
; If the matching bit is set, the item exists, so return false.
;
</div><span class="l"><a class="anc" name="8cf7" href="#8cf7">[8cf7]</a><span class="cd"><span class="i">LDX</span> <span class="o">#$00</span></span><span class="ce">; X will be our lookup table index.</span></span>
<span class="l"><a class="anc" name="8cf9" href="#8cf9">[8cf9]</a><span class="cd"><span class="i">CMP</span> <span class="o">#$80</span></span><span class="ce">; Check Ring of Elf.</span></span>
<span class="l"><a class="anc" name="8cfb" href="#8cfb">[8cfb]</a><span class="cd"><span class="i">BEQ</span> <span class="o"><a href="#@_specialItemMatched">@_specialItemMatched</a></span></span></span>
<span class="l"><a class="anc" name="8cfd" href="#8cfd">[8cfd]</a><span class="cd"><span class="i">INX</span></span><span class="ce">; X++</span></span>
<span class="l"><a class="anc" name="8cfe" href="#8cfe">[8cfe]</a><span class="cd"><span class="i">CMP</span> <span class="o">#$81</span></span><span class="ce">; Check Ring of Ruby.</span></span>
<span class="l"><a class="anc" name="8d00" href="#8d00">[8d00]</a><span class="cd"><span class="i">BEQ</span> <span class="o"><a href="#@_specialItemMatched">@_specialItemMatched</a></span></span></span>
<span class="l"><a class="anc" name="8d02" href="#8d02">[8d02]</a><span class="cd"><span class="i">INX</span></span><span class="ce">; X++</span></span>
<span class="l"><a class="anc" name="8d03" href="#8d03">[8d03]</a><span class="cd"><span class="i">CMP</span> <span class="o">#$82</span></span><span class="ce">; Check Ring of Dworf.</span></span>
<span class="l"><a class="anc" name="8d05" href="#8d05">[8d05]</a><span class="cd"><span class="i">BEQ</span> <span class="o"><a href="#@_specialItemMatched">@_specialItemMatched</a></span></span></span>
<span class="l"><a class="anc" name="8d07" href="#8d07">[8d07]</a><span class="cd"><span class="i">INX</span></span><span class="ce">; X++</span></span>
<span class="l"><a class="anc" name="8d08" href="#8d08">[8d08]</a><span class="cd"><span class="i">CMP</span> <span class="o">#$83</span></span><span class="ce">; Check Demon's Ring.</span></span>
<span class="l"><a class="anc" name="8d0a" href="#8d0a">[8d0a]</a><span class="cd"><span class="i">BEQ</span> <span class="o"><a href="#@_specialItemMatched">@_specialItemMatched</a></span></span></span>
<span class="l"><a class="anc" name="8d0c" href="#8d0c">[8d0c]</a><span class="cd"><span class="i">INX</span></span><span class="ce">; X++</span></span>
<span class="l"><a class="anc" name="8d0d" href="#8d0d">[8d0d]</a><span class="cd"><span class="i">CMP</span> <span class="o">#$92</span></span><span class="ce">; Check Elixir.</span></span>
<span class="l"><a class="anc" name="8d0f" href="#8d0f">[8d0f]</a><span class="cd"><span class="i">BEQ</span> <span class="o"><a href="#@_specialItemMatched">@_specialItemMatched</a></span></span></span>
<span class="l"><a class="anc" name="8d11" href="#8d11">[8d11]</a><span class="cd"><span class="i">INX</span></span><span class="ce">; X++</span></span>
<span class="l"><a class="anc" name="8d12" href="#8d12">[8d12]</a><span class="cd"><span class="i">CMP</span> <span class="o">#$8a</span></span><span class="ce">; Check Magical Rod.</span></span>
<span class="l"><a class="anc" name="8d14" href="#8d14">[8d14]</a><span class="cd"><span class="i">BEQ</span> <span class="o"><a href="#@_specialItemMatched">@_specialItemMatched</a></span></span></span>
<span class="l"><a class="anc" name="8d16" href="#8d16">[8d16]</a><span class="cd"><span class="i">INX</span></span><span class="ce">; X++</span></span>
<span class="l"><a class="anc" name="8d17" href="#8d17">[8d17]</a><span class="cd"><span class="i">CMP</span> <span class="o">#$93</span></span><span class="ce">; Check Pendant.</span></span>
<span class="l"><a class="anc" name="8d19" href="#8d19">[8d19]</a><span class="cd"><span class="i">BEQ</span> <span class="o"><a href="#@_specialItemMatched">@_specialItemMatched</a></span></span></span>
<span class="l"><a class="anc" name="8d1b" href="#8d1b">[8d1b]</a><span class="cd"><span class="i">INX</span></span><span class="ce">; X++</span></span>
<span class="l"><a class="anc" name="8d1c" href="#8d1c">[8d1c]</a><span class="cd"><span class="i">CMP</span> <span class="o">#$94</span></span><span class="ce">; Check Black Onyx.</span></span>
<span class="l"><a class="anc" name="8d1e" href="#8d1e">[8d1e]</a><span class="cd"><span class="i">BEQ</span> <span class="o"><a href="#@_specialItemMatched">@_specialItemMatched</a></span></span></span>
<span class="l"><a class="anc" name="8d20" href="#8d20">[8d20]</a><span class="cd"><span class="i">PHA</span></span><span class="ce">; Push the item value on the stack.</span></span>
<span class="l"><a class="anc" name="8d21" href="#8d21">[8d21]</a><span class="cd"><span class="i">JSR</span> <span class="o">$f785</span></span><span class="ce">; Get the inventory for the item.</span></span>
<span class="l"><a class="anc" name="8d24" href="#8d24">[8d24]</a><span class="cd"><span class="i">TAY</span></span><span class="ce">; Set Y = inventory.</span></span>
<span class="l"><a class="anc" name="8d25" href="#8d25">[8d25]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="#INVENTORY_CATEGORY_L">INVENTORY_CATEGORY_L</a>,Y</span></span></span>
<span class="l"><a class="anc" name="8d28" href="#8d28">[8d28]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Temp_Int24">Temp_Int24</a></span></span></span>
<span class="l"><a class="anc" name="8d2a" href="#8d2a">[8d2a]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="#INVENTORY_CATEGORY_U">INVENTORY_CATEGORY_U</a>,Y</span></span></span>
<span class="l"><a class="anc" name="8d2d" href="#8d2d">[8d2d]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Temp_Int24_M">Temp_Int24_M</a></span></span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Check if this item is currently equipped.
;
; If so, we'll be returning false (we don't lack it).
;
</div><span class="l"><a class="anc" name="8d2f" href="#8d2f">[8d2f]</a><span class="cd"><span class="i">PLA</span></span><span class="ce">; Pull the item into A</span></span>
<span class="l"><a class="anc" name="8d30" href="#8d30">[8d30]</a><span class="cd"><span class="i">AND</span> <span class="o">#$1f</span></span><span class="ce">; Clear out the inventory bits, leaving the item value.</span></span>
<span class="l"><a class="anc" name="8d32" href="#8d32">[8d32]</a><span class="cd"><span class="i">CMP</span> <span class="o"><a href="RAM.html#SelectedWeapon">SelectedWeapon</a>,Y</span></span><span class="ce">; Get the inventory index from Y.</span></span>
<span class="l"><a class="anc" name="8d35" href="#8d35">[8d35]</a><span class="cd"><span class="i">BEQ</span> <span class="o"><a href="#@_returnFalse">@_returnFalse</a></span></span><span class="ce">; If this item is currently set, return false.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Check the number of items in the target inventory.
;
; If the number is 0, we definitely lack the item.
;
</div><span class="l"><a class="anc" name="8d37" href="#8d37">[8d37]</a><span class="cd"><span class="i">LDX</span> <span class="o"><a href="RAM.html#NumberOfWeapons">NumberOfWeapons</a>,Y</span></span><span class="ce">; Set X = inventory item count.</span></span>
<span class="l"><a class="anc" name="8d3a" href="#8d3a">[8d3a]</a><span class="cd"><span class="i">BEQ</span> <span class="o"><a href="#@_returnTrue">@_returnTrue</a></span></span><span class="ce">; If 0, we lack the item.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Loop through all items in the inventory to see if
; we have this item.
;
</div><span class="l"><a class="anc" name="8d3c" href="#8d3c">[8d3c]</a><span class="cd"><span class="i">LDY</span> <span class="o">#$00</span></span><span class="ce">; Set Y = 0 for the loop counter</span></span>
<span class="l"></span>
<span class="l"></span>
<a name=":8d3e:@_checkInventoryLoop"></a><div class="c">;
; Check the item at the address to see if it matches this one.
;
; If so, we don't lack the item.
;
</div><span class="l"><a class="anc" name="8d3e" href="#8d3e">[8d3e]</a><a href="#:8d3e:@_checkInventoryLoop" class="lla">@_checkInventoryLoop:</a><span class="ce">; [$8d3e]</span></span>
<span class="l"><a class="anc" name="8d3e" href="#8d3e">[8d3e]</a><span class="cd"><span class="i">CMP</span> <span class="o">(<a href="RAM.html#Temp_Int24">Temp_Int24</a>),Y</span></span><span class="ce">; Check the inventory address at this index.</span></span>
<span class="l"><a class="anc" name="8d40" href="#8d40">[8d40]</a><span class="cd"><span class="i">BEQ</span> <span class="o"><a href="#@_returnFalse">@_returnFalse</a></span></span><span class="ce">; If it's a match, we don't lack the item. Return false.</span></span>
<span class="l"><a class="anc" name="8d42" href="#8d42">[8d42]</a><span class="cd"><span class="i">INY</span></span><span class="ce">; Y++.</span></span>
<span class="l"><a class="anc" name="8d43" href="#8d43">[8d43]</a><span class="cd"><span class="i">DEX</span></span><span class="ce">; Reduce the number of items left to check.</span></span>
<span class="l"><a class="anc" name="8d44" href="#8d44">[8d44]</a><span class="cd"><span class="i">BNE</span> <span class="o"><a href="#@_checkInventoryLoop">@_checkInventoryLoop</a></span></span><span class="ce">; Next loop.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name=":8d46:@_returnTrue"></a><div class="c">;
; The item could not be found. The player lacks the item.
;
</div><span class="l"><a class="anc" name="8d46" href="#8d46">[8d46]</a><a href="#:8d46:@_returnTrue" class="lla">@_returnTrue:</a><span class="ce">; [$8d46]</span></span>
<span class="l"><a class="anc" name="8d46" href="#8d46">[8d46]</a><span class="cd"><span class="i">SEC</span></span><span class="ce">; Set for a true result.</span></span>
<span class="l"><a class="anc" name="8d47" href="#8d47">[8d47]</a><span class="cd"><span class="i">RTS</span></span></span>
<span class="l"></span>
<a name=":8d48:@_specialItemMatched"></a><span class="l"><a class="anc" name="8d48" href="#8d48">[8d48]</a><a href="#:8d48:@_specialItemMatched" class="lla">@_specialItemMatched:</a><span class="ce">; [$8d48]</span></span>
<span class="l"><a class="anc" name="8d48" href="#8d48">[8d48]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#SpecialItems">SpecialItems</a></span></span><span class="ce">; Load the player's Special Items bitmask.</span></span>
<span class="l"><a class="anc" name="8d4b" href="#8d4b">[8d4b]</a><span class="cd"><span class="i">AND</span> <span class="o"><a href="#SPECIAL_ITEMS_BITMASKS">SPECIAL_ITEMS_BITMASKS</a>,X</span></span><span class="ce">; Clear the bit for the matched item.</span></span>
<span class="l"><a class="anc" name="8d4e" href="#8d4e">[8d4e]</a><span class="cd"><span class="i">BEQ</span> <span class="o"><a href="#@_returnTrue">@_returnTrue</a></span></span></span>
<span class="l"></span>
<a name=":8d50:@_returnFalse"></a><span class="l"><a class="anc" name="8d50" href="#8d50">[8d50]</a><a href="#:8d50:@_returnFalse" class="lla">@_returnFalse:</a><span class="ce">; [$8d50]</span></span>
<span class="l"><a class="anc" name="8d50" href="#8d50">[8d50]</a><span class="cd"><span class="i">CLC</span></span><span class="ce">; Clear for a false result.</span></span>
<span class="l"><a class="anc" name="8d51" href="#8d51">[8d51]</a><span class="cd"><span class="i">RTS</span></span></span>
<span class="l"></span>
<span class="l"></span>
<a name="SPECIAL_ITEMS_BITMASKS"></a><div class="cp">;============================================================================
; A mapping of item IDs to Special Items bitmasks.
;
; XREFS:
;     <a href="#Player_LacksItem">Player_LacksItem</a>
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#Player_LacksItem">Player_LacksItem</a>
;
</div><span class="l"><a class="anc" name="8d52" href="#8d52">[8d52]</a><a href="#SPECIAL_ITEMS_BITMASKS" class="la">SPECIAL_ITEMS_BITMASKS:</a><span class="ce">; [$8d52]</span></span>
<span class="l"><a class="anc" name="8d52" href="#8d52">[8d52]</a><span class="cd"><span class="i">db</span> <span class="o">$80</span></span><span class="ce">; [0]: Ring of Elf</span></span>
<span class="l"></span>
<a name="SPECIAL_ITEMS_BITMASKS_1_"></a><div class="c">;
; XREFS:
;     <a href="#Player_LacksItem">Player_LacksItem</a>
;
</div><span class="l"><a class="anc" name="8d53" href="#8d53">[8d53]</a><a href="#SPECIAL_ITEMS_BITMASKS_1_" class="la">SPECIAL_ITEMS_BITMASKS_1_:</a><span class="ce">; [$8d53]</span></span>
<span class="l"><a class="anc" name="8d53" href="#8d53">[8d53]</a><span class="cd"><span class="i">db</span> <span class="o">$40</span></span><span class="ce">; [1]: Ring of Ruby</span></span>
<span class="l"></span>
<a name="SPECIAL_ITEMS_BITMASKS_2_"></a><div class="c">;
; XREFS:
;     <a href="#Player_LacksItem">Player_LacksItem</a>
;
</div><span class="l"><a class="anc" name="8d54" href="#8d54">[8d54]</a><a href="#SPECIAL_ITEMS_BITMASKS_2_" class="la">SPECIAL_ITEMS_BITMASKS_2_:</a><span class="ce">; [$8d54]</span></span>
<span class="l"><a class="anc" name="8d54" href="#8d54">[8d54]</a><span class="cd"><span class="i">db</span> <span class="o">$20</span></span><span class="ce">; [2]: Ring of Dworf</span></span>
<span class="l"></span>
<a name="SPECIAL_ITEMS_BITMASKS_3_"></a><div class="c">;
; XREFS:
;     <a href="#Player_LacksItem">Player_LacksItem</a>
;
</div><span class="l"><a class="anc" name="8d55" href="#8d55">[8d55]</a><a href="#SPECIAL_ITEMS_BITMASKS_3_" class="la">SPECIAL_ITEMS_BITMASKS_3_:</a><span class="ce">; [$8d55]</span></span>
<span class="l"><a class="anc" name="8d55" href="#8d55">[8d55]</a><span class="cd"><span class="i">db</span> <span class="o">$10</span></span><span class="ce">; [3]: Demon's Ring</span></span>
<span class="l"></span>
<a name="SPECIAL_ITEMS_BITMASKS_4_"></a><div class="c">;
; XREFS:
;     <a href="#Player_LacksItem">Player_LacksItem</a>
;
</div><span class="l"><a class="anc" name="8d56" href="#8d56">[8d56]</a><a href="#SPECIAL_ITEMS_BITMASKS_4_" class="la">SPECIAL_ITEMS_BITMASKS_4_:</a><span class="ce">; [$8d56]</span></span>
<span class="l"><a class="anc" name="8d56" href="#8d56">[8d56]</a><span class="cd"><span class="i">db</span> <span class="o">$08</span></span><span class="ce">; [4]: Elixir</span></span>
<span class="l"></span>
<a name="SPECIAL_ITEMS_BITMASKS_5_"></a><div class="c">;
; XREFS:
;     <a href="#Player_LacksItem">Player_LacksItem</a>
;
</div><span class="l"><a class="anc" name="8d57" href="#8d57">[8d57]</a><a href="#SPECIAL_ITEMS_BITMASKS_5_" class="la">SPECIAL_ITEMS_BITMASKS_5_:</a><span class="ce">; [$8d57]</span></span>
<span class="l"><a class="anc" name="8d57" href="#8d57">[8d57]</a><span class="cd"><span class="i">db</span> <span class="o">$04</span></span><span class="ce">; [5]: Magical Rod</span></span>
<span class="l"></span>
<a name="SPECIAL_ITEMS_BITMASKS_6_"></a><div class="c">;
; XREFS:
;     <a href="#Player_LacksItem">Player_LacksItem</a>
;
</div><span class="l"><a class="anc" name="8d58" href="#8d58">[8d58]</a><a href="#SPECIAL_ITEMS_BITMASKS_6_" class="la">SPECIAL_ITEMS_BITMASKS_6_:</a><span class="ce">; [$8d58]</span></span>
<span class="l"><a class="anc" name="8d58" href="#8d58">[8d58]</a><span class="cd"><span class="i">db</span> <span class="o">$02</span></span><span class="ce">; [6]: Pendant</span></span>
<span class="l"></span>
<a name="SPECIAL_ITEMS_BITMASKS_7_"></a><div class="c">;
; XREFS:
;     <a href="#Player_LacksItem">Player_LacksItem</a>
;
</div><span class="l"><a class="anc" name="8d59" href="#8d59">[8d59]</a><a href="#SPECIAL_ITEMS_BITMASKS_7_" class="la">SPECIAL_ITEMS_BITMASKS_7_:</a><span class="ce">; [$8d59]</span></span>
<span class="l"><a class="anc" name="8d59" href="#8d59">[8d59]</a><span class="cd"><span class="i">db</span> <span class="o">$01</span></span><span class="ce">; [7]: Black Onyx</span></span>
<span class="l"></span>
<span class="l"></span>
</pre><pre><a name="PlayerMenu_ShowStatusMenu"></a><div class="cp">;============================================================================
; Show the player's status in the Player Menu.
;
; INPUTS:
;     <a href="RAM.html#NextPlayerTitle">NextPlayerTitle</a>:
;         The next title to reach.
;
;     <a href="RAM.html#SelectedWeapon">SelectedWeapon</a>:
;         The start of the range of selected items.
;
;     <a href="RAM.html#SpecialItems">SpecialItems</a>:
;         The player's special items bitmask.
;
;     <a href="RAM.html#Joy1_ChangedButtonMask">Joy1_ChangedButtonMask</a>:
;         Changed button bitmask for controller 1.
;
; OUTPUTS:
;     <a href="RAM.html#Arg_StringsCount">Arg_StringsCount</a>:
;     <a href="RAM.html#DataArray">DataArray</a>:
;     <a href="RAM.html#Temp_Int24">Temp_Int24</a>:
;     <a href="RAM.html#Temp_Int24">Temp_Int24</a>+1:
;     $ee:
;     <a href="RAM.html#TextBox_X">TextBox_X</a>:
;     <a href="RAM.html#TextBox_Y">TextBox_Y</a>:
;     <a href="RAM.html#TextBox_Width">TextBox_Width</a>:
;     <a href="RAM.html#TextBox_Height">TextBox_Height</a>:
;     <a href="RAM.html#TextBox_ContentsX">TextBox_ContentsX</a>:
;     <a href="RAM.html#TextBox_ContentsY">TextBox_ContentsY</a>:
;         Clobbered.
;
; CALLS:
;     <a href="PRG15_MIRROR.html#Sprites_ResetForGameScreen">Sprites_ResetForGameScreen</a>
;     <a href="PRG15_MIRROR.html#Player_GetInventoryBitForIndex">Player_GetInventoryBitForIndex</a>
;     <a href="PRG15_MIRROR.html#PPU_SetAddrForTextBoxPos">PPU_SetAddrForTextBoxPos</a>
;     <a href="#TextBox_Close">TextBox_Close</a>
;     <a href="#TextBox_DrawItemImage">TextBox_DrawItemImage</a>
;     <a href="#TextBox_DrawItemName">TextBox_DrawItemName</a>
;     <a href="PRG15_MIRROR.html#TextBox_DrawZeroPaddedNumber">TextBox_DrawZeroPaddedNumber</a>
;     <a href="#UI_DrawString">UI_DrawString</a>
;     <a href="#TextBox_DrawStringLines">TextBox_DrawStringLines</a>
;     <a href="PRG15_MIRROR.html#WaitForNextFrame">WaitForNextFrame</a>
;
; XREFS:
;     <a href="#PlayerMenu_Show">PlayerMenu_Show</a>
;============================================================================
</div><span class="l"><a class="anc" name="8d5a" href="#8d5a">[8d5a]</a><a href="#PlayerMenu_ShowStatusMenu" class="la">PlayerMenu_ShowStatusMenu:</a><span class="ce">; [$8d5a]</span></span>
<div class="c">;
; Position and open the textbox for the player status.
;
</div><span class="l"><a class="anc" name="8d5a" href="#8d5a">[8d5a]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$04</span></span></span>
<span class="l"><a class="anc" name="8d5c" href="#8d5c">[8d5c]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#TextBox_X">TextBox_X</a></span></span><span class="ce">; Set textbox X coordinate to 4.</span></span>
<span class="l"><a class="anc" name="8d5f" href="#8d5f">[8d5f]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$08</span></span></span>
<span class="l"><a class="anc" name="8d61" href="#8d61">[8d61]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#TextBox_Y">TextBox_Y</a></span></span><span class="ce">; Set textbox Y coordinate to 8.</span></span>
<span class="l"><a class="anc" name="8d64" href="#8d64">[8d64]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$1a</span></span></span>
<span class="l"><a class="anc" name="8d66" href="#8d66">[8d66]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#TextBox_Width">TextBox_Width</a></span></span><span class="ce">; Set textbox width to 26.</span></span>
<span class="l"><a class="anc" name="8d69" href="#8d69">[8d69]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$10</span></span></span>
<span class="l"><a class="anc" name="8d6b" href="#8d6b">[8d6b]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#TextBox_Height">TextBox_Height</a></span></span><span class="ce">; Set textbox height to 16.</span></span>
<span class="l"><a class="anc" name="8d6e" href="#8d6e">[8d6e]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#TextBox_Open">TextBox_Open</a></span></span><span class="ce">; Open the textbox.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Prepare to draw 7 strings from
; (<a href="#PLAYER_STATUS_MENU_STRINGS">PLAYER_STATUS_MENU_STRINGS</a>)
; in the textbox.
;
</div><span class="l"><a class="anc" name="8d71" href="#8d71">[8d71]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$07</span></span></span>
<span class="l"><a class="anc" name="8d73" href="#8d73">[8d73]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#Arg_StringsCount">Arg_StringsCount</a></span></span><span class="ce">; Prepare to draw 7 rows of strings.</span></span>
<span class="l"><a class="anc" name="8d76" href="#8d76">[8d76]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$d3</span></span><span class="ce">; 0xD3 = lower byte of text strings.</span></span>
<span class="l"><a class="anc" name="8d78" href="#8d78">[8d78]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Temp_Int24">Temp_Int24</a></span></span><span class="ce">; Store it.</span></span>
<span class="l"><a class="anc" name="8d7a" href="#8d7a">[8d7a]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$88</span></span><span class="ce">; 0x88 = upper byte of text strings.</span></span>
<span class="l"><a class="anc" name="8d7c" href="#8d7c">[8d7c]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Temp_Int24_M">Temp_Int24_M</a></span></span><span class="ce">; Store it.</span></span>
<span class="l"><a class="anc" name="8d7e" href="#8d7e">[8d7e]</a><span class="cd"><span class="i">LDX</span> <span class="o">#$00</span></span><span class="ce">; X = 0 (index counter).</span></span>
<span class="l"><a class="anc" name="8d80" href="#8d80">[8d80]</a><span class="cd"><span class="i">STX</span> <span class="o">a:<a href="RAM.html#DataArray">DataArray</a></span></span><span class="ce">; Draw string 1 ("RANK:").</span></span>
<span class="l"><a class="anc" name="8d83" href="#8d83">[8d83]</a><span class="cd"><span class="i">INX</span></span></span>
<span class="l"><a class="anc" name="8d84" href="#8d84">[8d84]</a><span class="cd"><span class="i">STX</span> <span class="o">a:<a href="RAM.html#DataArray_1_">DataArray_1_</a></span></span><span class="ce">; Draw string 2 ("NEXT EXP:").</span></span>
<span class="l"><a class="anc" name="8d87" href="#8d87">[8d87]</a><span class="cd"><span class="i">INX</span></span></span>
<span class="l"><a class="anc" name="8d88" href="#8d88">[8d88]</a><span class="cd"><span class="i">STX</span> <span class="o">a:<a href="RAM.html#DataArray_2_">DataArray_2_</a></span></span><span class="ce">; Draw string 3 ("WEAPON:").</span></span>
<span class="l"><a class="anc" name="8d8b" href="#8d8b">[8d8b]</a><span class="cd"><span class="i">INX</span></span></span>
<span class="l"><a class="anc" name="8d8c" href="#8d8c">[8d8c]</a><span class="cd"><span class="i">STX</span> <span class="o">a:<a href="RAM.html#DataArray_3_">DataArray_3_</a></span></span><span class="ce">; Draw string 4 ("ARMOR:").</span></span>
<span class="l"><a class="anc" name="8d8f" href="#8d8f">[8d8f]</a><span class="cd"><span class="i">INX</span></span></span>
<span class="l"><a class="anc" name="8d90" href="#8d90">[8d90]</a><span class="cd"><span class="i">STX</span> <span class="o">a:<a href="RAM.html#DataArray_4_">DataArray_4_</a></span></span><span class="ce">; Draw string 5 ("SHIELD:").</span></span>
<span class="l"><a class="anc" name="8d93" href="#8d93">[8d93]</a><span class="cd"><span class="i">INX</span></span></span>
<span class="l"><a class="anc" name="8d94" href="#8d94">[8d94]</a><span class="cd"><span class="i">STX</span> <span class="o">a:<a href="RAM.html#DataArray_5_">DataArray_5_</a></span></span><span class="ce">; Draw string 6 ("MAGIC:").</span></span>
<span class="l"><a class="anc" name="8d97" href="#8d97">[8d97]</a><span class="cd"><span class="i">INX</span></span></span>
<span class="l"><a class="anc" name="8d98" href="#8d98">[8d98]</a><span class="cd"><span class="i">STX</span> <span class="o">a:<a href="RAM.html#DataArray_6_">DataArray_6_</a></span></span><span class="ce">; Draw string 7 ("ITEM:").</span></span>
<span class="l"><a class="anc" name="8d9b" href="#8d9b">[8d9b]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#TextBox_DrawStringLines">TextBox_DrawStringLines</a></span></span><span class="ce">; Draw the strings in the textbox.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Prepare to draw the player rank/title.
;
; Strings will be loaded from <a href="#PLAYER_STATUS_MENU_TITLES">PLAYER_STATUS_MENU_TITLES</a>.
;
</div><span class="l"><a class="anc" name="8d9e" href="#8d9e">[8d9e]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#TextBox_X">TextBox_X</a></span></span><span class="ce">; Get the textbox X coordinate.</span></span>
<span class="l"><a class="anc" name="8da1" href="#8da1">[8da1]</a><span class="cd"><span class="i">CLC</span></span></span>
<span class="l"><a class="anc" name="8da2" href="#8da2">[8da2]</a><span class="cd"><span class="i">ADC</span> <span class="o">#$0b</span></span><span class="ce">; Add 11.</span></span>
<span class="l"><a class="anc" name="8da4" href="#8da4">[8da4]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#TextBox_ContentsX">TextBox_ContentsX</a></span></span><span class="ce">; Set as the draw X coordinate.</span></span>
<span class="l"><a class="anc" name="8da6" href="#8da6">[8da6]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#TextBox_Y">TextBox_Y</a></span></span><span class="ce">; Get the textbox Y coordinate.</span></span>
<span class="l"><a class="anc" name="8da9" href="#8da9">[8da9]</a><span class="cd"><span class="i">CLC</span></span></span>
<span class="l"><a class="anc" name="8daa" href="#8daa">[8daa]</a><span class="cd"><span class="i">ADC</span> <span class="o">#$02</span></span><span class="ce">; Add 2.</span></span>
<span class="l"><a class="anc" name="8dac" href="#8dac">[8dac]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#TextBox_ContentsY">TextBox_ContentsY</a></span></span><span class="ce">; Set as the draw Y coordinate.</span></span>
<span class="l"><a class="anc" name="8dae" href="#8dae">[8dae]</a><span class="cd"><span class="i">JSR</span> <span class="o">$f804</span></span><span class="ce">; Set this as the PPU draw position.</span></span>
<span class="l"><a class="anc" name="8db1" href="#8db1">[8db1]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#PlayerTitle">PlayerTitle</a></span></span><span class="ce">; Load the player title.</span></span>
<span class="l"><a class="anc" name="8db4" href="#8db4">[8db4]</a><span class="cd"><span class="i">JSR</span> <span class="o">$f78c</span></span><span class="ce">; Multiply by 16 to get an index into the strings.</span></span>
<span class="l"><a class="anc" name="8db7" href="#8db7">[8db7]</a><span class="cd"><span class="i">TAY</span></span><span class="ce">; Y = A (result)</span></span>
<span class="l"><a class="anc" name="8db8" href="#8db8">[8db8]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$43</span></span><span class="ce">; 0x43 == lower byte of Player Title strings.</span></span>
<span class="l"><a class="anc" name="8dba" href="#8dba">[8dba]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Temp_Int24">Temp_Int24</a></span></span><span class="ce">; Store it.</span></span>
<span class="l"><a class="anc" name="8dbc" href="#8dbc">[8dbc]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$89</span></span><span class="ce">; 0x89 == upper byte of Player Title strings.</span></span>
<span class="l"><a class="anc" name="8dbe" href="#8dbe">[8dbe]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Temp_Int24_M">Temp_Int24_M</a></span></span><span class="ce">; Store it.</span></span>
<span class="l"><a class="anc" name="8dc0" href="#8dc0">[8dc0]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#UI_DrawString">UI_DrawString</a></span></span><span class="ce">; Draw the string.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Prepare to draw the player's experience.
;
</div><span class="l"><a class="anc" name="8dc3" href="#8dc3">[8dc3]</a><span class="cd"><span class="i">INC</span> <span class="o"><a href="RAM.html#TextBox_ContentsY">TextBox_ContentsY</a></span></span><span class="ce">; Go down to 2 rows.</span></span>
<span class="l"><a class="anc" name="8dc5" href="#8dc5">[8dc5]</a><span class="cd"><span class="i">INC</span> <span class="o"><a href="RAM.html#TextBox_ContentsY">TextBox_ContentsY</a></span></span></span>
<span class="l"><a class="anc" name="8dc7" href="#8dc7">[8dc7]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#NextPlayerTitle">NextPlayerTitle</a></span></span><span class="ce">; Load the next possible title.</span></span>
<span class="l"><a class="anc" name="8dca" href="#8dca">[8dca]</a><span class="cd"><span class="i">CMP</span> <span class="o">#$0f</span></span><span class="ce">; Is it &gt;= 15 (the last available title))?</span></span>
<span class="l"><a class="anc" name="8dcc" href="#8dcc">[8dcc]</a><span class="cd"><span class="i">BCS</span> <span class="o"><a href="#@_drawSelectedItems">@_drawSelectedItems</a></span></span><span class="ce">; If so, leave this blank and draw items.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Look up the experience in the lookup table in bank 15.
;
; Note that we're starting our offset 2 bytes before the
; lookup table. This is because our X will actually be a
; 1-based index, normalized to 0-based in the lookup table.
; Each entry is a word.
;
</div><span class="l"><a class="anc" name="8dce" href="#8dce">[8dce]</a><span class="cd"><span class="i">ASL</span> <span class="o">A</span></span><span class="ce">; Convert the title index to a word boundary.</span></span>
<span class="l"><a class="anc" name="8dcf" href="#8dcf">[8dcf]</a><span class="cd"><span class="i">TAX</span></span><span class="ce">; X = A (result).</span></span>
<span class="l"><a class="anc" name="8dd0" href="#8dd0">[8dd0]</a><span class="cd"><span class="i">LDA</span> <span class="o">$f749,X</span></span><span class="ce">; Load the lower byte of the amount of experience needed for the next level.</span></span>
<span class="l"><a class="anc" name="8dd3" href="#8dd3">[8dd3]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Temp_Int24">Temp_Int24</a></span></span><span class="ce">; Store it.</span></span>
<span class="l"><a class="anc" name="8dd5" href="#8dd5">[8dd5]</a><span class="cd"><span class="i">LDA</span> <span class="o">$f74a,X</span></span><span class="ce">; Load the middle byte.</span></span>
<span class="l"><a class="anc" name="8dd8" href="#8dd8">[8dd8]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Temp_Int24_M">Temp_Int24_M</a></span></span><span class="ce">; Store it.</span></span>
<span class="l"><a class="anc" name="8dda" href="#8dda">[8dda]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$00</span></span><span class="ce">; Upper byte is always 0.</span></span>
<span class="l"><a class="anc" name="8ddc" href="#8ddc">[8ddc]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Temp_Int24_U">Temp_Int24_U</a></span></span><span class="ce">; Store it.</span></span>
<span class="l"><a class="anc" name="8dde" href="#8dde">[8dde]</a><span class="cd"><span class="i">LDY</span> <span class="o">#$05</span></span><span class="ce">; 5 = Maximum number of digits.</span></span>
<span class="l"><a class="anc" name="8de0" href="#8de0">[8de0]</a><span class="cd"><span class="i">JSR</span> <span class="o">$fa03</span></span><span class="ce">; Draw the number zero-padded.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name=":8de3:@_drawSelectedItems"></a><div class="c">;
; Draw the selected items.
;
; In order, this will draw images and text for:
;
; 1. Weapon
; 2. Armor
; 3. Shield
; 4. Magic
;
</div><span class="l"><a class="anc" name="8de3" href="#8de3">[8de3]</a><a href="#:8de3:@_drawSelectedItems" class="lla">@_drawSelectedItems:</a><span class="ce">; [$8de3]</span></span>
<span class="l"><a class="anc" name="8de3" href="#8de3">[8de3]</a><span class="cd"><span class="i">LDX</span> <span class="o">#$00</span></span><span class="ce">; X = 0 (loop counter).</span></span>
<span class="l"></span>
<a name=":8de5:@_drawSelectedItemsLoop"></a><span class="l"><a class="anc" name="8de5" href="#8de5">[8de5]</a><a href="#:8de5:@_drawSelectedItemsLoop" class="lla">@_drawSelectedItemsLoop:</a><span class="ce">; [$8de5]</span></span>
<span class="l"><a class="anc" name="8de5" href="#8de5">[8de5]</a><span class="cd"><span class="i">TXA</span></span><span class="ce">; A = X (loop counter)</span></span>
<span class="l"><a class="anc" name="8de6" href="#8de6">[8de6]</a><span class="cd"><span class="i">PHA</span></span><span class="ce">; Push it to the stack.</span></span>
<span class="l"><a class="anc" name="8de7" href="#8de7">[8de7]</a><span class="cd"><span class="i">INC</span> <span class="o"><a href="RAM.html#TextBox_ContentsY">TextBox_ContentsY</a></span></span><span class="ce">; Increment the draw Y coordinate by 2.</span></span>
<span class="l"><a class="anc" name="8de9" href="#8de9">[8de9]</a><span class="cd"><span class="i">INC</span> <span class="o"><a href="RAM.html#TextBox_ContentsY">TextBox_ContentsY</a></span></span></span>
<span class="l"><a class="anc" name="8deb" href="#8deb">[8deb]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="RAM.html#SelectedWeapon">SelectedWeapon</a>,X</span></span><span class="ce">; Load the selected item for this type.</span></span>
<span class="l"><a class="anc" name="8dee" href="#8dee">[8dee]</a><span class="cd"><span class="i">BMI</span> <span class="o"><a href="#@_nextInventory">@_nextInventory</a></span></span><span class="ce">; If unset, advance to the next.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; There's a selected item of this type. Load the information.
;
</div><span class="l"><a class="anc" name="8df0" href="#8df0">[8df0]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#TextBox_X">TextBox_X</a></span></span><span class="ce">; Load the textbox X coordinate.</span></span>
<span class="l"><a class="anc" name="8df3" href="#8df3">[8df3]</a><span class="cd"><span class="i">CLC</span></span></span>
<span class="l"><a class="anc" name="8df4" href="#8df4">[8df4]</a><span class="cd"><span class="i">ADC</span> <span class="o">#$09</span></span><span class="ce">; Add 9 (image X coordinate).</span></span>
<span class="l"><a class="anc" name="8df6" href="#8df6">[8df6]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#TextBox_ContentsX">TextBox_ContentsX</a></span></span><span class="ce">; Store as the draw X coordinate.</span></span>
<span class="l"><a class="anc" name="8df8" href="#8df8">[8df8]</a><span class="cd"><span class="i">TXA</span></span><span class="ce">; A = X (loop counter).</span></span>
<span class="l"><a class="anc" name="8df9" href="#8df9">[8df9]</a><span class="cd"><span class="i">JSR</span> <span class="o">$f78b</span></span><span class="ce">; Get the inventory bit for this index.</span></span>
<span class="l"><a class="anc" name="8dfc" href="#8dfc">[8dfc]</a><span class="cd"><span class="i">ORA</span> <span class="o"><a href="RAM.html#SelectedWeapon">SelectedWeapon</a>,X</span></span><span class="ce">; OR with the item value, yielding an inventory-backed item ID.</span></span>
<span class="l"><a class="anc" name="8dff" href="#8dff">[8dff]</a><span class="cd"><span class="i">PHA</span></span><span class="ce">; Push it to the stack.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Position the image and draw it.
;
</div><span class="l"><a class="anc" name="8e00" href="#8e00">[8e00]</a><span class="cd"><span class="i">DEC</span> <span class="o"><a href="RAM.html#TextBox_ContentsY">TextBox_ContentsY</a></span></span><span class="ce">; Go up a row for the start of the image.</span></span>
<span class="l"><a class="anc" name="8e02" href="#8e02">[8e02]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#TextBox_DrawItemImage">TextBox_DrawItemImage</a></span></span><span class="ce">; Draw the image there.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Position the item name text and draw it.
;
</div><span class="l"><a class="anc" name="8e05" href="#8e05">[8e05]</a><span class="cd"><span class="i">INC</span> <span class="o"><a href="RAM.html#TextBox_ContentsY">TextBox_ContentsY</a></span></span><span class="ce">; Go down 1 rows.</span></span>
<span class="l"><a class="anc" name="8e07" href="#8e07">[8e07]</a><span class="cd"><span class="i">INC</span> <span class="o"><a href="RAM.html#TextBox_ContentsX">TextBox_ContentsX</a></span></span><span class="ce">; Go right 2 rows for the text.</span></span>
<span class="l"><a class="anc" name="8e09" href="#8e09">[8e09]</a><span class="cd"><span class="i">INC</span> <span class="o"><a href="RAM.html#TextBox_ContentsX">TextBox_ContentsX</a></span></span></span>
<span class="l"><a class="anc" name="8e0b" href="#8e0b">[8e0b]</a><span class="cd"><span class="i">PLA</span></span><span class="ce">; Pop the item ID.</span></span>
<span class="l"><a class="anc" name="8e0c" href="#8e0c">[8e0c]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#TextBox_DrawItemName">TextBox_DrawItemName</a></span></span><span class="ce">; Draw the name of the item.</span></span>
<span class="l"></span>
<a name=":8e0f:@_nextInventory"></a><span class="l"><a class="anc" name="8e0f" href="#8e0f">[8e0f]</a><a href="#:8e0f:@_nextInventory" class="lla">@_nextInventory:</a><span class="ce">; [$8e0f]</span></span>
<span class="l"><a class="anc" name="8e0f" href="#8e0f">[8e0f]</a><span class="cd"><span class="i">PLA</span></span><span class="ce">; Pop the X coordinate.</span></span>
<span class="l"><a class="anc" name="8e10" href="#8e10">[8e10]</a><span class="cd"><span class="i">TAX</span></span><span class="ce">; Set it back on X.</span></span>
<span class="l"><a class="anc" name="8e11" href="#8e11">[8e11]</a><span class="cd"><span class="i">INX</span></span><span class="ce">; X++</span></span>
<span class="l"><a class="anc" name="8e12" href="#8e12">[8e12]</a><span class="cd"><span class="i">CPX</span> <span class="o">#$04</span></span><span class="ce">; Is it 4 (last inventory type)?</span></span>
<span class="l"><a class="anc" name="8e14" href="#8e14">[8e14]</a><span class="cd"><span class="i">BNE</span> <span class="o"><a href="#@_drawSelectedItemsLoop">@_drawSelectedItemsLoop</a></span></span><span class="ce">; If not, loop.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Prepare to draw the special items (up to 8 in total).
;
</div><span class="l"><a class="anc" name="8e16" href="#8e16">[8e16]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#TextBox_X">TextBox_X</a></span></span><span class="ce">; Load the textbox's X location.</span></span>
<span class="l"><a class="anc" name="8e19" href="#8e19">[8e19]</a><span class="cd"><span class="i">CLC</span></span></span>
<span class="l"><a class="anc" name="8e1a" href="#8e1a">[8e1a]</a><span class="cd"><span class="i">ADC</span> <span class="o">#$09</span></span><span class="ce">; Add 9 (image X coordinate).</span></span>
<span class="l"><a class="anc" name="8e1c" href="#8e1c">[8e1c]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#TextBox_ContentsX">TextBox_ContentsX</a></span></span><span class="ce">; Store it as the draw X coordinate.</span></span>
<span class="l"><a class="anc" name="8e1e" href="#8e1e">[8e1e]</a><span class="cd"><span class="i">INC</span> <span class="o"><a href="RAM.html#TextBox_ContentsY">TextBox_ContentsY</a></span></span><span class="ce">; Increment the draw Y coordinate.</span></span>
<span class="l"><a class="anc" name="8e20" href="#8e20">[8e20]</a><span class="cd"><span class="i">LDX</span> <span class="o">#$00</span></span><span class="ce">; X = 0 (loop counter)</span></span>
<span class="l"><a class="anc" name="8e22" href="#8e22">[8e22]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#SpecialItems">SpecialItems</a></span></span><span class="ce">; A = Special items bitmask</span></span>
<span class="l"></span>
<span class="l"></span>
<a name=":8e25:@_drawSpecialItemLoop"></a><div class="c">;
; Draw in a loop.
;
</div><span class="l"><a class="anc" name="8e25" href="#8e25">[8e25]</a><a href="#:8e25:@_drawSpecialItemLoop" class="lla">@_drawSpecialItemLoop:</a><span class="ce">; [$8e25]</span></span>
<span class="l"><a class="anc" name="8e25" href="#8e25">[8e25]</a><span class="cd"><span class="i">ASL</span> <span class="o">A</span></span><span class="ce">; Shift the left-most bit into C.</span></span>
<span class="l"><a class="anc" name="8e26" href="#8e26">[8e26]</a><span class="cd"><span class="i">BCC</span> <span class="o"><a href="#@_nextSpecialItem">@_nextSpecialItem</a></span></span><span class="ce">; If not set, skip to the next item.</span></span>
<span class="l"><a class="anc" name="8e28" href="#8e28">[8e28]</a><span class="cd"><span class="i">PHA</span></span><span class="ce">; Push the remaining bits to the stack.</span></span>
<span class="l"><a class="anc" name="8e29" href="#8e29">[8e29]</a><span class="cd"><span class="i">TXA</span></span><span class="ce">; A = X (loop counter).</span></span>
<span class="l"><a class="anc" name="8e2a" href="#8e2a">[8e2a]</a><span class="cd"><span class="i">PHA</span></span><span class="ce">; Push the loop counter to the stack.</span></span>
<span class="l"><a class="anc" name="8e2b" href="#8e2b">[8e2b]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="#SPECIAL_ITEM_TILE_START_IDS">SPECIAL_ITEM_TILE_START_IDS</a>,X</span></span><span class="ce">; Load the tile start ID for this item.</span></span>
<span class="l"><a class="anc" name="8e2e" href="#8e2e">[8e2e]</a><span class="cd"><span class="i">INX</span></span><span class="ce">; X += 4 (number of item image tiles).</span></span>
<span class="l"><a class="anc" name="8e2f" href="#8e2f">[8e2f]</a><span class="cd"><span class="i">INX</span></span></span>
<span class="l"><a class="anc" name="8e30" href="#8e30">[8e30]</a><span class="cd"><span class="i">INX</span></span></span>
<span class="l"><a class="anc" name="8e31" href="#8e31">[8e31]</a><span class="cd"><span class="i">INX</span></span></span>
<span class="l"><a class="anc" name="8e32" href="#8e32">[8e32]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#TextBox_DrawItemImage">TextBox_DrawItemImage</a></span></span><span class="ce">; Draw the image.</span></span>
<span class="l"><a class="anc" name="8e35" href="#8e35">[8e35]</a><span class="cd"><span class="i">PLA</span></span><span class="ce">; Pop the loop counter.</span></span>
<span class="l"><a class="anc" name="8e36" href="#8e36">[8e36]</a><span class="cd"><span class="i">TAX</span></span><span class="ce">; X = A (restore it)</span></span>
<span class="l"><a class="anc" name="8e37" href="#8e37">[8e37]</a><span class="cd"><span class="i">PLA</span></span><span class="ce">; Pop the remaining bits.</span></span>
<span class="l"></span>
<a name=":8e38:@_nextSpecialItem"></a><span class="l"><a class="anc" name="8e38" href="#8e38">[8e38]</a><a href="#:8e38:@_nextSpecialItem" class="lla">@_nextSpecialItem:</a><span class="ce">; [$8e38]</span></span>
<span class="l"><a class="anc" name="8e38" href="#8e38">[8e38]</a><span class="cd"><span class="i">INC</span> <span class="o"><a href="RAM.html#TextBox_ContentsX">TextBox_ContentsX</a></span></span><span class="ce">; Advance the X position by 2 tiles.</span></span>
<span class="l"><a class="anc" name="8e3a" href="#8e3a">[8e3a]</a><span class="cd"><span class="i">INC</span> <span class="o"><a href="RAM.html#TextBox_ContentsX">TextBox_ContentsX</a></span></span></span>
<span class="l"><a class="anc" name="8e3c" href="#8e3c">[8e3c]</a><span class="cd"><span class="i">INX</span></span><span class="ce">; X++ (loop counter)</span></span>
<span class="l"><a class="anc" name="8e3d" href="#8e3d">[8e3d]</a><span class="cd"><span class="i">CPX</span> <span class="o">#$08</span></span><span class="ce">; Is it 8?</span></span>
<span class="l"><a class="anc" name="8e3f" href="#8e3f">[8e3f]</a><span class="cd"><span class="i">BNE</span> <span class="o"><a href="#@_drawSpecialItemLoop">@_drawSpecialItemLoop</a></span></span><span class="ce">; If not, loop.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name=":8e41:@_waitForInputLoop"></a><div class="c">;
; Draw the menu, freezing gameplay until dismissed.
;
</div><span class="l"><a class="anc" name="8e41" href="#8e41">[8e41]</a><a href="#:8e41:@_waitForInputLoop" class="lla">@_waitForInputLoop:</a><span class="ce">; [$8e41]</span></span>
<span class="l"><a class="anc" name="8e41" href="#8e41">[8e41]</a><span class="cd"><span class="i">JSR</span> <span class="o">$ca25</span></span><span class="ce">; Wait for the next frame.</span></span>
<span class="l"><a class="anc" name="8e44" href="#8e44">[8e44]</a><span class="cd"><span class="i">JSR</span> <span class="o">$cb47</span></span><span class="ce">; Draw with screen state paused.</span></span>
<span class="l"><a class="anc" name="8e47" href="#8e47">[8e47]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="RAM.html#Joy1_ChangedButtonMask">Joy1_ChangedButtonMask</a></span></span><span class="ce">; Load the changed button mask.</span></span>
<span class="l"><a class="anc" name="8e49" href="#8e49">[8e49]</a><span class="cd"><span class="i">ASL</span> <span class="o">A</span></span><span class="ce">; Shift the "A" button state into N.</span></span>
<span class="l"><a class="anc" name="8e4a" href="#8e4a">[8e4a]</a><span class="cd"><span class="i">BPL</span> <span class="o"><a href="#@_waitForInputLoop">@_waitForInputLoop</a></span></span><span class="ce">; If not pressed/set, loop.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Close the Status textbox.
;
</div><span class="l"><a class="anc" name="8e4c" href="#8e4c">[8e4c]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$02</span></span></span>
<span class="l"><a class="anc" name="8e4e" href="#8e4e">[8e4e]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#TextBox_X">TextBox_X</a></span></span><span class="ce">; Set the textbox X to 2.</span></span>
<span class="l"><a class="anc" name="8e51" href="#8e51">[8e51]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$06</span></span></span>
<span class="l"><a class="anc" name="8e53" href="#8e53">[8e53]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#TextBox_Y">TextBox_Y</a></span></span><span class="ce">; Set the textbox Y to 6.</span></span>
<span class="l"><a class="anc" name="8e56" href="#8e56">[8e56]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$1c</span></span></span>
<span class="l"><a class="anc" name="8e58" href="#8e58">[8e58]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#TextBox_Width">TextBox_Width</a></span></span><span class="ce">; Set the textbox width to 28.</span></span>
<span class="l"><a class="anc" name="8e5b" href="#8e5b">[8e5b]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$12</span></span></span>
<span class="l"><a class="anc" name="8e5d" href="#8e5d">[8e5d]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#TextBox_Height">TextBox_Height</a></span></span><span class="ce">; Set the textbox height to 18.</span></span>
<span class="l"><a class="anc" name="8e60" href="#8e60">[8e60]</a><span class="cd"><span class="i">JMP</span> <span class="o"><a href="#TextBox_Close">TextBox_Close</a></span></span><span class="ce">; Close the textbox at those dimensions.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="SPECIAL_ITEM_TILE_START_IDS"></a><div class="cp">;============================================================================
; Start locations within loaded drawn item tiles in the PPU.
;
; XREFS:
;     <a href="#PlayerMenu_ShowStatusMenu">PlayerMenu_ShowStatusMenu</a>
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#PlayerMenu_ShowStatusMenu">PlayerMenu_ShowStatusMenu</a>
;
</div><span class="l"><a class="anc" name="8e63" href="#8e63">[8e63]</a><a href="#SPECIAL_ITEM_TILE_START_IDS" class="la">SPECIAL_ITEM_TILE_START_IDS:</a><span class="ce">; [$8e63]</span></span>
<span class="l"><a class="anc" name="8e63" href="#8e63">[8e63]</a><span class="cd"><span class="i">db</span> <span class="o">$80</span></span><span class="ce">; [0]:</span></span>
<span class="l"><a class="anc" name="8e64" href="#8e64">[8e64]</a><span class="cd"><span class="i">db</span> <span class="o">$81</span></span><span class="ce">; [1]:</span></span>
<span class="l"><a class="anc" name="8e65" href="#8e65">[8e65]</a><span class="cd"><span class="i">db</span> <span class="o">$82</span></span><span class="ce">; [2]:</span></span>
<span class="l"><a class="anc" name="8e66" href="#8e66">[8e66]</a><span class="cd"><span class="i">db</span> <span class="o">$83</span></span><span class="ce">; [3]:</span></span>
<span class="l"><a class="anc" name="8e67" href="#8e67">[8e67]</a><span class="cd"><span class="i">db</span> <span class="o">$92</span></span><span class="ce">; [4]:</span></span>
<span class="l"><a class="anc" name="8e68" href="#8e68">[8e68]</a><span class="cd"><span class="i">db</span> <span class="o">$8a</span></span><span class="ce">; [5]:</span></span>
<span class="l"><a class="anc" name="8e69" href="#8e69">[8e69]</a><span class="cd"><span class="i">db</span> <span class="o">$93</span></span><span class="ce">; [6]:</span></span>
<span class="l"><a class="anc" name="8e6a" href="#8e6a">[8e6a]</a><span class="cd"><span class="i">db</span> <span class="o">$94</span></span><span class="ce">; [7]:</span></span>
<span class="l"></span>
</pre><pre><a name="TextBox_DrawStringLines"></a><div class="cp">;============================================================================
; TODO: Document TextBox_DrawStringLines
;
; INPUTS:
;     None.
;
; OUTPUTS:
;     TODO
;
; XREFS:
;     <a href="#PlayerMenu_Show">PlayerMenu_Show</a>
;     <a href="#PlayerMenu_ShowStatusMenu">PlayerMenu_ShowStatusMenu</a>
;============================================================================
</div><span class="l"><a class="anc" name="8e6b" href="#8e6b">[8e6b]</a><a href="#TextBox_DrawStringLines" class="la">TextBox_DrawStringLines:</a><span class="ce">; [$8e6b]</span></span>
<span class="l"><a class="anc" name="8e6b" href="#8e6b">[8e6b]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#TextBox_X">TextBox_X</a></span></span></span>
<span class="l"><a class="anc" name="8e6e" href="#8e6e">[8e6e]</a><span class="cd"><span class="i">CLC</span></span></span>
<span class="l"><a class="anc" name="8e6f" href="#8e6f">[8e6f]</a><span class="cd"><span class="i">ADC</span> <span class="o">#$02</span></span></span>
<span class="l"><a class="anc" name="8e71" href="#8e71">[8e71]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#TextBox_ContentsX">TextBox_ContentsX</a></span></span></span>
<span class="l"><a class="anc" name="8e73" href="#8e73">[8e73]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#TextBox_Y">TextBox_Y</a></span></span></span>
<span class="l"><a class="anc" name="8e76" href="#8e76">[8e76]</a><span class="cd"><span class="i">CLC</span></span></span>
<span class="l"><a class="anc" name="8e77" href="#8e77">[8e77]</a><span class="cd"><span class="i">ADC</span> <span class="o">#$02</span></span></span>
<span class="l"><a class="anc" name="8e79" href="#8e79">[8e79]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#TextBox_ContentsY">TextBox_ContentsY</a></span></span></span>
<span class="l"><a class="anc" name="8e7b" href="#8e7b">[8e7b]</a><span class="cd"><span class="i">JSR</span> <span class="o">$f804</span></span></span>
<span class="l"><a class="anc" name="8e7e" href="#8e7e">[8e7e]</a><span class="cd"><span class="i">LDX</span> <span class="o">#$00</span></span></span>
<span class="l"></span>
<a name=":8e80:@_drawLinesLoop"></a><span class="l"><a class="anc" name="8e80" href="#8e80">[8e80]</a><a href="#:8e80:@_drawLinesLoop" class="lla">@_drawLinesLoop:</a><span class="ce">; [$8e80]</span></span>
<span class="l"><a class="anc" name="8e80" href="#8e80">[8e80]</a><span class="cd"><span class="i">TXA</span></span></span>
<span class="l"><a class="anc" name="8e81" href="#8e81">[8e81]</a><span class="cd"><span class="i">PHA</span></span></span>
<span class="l"><a class="anc" name="8e82" href="#8e82">[8e82]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="RAM.html#DataArray">DataArray</a>,X</span></span></span>
<span class="l"><a class="anc" name="8e85" href="#8e85">[8e85]</a><span class="cd"><span class="i">ASL</span> <span class="o">A</span></span></span>
<span class="l"><a class="anc" name="8e86" href="#8e86">[8e86]</a><span class="cd"><span class="i">ASL</span> <span class="o">A</span></span></span>
<span class="l"><a class="anc" name="8e87" href="#8e87">[8e87]</a><span class="cd"><span class="i">ASL</span> <span class="o">A</span></span></span>
<span class="l"><a class="anc" name="8e88" href="#8e88">[8e88]</a><span class="cd"><span class="i">ASL</span> <span class="o">A</span></span></span>
<span class="l"><a class="anc" name="8e89" href="#8e89">[8e89]</a><span class="cd"><span class="i">TAY</span></span></span>
<span class="l"><a class="anc" name="8e8a" href="#8e8a">[8e8a]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#UI_DrawString">UI_DrawString</a></span></span></span>
<span class="l"><a class="anc" name="8e8d" href="#8e8d">[8e8d]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$40</span></span></span>
<span class="l"><a class="anc" name="8e8f" href="#8e8f">[8e8f]</a><span class="cd"><span class="i">JSR</span> <span class="o">$f828</span></span></span>
<span class="l"><a class="anc" name="8e92" href="#8e92">[8e92]</a><span class="cd"><span class="i">PLA</span></span></span>
<span class="l"><a class="anc" name="8e93" href="#8e93">[8e93]</a><span class="cd"><span class="i">TAX</span></span></span>
<span class="l"><a class="anc" name="8e94" href="#8e94">[8e94]</a><span class="cd"><span class="i">INX</span></span></span>
<span class="l"><a class="anc" name="8e95" href="#8e95">[8e95]</a><span class="cd"><span class="i">CPX</span> <span class="o">a:<a href="RAM.html#Arg_StringsCount">Arg_StringsCount</a></span></span></span>
<span class="l"><a class="anc" name="8e98" href="#8e98">[8e98]</a><span class="cd"><span class="i">BNE</span> <span class="o"><a href="#@_drawLinesLoop">@_drawLinesLoop</a></span></span></span>
<span class="l"><a class="anc" name="8e9a" href="#8e9a">[8e9a]</a><span class="cd"><span class="i">RTS</span></span></span>
<span class="l"></span>
<span class="l"></span>
</pre><pre><a name="UI_DrawString"></a><div class="cp">;============================================================================
; Draw a length-prefixed string to the PPU.
;
; This will draw a string stored in <a href="RAM.html#Temp_Int24">Temp_Int24</a>. The
; first byte must be the length of the string, and the
; remaining are ASCII characters for the string.
;
; INPUTS:
;     X:
;         The PPU buffer offset to write to.
;
;     Y:
;         The starting offset into the loaded string buffer.
;
;     <a href="RAM.html#Temp_Int24">Temp_Int24</a>:
;         The loaded address containing the string at the
;         offset.
;
; OUTPUTS:
;     <a href="RAM.html#PPUBuffer_WriteOffset">PPUBuffer_WriteOffset</a>:
;         The new upper bounds of the PPU buffer.
;
;     <a href="RAM.html#Temp_Int24">Temp_Int24</a>:
;         Clobbered.
;
; CALLS:
;     <a href="#Strings_ASCIIToIndex">Strings_ASCIIToIndex</a>
;     <a href="PRG15_MIRROR.html#PPUBuffer_Set">PPUBuffer_Set</a>
;     <a href="PRG15_MIRROR.html#PPUBuffer_QueueCommandOrLength">PPUBuffer_QueueCommandOrLength</a>
;
; XREFS:
;     <a href="#PlayerMenu_ShowStatusMenu">PlayerMenu_ShowStatusMenu</a>
;     <a href="#PlayerMenu_ShowSubmenu">PlayerMenu_ShowSubmenu</a>
;     <a href="#TextBox_DrawItemName">TextBox_DrawItemName</a>
;     <a href="#TextBox_DrawStringLines">TextBox_DrawStringLines</a>
;============================================================================
</div><span class="l"><a class="anc" name="8e9b" href="#8e9b">[8e9b]</a><a href="#UI_DrawString" class="la">UI_DrawString:</a><span class="ce">; [$8e9b]</span></span>
<div class="c">;
; Load the length of the string and prepare to draw.
;
</div><span class="l"><a class="anc" name="8e9b" href="#8e9b">[8e9b]</a><span class="cd"><span class="i">LDA</span> <span class="o">(<a href="RAM.html#Temp_Int24">Temp_Int24</a>),Y</span></span><span class="ce">; Load the length value from the loaded string.</span></span>
<span class="l"><a class="anc" name="8e9d" href="#8e9d">[8e9d]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Temp_Int24_U">Temp_Int24_U</a></span></span><span class="ce">; Store it.</span></span>
<span class="l"><a class="anc" name="8e9f" href="#8e9f">[8e9f]</a><span class="cd"><span class="i">INY</span></span><span class="ce">; Y++ (character offset)</span></span>
<span class="l"><a class="anc" name="8ea0" href="#8ea0">[8ea0]</a><span class="cd"><span class="i">JSR</span> <span class="o">$cfdc</span></span><span class="ce">; Queue drawing up to the length.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name=":8ea3:@_drawLoop"></a><div class="c">;
; Begin drawing each character.
;
</div><span class="l"><a class="anc" name="8ea3" href="#8ea3">[8ea3]</a><a href="#:8ea3:@_drawLoop" class="lla">@_drawLoop:</a><span class="ce">; [$8ea3]</span></span>
<span class="l"><a class="anc" name="8ea3" href="#8ea3">[8ea3]</a><span class="cd"><span class="i">LDA</span> <span class="o">(<a href="RAM.html#Temp_Int24">Temp_Int24</a>),Y</span></span><span class="ce">; Load the next character.</span></span>
<span class="l"><a class="anc" name="8ea5" href="#8ea5">[8ea5]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#Strings_ASCIIToIndex">Strings_ASCIIToIndex</a></span></span><span class="ce">; Conver the ASCII value to a tile index.</span></span>
<span class="l"><a class="anc" name="8ea8" href="#8ea8">[8ea8]</a><span class="cd"><span class="i">INY</span></span><span class="ce">; Y++ (character offset)</span></span>
<span class="l"><a class="anc" name="8ea9" href="#8ea9">[8ea9]</a><span class="cd"><span class="i">JSR</span> <span class="o">$f845</span></span><span class="ce">; Set that in the PPU buffer.</span></span>
<span class="l"><a class="anc" name="8eac" href="#8eac">[8eac]</a><span class="cd"><span class="i">DEC</span> <span class="o"><a href="RAM.html#Temp_Int24_U">Temp_Int24_U</a></span></span><span class="ce">; Decrement loop counter.</span></span>
<span class="l"><a class="anc" name="8eae" href="#8eae">[8eae]</a><span class="cd"><span class="i">BNE</span> <span class="o"><a href="#@_drawLoop">@_drawLoop</a></span></span><span class="ce">; If we're not done, loop.</span></span>
<span class="l"><a class="anc" name="8eb0" href="#8eb0">[8eb0]</a><span class="cd"><span class="i">STX</span> <span class="o"><a href="RAM.html#PPUBuffer_WriteOffset">PPUBuffer_WriteOffset</a></span></span><span class="ce">; Store the new PPU buffer upper bounds.</span></span>
<span class="l"><a class="anc" name="8eb2" href="#8eb2">[8eb2]</a><span class="cd"><span class="i">RTS</span></span></span>
<span class="l"></span>
<span class="l"></span>
</pre><pre><a name="Strings_ASCIIToIndex"></a><div class="cp">;============================================================================
; Return an alphanumeric/symbol tile index from an ASCII value.
;
; INPUTS:
;     A:
;         The ASCII value to normalize.
;
; OUTPUTS:
;     A:
;         The normalized value.
;
; XREFS:
;     <a href="#UI_DrawString">UI_DrawString</a>
;============================================================================
</div><span class="l"><a class="anc" name="8eb3" href="#8eb3">[8eb3]</a><a href="#Strings_ASCIIToIndex" class="la">Strings_ASCIIToIndex:</a><span class="ce">; [$8eb3]</span></span>
<span class="l"><a class="anc" name="8eb3" href="#8eb3">[8eb3]</a><span class="cd"><span class="i">CMP</span> <span class="o">#$20</span></span><span class="ce">; Is this a space?</span></span>
<span class="l"><a class="anc" name="8eb5" href="#8eb5">[8eb5]</a><span class="cd"><span class="i">BEQ</span> <span class="o"><a href="#@_isSpace">@_isSpace</a></span></span><span class="ce">; If so, jump.</span></span>
<span class="l"><a class="anc" name="8eb7" href="#8eb7">[8eb7]</a><span class="cd"><span class="i">CMP</span> <span class="o">#$41</span></span><span class="ce">; Is this &gt;= "A"?</span></span>
<span class="l"><a class="anc" name="8eb9" href="#8eb9">[8eb9]</a><span class="cd"><span class="i">BCC</span> <span class="o"><a href="#@_return">@_return</a></span></span><span class="ce">; If not, return.</span></span>
<span class="l"><a class="anc" name="8ebb" href="#8ebb">[8ebb]</a><span class="cd"><span class="i">SBC</span> <span class="o">#$31</span></span><span class="ce">; Convert to an index.</span></span>
<span class="l"><a class="anc" name="8ebd" href="#8ebd">[8ebd]</a><span class="cd"><span class="i">RTS</span></span></span>
<span class="l"></span>
<a name=":8ebe:@_isSpace"></a><span class="l"><a class="anc" name="8ebe" href="#8ebe">[8ebe]</a><a href="#:8ebe:@_isSpace" class="lla">@_isSpace:</a><span class="ce">; [$8ebe]</span></span>
<span class="l"><a class="anc" name="8ebe" href="#8ebe">[8ebe]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$00</span></span><span class="ce">; Convert a space to an index of 0.</span></span>
<span class="l"></span>
<a name=":8ec0:@_return"></a><span class="l"><a class="anc" name="8ec0" href="#8ec0">[8ec0]</a><a href="#:8ec0:@_return" class="lla">@_return:</a><span class="ce">; [$8ec0]</span></span>
<span class="l"><a class="anc" name="8ec0" href="#8ec0">[8ec0]</a><span class="cd"><span class="i">RTS</span></span></span>
<span class="l"></span>
</pre><pre><a name="IScriptAction_AddInventoryItem_ClearTextBox"></a><div class="cp">;============================================================================
; TODO: Document IScriptAction_AddInventoryItem_ClearTextBox
;
; INPUTS:
;     None.
;
; OUTPUTS:
;     TODO
;
; XREFS:
;     <a href="#IScriptAction_AddInventoryItem">IScriptAction_AddInventoryItem</a>
;============================================================================
</div><span class="l"><a class="anc" name="8ec1" href="#8ec1">[8ec1]</a><a href="#IScriptAction_AddInventoryItem_ClearTextBox" class="la">IScriptAction_AddInventoryItem_ClearTextBox:</a><span class="ce">; [$8ec1]</span></span>
<span class="l"><a class="anc" name="8ec1" href="#8ec1">[8ec1]</a><span class="cd"><span class="i">LDX</span> <span class="o">a:<a href="RAM.html#TextBox_X">TextBox_X</a></span></span></span>
<span class="l"><a class="anc" name="8ec4" href="#8ec4">[8ec4]</a><span class="cd"><span class="i">INX</span></span></span>
<span class="l"><a class="anc" name="8ec5" href="#8ec5">[8ec5]</a><span class="cd"><span class="i">STX</span> <span class="o"><a href="RAM.html#TextBox_ContentsX">TextBox_ContentsX</a></span></span></span>
<span class="l"><a class="anc" name="8ec7" href="#8ec7">[8ec7]</a><span class="cd"><span class="i">LDX</span> <span class="o">a:<a href="RAM.html#TextBox_Y">TextBox_Y</a></span></span></span>
<span class="l"><a class="anc" name="8eca" href="#8eca">[8eca]</a><span class="cd"><span class="i">INX</span></span></span>
<span class="l"><a class="anc" name="8ecb" href="#8ecb">[8ecb]</a><span class="cd"><span class="i">STX</span> <span class="o"><a href="RAM.html#TextBox_ContentsY">TextBox_ContentsY</a></span></span></span>
<span class="l"><a class="anc" name="8ecd" href="#8ecd">[8ecd]</a><span class="cd"><span class="i">JSR</span> <span class="o">$f804</span></span></span>
<span class="l"><a class="anc" name="8ed0" href="#8ed0">[8ed0]</a><span class="cd"><span class="i">LDX</span> <span class="o">a:<a href="RAM.html#TextBox_Height">TextBox_Height</a></span></span></span>
<span class="l"></span>
<a name=":8ed3:@_clearLoop"></a><span class="l"><a class="anc" name="8ed3" href="#8ed3">[8ed3]</a><a href="#:8ed3:@_clearLoop" class="lla">@_clearLoop:</a><span class="ce">; [$8ed3]</span></span>
<span class="l"><a class="anc" name="8ed3" href="#8ed3">[8ed3]</a><span class="cd"><span class="i">TXA</span></span></span>
<span class="l"><a class="anc" name="8ed4" href="#8ed4">[8ed4]</a><span class="cd"><span class="i">PHA</span></span></span>
<span class="l"><a class="anc" name="8ed5" href="#8ed5">[8ed5]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#TextBox_Width">TextBox_Width</a></span></span></span>
<span class="l"><a class="anc" name="8ed8" href="#8ed8">[8ed8]</a><span class="cd"><span class="i">TAY</span></span></span>
<span class="l"><a class="anc" name="8ed9" href="#8ed9">[8ed9]</a><span class="cd"><span class="i">SEC</span></span></span>
<span class="l"><a class="anc" name="8eda" href="#8eda">[8eda]</a><span class="cd"><span class="i">SBC</span> <span class="o">#$02</span></span></span>
<span class="l"><a class="anc" name="8edc" href="#8edc">[8edc]</a><span class="cd"><span class="i">JSR</span> <span class="o">$cfdc</span></span></span>
<span class="l"><a class="anc" name="8edf" href="#8edf">[8edf]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$00</span></span></span>
<span class="l"><a class="anc" name="8ee1" href="#8ee1">[8ee1]</a><span class="cd"><span class="i">JSR</span> <span class="o">$f839</span></span></span>
<span class="l"><a class="anc" name="8ee4" href="#8ee4">[8ee4]</a><span class="cd"><span class="i">STX</span> <span class="o"><a href="RAM.html#PPUBuffer_WriteOffset">PPUBuffer_WriteOffset</a></span></span></span>
<span class="l"><a class="anc" name="8ee6" href="#8ee6">[8ee6]</a><span class="cd"><span class="i">JSR</span> <span class="o">$f826</span></span></span>
<span class="l"><a class="anc" name="8ee9" href="#8ee9">[8ee9]</a><span class="cd"><span class="i">PLA</span></span></span>
<span class="l"><a class="anc" name="8eea" href="#8eea">[8eea]</a><span class="cd"><span class="i">TAX</span></span></span>
<span class="l"><a class="anc" name="8eeb" href="#8eeb">[8eeb]</a><span class="cd"><span class="i">DEX</span></span></span>
<span class="l"><a class="anc" name="8eec" href="#8eec">[8eec]</a><span class="cd"><span class="i">CPX</span> <span class="o">#$02</span></span></span>
<span class="l"><a class="anc" name="8eee" href="#8eee">[8eee]</a><span class="cd"><span class="i">BNE</span> <span class="o"><a href="#@_clearLoop">@_clearLoop</a></span></span></span>
<span class="l"><a class="anc" name="8ef0" href="#8ef0">[8ef0]</a><span class="cd"><span class="i">RTS</span></span></span>
</pre><pre><a name="TextBox_Open"></a><div class="cp">;============================================================================
; TODO: Document TextBox_Open
;
; INPUTS:
;     None.
;
; OUTPUTS:
;     TODO
;
; XREFS:
;     <a href="#IScripts_OpenForPortrait">IScripts_OpenForPortrait</a>
;     <a href="#PlayerMenu_Show">PlayerMenu_Show</a>
;     <a href="#PlayerMenu_ShowStatusMenu">PlayerMenu_ShowStatusMenu</a>
;     <a href="#PlayerMenu_ShowSubmenu">PlayerMenu_ShowSubmenu</a>
;     <a href="#Shop_Draw">Shop_Draw</a>
;     <a href="#TextBox_OpenForNPC">TextBox_OpenForNPC</a>
;============================================================================
</div><span class="l"><a class="anc" name="8ef1" href="#8ef1">[8ef1]</a><a href="#TextBox_Open" class="la">TextBox_Open:</a><span class="ce">; [$8ef1]</span></span>
<div class="c">;
; Draw the top row of the box's frame.
;
</div><span class="l"><a class="anc" name="8ef1" href="#8ef1">[8ef1]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#TextBox_X">TextBox_X</a></span></span></span>
<span class="l"><a class="anc" name="8ef4" href="#8ef4">[8ef4]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#TextBox_ContentsX">TextBox_ContentsX</a></span></span></span>
<span class="l"><a class="anc" name="8ef6" href="#8ef6">[8ef6]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#TextBox_Y">TextBox_Y</a></span></span></span>
<span class="l"><a class="anc" name="8ef9" href="#8ef9">[8ef9]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#TextBox_ContentsY">TextBox_ContentsY</a></span></span></span>
<span class="l"><a class="anc" name="8efb" href="#8efb">[8efb]</a><span class="cd"><span class="i">JSR</span> <span class="o">$f804</span></span></span>
<span class="l"><a class="anc" name="8efe" href="#8efe">[8efe]</a><span class="cd"><span class="i">JSR</span> <span class="o">$f832</span></span></span>
<span class="l"><a class="anc" name="8f01" href="#8f01">[8f01]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$01</span></span></span>
<span class="l"><a class="anc" name="8f03" href="#8f03">[8f03]</a><span class="cd"><span class="i">JSR</span> <span class="o">$f845</span></span></span>
<span class="l"><a class="anc" name="8f06" href="#8f06">[8f06]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$02</span></span></span>
<span class="l"><a class="anc" name="8f08" href="#8f08">[8f08]</a><span class="cd"><span class="i">JSR</span> <span class="o">$f839</span></span></span>
<span class="l"><a class="anc" name="8f0b" href="#8f0b">[8f0b]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$03</span></span></span>
<span class="l"><a class="anc" name="8f0d" href="#8f0d">[8f0d]</a><span class="cd"><span class="i">JSR</span> <span class="o">$f845</span></span></span>
<span class="l"><a class="anc" name="8f10" href="#8f10">[8f10]</a><span class="cd"><span class="i">STX</span> <span class="o"><a href="RAM.html#PPUBuffer_WriteOffset">PPUBuffer_WriteOffset</a></span></span></span>
<span class="l"><a class="anc" name="8f12" href="#8f12">[8f12]</a><span class="cd"><span class="i">JSR</span> <span class="o">$f826</span></span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Draw the sides of the box's frame.
;
</div><span class="l"><a class="anc" name="8f15" href="#8f15">[8f15]</a><span class="cd"><span class="i">LDY</span> <span class="o">a:<a href="RAM.html#TextBox_Height">TextBox_Height</a></span></span></span>
<span class="l"></span>
<a name=":8f18:@_drawFrameSides"></a><span class="l"><a class="anc" name="8f18" href="#8f18">[8f18]</a><a href="#:8f18:@_drawFrameSides" class="lla">@_drawFrameSides:</a><span class="ce">; [$8f18]</span></span>
<span class="l"><a class="anc" name="8f18" href="#8f18">[8f18]</a><span class="cd"><span class="i">TYA</span></span></span>
<span class="l"><a class="anc" name="8f19" href="#8f19">[8f19]</a><span class="cd"><span class="i">PHA</span></span></span>
<span class="l"><a class="anc" name="8f1a" href="#8f1a">[8f1a]</a><span class="cd"><span class="i">JSR</span> <span class="o">$f832</span></span></span>
<span class="l"><a class="anc" name="8f1d" href="#8f1d">[8f1d]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$04</span></span></span>
<span class="l"><a class="anc" name="8f1f" href="#8f1f">[8f1f]</a><span class="cd"><span class="i">JSR</span> <span class="o">$f845</span></span></span>
<span class="l"><a class="anc" name="8f22" href="#8f22">[8f22]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$00</span></span></span>
<span class="l"><a class="anc" name="8f24" href="#8f24">[8f24]</a><span class="cd"><span class="i">JSR</span> <span class="o">$f839</span></span></span>
<span class="l"><a class="anc" name="8f27" href="#8f27">[8f27]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$04</span></span></span>
<span class="l"><a class="anc" name="8f29" href="#8f29">[8f29]</a><span class="cd"><span class="i">JSR</span> <span class="o">$f845</span></span></span>
<span class="l"><a class="anc" name="8f2c" href="#8f2c">[8f2c]</a><span class="cd"><span class="i">STX</span> <span class="o"><a href="RAM.html#PPUBuffer_WriteOffset">PPUBuffer_WriteOffset</a></span></span></span>
<span class="l"><a class="anc" name="8f2e" href="#8f2e">[8f2e]</a><span class="cd"><span class="i">JSR</span> <span class="o">$f826</span></span></span>
<span class="l"><a class="anc" name="8f31" href="#8f31">[8f31]</a><span class="cd"><span class="i">PLA</span></span></span>
<span class="l"><a class="anc" name="8f32" href="#8f32">[8f32]</a><span class="cd"><span class="i">TAY</span></span></span>
<span class="l"><a class="anc" name="8f33" href="#8f33">[8f33]</a><span class="cd"><span class="i">DEY</span></span></span>
<span class="l"><a class="anc" name="8f34" href="#8f34">[8f34]</a><span class="cd"><span class="i">CPY</span> <span class="o">#$02</span></span></span>
<span class="l"><a class="anc" name="8f36" href="#8f36">[8f36]</a><span class="cd"><span class="i">BNE</span> <span class="o"><a href="#@_drawFrameSides">@_drawFrameSides</a></span></span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Draw the bottom of the box's frame.
;
</div><span class="l"><a class="anc" name="8f38" href="#8f38">[8f38]</a><span class="cd"><span class="i">JSR</span> <span class="o">$f832</span></span></span>
<span class="l"><a class="anc" name="8f3b" href="#8f3b">[8f3b]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$05</span></span></span>
<span class="l"><a class="anc" name="8f3d" href="#8f3d">[8f3d]</a><span class="cd"><span class="i">JSR</span> <span class="o">$f845</span></span></span>
<span class="l"><a class="anc" name="8f40" href="#8f40">[8f40]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$02</span></span></span>
<span class="l"><a class="anc" name="8f42" href="#8f42">[8f42]</a><span class="cd"><span class="i">JSR</span> <span class="o">$f839</span></span></span>
<span class="l"><a class="anc" name="8f45" href="#8f45">[8f45]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$06</span></span></span>
<span class="l"><a class="anc" name="8f47" href="#8f47">[8f47]</a><span class="cd"><span class="i">JSR</span> <span class="o">$f845</span></span></span>
<span class="l"><a class="anc" name="8f4a" href="#8f4a">[8f4a]</a><span class="cd"><span class="i">STX</span> <span class="o"><a href="RAM.html#PPUBuffer_WriteOffset">PPUBuffer_WriteOffset</a></span></span></span>
<span class="l"><a class="anc" name="8f4c" href="#8f4c">[8f4c]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$00</span></span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Set state on the box and fill in the background.
;
</div><span class="l"><a class="anc" name="8f4e" href="#8f4e">[8f4e]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#TextBox_Closed">TextBox_Closed</a></span></span></span>
<span class="l"></span>
<div class="c">;
; v-- Fall through --v
;
</div><span class="l"></span>
</pre><pre><a name="TextBox_FillBackground"></a><div class="cp">;============================================================================
; TODO: Document TextBox_FillBackground
;
; INPUTS:
;     None.
;
; OUTPUTS:
;     TODO
;
; XREFS:
;     <a href="#TextBox_Close">TextBox_Close</a>
;============================================================================
</div><span class="l"><a class="anc" name="8f51" href="#8f51">[8f51]</a><a href="#TextBox_FillBackground" class="la">TextBox_FillBackground:</a><span class="ce">; [$8f51]</span></span>
<span class="l"><a class="anc" name="8f51" href="#8f51">[8f51]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#TextBox_X">TextBox_X</a></span></span></span>
<span class="l"><a class="anc" name="8f54" href="#8f54">[8f54]</a><span class="cd"><span class="i">LSR</span> <span class="o">A</span></span></span>
<span class="l"><a class="anc" name="8f55" href="#8f55">[8f55]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#TextBox_ContentsX">TextBox_ContentsX</a></span></span></span>
<span class="l"><a class="anc" name="8f57" href="#8f57">[8f57]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#TextBox_Y">TextBox_Y</a></span></span></span>
<span class="l"><a class="anc" name="8f5a" href="#8f5a">[8f5a]</a><span class="cd"><span class="i">LSR</span> <span class="o">A</span></span></span>
<span class="l"><a class="anc" name="8f5b" href="#8f5b">[8f5b]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#TextBox_ContentsY">TextBox_ContentsY</a></span></span></span>
<span class="l"><a class="anc" name="8f5d" href="#8f5d">[8f5d]</a><span class="cd"><span class="i">LDY</span> <span class="o">a:<a href="RAM.html#TextBox_Height">TextBox_Height</a></span></span></span>
<span class="l"></span>
<a name=":8f60:@_fillYLoop"></a><span class="l"><a class="anc" name="8f60" href="#8f60">[8f60]</a><a href="#:8f60:@_fillYLoop" class="lla">@_fillYLoop:</a><span class="ce">; [$8f60]</span></span>
<span class="l"><a class="anc" name="8f60" href="#8f60">[8f60]</a><span class="cd"><span class="i">TYA</span></span></span>
<span class="l"><a class="anc" name="8f61" href="#8f61">[8f61]</a><span class="cd"><span class="i">PHA</span></span></span>
<span class="l"><a class="anc" name="8f62" href="#8f62">[8f62]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="RAM.html#TextBox_ContentsX">TextBox_ContentsX</a></span></span></span>
<span class="l"><a class="anc" name="8f64" href="#8f64">[8f64]</a><span class="cd"><span class="i">PHA</span></span></span>
<span class="l"><a class="anc" name="8f65" href="#8f65">[8f65]</a><span class="cd"><span class="i">LDY</span> <span class="o">a:<a href="RAM.html#TextBox_Width">TextBox_Width</a></span></span></span>
<span class="l"></span>
<a name=":8f68:@_fillXLoop"></a><span class="l"><a class="anc" name="8f68" href="#8f68">[8f68]</a><a href="#:8f68:@_fillXLoop" class="lla">@_fillXLoop:</a><span class="ce">; [$8f68]</span></span>
<span class="l"><a class="anc" name="8f68" href="#8f68">[8f68]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#TextBox_GetBackgroundAttributeData">TextBox_GetBackgroundAttributeData</a></span></span></span>
<span class="l"><a class="anc" name="8f6b" href="#8f6b">[8f6b]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#TextBox_SetNextAttributeData">TextBox_SetNextAttributeData</a></span></span></span>
<span class="l"><a class="anc" name="8f6e" href="#8f6e">[8f6e]</a><span class="cd"><span class="i">INC</span> <span class="o"><a href="RAM.html#TextBox_ContentsX">TextBox_ContentsX</a></span></span></span>
<span class="l"><a class="anc" name="8f70" href="#8f70">[8f70]</a><span class="cd"><span class="i">DEY</span></span></span>
<span class="l"><a class="anc" name="8f71" href="#8f71">[8f71]</a><span class="cd"><span class="i">DEY</span></span></span>
<span class="l"><a class="anc" name="8f72" href="#8f72">[8f72]</a><span class="cd"><span class="i">BNE</span> <span class="o"><a href="#@_fillXLoop">@_fillXLoop</a></span></span></span>
<span class="l"><a class="anc" name="8f74" href="#8f74">[8f74]</a><span class="cd"><span class="i">PLA</span></span></span>
<span class="l"><a class="anc" name="8f75" href="#8f75">[8f75]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#TextBox_ContentsX">TextBox_ContentsX</a></span></span></span>
<span class="l"><a class="anc" name="8f77" href="#8f77">[8f77]</a><span class="cd"><span class="i">INC</span> <span class="o"><a href="RAM.html#TextBox_ContentsY">TextBox_ContentsY</a></span></span></span>
<span class="l"><a class="anc" name="8f79" href="#8f79">[8f79]</a><span class="cd"><span class="i">PLA</span></span></span>
<span class="l"><a class="anc" name="8f7a" href="#8f7a">[8f7a]</a><span class="cd"><span class="i">TAY</span></span></span>
<span class="l"><a class="anc" name="8f7b" href="#8f7b">[8f7b]</a><span class="cd"><span class="i">DEY</span></span></span>
<span class="l"><a class="anc" name="8f7c" href="#8f7c">[8f7c]</a><span class="cd"><span class="i">DEY</span></span></span>
<span class="l"><a class="anc" name="8f7d" href="#8f7d">[8f7d]</a><span class="cd"><span class="i">BNE</span> <span class="o"><a href="#@_fillYLoop">@_fillYLoop</a></span></span></span>
<span class="l"><a class="anc" name="8f7f" href="#8f7f">[8f7f]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#TextBox_X">TextBox_X</a></span></span></span>
<span class="l"><a class="anc" name="8f82" href="#8f82">[8f82]</a><span class="cd"><span class="i">LSR</span> <span class="o">A</span></span></span>
<span class="l"><a class="anc" name="8f83" href="#8f83">[8f83]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#TextBox_ContentsX">TextBox_ContentsX</a></span></span></span>
<span class="l"><a class="anc" name="8f85" href="#8f85">[8f85]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#TextBox_Y">TextBox_Y</a></span></span></span>
<span class="l"><a class="anc" name="8f88" href="#8f88">[8f88]</a><span class="cd"><span class="i">LSR</span> <span class="o">A</span></span></span>
<span class="l"><a class="anc" name="8f89" href="#8f89">[8f89]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#TextBox_ContentsY">TextBox_ContentsY</a></span></span></span>
<span class="l"><a class="anc" name="8f8b" href="#8f8b">[8f8b]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#TextBox_GetNextAttributeDataOffset">TextBox_GetNextAttributeDataOffset</a></span></span></span>
<span class="l"><a class="anc" name="8f8e" href="#8f8e">[8f8e]</a><span class="cd"><span class="i">TAY</span></span></span>
<span class="l"><a class="anc" name="8f8f" href="#8f8f">[8f8f]</a><span class="cd"><span class="i">AND</span> <span class="o">#$3f</span></span></span>
<span class="l"><a class="anc" name="8f91" href="#8f91">[8f91]</a><span class="cd"><span class="i">ORA</span> <span class="o">#$c0</span></span></span>
<span class="l"><a class="anc" name="8f93" href="#8f93">[8f93]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#PPU_TargetAddr">PPU_TargetAddr</a></span></span></span>
<span class="l"><a class="anc" name="8f95" href="#8f95">[8f95]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="RAM.html#PPU_ScrollScreen">PPU_ScrollScreen</a></span></span></span>
<span class="l"><a class="anc" name="8f97" href="#8f97">[8f97]</a><span class="cd"><span class="i">AND</span> <span class="o">#$01</span></span></span>
<span class="l"><a class="anc" name="8f99" href="#8f99">[8f99]</a><span class="cd"><span class="i">ASL</span> <span class="o">A</span></span></span>
<span class="l"><a class="anc" name="8f9a" href="#8f9a">[8f9a]</a><span class="cd"><span class="i">ASL</span> <span class="o">A</span></span></span>
<span class="l"><a class="anc" name="8f9b" href="#8f9b">[8f9b]</a><span class="cd"><span class="i">ORA</span> <span class="o">#$23</span></span></span>
<span class="l"><a class="anc" name="8f9d" href="#8f9d">[8f9d]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#PPU_TargetAddr_U">PPU_TargetAddr_U</a></span></span></span>
<span class="l"><a class="anc" name="8f9f" href="#8f9f">[8f9f]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#TextBox_X">TextBox_X</a></span></span></span>
<span class="l"><a class="anc" name="8fa2" href="#8fa2">[8fa2]</a><span class="cd"><span class="i">LSR</span> <span class="o">A</span></span></span>
<span class="l"><a class="anc" name="8fa3" href="#8fa3">[8fa3]</a><span class="cd"><span class="i">LSR</span> <span class="o">A</span></span></span>
<span class="l"><a class="anc" name="8fa4" href="#8fa4">[8fa4]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#TextBox_ContentsX">TextBox_ContentsX</a></span></span></span>
<span class="l"><a class="anc" name="8fa6" href="#8fa6">[8fa6]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#TextBox_X">TextBox_X</a></span></span></span>
<span class="l"><a class="anc" name="8fa9" href="#8fa9">[8fa9]</a><span class="cd"><span class="i">CLC</span></span></span>
<span class="l"><a class="anc" name="8faa" href="#8faa">[8faa]</a><span class="cd"><span class="i">ADC</span> <span class="o">a:<a href="RAM.html#TextBox_Width">TextBox_Width</a></span></span></span>
<span class="l"><a class="anc" name="8fad" href="#8fad">[8fad]</a><span class="cd"><span class="i">SEC</span></span></span>
<span class="l"><a class="anc" name="8fae" href="#8fae">[8fae]</a><span class="cd"><span class="i">SBC</span> <span class="o">#$01</span></span></span>
<span class="l"><a class="anc" name="8fb0" href="#8fb0">[8fb0]</a><span class="cd"><span class="i">LSR</span> <span class="o">A</span></span></span>
<span class="l"><a class="anc" name="8fb1" href="#8fb1">[8fb1]</a><span class="cd"><span class="i">LSR</span> <span class="o">A</span></span></span>
<span class="l"><a class="anc" name="8fb2" href="#8fb2">[8fb2]</a><span class="cd"><span class="i">SEC</span></span></span>
<span class="l"><a class="anc" name="8fb3" href="#8fb3">[8fb3]</a><span class="cd"><span class="i">SBC</span> <span class="o"><a href="RAM.html#TextBox_ContentsX">TextBox_ContentsX</a></span></span></span>
<span class="l"><a class="anc" name="8fb5" href="#8fb5">[8fb5]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#TextBox_ContentsX">TextBox_ContentsX</a></span></span></span>
<span class="l"><a class="anc" name="8fb7" href="#8fb7">[8fb7]</a><span class="cd"><span class="i">INC</span> <span class="o"><a href="RAM.html#TextBox_ContentsX">TextBox_ContentsX</a></span></span></span>
<span class="l"><a class="anc" name="8fb9" href="#8fb9">[8fb9]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#TextBox_Y">TextBox_Y</a></span></span></span>
<span class="l"><a class="anc" name="8fbc" href="#8fbc">[8fbc]</a><span class="cd"><span class="i">LSR</span> <span class="o">A</span></span></span>
<span class="l"><a class="anc" name="8fbd" href="#8fbd">[8fbd]</a><span class="cd"><span class="i">LSR</span> <span class="o">A</span></span></span>
<span class="l"><a class="anc" name="8fbe" href="#8fbe">[8fbe]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#TextBox_ContentsY">TextBox_ContentsY</a></span></span></span>
<span class="l"><a class="anc" name="8fc0" href="#8fc0">[8fc0]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#TextBox_Y">TextBox_Y</a></span></span></span>
<span class="l"><a class="anc" name="8fc3" href="#8fc3">[8fc3]</a><span class="cd"><span class="i">CLC</span></span></span>
<span class="l"><a class="anc" name="8fc4" href="#8fc4">[8fc4]</a><span class="cd"><span class="i">ADC</span> <span class="o">a:<a href="RAM.html#TextBox_Height">TextBox_Height</a></span></span></span>
<span class="l"><a class="anc" name="8fc7" href="#8fc7">[8fc7]</a><span class="cd"><span class="i">SEC</span></span></span>
<span class="l"><a class="anc" name="8fc8" href="#8fc8">[8fc8]</a><span class="cd"><span class="i">SBC</span> <span class="o">#$01</span></span></span>
<span class="l"><a class="anc" name="8fca" href="#8fca">[8fca]</a><span class="cd"><span class="i">LSR</span> <span class="o">A</span></span></span>
<span class="l"><a class="anc" name="8fcb" href="#8fcb">[8fcb]</a><span class="cd"><span class="i">LSR</span> <span class="o">A</span></span></span>
<span class="l"><a class="anc" name="8fcc" href="#8fcc">[8fcc]</a><span class="cd"><span class="i">SEC</span></span></span>
<span class="l"><a class="anc" name="8fcd" href="#8fcd">[8fcd]</a><span class="cd"><span class="i">SBC</span> <span class="o"><a href="RAM.html#TextBox_ContentsY">TextBox_ContentsY</a></span></span></span>
<span class="l"><a class="anc" name="8fcf" href="#8fcf">[8fcf]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#TextBox_ContentsY">TextBox_ContentsY</a></span></span></span>
<span class="l"><a class="anc" name="8fd1" href="#8fd1">[8fd1]</a><span class="cd"><span class="i">INC</span> <span class="o"><a href="RAM.html#TextBox_ContentsY">TextBox_ContentsY</a></span></span></span>
<span class="l"></span>
<span class="l"></span>
<a name=":8fd3:@_drawRowsLoop"></a><div class="c">;
; Loop through all the rows of text.
;
</div><span class="l"><a class="anc" name="8fd3" href="#8fd3">[8fd3]</a><a href="#:8fd3:@_drawRowsLoop" class="lla">@_drawRowsLoop:</a><span class="ce">; [$8fd3]</span></span>
<span class="l"><a class="anc" name="8fd3" href="#8fd3">[8fd3]</a><span class="cd"><span class="i">TYA</span></span></span>
<span class="l"><a class="anc" name="8fd4" href="#8fd4">[8fd4]</a><span class="cd"><span class="i">PHA</span></span></span>
<span class="l"><a class="anc" name="8fd5" href="#8fd5">[8fd5]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="RAM.html#TextBox_ContentsX">TextBox_ContentsX</a></span></span></span>
<span class="l"><a class="anc" name="8fd7" href="#8fd7">[8fd7]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Temp_Int24">Temp_Int24</a></span></span></span>
<span class="l"><a class="anc" name="8fd9" href="#8fd9">[8fd9]</a><span class="cd"><span class="i">JSR</span> <span class="o">$cfdc</span></span></span>
<span class="l"></span>
<span class="l"></span>
<a name=":8fdc:@_drawColsLoop"></a><div class="c">;
; Loop through all the columns of text.
;
</div><span class="l"><a class="anc" name="8fdc" href="#8fdc">[8fdc]</a><a href="#:8fdc:@_drawColsLoop" class="lla">@_drawColsLoop:</a><span class="ce">; [$8fdc]</span></span>
<span class="l"><a class="anc" name="8fdc" href="#8fdc">[8fdc]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="RAM.html#TextBox_AttributeData">TextBox_AttributeData</a>,Y</span></span></span>
<span class="l"><a class="anc" name="8fdf" href="#8fdf">[8fdf]</a><span class="cd"><span class="i">INY</span></span></span>
<span class="l"><a class="anc" name="8fe0" href="#8fe0">[8fe0]</a><span class="cd"><span class="i">JSR</span> <span class="o">$f845</span></span></span>
<span class="l"><a class="anc" name="8fe3" href="#8fe3">[8fe3]</a><span class="cd"><span class="i">DEC</span> <span class="o"><a href="RAM.html#Temp_Int24">Temp_Int24</a></span></span></span>
<span class="l"><a class="anc" name="8fe5" href="#8fe5">[8fe5]</a><span class="cd"><span class="i">BNE</span> <span class="o"><a href="#@_drawColsLoop">@_drawColsLoop</a></span></span></span>
<span class="l"><a class="anc" name="8fe7" href="#8fe7">[8fe7]</a><span class="cd"><span class="i">STX</span> <span class="o"><a href="RAM.html#PPUBuffer_WriteOffset">PPUBuffer_WriteOffset</a></span></span></span>
<span class="l"><a class="anc" name="8fe9" href="#8fe9">[8fe9]</a><span class="cd"><span class="i">JSR</span> <span class="o">$f822</span></span></span>
<span class="l"><a class="anc" name="8fec" href="#8fec">[8fec]</a><span class="cd"><span class="i">PLA</span></span></span>
<span class="l"><a class="anc" name="8fed" href="#8fed">[8fed]</a><span class="cd"><span class="i">CLC</span></span></span>
<span class="l"><a class="anc" name="8fee" href="#8fee">[8fee]</a><span class="cd"><span class="i">ADC</span> <span class="o">#$08</span></span></span>
<span class="l"><a class="anc" name="8ff0" href="#8ff0">[8ff0]</a><span class="cd"><span class="i">TAY</span></span></span>
<span class="l"><a class="anc" name="8ff1" href="#8ff1">[8ff1]</a><span class="cd"><span class="i">DEC</span> <span class="o"><a href="RAM.html#TextBox_ContentsY">TextBox_ContentsY</a></span></span></span>
<span class="l"><a class="anc" name="8ff3" href="#8ff3">[8ff3]</a><span class="cd"><span class="i">BNE</span> <span class="o"><a href="#@_drawRowsLoop">@_drawRowsLoop</a></span></span></span>
<span class="l"><a class="anc" name="8ff5" href="#8ff5">[8ff5]</a><span class="cd"><span class="i">RTS</span></span></span>
<span class="l"></span>
<span class="l"></span>
</pre><pre><a name="TextBox_GetBackgroundAttributeData"></a><div class="cp">;============================================================================
; Return the background PPU attribute data for the textbox at an offset.
;
; If the textbox is closed, this will use the tile behind
; the textbox.
;
; If the textbox is open, it will use the HUD background.
;
; INPUTS:
;     Y:
;         The offset into the screen.
;
;     <a href="RAM.html#UI_AttributeDataIndex">UI_AttributeDataIndex</a>:
;         The attribute data for the HUD/textbox background.
;
;     <a href="RAM.html#TextBox_Closed">TextBox_Closed</a>:
;         Whether the textbox is closed.
;
; OUTPUTS:
;     A:
;         The attribute data to draw at the offset.
;
; CALLS:
;     <a href="PRG15_MIRROR.html#TextBox_GetBackingAttributeData">TextBox_GetBackingAttributeData</a>
;
; XREFS:
;     <a href="#TextBox_FillBackground">TextBox_FillBackground</a>
;============================================================================
</div><span class="l"><a class="anc" name="8ff6" href="#8ff6">[8ff6]</a><a href="#TextBox_GetBackgroundAttributeData" class="la">TextBox_GetBackgroundAttributeData:</a><span class="ce">; [$8ff6]</span></span>
<span class="l"><a class="anc" name="8ff6" href="#8ff6">[8ff6]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#TextBox_Closed">TextBox_Closed</a></span></span><span class="ce">; Is the textbox open or closed?</span></span>
<span class="l"><a class="anc" name="8ff9" href="#8ff9">[8ff9]</a><span class="cd"><span class="i">BEQ</span> <span class="o"><a href="#@_isOpen">@_isOpen</a></span></span><span class="ce">; If open, jump.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; The textbox is closed. Return the attribute of the background
; area behind it.
;
</div><span class="l"><a class="anc" name="8ffb" href="#8ffb">[8ffb]</a><span class="cd"><span class="i">JMP</span> <span class="o">$f791</span></span><span class="ce">; Return the attribute data behind the textbox.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name=":8ffe:@_isOpen"></a><div class="c">;
; The textbox is open. Return the attribute for the textbox
; background color.
;
</div><span class="l"><a class="anc" name="8ffe" href="#8ffe">[8ffe]</a><a href="#:8ffe:@_isOpen" class="lla">@_isOpen:</a><span class="ce">; [$8ffe]</span></span>
<span class="l"><a class="anc" name="8ffe" href="#8ffe">[8ffe]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#UI_AttributeDataIndex">UI_AttributeDataIndex</a></span></span><span class="ce">; Return the attribute data for the background of the textbox.</span></span>
<span class="l"><a class="anc" name="9001" href="#9001">[9001]</a><span class="cd"><span class="i">RTS</span></span></span>
<span class="l"></span>
</pre><pre><a name="TextBox_Close"></a><div class="cp">;============================================================================
; TODO: Document TextBox_Close
;
; INPUTS:
;     None.
;
; OUTPUTS:
;     TODO
;
; XREFS:
;     <a href="#DEADCODE_TextBox_ClosePortrait">DEADCODE_TextBox_ClosePortrait</a>
;     <a href="#IScriptAction_ShowSellMenu">IScriptAction_ShowSellMenu</a>
;     <a href="#IScripts_CloseCurrentTextBox">IScripts_CloseCurrentTextBox</a>
;     <a href="#Maybe_Shop_DrawTextBox">Maybe_Shop_DrawTextBox</a>
;     <a href="#PlayerMenu_Close">PlayerMenu_Close</a>
;     <a href="#PlayerMenu_Show">PlayerMenu_Show</a>
;     <a href="#PlayerMenu_ShowStatusMenu">PlayerMenu_ShowStatusMenu</a>
;     <a href="#TextBox_ClearForPortraitAndText">TextBox_ClearForPortraitAndText</a>
;============================================================================
</div><span class="l"><a class="anc" name="9002" href="#9002">[9002]</a><a href="#TextBox_Close" class="la">TextBox_Close:</a><span class="ce">; [$9002]</span></span>
<span class="l"><a class="anc" name="9002" href="#9002">[9002]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$01</span></span></span>
<span class="l"><a class="anc" name="9004" href="#9004">[9004]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#TextBox_Closed">TextBox_Closed</a></span></span></span>
<span class="l"><a class="anc" name="9007" href="#9007">[9007]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#TextBox_FillBackground">TextBox_FillBackground</a></span></span></span>
<span class="l"><a class="anc" name="900a" href="#900a">[900a]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#TextBox_X">TextBox_X</a></span></span></span>
<span class="l"><a class="anc" name="900d" href="#900d">[900d]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#TextBox_ContentsX">TextBox_ContentsX</a></span></span></span>
<span class="l"><a class="anc" name="900f" href="#900f">[900f]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#TextBox_Y">TextBox_Y</a></span></span></span>
<span class="l"><a class="anc" name="9012" href="#9012">[9012]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#TextBox_ContentsY">TextBox_ContentsY</a></span></span></span>
<span class="l"><a class="anc" name="9014" href="#9014">[9014]</a><span class="cd"><span class="i">JSR</span> <span class="o">$f804</span></span></span>
<span class="l"><a class="anc" name="9017" href="#9017">[9017]</a><span class="cd"><span class="i">LDY</span> <span class="o">a:<a href="RAM.html#TextBox_Height">TextBox_Height</a></span></span></span>
<span class="l"></span>
<a name=":901a:@_closeYLoop"></a><span class="l"><a class="anc" name="901a" href="#901a">[901a]</a><a href="#:901a:@_closeYLoop" class="lla">@_closeYLoop:</a><span class="ce">; [$901a]</span></span>
<span class="l"><a class="anc" name="901a" href="#901a">[901a]</a><span class="cd"><span class="i">TYA</span></span></span>
<span class="l"><a class="anc" name="901b" href="#901b">[901b]</a><span class="cd"><span class="i">PHA</span></span></span>
<span class="l"><a class="anc" name="901c" href="#901c">[901c]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="RAM.html#TextBox_ContentsX">TextBox_ContentsX</a></span></span></span>
<span class="l"><a class="anc" name="901e" href="#901e">[901e]</a><span class="cd"><span class="i">PHA</span></span></span>
<span class="l"><a class="anc" name="901f" href="#901f">[901f]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#TextBox_Width">TextBox_Width</a></span></span></span>
<span class="l"><a class="anc" name="9022" href="#9022">[9022]</a><span class="cd"><span class="i">TAY</span></span></span>
<span class="l"><a class="anc" name="9023" href="#9023">[9023]</a><span class="cd"><span class="i">JSR</span> <span class="o">$cfdc</span></span></span>
<span class="l"></span>
<a name=":9026:@_closeXLoop"></a><span class="l"><a class="anc" name="9026" href="#9026">[9026]</a><a href="#:9026:@_closeXLoop" class="lla">@_closeXLoop:</a><span class="ce">; [$9026]</span></span>
<span class="l"><a class="anc" name="9026" href="#9026">[9026]</a><span class="cd"><span class="i">JSR</span> <span class="o">$f7b7</span></span></span>
<span class="l"><a class="anc" name="9029" href="#9029">[9029]</a><span class="cd"><span class="i">JSR</span> <span class="o">$f845</span></span></span>
<span class="l"><a class="anc" name="902c" href="#902c">[902c]</a><span class="cd"><span class="i">INC</span> <span class="o"><a href="RAM.html#TextBox_ContentsX">TextBox_ContentsX</a></span></span></span>
<span class="l"><a class="anc" name="902e" href="#902e">[902e]</a><span class="cd"><span class="i">DEY</span></span></span>
<span class="l"><a class="anc" name="902f" href="#902f">[902f]</a><span class="cd"><span class="i">BNE</span> <span class="o"><a href="#@_closeXLoop">@_closeXLoop</a></span></span></span>
<span class="l"><a class="anc" name="9031" href="#9031">[9031]</a><span class="cd"><span class="i">STX</span> <span class="o"><a href="RAM.html#PPUBuffer_WriteOffset">PPUBuffer_WriteOffset</a></span></span></span>
<span class="l"><a class="anc" name="9033" href="#9033">[9033]</a><span class="cd"><span class="i">PLA</span></span></span>
<span class="l"><a class="anc" name="9034" href="#9034">[9034]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#TextBox_ContentsX">TextBox_ContentsX</a></span></span></span>
<span class="l"><a class="anc" name="9036" href="#9036">[9036]</a><span class="cd"><span class="i">PLA</span></span></span>
<span class="l"><a class="anc" name="9037" href="#9037">[9037]</a><span class="cd"><span class="i">TAY</span></span></span>
<span class="l"><a class="anc" name="9038" href="#9038">[9038]</a><span class="cd"><span class="i">INC</span> <span class="o"><a href="RAM.html#TextBox_ContentsY">TextBox_ContentsY</a></span></span></span>
<span class="l"><a class="anc" name="903a" href="#903a">[903a]</a><span class="cd"><span class="i">JSR</span> <span class="o">$f826</span></span></span>
<span class="l"><a class="anc" name="903d" href="#903d">[903d]</a><span class="cd"><span class="i">DEY</span></span></span>
<span class="l"><a class="anc" name="903e" href="#903e">[903e]</a><span class="cd"><span class="i">BNE</span> <span class="o"><a href="#@_closeYLoop">@_closeYLoop</a></span></span></span>
<span class="l"><a class="anc" name="9040" href="#9040">[9040]</a><span class="cd"><span class="i">RTS</span></span></span>
<span class="l"></span>
<span class="l"></span>
</pre><pre><a name="DEADCODE_FUN_PRG12__9041"></a><div class="cp">;============================================================================
; DEADCODE
;============================================================================
</div><span class="l"><a class="anc" name="9041" href="#9041">[9041]</a><a href="#DEADCODE_FUN_PRG12__9041" class="la">DEADCODE_FUN_PRG12__9041:</a><span class="ce">; [$9041]</span></span>
<span class="l"><a class="anc" name="9041" href="#9041">[9041]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$05</span></span></span>
<span class="l"><a class="anc" name="9043" href="#9043">[9043]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#TextBox_ContentsX">TextBox_ContentsX</a></span></span></span>
<span class="l"><a class="anc" name="9045" href="#9045">[9045]</a><span class="cd"><span class="i">JSR</span> <span class="o">$cfdc</span></span></span>
<span class="l"></span>
<a name=":9048:@LAB_PRG12__9048"></a><span class="l"><a class="anc" name="9048" href="#9048">[9048]</a><a href="#:9048:@LAB_PRG12__9048" class="lla">@LAB_PRG12__9048:</a><span class="ce">; [$9048]</span></span>
<span class="l"><a class="anc" name="9048" href="#9048">[9048]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="RAM.html#TextBox_AttributeData">TextBox_AttributeData</a>,Y</span></span></span>
<span class="l"><a class="anc" name="904b" href="#904b">[904b]</a><span class="cd"><span class="i">INY</span></span></span>
<span class="l"><a class="anc" name="904c" href="#904c">[904c]</a><span class="cd"><span class="i">JSR</span> <span class="o">$f845</span></span></span>
<span class="l"><a class="anc" name="904f" href="#904f">[904f]</a><span class="cd"><span class="i">DEC</span> <span class="o"><a href="RAM.html#TextBox_ContentsX">TextBox_ContentsX</a></span></span></span>
<span class="l"><a class="anc" name="9051" href="#9051">[9051]</a><span class="cd"><span class="i">BNE</span> <span class="o"><a href="#@LAB_PRG12__9048">@LAB_PRG12__9048</a></span></span></span>
<span class="l"><a class="anc" name="9053" href="#9053">[9053]</a><span class="cd"><span class="i">STX</span> <span class="o"><a href="RAM.html#PPUBuffer_WriteOffset">PPUBuffer_WriteOffset</a></span></span></span>
<span class="l"><a class="anc" name="9055" href="#9055">[9055]</a><span class="cd"><span class="i">RTS</span></span></span>
<span class="l"></span>
</pre><pre><a name="Menu_UpdateAndDraw"></a><div class="cp">;============================================================================
; TODO: Document Menu_UpdateAndDraw
;
; INPUTS:
;     None.
;
; OUTPUTS:
;     TODO
;
; XREFS:
;     <a href="#IScriptAction_ShowBuySellMenu">IScriptAction_ShowBuySellMenu</a>
;     <a href="#IScripts_WaitForMenuInput">IScripts_WaitForMenuInput</a>
;     <a href="#PlayerMenu_HandleInventoryMenuInput">PlayerMenu_HandleInventoryMenuInput</a>
;     <a href="#PlayerMenu_Show">PlayerMenu_Show</a>
;============================================================================
</div><span class="l"><a class="anc" name="9056" href="#9056">[9056]</a><a href="#Menu_UpdateAndDraw" class="la">Menu_UpdateAndDraw:</a><span class="ce">; [$9056]</span></span>
<span class="l"><a class="anc" name="9056" href="#9056">[9056]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="RAM.html#Joy1_ChangedButtonMask">Joy1_ChangedButtonMask</a></span></span><span class="ce">; A = changed button mask.</span></span>
<span class="l"><a class="anc" name="9058" href="#9058">[9058]</a><span class="cd"><span class="i">AND</span> <span class="o">#$08</span></span><span class="ce">; Is Up pressed?</span></span>
<span class="l"><a class="anc" name="905a" href="#905a">[905a]</a><span class="cd"><span class="i">BNE</span> <span class="o"><a href="#@_handleCursorUp">@_handleCursorUp</a></span></span><span class="ce">; If so, jump.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Up was not pressed. Check Down.
;
</div><span class="l"><a class="anc" name="905c" href="#905c">[905c]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="RAM.html#Joy1_ChangedButtonMask">Joy1_ChangedButtonMask</a></span></span><span class="ce">; A = changed button mask.</span></span>
<span class="l"><a class="anc" name="905e" href="#905e">[905e]</a><span class="cd"><span class="i">AND</span> <span class="o">#$04</span></span><span class="ce">; Is Down pressed?</span></span>
<span class="l"><a class="anc" name="9060" href="#9060">[9060]</a><span class="cd"><span class="i">BEQ</span> <span class="o"><a href="#@_showSelectionCursor">@_showSelectionCursor</a></span></span><span class="ce">; If so, jump.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Neither Up nor Down was pressed.
;
</div><span class="l"><a class="anc" name="9062" href="#9062">[9062]</a><span class="cd"><span class="i">LDX</span> <span class="o">a:<a href="RAM.html#Menu_CursorPos">Menu_CursorPos</a></span></span><span class="ce">; X = Menu cursor position.</span></span>
<span class="l"><a class="anc" name="9065" href="#9065">[9065]</a><span class="cd"><span class="i">INX</span></span><span class="ce">; X++</span></span>
<span class="l"><a class="anc" name="9066" href="#9066">[9066]</a><span class="cd"><span class="i">CPX</span> <span class="o">a:<a href="RAM.html#Arg_StringsCount">Arg_StringsCount</a></span></span><span class="ce">; Compare to the last available position.</span></span>
<span class="l"><a class="anc" name="9069" href="#9069">[9069]</a><span class="cd"><span class="i">BNE</span> <span class="o"><a href="#@_moveCursor">@_moveCursor</a></span></span><span class="ce">; If it changed, jump.</span></span>
<span class="l"><a class="anc" name="906b" href="#906b">[906b]</a><span class="cd"><span class="i">LDX</span> <span class="o">#$00</span></span><span class="ce">; Move to the first item.</span></span>
<span class="l"></span>
<a name=":906d:@_moveCursor"></a><span class="l"><a class="anc" name="906d" href="#906d">[906d]</a><a href="#:906d:@_moveCursor" class="lla">@_moveCursor:</a><span class="ce">; [$906d]</span></span>
<span class="l"><a class="anc" name="906d" href="#906d">[906d]</a><span class="cd"><span class="i">STX</span> <span class="o">a:<a href="RAM.html#Menu_CursorPos">Menu_CursorPos</a></span></span><span class="ce">; Set the new cursor position.</span></span>
<span class="l"><a class="anc" name="9070" href="#9070">[9070]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$0b</span></span><span class="ce">; 0xB = Cursor movement sound effect.</span></span>
<span class="l"><a class="anc" name="9072" href="#9072">[9072]</a><span class="cd"><span class="i">JSR</span> <span class="o">$d0e4</span></span><span class="ce">; Play the sound effect.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name=":9075:@_showSelectionCursor"></a><div class="c">;
; Draw the selection cursor for a shop.
;
; This will draw the selection cursor, pointing to the Buy/Sell
; item or the item in a shop.
;
; First, compute the X position of the cursor.
;
</div><span class="l"><a class="anc" name="9075" href="#9075">[9075]</a><a href="#:9075:@_showSelectionCursor" class="lla">@_showSelectionCursor:</a><span class="ce">; [$9075]</span></span>
<span class="l"><a class="anc" name="9075" href="#9075">[9075]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#TextBox_GetXPixelCoord">TextBox_GetXPixelCoord</a></span></span><span class="ce">; Get the X pixel position of the textbox.</span></span>
<span class="l"><a class="anc" name="9078" href="#9078">[9078]</a><span class="cd"><span class="i">ADC</span> <span class="o">#$08</span></span><span class="ce">; Add 8 (offset).</span></span>
<span class="l"><a class="anc" name="907a" href="#907a">[907a]</a><span class="cd"><span class="i">TAX</span></span><span class="ce">; X = result.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Compute the Y position of the cursor.
;
; This will be:
;
;     TextBox_Y_Pixels + (16 * CursorPos) - 32.
;
</div><span class="l"><a class="anc" name="907b" href="#907b">[907b]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#TextBox_GetYPixelCoord">TextBox_GetYPixelCoord</a></span></span><span class="ce">; Get the Y pixel position of the textbox.</span></span>
<span class="l"><a class="anc" name="907e" href="#907e">[907e]</a><span class="cd"><span class="i">ADC</span> <span class="o">#$10</span></span><span class="ce">; Add 16.</span></span>
<span class="l"><a class="anc" name="9080" href="#9080">[9080]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Temp_Int24">Temp_Int24</a></span></span><span class="ce">; Store it temporarily.</span></span>
<span class="l"><a class="anc" name="9082" href="#9082">[9082]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#Menu_CursorPos">Menu_CursorPos</a></span></span><span class="ce">; A = cursor position.</span></span>
<span class="l"><a class="anc" name="9085" href="#9085">[9085]</a><span class="cd"><span class="i">JSR</span> <span class="o">$f78c</span></span><span class="ce">; A = A * 16 (2 tile height)</span></span>
<span class="l"><a class="anc" name="9088" href="#9088">[9088]</a><span class="cd"><span class="i">ADC</span> <span class="o"><a href="RAM.html#Temp_Int24">Temp_Int24</a></span></span><span class="ce">; A = A + our Y value.</span></span>
<span class="l"><a class="anc" name="908a" href="#908a">[908a]</a><span class="cd"><span class="i">SBC</span> <span class="o">#$20</span></span><span class="ce">; A = A - 32 (padding and nudging up a tile).</span></span>
<span class="l"><a class="anc" name="908c" href="#908c">[908c]</a><span class="cd"><span class="i">TAY</span></span><span class="ce">; Y = result.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Draw the selection symbol.
;
</div><span class="l"><a class="anc" name="908d" href="#908d">[908d]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$ad</span></span><span class="ce">; A = 0xAD (right arrow symbol).</span></span>
<span class="l"><a class="anc" name="908f" href="#908f">[908f]</a><span class="cd"><span class="i">JMP</span> <span class="o">$fca7</span></span><span class="ce">; Draw the symbol.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name=":9092:@_handleCursorUp"></a><div class="c">;
; The player pressed the Up button on the controller.
; Move the cursor up.
;
</div><span class="l"><a class="anc" name="9092" href="#9092">[9092]</a><a href="#:9092:@_handleCursorUp" class="lla">@_handleCursorUp:</a><span class="ce">; [$9092]</span></span>
<span class="l"><a class="anc" name="9092" href="#9092">[9092]</a><span class="cd"><span class="i">LDX</span> <span class="o">a:<a href="RAM.html#Menu_CursorPos">Menu_CursorPos</a></span></span><span class="ce">; X = Menu cursor position.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name=":9095:@_cursorLoop"></a><div class="c">;
; Set up a loop to move the cursor to a viable spot.
;
; Note that we have two possibilities here, based on
; <a href="RAM.html#Arg_StringsCount">Arg_StringsCount</a>:
;
; 1. It has a non-0 value, in which case we stay in this
;    cursor loop and handle cursor movement.
;
;    This is the case with textbox menus and shops.
;
; 2. It has a 0 value, in which case we're going to fall
;    through to more advanced input.
;
;    This is only used in the password screen.
;
</div><span class="l"><a class="anc" name="9095" href="#9095">[9095]</a><a href="#:9095:@_cursorLoop" class="lla">@_cursorLoop:</a><span class="ce">; [$9095]</span></span>
<span class="l"><a class="anc" name="9095" href="#9095">[9095]</a><span class="cd"><span class="i">DEX</span></span><span class="ce">; X--</span></span>
<span class="l"><a class="anc" name="9096" href="#9096">[9096]</a><span class="cd"><span class="i">BPL</span> <span class="o"><a href="#@_moveCursor">@_moveCursor</a></span></span><span class="ce">; If &lt; 0, jump.</span></span>
<span class="l"><a class="anc" name="9098" href="#9098">[9098]</a><span class="cd"><span class="i">LDX</span> <span class="o">a:<a href="RAM.html#Arg_StringsCount">Arg_StringsCount</a></span></span><span class="ce">; X = Last available position.</span></span>
<span class="l"><a class="anc" name="909b" href="#909b">[909b]</a><span class="cd"><span class="i">BPL</span> <span class="o"><a href="#@_cursorLoop">@_cursorLoop</a></span></span><span class="ce">; If &lt; 0, loop.
Else, fall through (only for the password screen).</span></span>
<span class="l"></span>
<div class="c">;
; v-- Fall through --v
;
</div><span class="l"></span>
</pre><pre><a name="PasswordScreen_Show"></a><div class="cp">;============================================================================
; TODO: Document PasswordScreen_Show
;
; INPUTS:
;     None.
;
; OUTPUTS:
;     TODO
;============================================================================
</div><span class="l"><a class="anc" name="909d" href="#909d">[909d]</a><a href="#PasswordScreen_Show" class="la">PasswordScreen_Show:</a><span class="ce">; [$909d]</span></span>
<span class="l"><a class="anc" name="909d" href="#909d">[909d]</a><span class="cd"><span class="i">JSR</span> <span class="o">$caf7</span></span></span>
<span class="l"><a class="anc" name="90a0" href="#90a0">[90a0]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$10</span></span></span>
<span class="l"><a class="anc" name="90a2" href="#90a2">[90a2]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#PPUADDR">PPUADDR</a></span></span></span>
<span class="l"><a class="anc" name="90a5" href="#90a5">[90a5]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$00</span></span></span>
<span class="l"><a class="anc" name="90a7" href="#90a7">[90a7]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#PPUADDR">PPUADDR</a></span></span></span>
<span class="l"><a class="anc" name="90aa" href="#90aa">[90aa]</a><span class="cd"><span class="i">LDY</span> <span class="o">#$10</span></span></span>
<span class="l"><a class="anc" name="90ac" href="#90ac">[90ac]</a><span class="cd"><span class="i">JSR</span> <span class="o">$fcb2</span></span></span>
<span class="l"><a class="anc" name="90af" href="#90af">[90af]</a><span class="cd"><span class="i">JSR</span> <span class="o">$f3a5</span></span></span>
<span class="l"><a class="anc" name="90b2" href="#90b2">[90b2]</a><span class="cd"><span class="i">LDY</span> <span class="o">#$1f</span></span></span>
<span class="l"></span>
<a name=":90b4:@LAB_PRG12__90b4"></a><span class="l"><a class="anc" name="90b4" href="#90b4">[90b4]</a><a href="#:90b4:@LAB_PRG12__90b4" class="lla">@LAB_PRG12__90b4:</a><span class="ce">; [$90b4]</span></span>
<span class="l"><a class="anc" name="90b4" href="#90b4">[90b4]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="#PASSWORD_SCREEN_PALETTE">PASSWORD_SCREEN_PALETTE</a>,Y</span></span></span>
<span class="l"><a class="anc" name="90b7" href="#90b7">[90b7]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Screen_PaletteData">Screen_PaletteData</a>,Y</span></span></span>
<span class="l"><a class="anc" name="90ba" href="#90ba">[90ba]</a><span class="cd"><span class="i">DEY</span></span></span>
<span class="l"><a class="anc" name="90bb" href="#90bb">[90bb]</a><span class="cd"><span class="i">BPL</span> <span class="o"><a href="#@LAB_PRG12__90b4">@LAB_PRG12__90b4</a></span></span></span>
<span class="l"><a class="anc" name="90bd" href="#90bd">[90bd]</a><span class="cd"><span class="i">JSR</span> <span class="o">$d090</span></span></span>
<span class="l"><a class="anc" name="90c0" href="#90c0">[90c0]</a><span class="cd"><span class="i">JSR</span> <span class="o">$fcb9</span></span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Set the position to the first character of the first row of
; the password screen. This starts at $2128.
;
; Then draw the field (16 characters).
;
</div><span class="l"><a class="anc" name="90c3" href="#90c3">[90c3]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$21</span></span></span>
<span class="l"><a class="anc" name="90c5" href="#90c5">[90c5]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#PPUADDR">PPUADDR</a></span></span></span>
<span class="l"><a class="anc" name="90c8" href="#90c8">[90c8]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$28</span></span></span>
<span class="l"><a class="anc" name="90ca" href="#90ca">[90ca]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#PPUADDR">PPUADDR</a></span></span></span>
<span class="l"><a class="anc" name="90cd" href="#90cd">[90cd]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$5f</span></span></span>
<span class="l"><a class="anc" name="90cf" href="#90cf">[90cf]</a><span class="cd"><span class="i">LDY</span> <span class="o">#$10</span></span></span>
<span class="l"><a class="anc" name="90d1" href="#90d1">[90d1]</a><span class="cd"><span class="i">JSR</span> <span class="o">$fcb2</span></span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Now do the same for the second row of the password input at
; $2148.
;
</div><span class="l"><a class="anc" name="90d4" href="#90d4">[90d4]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$21</span></span></span>
<span class="l"><a class="anc" name="90d6" href="#90d6">[90d6]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#PPUADDR">PPUADDR</a></span></span></span>
<span class="l"><a class="anc" name="90d9" href="#90d9">[90d9]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$48</span></span></span>
<span class="l"><a class="anc" name="90db" href="#90db">[90db]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#PPUADDR">PPUADDR</a></span></span></span>
<span class="l"><a class="anc" name="90de" href="#90de">[90de]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$5f</span></span></span>
<span class="l"><a class="anc" name="90e0" href="#90e0">[90e0]</a><span class="cd"><span class="i">LDY</span> <span class="o">#$10</span></span></span>
<span class="l"><a class="anc" name="90e2" href="#90e2">[90e2]</a><span class="cd"><span class="i">JSR</span> <span class="o">$fcb2</span></span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Begin drawing all the available password characters.
;
</div><span class="l"><a class="anc" name="90e5" href="#90e5">[90e5]</a><span class="cd"><span class="i">LDY</span> <span class="o">#$00</span></span></span>
<span class="l"></span>
<span class="l"></span>
<a name=":90e7:@_startRow"></a><div class="c">;
; Set the cursor position for the start of the row of
; available password characters based on the first two
; bytes of the current offset into <a href="#INPUT_CHARS">INPUT_CHARS</a>.
;
</div><span class="l"><a class="anc" name="90e7" href="#90e7">[90e7]</a><a href="#:90e7:@_startRow" class="lla">@_startRow:</a><span class="ce">; [$90e7]</span></span>
<span class="l"><a class="anc" name="90e7" href="#90e7">[90e7]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="#INPUT_CHARS">INPUT_CHARS</a>,Y</span></span></span>
<span class="l"><a class="anc" name="90ea" href="#90ea">[90ea]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#PPUADDR">PPUADDR</a></span></span></span>
<span class="l"><a class="anc" name="90ed" href="#90ed">[90ed]</a><span class="cd"><span class="i">INY</span></span></span>
<span class="l"><a class="anc" name="90ee" href="#90ee">[90ee]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="#INPUT_CHARS">INPUT_CHARS</a>,Y</span></span></span>
<span class="l"><a class="anc" name="90f1" href="#90f1">[90f1]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#PPUADDR">PPUADDR</a></span></span></span>
<span class="l"><a class="anc" name="90f4" href="#90f4">[90f4]</a><span class="cd"><span class="i">INY</span></span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Every row has 25 characters (this includes spaces between
; visible characters). Loop through each character draw it
; on the current row.
;
</div><span class="l"><a class="anc" name="90f5" href="#90f5">[90f5]</a><span class="cd"><span class="i">LDX</span> <span class="o">#$19</span></span></span>
<span class="l"></span>
<a name=":90f7:@_writePasswordCharsLoop"></a><span class="l"><a class="anc" name="90f7" href="#90f7">[90f7]</a><a href="#:90f7:@_writePasswordCharsLoop" class="lla">@_writePasswordCharsLoop:</a><span class="ce">; [$90f7]</span></span>
<span class="l"><a class="anc" name="90f7" href="#90f7">[90f7]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="#INPUT_CHARS">INPUT_CHARS</a>,Y</span></span></span>
<span class="l"><a class="anc" name="90fa" href="#90fa">[90fa]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#PPUDATA">PPUDATA</a></span></span></span>
<span class="l"><a class="anc" name="90fd" href="#90fd">[90fd]</a><span class="cd"><span class="i">INY</span></span></span>
<span class="l"><a class="anc" name="90fe" href="#90fe">[90fe]</a><span class="cd"><span class="i">DEX</span></span></span>
<span class="l"><a class="anc" name="90ff" href="#90ff">[90ff]</a><span class="cd"><span class="i">BNE</span> <span class="o"><a href="#@_writePasswordCharsLoop">@_writePasswordCharsLoop</a></span></span></span>
<span class="l"><a class="anc" name="9101" href="#9101">[9101]</a><span class="cd"><span class="i">CPY</span> <span class="o">#$a2</span></span></span>
<span class="l"><a class="anc" name="9103" href="#9103">[9103]</a><span class="cd"><span class="i">BNE</span> <span class="o"><a href="#@_startRow">@_startRow</a></span></span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Begin writing the top row: "Enter your mantra."
; This starts at PPU position $20A5.
;
; The string is at <a href="#STRING_ENTER_YOUR_MANTRA">STRING_ENTER_YOUR_MANTRA</a>.
;
</div><span class="l"><a class="anc" name="9105" href="#9105">[9105]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$20</span></span></span>
<span class="l"><a class="anc" name="9107" href="#9107">[9107]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#PPUADDR">PPUADDR</a></span></span></span>
<span class="l"><a class="anc" name="910a" href="#910a">[910a]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$a5</span></span></span>
<span class="l"><a class="anc" name="910c" href="#910c">[910c]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#PPUADDR">PPUADDR</a></span></span></span>
<span class="l"><a class="anc" name="910f" href="#910f">[910f]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$ec</span></span></span>
<span class="l"><a class="anc" name="9111" href="#9111">[9111]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Temp_Int24">Temp_Int24</a></span></span></span>
<span class="l"><a class="anc" name="9113" href="#9113">[9113]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$91</span></span></span>
<span class="l"><a class="anc" name="9115" href="#9115">[9115]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Temp_Int24_M">Temp_Int24_M</a></span></span></span>
<span class="l"><a class="anc" name="9117" href="#9117">[9117]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#UI_DrawText">UI_DrawText</a></span></span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Set the initial password to 32 characters of empty (0xFF).
;
; This is in Password_EnteredChars.
;
</div><span class="l"><a class="anc" name="911a" href="#911a">[911a]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$20</span></span></span>
<span class="l"><a class="anc" name="911c" href="#911c">[911c]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#Password_MaxChars">Password_MaxChars</a></span></span></span>
<span class="l"><a class="anc" name="911f" href="#911f">[911f]</a><span class="cd"><span class="i">TAX</span></span></span>
<span class="l"><a class="anc" name="9120" href="#9120">[9120]</a><span class="cd"><span class="i">DEX</span></span></span>
<span class="l"><a class="anc" name="9121" href="#9121">[9121]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$ff</span></span></span>
<span class="l"></span>
<a name=":9123:@LAB_PRG12__9123"></a><span class="l"><a class="anc" name="9123" href="#9123">[9123]</a><a href="#:9123:@LAB_PRG12__9123" class="lla">@LAB_PRG12__9123:</a><span class="ce">; [$9123]</span></span>
<span class="l"><a class="anc" name="9123" href="#9123">[9123]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#ScreenBuffer">ScreenBuffer</a>,X</span></span></span>
<span class="l"><a class="anc" name="9126" href="#9126">[9126]</a><span class="cd"><span class="i">DEX</span></span></span>
<span class="l"><a class="anc" name="9127" href="#9127">[9127]</a><span class="cd"><span class="i">BPL</span> <span class="o"><a href="#@LAB_PRG12__9123">@LAB_PRG12__9123</a></span></span></span>
<span class="l"><a class="anc" name="9129" href="#9129">[9129]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$00</span></span></span>
<span class="l"><a class="anc" name="912b" href="#912b">[912b]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#Password_EnteredCharsLength">Password_EnteredCharsLength</a></span></span></span>
<span class="l"><a class="anc" name="912e" href="#912e">[912e]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#Password_FieldCursorPos">Password_FieldCursorPos</a></span></span></span>
<span class="l"><a class="anc" name="9131" href="#9131">[9131]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#Password_CursorCol">Password_CursorCol</a></span></span></span>
<span class="l"><a class="anc" name="9134" href="#9134">[9134]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#Password_CursorRow">Password_CursorRow</a></span></span></span>
<span class="l"><a class="anc" name="9137" href="#9137">[9137]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#Password_DPadBits">Password_DPadBits</a></span></span></span>
<span class="l"><a class="anc" name="913a" href="#913a">[913a]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#Password_CounterBeforeAutoRepeatMove">Password_CounterBeforeAutoRepeatMove</a></span></span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Handle password input.
;
</div><span class="l"><a class="anc" name="913d" href="#913d">[913d]</a><span class="cd"><span class="i">JSR</span> <span class="o">$cb27</span></span></span>
<span class="l"></span>
<div class="c">;
; v-- Fall through --v
;
</div><span class="l"></span>
</pre><pre><a name="PasswordScreen_WaitForInput"></a><div class="cp">;============================================================================
; TODO: Document PasswordScreen_WaitForInput
;
; INPUTS:
;     X
;
; OUTPUTS:
;     TODO
;
; XREFS:
;     <a href="#PasswordScreen_9175">PasswordScreen_9175</a>
;     <a href="#PasswordScreen_HandleInput">PasswordScreen_HandleInput</a>
;     <a href="#PasswordScreen_HandleWrongPasswordAndWaitForInput">PasswordScreen_HandleWrongPasswordAndWaitForInput</a>
;     <a href="#PasswordScreen_WaitForInput">PasswordScreen_WaitForInput</a>
;============================================================================
</div><span class="l"><a class="anc" name="9140" href="#9140">[9140]</a><a href="#PasswordScreen_WaitForInput" class="la">PasswordScreen_WaitForInput:</a><span class="ce">; [$9140]</span></span>
<span class="l"><a class="anc" name="9140" href="#9140">[9140]</a><span class="cd"><span class="i">JSR</span> <span class="o">$ca25</span></span></span>
<span class="l"><a class="anc" name="9143" href="#9143">[9143]</a><span class="cd"><span class="i">JSR</span> <span class="o">$cb4f</span></span></span>
<span class="l"><a class="anc" name="9146" href="#9146">[9146]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#PasswordScreen_DrawAndHandleInputLoop">PasswordScreen_DrawAndHandleInputLoop</a></span></span></span>
<span class="l"><a class="anc" name="9149" href="#9149">[9149]</a><span class="cd"><span class="i">BCC</span> <span class="o"><a href="#PasswordScreen_WaitForInput">PasswordScreen_WaitForInput</a></span></span></span>
<span class="l"><a class="anc" name="914b" href="#914b">[914b]</a><span class="cd"><span class="i">CMP</span> <span class="o">#$83</span></span></span>
<span class="l"><a class="anc" name="914d" href="#914d">[914d]</a><span class="cd"><span class="i">BNE</span> <span class="o"><a href="#PasswordScreen_HandleInput">PasswordScreen_HandleInput</a></span></span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; This is the END code.
;
</div><span class="l"><a class="anc" name="914f" href="#914f">[914f]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#Password_EnteredCharsLength">Password_EnteredCharsLength</a></span></span></span>
<span class="l"><a class="anc" name="9152" href="#9152">[9152]</a><span class="cd"><span class="i">BEQ</span> <span class="o"><a href="#PasswordScreen_9175">PasswordScreen_9175</a></span></span></span>
<span class="l"><a class="anc" name="9154" href="#9154">[9154]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#Password_Maybe_CheckPasswordLength">Password_Maybe_CheckPasswordLength</a></span></span></span>
<span class="l"><a class="anc" name="9157" href="#9157">[9157]</a><span class="cd"><span class="i">BCS</span> <span class="o"><a href="#PasswordScreen_HandleWrongPasswordAndWaitForInput">PasswordScreen_HandleWrongPasswordAndWaitForInput</a></span></span></span>
<span class="l"><a class="anc" name="9159" href="#9159">[9159]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#Password_Load">Password_Load</a></span></span></span>
<span class="l"><a class="anc" name="915c" href="#915c">[915c]</a><span class="cd"><span class="i">BCS</span> <span class="o"><a href="#PasswordScreen_HandleWrongPasswordAndWaitForInput">PasswordScreen_HandleWrongPasswordAndWaitForInput</a></span></span></span>
<span class="l"><a class="anc" name="915e" href="#915e">[915e]</a><span class="cd"><span class="i">RTS</span></span></span>
<span class="l"></span>
</pre><pre><a name="PasswordScreen_HandleWrongPasswordAndWaitForInput"></a><div class="cp">;============================================================================
; TODO: Document PasswordScreen_HandleWrongPasswordAndWaitForInput
;
; INPUTS:
;     X
;
; OUTPUTS:
;     TODO
;
; XREFS:
;     <a href="#PasswordScreen_WaitForInput">PasswordScreen_WaitForInput</a>
;============================================================================
</div><span class="l"><a class="anc" name="915f" href="#915f">[915f]</a><a href="#PasswordScreen_HandleWrongPasswordAndWaitForInput" class="la">PasswordScreen_HandleWrongPasswordAndWaitForInput:</a><span class="ce">; [$915f]</span></span>
<span class="l"><a class="anc" name="915f" href="#915f">[915f]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#Sound_PlayInputSound">Sound_PlayInputSound</a></span></span></span>
<span class="l"></span>
<a name=":9162:@_handleWrongPassword"></a><span class="l"><a class="anc" name="9162" href="#9162">[9162]</a><a href="#:9162:@_handleWrongPassword" class="lla">@_handleWrongPassword:</a><span class="ce">; [$9162]</span></span>
<span class="l"><a class="anc" name="9162" href="#9162">[9162]</a><span class="cd"><span class="i">JSR</span> <span class="o">$ca25</span></span></span>
<span class="l"><a class="anc" name="9165" href="#9165">[9165]</a><span class="cd"><span class="i">JSR</span> <span class="o">$cb4f</span></span></span>
<span class="l"><a class="anc" name="9168" href="#9168">[9168]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#PasswordScreen_WriteWrongPassword">PasswordScreen_WriteWrongPassword</a></span></span></span>
<span class="l"><a class="anc" name="916b" href="#916b">[916b]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="RAM.html#Joy1_ChangedButtonMask">Joy1_ChangedButtonMask</a></span></span></span>
<span class="l"><a class="anc" name="916d" href="#916d">[916d]</a><span class="cd"><span class="i">BPL</span> <span class="o"><a href="#@_handleWrongPassword">@_handleWrongPassword</a></span></span></span>
<span class="l"><a class="anc" name="916f" href="#916f">[916f]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#PasswordScreen_WriteEnterYourMantra">PasswordScreen_WriteEnterYourMantra</a></span></span></span>
<span class="l"><a class="anc" name="9172" href="#9172">[9172]</a><span class="cd"><span class="i">JMP</span> <span class="o"><a href="#PasswordScreen_WaitForInput">PasswordScreen_WaitForInput</a></span></span></span>
<span class="l"></span>
</pre><pre><a name="PasswordScreen_9175"></a><div class="cp">;============================================================================
; TODO: Document PasswordScreen_9175
;
; INPUTS:
;     X
;
; OUTPUTS:
;     TODO
;
; XREFS:
;     <a href="#PasswordScreen_WaitForInput">PasswordScreen_WaitForInput</a>
;============================================================================
</div><span class="l"><a class="anc" name="9175" href="#9175">[9175]</a><a href="#PasswordScreen_9175" class="la">PasswordScreen_9175:</a><span class="ce">; [$9175]</span></span>
<span class="l"><a class="anc" name="9175" href="#9175">[9175]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#Sound_PlayInputSound">Sound_PlayInputSound</a></span></span><span class="ce">; Play the character input sound.</span></span>
<span class="l"><a class="anc" name="9178" href="#9178">[9178]</a><span class="cd"><span class="i">JMP</span> <span class="o"><a href="#PasswordScreen_WaitForInput">PasswordScreen_WaitForInput</a></span></span><span class="ce">; Wait for input.</span></span>
<span class="l"></span>
</pre><pre><a name="PasswordScreen_HandleInput"></a><div class="cp">;============================================================================
; TODO: Document PasswordScreen_HandleInput
;
; INPUTS:
;     A
;     X
;
; OUTPUTS:
;     TODO
;
; XREFS:
;     <a href="#PasswordScreen_WaitForInput">PasswordScreen_WaitForInput</a>
;============================================================================
</div><span class="l"><a class="anc" name="917b" href="#917b">[917b]</a><a href="#PasswordScreen_HandleInput" class="la">PasswordScreen_HandleInput:</a><span class="ce">; [$917b]</span></span>
<span class="l"><a class="anc" name="917b" href="#917b">[917b]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#PasswordScreen_HandleInputChar">PasswordScreen_HandleInputChar</a></span></span><span class="ce">; Handle the character.</span></span>
<span class="l"><a class="anc" name="917e" href="#917e">[917e]</a><span class="cd"><span class="i">JMP</span> <span class="o"><a href="#PasswordScreen_WaitForInput">PasswordScreen_WaitForInput</a></span></span><span class="ce">; Wait again for input.</span></span>
<span class="l"></span>
<span class="l"></span>
</pre><pre><a name="PasswordScreen_WriteEnterYourMantra"></a><div class="cp">;============================================================================
; Write the "Enter your mantra" message.
;
; INPUTS:
;     X:
;         Destination offset into the PPU buffer.
;
;     <a href="RAM.html#InterruptCounter">InterruptCounter</a>:
;         The game interrupt counter.
;
;     <a href="#PASSWORD_MESSAGE_STRINGS_U">PASSWORD_MESSAGE_STRINGS_U</a>:
;     <a href="#PASSWORD_MESSAGE_STRINGS_U">PASSWORD_MESSAGE_STRINGS_U</a>:
;         The lookup table of message strings.
;
; OUTPUTS:
;     <a href="RAM.html#PPUBuffer_WriteOffset">PPUBuffer_WriteOffset</a>:
;         New upper bounds of the PPU buffer.
;
;     <a href="RAM.html#PPU_TargetAddr">PPU_TargetAddr</a>:
;     <a href="RAM.html#PPU_TargetAddr">PPU_TargetAddr</a>+1:
;     <a href="RAM.html#Temp_Int24">Temp_Int24</a>:
;     <a href="RAM.html#Temp_Int24">Temp_Int24</a>+1:
;         Clobbered.
;
; CALLS:
;     <a href="PRG15_MIRROR.html#PPUBuffer_QueueCommandOrLength">PPUBuffer_QueueCommandOrLength</a>
;     <a href="PRG15_MIRROR.html#PPUBuffer_WriteFromTemp">PPUBuffer_WriteFromTemp</a>
;
; XREFS:
;     <a href="#PasswordScreen_HandleWrongPasswordAndWaitForInput">PasswordScreen_HandleWrongPasswordAndWaitForInput</a>
;============================================================================
</div><span class="l"><a class="anc" name="9181" href="#9181">[9181]</a><a href="#PasswordScreen_WriteEnterYourMantra" class="la">PasswordScreen_WriteEnterYourMantra:</a><span class="ce">; [$9181]</span></span>
<span class="l"><a class="anc" name="9181" href="#9181">[9181]</a><span class="cd"><span class="i">LDY</span> <span class="o">#$02</span></span><span class="ce">; 2 = "Enter your mantra"</span></span>
<span class="l"><a class="anc" name="9183" href="#9183">[9183]</a><span class="cd"><span class="i">BNE</span> <span class="o"><a href="#PasswordScreen_DrawMessage">PasswordScreen_DrawMessage</a></span></span><span class="ce">; Draw it.</span></span>
<span class="l"></span>
<div class="c">;
; X-- We should never fall through here --X
;
</div><span class="l"></span>
<span class="l"></span>
</pre><pre><a name="PasswordScreen_WriteWrongPassword"></a><div class="cp">;============================================================================
; Write the message stating that the password was wrong.
;
; This will display in a blinking form, alternating between
; empty spaces and the message.
;
; INPUTS:
;     X:
;         Destination offset into the PPU buffer.
;
;     <a href="RAM.html#InterruptCounter">InterruptCounter</a>:
;         The game interrupt counter.
;
;     <a href="#PASSWORD_MESSAGE_STRINGS_U">PASSWORD_MESSAGE_STRINGS_U</a>:
;     <a href="#PASSWORD_MESSAGE_STRINGS_U">PASSWORD_MESSAGE_STRINGS_U</a>:
;         The lookup table of message strings.
;
; OUTPUTS:
;     <a href="RAM.html#PPU_TargetAddr">PPU_TargetAddr</a>:
;     <a href="RAM.html#PPU_TargetAddr">PPU_TargetAddr</a>+1:
;     <a href="RAM.html#Temp_Int24">Temp_Int24</a>:
;     <a href="RAM.html#Temp_Int24">Temp_Int24</a>+1:
;         Clobbered.
;
; CALLS:
;     <a href="PRG15_MIRROR.html#PPUBuffer_QueueCommandOrLength">PPUBuffer_QueueCommandOrLength</a>
;     <a href="PRG15_MIRROR.html#PPUBuffer_WriteFromTemp">PPUBuffer_WriteFromTemp</a>
;
; XREFS:
;     <a href="#PasswordScreen_HandleWrongPasswordAndWaitForInput">PasswordScreen_HandleWrongPasswordAndWaitForInput</a>
;============================================================================
</div><span class="l"><a class="anc" name="9185" href="#9185">[9185]</a><a href="#PasswordScreen_WriteWrongPassword" class="la">PasswordScreen_WriteWrongPassword:</a><span class="ce">; [$9185]</span></span>
<span class="l"><a class="anc" name="9185" href="#9185">[9185]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="RAM.html#InterruptCounter">InterruptCounter</a></span></span><span class="ce">; Load the interrupt counter.</span></span>
<span class="l"><a class="anc" name="9187" href="#9187">[9187]</a><span class="cd"><span class="i">AND</span> <span class="o">#$1f</span></span><span class="ce">; Check if we're on an animation frame.</span></span>
<span class="l"><a class="anc" name="9189" href="#9189">[9189]</a><span class="cd"><span class="i">BNE</span> <span class="o"><a href="#RETURN_91B7">RETURN_91B7</a></span></span><span class="ce">; If not, return.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Calculate the string index based on the frame.
;
</div><span class="l"><a class="anc" name="918b" href="#918b">[918b]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="RAM.html#InterruptCounter">InterruptCounter</a></span></span><span class="ce">; Load the interrupt counter again.</span></span>
<span class="l"><a class="anc" name="918d" href="#918d">[918d]</a><span class="cd"><span class="i">LSR</span> <span class="o">A</span></span><span class="ce">; Compute a message index based on the interval.</span></span>
<span class="l"><a class="anc" name="918e" href="#918e">[918e]</a><span class="cd"><span class="i">LSR</span> <span class="o">A</span></span></span>
<span class="l"><a class="anc" name="918f" href="#918f">[918f]</a><span class="cd"><span class="i">LSR</span> <span class="o">A</span></span></span>
<span class="l"><a class="anc" name="9190" href="#9190">[9190]</a><span class="cd"><span class="i">LSR</span> <span class="o">A</span></span></span>
<span class="l"><a class="anc" name="9191" href="#9191">[9191]</a><span class="cd"><span class="i">LSR</span> <span class="o">A</span></span></span>
<span class="l"><a class="anc" name="9192" href="#9192">[9192]</a><span class="cd"><span class="i">AND</span> <span class="o">#$01</span></span></span>
<span class="l"><a class="anc" name="9194" href="#9194">[9194]</a><span class="cd"><span class="i">TAY</span></span><span class="ce">; Y = message string index</span></span>
<span class="l"></span>
<div class="c">;
; v-- Fall through --v
;
</div><span class="l"></span>
<span class="l"></span>
</pre><pre><a name="PasswordScreen_DrawMessage"></a><div class="cp">;============================================================================
; Draw a message on the password screen.
;
; INPUTS:
;     Y:
;         The message ID. This is one of:
;
;         0 = "Mantra is in the wrong"
;         1 = Blank spaces (to blink a message)
;         2 = "  Enter your mantra.  "
;
;     <a href="#PASSWORD_MESSAGE_STRINGS_L">PASSWORD_MESSAGE_STRINGS_L</a>:
;     <a href="#PASSWORD_MESSAGE_STRINGS_U">PASSWORD_MESSAGE_STRINGS_U</a>:
;         The available message strings table.
;
; OUTPUTS:
;     <a href="RAM.html#PPUBuffer_WriteOffset">PPUBuffer_WriteOffset</a>:
;         The new write offset for the PPU buffer.
;
;     <a href="RAM.html#PPU_TargetAddr">PPU_TargetAddr</a>:
;     <a href="RAM.html#PPU_TargetAddr">PPU_TargetAddr</a>+1:
;         Clobbered.
;
; CALLS:
;     <a href="PRG15_MIRROR.html#PPUBuffer_QueueCommandOrLength">PPUBuffer_QueueCommandOrLength</a>
;     <a href="PRG15_MIRROR.html#PPUBuffer_WriteFromTemp">PPUBuffer_WriteFromTemp</a>
;
; XREFS:
;     <a href="#PasswordScreen_WriteEnterYourMantra">PasswordScreen_WriteEnterYourMantra</a>
;============================================================================
</div><span class="l"><a class="anc" name="9195" href="#9195">[9195]</a><a href="#PasswordScreen_DrawMessage" class="la">PasswordScreen_DrawMessage:</a><span class="ce">; [$9195]</span></span>
<div class="c">;
; Load the message string.
;
</div><span class="l"><a class="anc" name="9195" href="#9195">[9195]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="#PASSWORD_MESSAGE_STRINGS_L">PASSWORD_MESSAGE_STRINGS_L</a>,Y</span></span><span class="ce">; Load the lower byte of the string address.</span></span>
<span class="l"><a class="anc" name="9198" href="#9198">[9198]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Temp_Int24">Temp_Int24</a></span></span><span class="ce">; Store that.</span></span>
<span class="l"><a class="anc" name="919a" href="#919a">[919a]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="#PASSWORD_MESSAGE_STRINGS_U">PASSWORD_MESSAGE_STRINGS_U</a>,Y</span></span><span class="ce">; Load the upper byte of the string address.</span></span>
<span class="l"><a class="anc" name="919d" href="#919d">[919d]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Temp_Int24_M">Temp_Int24_M</a></span></span><span class="ce">; Store that.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Set the PPU tile address to 0x20A5.
;
</div><span class="l"><a class="anc" name="919f" href="#919f">[919f]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$20</span></span></span>
<span class="l"><a class="anc" name="91a1" href="#91a1">[91a1]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#PPU_TargetAddr_U">PPU_TargetAddr_U</a></span></span><span class="ce">; Upper byte = 0x20</span></span>
<span class="l"><a class="anc" name="91a3" href="#91a3">[91a3]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$a5</span></span></span>
<span class="l"><a class="anc" name="91a5" href="#91a5">[91a5]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#PPU_TargetAddr">PPU_TargetAddr</a></span></span><span class="ce">; Lower byte = 0xA5</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Queue up a string of 23 characters.
;
</div><span class="l"><a class="anc" name="91a7" href="#91a7">[91a7]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$17</span></span></span>
<span class="l"><a class="anc" name="91a9" href="#91a9">[91a9]</a><span class="cd"><span class="i">JSR</span> <span class="o">$cfdc</span></span><span class="ce">; Queue 23 characters to draw.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Begin the draw loop.
;
</div><span class="l"><a class="anc" name="91ac" href="#91ac">[91ac]</a><span class="cd"><span class="i">LDY</span> <span class="o">#$00</span></span><span class="ce">; Y = 0 (loop counter)</span></span>
<span class="l"></span>
<a name=":91ae:@LAB_PRG12__91ae"></a><span class="l"><a class="anc" name="91ae" href="#91ae">[91ae]</a><a href="#:91ae:@LAB_PRG12__91ae" class="lla">@LAB_PRG12__91ae:</a><span class="ce">; [$91ae]</span></span>
<span class="l"><a class="anc" name="91ae" href="#91ae">[91ae]</a><span class="cd"><span class="i">JSR</span> <span class="o">$f842</span></span><span class="ce">; Put the next character from our loaded string into the PPU buffer.</span></span>
<span class="l"><a class="anc" name="91b1" href="#91b1">[91b1]</a><span class="cd"><span class="i">CPY</span> <span class="o">#$17</span></span><span class="ce">; Have we written 23 characters?</span></span>
<span class="l"><a class="anc" name="91b3" href="#91b3">[91b3]</a><span class="cd"><span class="i">BNE</span> <span class="o"><a href="#@LAB_PRG12__91ae">@LAB_PRG12__91ae</a></span></span><span class="ce">; If not, loop.</span></span>
<span class="l"><a class="anc" name="91b5" href="#91b5">[91b5]</a><span class="cd"><span class="i">STX</span> <span class="o"><a href="RAM.html#PPUBuffer_WriteOffset">PPUBuffer_WriteOffset</a></span></span><span class="ce">; Store the new upper bounds of the PPU buffer.</span></span>
<span class="l"></span>
<a name="RETURN_91B7"></a><div class="c">;
; XREFS:
;     <a href="#PasswordScreen_WriteWrongPassword">PasswordScreen_WriteWrongPassword</a>
;
</div><span class="l"><a class="anc" name="91b7" href="#91b7">[91b7]</a><a href="#RETURN_91B7" class="la">RETURN_91B7:</a><span class="ce">; [$91b7]</span></span>
<span class="l"><a class="anc" name="91b7" href="#91b7">[91b7]</a><span class="cd"><span class="i">RTS</span></span></span>
<span class="l"></span>
<span class="l"></span>
<a name="PASSWORD_MESSAGE_STRINGS_L"></a><div class="cp">;============================================================================
; Lookup table for password screen strings.
;
; XREFS:
;     <a href="#PasswordScreen_DrawMessage">PasswordScreen_DrawMessage</a>
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#PasswordScreen_DrawMessage">PasswordScreen_DrawMessage</a>
;
</div><span class="l"><a class="anc" name="91b8" href="#91b8">[91b8]</a><a href="#PASSWORD_MESSAGE_STRINGS_L" class="la">PASSWORD_MESSAGE_STRINGS_L:</a><span class="ce">; [$91b8]</span></span>
<span class="l"><a class="anc" name="91b8" href="#91b8">[91b8]</a><span class="cd"><span class="i">db</span> <span class="o">$be</span></span><span class="ce">; [0]:</span></span>
<span class="l"><a class="anc" name="91b9" href="#91b9">[91b9]</a><span class="cd"><span class="i">db</span> <span class="o">$d5</span></span><span class="ce">; [1]:</span></span>
<span class="l"><a class="anc" name="91ba" href="#91ba">[91ba]</a><span class="cd"><span class="i">db</span> <span class="o">$ec</span></span><span class="ce">; [2]:</span></span>
<span class="l"></span>
<a name="PASSWORD_MESSAGE_STRINGS_U"></a><div class="c">;
; XREFS:
;     <a href="#PasswordScreen_DrawMessage">PasswordScreen_DrawMessage</a>
;
</div><span class="l"><a class="anc" name="91bb" href="#91bb">[91bb]</a><a href="#PASSWORD_MESSAGE_STRINGS_U" class="la">PASSWORD_MESSAGE_STRINGS_U:</a><span class="ce">; [$91bb]</span></span>
<span class="l"><a class="anc" name="91bb" href="#91bb">[91bb]</a><span class="cd"><span class="i">db</span> <span class="o">$91</span></span><span class="ce">; [0]:</span></span>
<span class="l"><a class="anc" name="91bc" href="#91bc">[91bc]</a><span class="cd"><span class="i">db</span> <span class="o">$91</span></span><span class="ce">; [1]:</span></span>
<span class="l"><a class="anc" name="91bd" href="#91bd">[91bd]</a><span class="cd"><span class="i">db</span> <span class="o">$91</span></span><span class="ce">; [2]:</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="STRING_MANTRA_IN_THE_WRONG"></a><div class="cp">;============================================================================
; String: "Mantra is in the wrong."
;
; This is used whenever an incorrect password was entered.
;
; XREFS:
;     <a href="#PASSWORD_MESSAGE_STRINGS_L">PASSWORD_MESSAGE_STRINGS_L</a> [$PRG12::91b8]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#PASSWORD_MESSAGE_STRINGS_L">PASSWORD_MESSAGE_STRINGS_L</a> [$PRG12::91b8]
;
</div><span class="l"><a class="anc" name="91be" href="#91be">[91be]</a><a href="#STRING_MANTRA_IN_THE_WRONG" class="la">STRING_MANTRA_IN_THE_WRONG:</a><span class="ce">; [$91be]</span></span>
<span class="l"><a class="anc" name="91be" href="#91be">[91be]</a><span class="cd"><span class="i">db</span> <span class="o">"Mantra is in the"</span></span><span class="ce">; [$91be] char</span></span>
<span class="l"><a class="anc" name="91ce" href="#91ce">[91ce]</a><span class="cd"><span class="i">db</span> <span class="o">" wrong."</span></span><span class="ce">; [$91ce] char</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="STRING_PASSWORD_SPACES"></a><div class="cp">;============================================================================
; String: Empty spaces
;
; This is part of the blink animation for the invalid password text.
;
; XREFS:
;     <a href="#PASSWORD_MESSAGE_STRINGS_L">PASSWORD_MESSAGE_STRINGS_L</a> [$PRG12::91b9]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#PASSWORD_MESSAGE_STRINGS_L">PASSWORD_MESSAGE_STRINGS_L</a> [$PRG12::91b9]
;
</div><span class="l"><a class="anc" name="91d5" href="#91d5">[91d5]</a><a href="#STRING_PASSWORD_SPACES" class="la">STRING_PASSWORD_SPACES:</a><span class="ce">; [$91d5]</span></span>
<span class="l"><a class="anc" name="91d5" href="#91d5">[91d5]</a><span class="cd"><span class="i">db</span> <span class="o">"                "</span></span><span class="ce">; [$91d5] char</span></span>
<span class="l"><a class="anc" name="91e5" href="#91e5">[91e5]</a><span class="cd"><span class="i">db</span> <span class="o">"       "</span></span><span class="ce">; [$91e5] char</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="STRING_ENTER_YOUR_MANTRA"></a><div class="cp">;============================================================================
; String: "Enter your mantra."
;
; This is shown at the top of the password screen.
;
; XREFS:
;     <a href="#PASSWORD_MESSAGE_STRINGS_L">PASSWORD_MESSAGE_STRINGS_L</a> [$PRG12::91ba]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#PASSWORD_MESSAGE_STRINGS_L">PASSWORD_MESSAGE_STRINGS_L</a> [$PRG12::91ba]
;
</div><span class="l"><a class="anc" name="91ec" href="#91ec">[91ec]</a><a href="#STRING_ENTER_YOUR_MANTRA" class="la">STRING_ENTER_YOUR_MANTRA:</a><span class="ce">; [$91ec]</span></span>
<span class="l"><a class="anc" name="91ec" href="#91ec">[91ec]</a><span class="cd"><span class="i">db</span> <span class="o">"  Enter your man"</span></span><span class="ce">; [$91ec] char</span></span>
<span class="l"><a class="anc" name="91fc" href="#91fc">[91fc]</a><span class="cd"><span class="i">db</span> <span class="o">"tra.   ",$00</span></span><span class="ce">; [$91fc] char</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="PASSWORD_SCREEN_PALETTE"></a><div class="cp">;============================================================================
; Palette data for the password screen.
;============================================================================
</div><span class="l"><a class="anc" name="9204" href="#9204">[9204]</a><a href="#PASSWORD_SCREEN_PALETTE" class="la">PASSWORD_SCREEN_PALETTE:</a><span class="ce">; [$9204]</span></span>
<span class="l"><a class="anc" name="9204" href="#9204">[9204]</a><span class="cd"><span class="i">db</span> <span class="o">$0f</span></span><span class="ce">; [0]:</span></span>
<span class="l"><a class="anc" name="9205" href="#9205">[9205]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [1]:</span></span>
<span class="l"><a class="anc" name="9206" href="#9206">[9206]</a><span class="cd"><span class="i">db</span> <span class="o">$10</span></span><span class="ce">; [2]:</span></span>
<span class="l"><a class="anc" name="9207" href="#9207">[9207]</a><span class="cd"><span class="i">db</span> <span class="o">$20</span></span><span class="ce">; [3]:</span></span>
<span class="l"><a class="anc" name="9208" href="#9208">[9208]</a><span class="cd"><span class="i">db</span> <span class="o">$0f</span></span><span class="ce">; [4]:</span></span>
<span class="l"><a class="anc" name="9209" href="#9209">[9209]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [5]:</span></span>
<span class="l"><a class="anc" name="920a" href="#920a">[920a]</a><span class="cd"><span class="i">db</span> <span class="o">$10</span></span><span class="ce">; [6]:</span></span>
<span class="l"><a class="anc" name="920b" href="#920b">[920b]</a><span class="cd"><span class="i">db</span> <span class="o">$20</span></span><span class="ce">; [7]:</span></span>
<span class="l"><a class="anc" name="920c" href="#920c">[920c]</a><span class="cd"><span class="i">db</span> <span class="o">$0f</span></span><span class="ce">; [8]:</span></span>
<span class="l"><a class="anc" name="920d" href="#920d">[920d]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [9]:</span></span>
<span class="l"><a class="anc" name="920e" href="#920e">[920e]</a><span class="cd"><span class="i">db</span> <span class="o">$10</span></span><span class="ce">; [10]:</span></span>
<span class="l"><a class="anc" name="920f" href="#920f">[920f]</a><span class="cd"><span class="i">db</span> <span class="o">$20</span></span><span class="ce">; [11]:</span></span>
<span class="l"><a class="anc" name="9210" href="#9210">[9210]</a><span class="cd"><span class="i">db</span> <span class="o">$0f</span></span><span class="ce">; [12]:</span></span>
<span class="l"><a class="anc" name="9211" href="#9211">[9211]</a><span class="cd"><span class="i">db</span> <span class="o">$0f</span></span><span class="ce">; [13]:</span></span>
<span class="l"><a class="anc" name="9212" href="#9212">[9212]</a><span class="cd"><span class="i">db</span> <span class="o">$0f</span></span><span class="ce">; [14]:</span></span>
<span class="l"><a class="anc" name="9213" href="#9213">[9213]</a><span class="cd"><span class="i">db</span> <span class="o">$0f</span></span><span class="ce">; [15]:</span></span>
<span class="l"><a class="anc" name="9214" href="#9214">[9214]</a><span class="cd"><span class="i">db</span> <span class="o">$0f</span></span><span class="ce">; [16]:</span></span>
<span class="l"><a class="anc" name="9215" href="#9215">[9215]</a><span class="cd"><span class="i">db</span> <span class="o">$0f</span></span><span class="ce">; [17]:</span></span>
<span class="l"><a class="anc" name="9216" href="#9216">[9216]</a><span class="cd"><span class="i">db</span> <span class="o">$27</span></span><span class="ce">; [18]:</span></span>
<span class="l"><a class="anc" name="9217" href="#9217">[9217]</a><span class="cd"><span class="i">db</span> <span class="o">$30</span></span><span class="ce">; [19]:</span></span>
<span class="l"><a class="anc" name="9218" href="#9218">[9218]</a><span class="cd"><span class="i">db</span> <span class="o">$0f</span></span><span class="ce">; [20]:</span></span>
<span class="l"><a class="anc" name="9219" href="#9219">[9219]</a><span class="cd"><span class="i">db</span> <span class="o">$06</span></span><span class="ce">; [21]:</span></span>
<span class="l"><a class="anc" name="921a" href="#921a">[921a]</a><span class="cd"><span class="i">db</span> <span class="o">$16</span></span><span class="ce">; [22]:</span></span>
<span class="l"><a class="anc" name="921b" href="#921b">[921b]</a><span class="cd"><span class="i">db</span> <span class="o">$26</span></span><span class="ce">; [23]:</span></span>
<span class="l"><a class="anc" name="921c" href="#921c">[921c]</a><span class="cd"><span class="i">db</span> <span class="o">$0f</span></span><span class="ce">; [24]:</span></span>
<span class="l"><a class="anc" name="921d" href="#921d">[921d]</a><span class="cd"><span class="i">db</span> <span class="o">$06</span></span><span class="ce">; [25]:</span></span>
<span class="l"><a class="anc" name="921e" href="#921e">[921e]</a><span class="cd"><span class="i">db</span> <span class="o">$16</span></span><span class="ce">; [26]:</span></span>
<span class="l"><a class="anc" name="921f" href="#921f">[921f]</a><span class="cd"><span class="i">db</span> <span class="o">$26</span></span><span class="ce">; [27]:</span></span>
<span class="l"><a class="anc" name="9220" href="#9220">[9220]</a><span class="cd"><span class="i">db</span> <span class="o">$0f</span></span><span class="ce">; [28]:</span></span>
<span class="l"><a class="anc" name="9221" href="#9221">[9221]</a><span class="cd"><span class="i">db</span> <span class="o">$0f</span></span><span class="ce">; [29]:</span></span>
<span class="l"></span>
<a name="PASSWORD_SCREEN_PALETTE_30_"></a><div class="c">;
; XREFS:
;     <a href="#PasswordScreen_Show">PasswordScreen_Show</a>
;
</div><span class="l"><a class="anc" name="9222" href="#9222">[9222]</a><a href="#PASSWORD_SCREEN_PALETTE_30_" class="la">PASSWORD_SCREEN_PALETTE_30_:</a><span class="ce">; [$9222]</span></span>
<span class="l"><a class="anc" name="9222" href="#9222">[9222]</a><span class="cd"><span class="i">db</span> <span class="o">$0f</span></span><span class="ce">; [30]:</span></span>
<span class="l"></span>
<a name="PASSWORD_SCREEN_PALETTE_31_"></a><div class="c">;
; XREFS:
;     <a href="#PasswordScreen_Show">PasswordScreen_Show</a>
;
</div><span class="l"><a class="anc" name="9223" href="#9223">[9223]</a><a href="#PASSWORD_SCREEN_PALETTE_31_" class="la">PASSWORD_SCREEN_PALETTE_31_:</a><span class="ce">; [$9223]</span></span>
<span class="l"><a class="anc" name="9223" href="#9223">[9223]</a><span class="cd"><span class="i">db</span> <span class="o">$0f</span></span><span class="ce">; [31]:</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="INPUT_CHARS"></a><div class="cp">;============================================================================
; Available list of input characters for the password screen, broken down by
; row.
;
; XREFS:
;     <a href="#PasswordScreen_Show">PasswordScreen_Show</a>
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#PasswordScreen_Show">PasswordScreen_Show</a>
;
</div><span class="l"><a class="anc" name="9224" href="#9224">[9224]</a><a href="#INPUT_CHARS" class="la">INPUT_CHARS:</a><span class="ce">; [$9224]</span></span>
<span class="l"><a class="anc" name="9224" href="#9224">[9224]</a><span class="cd"><span class="i">db</span> <span class="o">$21</span></span><span class="ce">; [0]: [0]:</span></span>
<span class="l"></span>
<a name="INPUT_CHARS_0__ppuAddr_1_"></a><div class="c">;
; XREFS:
;     <a href="#PasswordScreen_Show">PasswordScreen_Show</a>
;
</div><span class="l"><a class="anc" name="9225" href="#9225">[9225]</a><a href="#INPUT_CHARS_0__ppuAddr_1_" class="la">INPUT_CHARS_0__ppuAddr_1_:</a><span class="ce">; [$9225]</span></span>
<span class="l"><a class="anc" name="9225" href="#9225">[9225]</a><span class="cd"><span class="i">db</span> <span class="o">$c4</span></span><span class="ce">; [0]: [1]:</span></span>
<span class="l"></span>
<a name="INPUT_CHARS_0__chars_0_"></a><div class="c">;
; XREFS:
;     <a href="#PasswordScreen_Show">PasswordScreen_Show</a>
;
</div><span class="l"><a class="anc" name="9226" href="#9226">[9226]</a><a href="#INPUT_CHARS_0__chars_0_" class="la">INPUT_CHARS_0__chars_0_:</a><span class="ce">; [$9226]</span></span>
<span class="l"><a class="anc" name="9226" href="#9226">[9226]</a><span class="cd"><span class="i">db</span> <span class="o">"A"</span></span><span class="ce">; [$9226] char</span></span>
<span class="l"></span>
<a name="INPUT_CHARS_0__chars_1_"></a><div class="c">;
; XREFS:
;     <a href="#PasswordScreen_Show">PasswordScreen_Show</a>
;
</div><span class="l"><a class="anc" name="9227" href="#9227">[9227]</a><a href="#INPUT_CHARS_0__chars_1_" class="la">INPUT_CHARS_0__chars_1_:</a><span class="ce">; [$9227]</span></span>
<span class="l"><a class="anc" name="9227" href="#9227">[9227]</a><span class="cd"><span class="i">db</span> <span class="o">" "</span></span><span class="ce">; [$9227] char</span></span>
<span class="l"></span>
<a name="INPUT_CHARS_0__chars_2_"></a><div class="c">;
; XREFS:
;     <a href="#PasswordScreen_Show">PasswordScreen_Show</a>
;
</div><span class="l"><a class="anc" name="9228" href="#9228">[9228]</a><a href="#INPUT_CHARS_0__chars_2_" class="la">INPUT_CHARS_0__chars_2_:</a><span class="ce">; [$9228]</span></span>
<span class="l"><a class="anc" name="9228" href="#9228">[9228]</a><span class="cd"><span class="i">db</span> <span class="o">"B"</span></span><span class="ce">; [$9228] char</span></span>
<span class="l"></span>
<a name="INPUT_CHARS_0__chars_3_"></a><div class="c">;
; XREFS:
;     <a href="#PasswordScreen_Show">PasswordScreen_Show</a>
;
</div><span class="l"><a class="anc" name="9229" href="#9229">[9229]</a><a href="#INPUT_CHARS_0__chars_3_" class="la">INPUT_CHARS_0__chars_3_:</a><span class="ce">; [$9229]</span></span>
<span class="l"><a class="anc" name="9229" href="#9229">[9229]</a><span class="cd"><span class="i">db</span> <span class="o">" C D E F G H I J"</span></span><span class="ce">; [$9229] char</span></span>
<span class="l"><a class="anc" name="9239" href="#9239">[9239]</a><span class="cd"><span class="i">db</span> <span class="o">" K L M"</span></span><span class="ce">; [$9239] char</span></span>
<span class="l"></span>
<span class="l"><span class="cd"><span class="i">db</span> <span class="o">$22</span></span><span class="ce">; [1]: [0]:</span></span>
<span class="l"><a class="anc" name="9240" href="#9240">[9240]</a><span class="cd"><span class="i">db</span> <span class="o">$04</span></span><span class="ce">; [1]: [1]:</span></span>
<span class="l"><a class="anc" name="9241" href="#9241">[9241]</a><span class="cd"><span class="i">db</span> <span class="o">"N O P Q R S T U "</span></span><span class="ce">; [$9241] char</span></span>
<span class="l"><a class="anc" name="9251" href="#9251">[9251]</a><span class="cd"><span class="i">db</span> <span class="o">"V W X Y Z"</span></span><span class="ce">; [$9251] char</span></span>
<span class="l"></span>
<span class="l"><span class="cd"><span class="i">db</span> <span class="o">$22</span></span><span class="ce">; [2]: [0]:</span></span>
<span class="l"><a class="anc" name="925b" href="#925b">[925b]</a><span class="cd"><span class="i">db</span> <span class="o">$44</span></span><span class="ce">; [2]: [1]:</span></span>
<span class="l"><a class="anc" name="925c" href="#925c">[925c]</a><span class="cd"><span class="i">db</span> <span class="o">"a b c d e f g h "</span></span><span class="ce">; [$925c] char</span></span>
<span class="l"><a class="anc" name="926c" href="#926c">[926c]</a><span class="cd"><span class="i">db</span> <span class="o">"i j k l m"</span></span><span class="ce">; [$926c] char</span></span>
<span class="l"></span>
<span class="l"><span class="cd"><span class="i">db</span> <span class="o">$22</span></span><span class="ce">; [3]: [0]:</span></span>
<span class="l"><a class="anc" name="9276" href="#9276">[9276]</a><span class="cd"><span class="i">db</span> <span class="o">$84</span></span><span class="ce">; [3]: [1]:</span></span>
<span class="l"><a class="anc" name="9277" href="#9277">[9277]</a><span class="cd"><span class="i">db</span> <span class="o">"n o p q r s t u "</span></span><span class="ce">; [$9277] char</span></span>
<span class="l"><a class="anc" name="9287" href="#9287">[9287]</a><span class="cd"><span class="i">db</span> <span class="o">"v w x y z"</span></span><span class="ce">; [$9287] char</span></span>
<span class="l"></span>
<span class="l"><span class="cd"><span class="i">db</span> <span class="o">$22</span></span><span class="ce">; [4]: [0]:</span></span>
<span class="l"><a class="anc" name="9291" href="#9291">[9291]</a><span class="cd"><span class="i">db</span> <span class="o">$c4</span></span><span class="ce">; [4]: [1]:</span></span>
<span class="l"><a class="anc" name="9292" href="#9292">[9292]</a><span class="cd"><span class="i">db</span> <span class="o">"0 1 2 3 4 5 6 7 "</span></span><span class="ce">; [$9292] char</span></span>
<span class="l"><a class="anc" name="92a2" href="#92a2">[92a2]</a><span class="cd"><span class="i">db</span> <span class="o">"8 9 , ?  "</span></span><span class="ce">; [$92a2] char</span></span>
<span class="l"></span>
<span class="l"><span class="cd"><span class="i">db</span> <span class="o">$23</span></span><span class="ce">; [5]: [0]:</span></span>
<span class="l"><a class="anc" name="92ac" href="#92ac">[92ac]</a><span class="cd"><span class="i">db</span> <span class="o">$04</span></span><span class="ce">; [5]: [1]:</span></span>
<span class="l"><a class="anc" name="92ad" href="#92ad">[92ad]</a><span class="cd"><span class="i">db</span> <span class="o">"{|} ~|",$7f," DEL END "</span></span><span class="ce">; [$92ad] char</span></span>
<span class="l"><a class="anc" name="92bd" href="#92bd">[92bd]</a><span class="cd"><span class="i">db</span> <span class="o">"         "</span></span><span class="ce">; [$92bd] char</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="PASSWORD_CURSOR_START_PPU_ADDRS_L"></a><div class="cp">;============================================================================
; PPU tile positions for each input character cursor position.
;
; XREFS:
;     <a href="#PasswordScreen_WriteCharTile">PasswordScreen_WriteCharTile</a>
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#PasswordScreen_WriteCharTile">PasswordScreen_WriteCharTile</a>
;
</div><span class="l"><a class="anc" name="92c6" href="#92c6">[92c6]</a><a href="#PASSWORD_CURSOR_START_PPU_ADDRS_L" class="la">PASSWORD_CURSOR_START_PPU_ADDRS_L:</a><span class="ce">; [$92c6]</span></span>
<span class="l"><a class="anc" name="92c6" href="#92c6">[92c6]</a><span class="cd"><span class="i">db</span> <span class="o">$28</span></span><span class="ce">; [0]:</span></span>
<span class="l"><a class="anc" name="92c7" href="#92c7">[92c7]</a><span class="cd"><span class="i">db</span> <span class="o">$48</span></span><span class="ce">; [1]:</span></span>
<span class="l"></span>
<a name="PASSWORD_CURSOR_START_PPU_ADDRS_U"></a><div class="c">;
; XREFS:
;     <a href="#PasswordScreen_WriteCharTile">PasswordScreen_WriteCharTile</a>
;
</div><span class="l"><a class="anc" name="92c8" href="#92c8">[92c8]</a><a href="#PASSWORD_CURSOR_START_PPU_ADDRS_U" class="la">PASSWORD_CURSOR_START_PPU_ADDRS_U:</a><span class="ce">; [$92c8]</span></span>
<span class="l"><a class="anc" name="92c8" href="#92c8">[92c8]</a><span class="cd"><span class="i">db</span> <span class="o">$21</span></span><span class="ce">; [0]:</span></span>
<span class="l"><a class="anc" name="92c9" href="#92c9">[92c9]</a><span class="cd"><span class="i">db</span> <span class="o">$21</span></span><span class="ce">; [1]:</span></span>
</pre><pre><a name="PasswordScreen_DrawPasswordFieldCursor"></a><div class="cp">;============================================================================
; TODO: Document PasswordScreen_DrawPasswordFieldCursor
;
; INPUTS:
;     X
;
; OUTPUTS:
;     TODO
;
; XREFS:
;     <a href="#PasswordScreen_DrawAndHandleInputLoop">PasswordScreen_DrawAndHandleInputLoop</a>
;============================================================================
</div><span class="l"><a class="anc" name="92ca" href="#92ca">[92ca]</a><a href="#PasswordScreen_DrawPasswordFieldCursor" class="la">PasswordScreen_DrawPasswordFieldCursor:</a><span class="ce">; [$92ca]</span></span>
<div class="c">;
; Only proceed if the interrupt counter's lower nibble is set.
;
</div><span class="l"><a class="anc" name="92ca" href="#92ca">[92ca]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="RAM.html#InterruptCounter">InterruptCounter</a></span></span><span class="ce">; Load the interrupt counter.</span></span>
<span class="l"><a class="anc" name="92cc" href="#92cc">[92cc]</a><span class="cd"><span class="i">AND</span> <span class="o">#$0f</span></span><span class="ce">; Keep the lower nibble.</span></span>
<span class="l"><a class="anc" name="92ce" href="#92ce">[92ce]</a><span class="cd"><span class="i">BNE</span> <span class="o"><a href="#RETURN_9311">RETURN_9311</a></span></span><span class="ce">; If &gt; 0, return.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Check whether to draw the character or the cursor.
;
</div><span class="l"><a class="anc" name="92d0" href="#92d0">[92d0]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="RAM.html#InterruptCounter">InterruptCounter</a></span></span><span class="ce">; Load the interrupt counter.</span></span>
<span class="l"><a class="anc" name="92d2" href="#92d2">[92d2]</a><span class="cd"><span class="i">AND</span> <span class="o">#$10</span></span><span class="ce">; Is bit 5 set?</span></span>
<span class="l"><a class="anc" name="92d4" href="#92d4">[92d4]</a><span class="cd"><span class="i">BEQ</span> <span class="o"><a href="#PasswordScreen_DrawAtCursorPosition">PasswordScreen_DrawAtCursorPosition</a></span></span><span class="ce">; If set, jump to write the character.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Draw the cursor.
;
</div><span class="l"><a class="anc" name="92d6" href="#92d6">[92d6]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$60</span></span><span class="ce">; 0x60 == Solid block (cursor)</span></span>
<span class="l"><a class="anc" name="92d8" href="#92d8">[92d8]</a><span class="cd"><span class="i">JMP</span> <span class="o"><a href="#PasswordScreen_WriteCharTile">PasswordScreen_WriteCharTile</a></span></span><span class="ce">; Draw it.</span></span>
<span class="l"></span>
<span class="l"></span>
</pre><pre><a name="PasswordScreen_DrawAtCursorPosition"></a><div class="cp">;============================================================================
; Draw the character at the current cursor position.
;
; If the cursor's on a position without an inputted
; character, a "_" will be drawn instead.
;
; This jumps/falls through to
; <a href="#PasswordScreen_WriteCharTile">PasswordScreen_WriteCharTile</a>.
;
; INPUTS:
;     <a href="RAM.html#Password_FieldCursorPos">Password_FieldCursorPos</a>:
;         The cursor position.
;
;     <a href="RAM.html#ScreenBuffer">ScreenBuffer</a>:
;         The entered characters buffer.
;
;     <a href="#PASSWORD_ENTERED_CHARS">PASSWORD_ENTERED_CHARS</a>:
;         The lookup table of character codes to display tiles.
;
; OUTPUTS:
;     See fall-through.
;
; CALLS:
;     <a href="#PasswordScreen_WriteCharTile">PasswordScreen_WriteCharTile</a>
;
; XREFS:
;     <a href="#PasswordScreen_DrawPasswordFieldCursor">PasswordScreen_DrawPasswordFieldCursor</a>
;     <a href="#PasswordScreen_HandleDeleteAtCursor">PasswordScreen_HandleDeleteAtCursor</a>
;     <a href="#PasswordScreen_HandleDeleteLastChar">PasswordScreen_HandleDeleteLastChar</a>
;     <a href="#PasswordScreen_HandleInputChar">PasswordScreen_HandleInputChar</a>
;     <a href="#PasswordScreen_HandleMoveCursorLeft">PasswordScreen_HandleMoveCursorLeft</a>
;     <a href="#PasswordScreen_HandleMoveCursorRight">PasswordScreen_HandleMoveCursorRight</a>
;============================================================================
</div><span class="l"><a class="anc" name="92db" href="#92db">[92db]</a><a href="#PasswordScreen_DrawAtCursorPosition" class="la">PasswordScreen_DrawAtCursorPosition:</a><span class="ce">; [$92db]</span></span>
<div class="c">;
; Check the character at the cursor position.
;
</div><span class="l"><a class="anc" name="92db" href="#92db">[92db]</a><span class="cd"><span class="i">LDX</span> <span class="o">a:<a href="RAM.html#Password_FieldCursorPos">Password_FieldCursorPos</a></span></span><span class="ce">; X = Cursor position.</span></span>
<span class="l"><a class="anc" name="92de" href="#92de">[92de]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="RAM.html#ScreenBuffer">ScreenBuffer</a>,X</span></span><span class="ce">; A = Character at that position.</span></span>
<span class="l"><a class="anc" name="92e1" href="#92e1">[92e1]</a><span class="cd"><span class="i">CMP</span> <span class="o">#$ff</span></span><span class="ce">; Is it 0xFF (unset)?</span></span>
<span class="l"><a class="anc" name="92e3" href="#92e3">[92e3]</a><span class="cd"><span class="i">BEQ</span> <span class="o"><a href="#@_writeBlankChar">@_writeBlankChar</a></span></span><span class="ce">; If not, jump.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; There's no character at this position.
;
</div><span class="l"><a class="anc" name="92e5" href="#92e5">[92e5]</a><span class="cd"><span class="i">TAX</span></span><span class="ce">; X = A (character offset)</span></span>
<span class="l"><a class="anc" name="92e6" href="#92e6">[92e6]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="#PASSWORD_ENTERED_CHARS">PASSWORD_ENTERED_CHARS</a>,X</span></span><span class="ce">; Get the character value for that offset.</span></span>
<span class="l"><a class="anc" name="92e9" href="#92e9">[92e9]</a><span class="cd"><span class="i">BPL</span> <span class="o"><a href="#PasswordScreen_WriteCharTile">PasswordScreen_WriteCharTile</a></span></span><span class="ce">; Write it.</span></span>
<span class="l"></span>
<a name=":92eb:@_writeBlankChar"></a><span class="l"><a class="anc" name="92eb" href="#92eb">[92eb]</a><a href="#:92eb:@_writeBlankChar" class="lla">@_writeBlankChar:</a><span class="ce">; [$92eb]</span></span>
<span class="l"><a class="anc" name="92eb" href="#92eb">[92eb]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$5f</span></span><span class="ce">; 0x5F == "_" (blank) character</span></span>
<span class="l"></span>
<div class="c">;
; v-- Fall through --v
;
</div><span class="l"></span>
<span class="l"></span>
</pre><pre><a name="PasswordScreen_WriteCharTile"></a><div class="cp">;============================================================================
; Write the tile for the given character to the PPU buffer.
;
; INPUTS:
;     A:
;         The index of the character in the password tiles
;         table.
;
;     <a href="RAM.html#Password_FieldCursorPos">Password_FieldCursorPos</a>:
;         The 0-based index of the cursor in the password
;         field.
;
;     <a href="#PASSWORD_CURSOR_START_PPU_ADDRS_U">PASSWORD_CURSOR_START_PPU_ADDRS_U</a>:
;     <a href="#PASSWORD_CURSOR_START_PPU_ADDRS_L">PASSWORD_CURSOR_START_PPU_ADDRS_L</a>:
;         The address lookup tables for the character tiles.
;
; OUTPUTS:
;     <a href="RAM.html#PPUBuffer_WriteOffset">PPUBuffer_WriteOffset</a>:
;         The updated write offset for the PPU buffer.
;
;     <a href="RAM.html#PPU_TargetAddr">PPU_TargetAddr</a>:
;     <a href="RAM.html#PPU_TargetAddr">PPU_TargetAddr</a>+1:
;         Clobbered.
;
; CALLS:
;     <a href="PRG15_MIRROR.html#PPUBuffer_QueueCommandOrLength">PPUBuffer_QueueCommandOrLength</a>
;     <a href="PRG15_MIRROR.html#PPUBuffer_Set">PPUBuffer_Set</a>
;
; XREFS:
;     <a href="#PasswordScreen_DrawAtCursorPosition">PasswordScreen_DrawAtCursorPosition</a>
;     <a href="#PasswordScreen_DrawPasswordFieldCursor">PasswordScreen_DrawPasswordFieldCursor</a>
;============================================================================
</div><span class="l"><a class="anc" name="92ed" href="#92ed">[92ed]</a><a href="#PasswordScreen_WriteCharTile" class="la">PasswordScreen_WriteCharTile:</a><span class="ce">; [$92ed]</span></span>
<span class="l"><a class="anc" name="92ed" href="#92ed">[92ed]</a><span class="cd"><span class="i">PHA</span></span><span class="ce">; Push the tile value to the stack.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Determine the index to draw to for the cursor position.
;
</div><span class="l"><a class="anc" name="92ee" href="#92ee">[92ee]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#Password_FieldCursorPos">Password_FieldCursorPos</a></span></span><span class="ce">; Load the cursor position in the password field.</span></span>
<span class="l"><a class="anc" name="92f1" href="#92f1">[92f1]</a><span class="cd"><span class="i">LSR</span> <span class="o">A</span></span><span class="ce">; Divide by 16.</span></span>
<span class="l"><a class="anc" name="92f2" href="#92f2">[92f2]</a><span class="cd"><span class="i">LSR</span> <span class="o">A</span></span></span>
<span class="l"><a class="anc" name="92f3" href="#92f3">[92f3]</a><span class="cd"><span class="i">LSR</span> <span class="o">A</span></span></span>
<span class="l"><a class="anc" name="92f4" href="#92f4">[92f4]</a><span class="cd"><span class="i">LSR</span> <span class="o">A</span></span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Look up the PPU address for that index.
;
</div><span class="l"><a class="anc" name="92f5" href="#92f5">[92f5]</a><span class="cd"><span class="i">TAY</span></span><span class="ce">; Y = A</span></span>
<span class="l"><a class="anc" name="92f6" href="#92f6">[92f6]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="#PASSWORD_CURSOR_START_PPU_ADDRS_U">PASSWORD_CURSOR_START_PPU_ADDRS_U</a>,Y</span></span><span class="ce">; A = Upper byte of the PPU address for this position.</span></span>
<span class="l"><a class="anc" name="92f9" href="#92f9">[92f9]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#PPU_TargetAddr_U">PPU_TargetAddr_U</a></span></span><span class="ce">; Store it.</span></span>
<span class="l"><a class="anc" name="92fb" href="#92fb">[92fb]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#Password_FieldCursorPos">Password_FieldCursorPos</a></span></span><span class="ce">; Load the cursor position again.</span></span>
<span class="l"><a class="anc" name="92fe" href="#92fe">[92fe]</a><span class="cd"><span class="i">AND</span> <span class="o">#$0f</span></span><span class="ce">; Keep the lower nibble.</span></span>
<span class="l"><a class="anc" name="9300" href="#9300">[9300]</a><span class="cd"><span class="i">CLC</span></span></span>
<span class="l"><a class="anc" name="9301" href="#9301">[9301]</a><span class="cd"><span class="i">ADC</span> <span class="o"><a href="#PASSWORD_CURSOR_START_PPU_ADDRS_L">PASSWORD_CURSOR_START_PPU_ADDRS_L</a>,Y</span></span><span class="ce">; Add the lower byte of the PPU address.</span></span>
<span class="l"><a class="anc" name="9304" href="#9304">[9304]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#PPU_TargetAddr">PPU_TargetAddr</a></span></span><span class="ce">; Store as the target address to write to.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Write to the PPU buffer.
;
</div><span class="l"><a class="anc" name="9306" href="#9306">[9306]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$01</span></span><span class="ce">; A = 1 (write length)</span></span>
<span class="l"><a class="anc" name="9308" href="#9308">[9308]</a><span class="cd"><span class="i">JSR</span> <span class="o">$cfdc</span></span><span class="ce">; Queue the length.</span></span>
<span class="l"><a class="anc" name="930b" href="#930b">[930b]</a><span class="cd"><span class="i">PLA</span></span><span class="ce">; Pull the caller-provided tile value.</span></span>
<span class="l"><a class="anc" name="930c" href="#930c">[930c]</a><span class="cd"><span class="i">JSR</span> <span class="o">$f845</span></span><span class="ce">; Write the tile to the buffer.</span></span>
<span class="l"><a class="anc" name="930f" href="#930f">[930f]</a><span class="cd"><span class="i">STX</span> <span class="o"><a href="RAM.html#PPUBuffer_WriteOffset">PPUBuffer_WriteOffset</a></span></span><span class="ce">; Update the write offset.</span></span>
<span class="l"></span>
<a name="RETURN_9311"></a><div class="c">;
; XREFS:
;     <a href="#PasswordScreen_DrawPasswordFieldCursor">PasswordScreen_DrawPasswordFieldCursor</a>
;
</div><span class="l"><a class="anc" name="9311" href="#9311">[9311]</a><a href="#RETURN_9311" class="la">RETURN_9311:</a><span class="ce">; [$9311]</span></span>
<span class="l"><a class="anc" name="9311" href="#9311">[9311]</a><span class="cd"><span class="i">RTS</span></span></span>
<span class="l"></span>
</pre><pre><a name="PasswordScreen_HandleInputChar"></a><div class="cp">;============================================================================
; TODO: Document PasswordScreen_HandleInputChar
;
; INPUTS:
;     A
;
; OUTPUTS:
;     TODO
;
; XREFS:
;     <a href="#PasswordScreen_HandleInput">PasswordScreen_HandleInput</a>
;============================================================================
</div><span class="l"><a class="anc" name="9312" href="#9312">[9312]</a><a href="#PasswordScreen_HandleInputChar" class="la">PasswordScreen_HandleInputChar:</a><span class="ce">; [$9312]</span></span>
<span class="l"><a class="anc" name="9312" href="#9312">[9312]</a><span class="cd"><span class="i">TAX</span></span><span class="ce">; X = A</span></span>
<span class="l"><a class="anc" name="9313" href="#9313">[9313]</a><span class="cd"><span class="i">BMI</span> <span class="o"><a href="#PasswordScreen_HandleMoveCursorOrDelete">PasswordScreen_HandleMoveCursorOrDelete</a></span></span><span class="ce">; If a special character, jump to handle it.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Place the character in the buffer.
;
</div><span class="l"><a class="anc" name="9315" href="#9315">[9315]</a><span class="cd"><span class="i">LDX</span> <span class="o">a:<a href="RAM.html#Password_FieldCursorPos">Password_FieldCursorPos</a></span></span><span class="ce">; X = Current cursor position.</span></span>
<span class="l"><a class="anc" name="9318" href="#9318">[9318]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#ScreenBuffer">ScreenBuffer</a>,X</span></span><span class="ce">; Store in the screen buffer.</span></span>
<span class="l"><a class="anc" name="931b" href="#931b">[931b]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#PasswordScreen_DrawAtCursorPosition">PasswordScreen_DrawAtCursorPosition</a></span></span><span class="ce">; Write the character.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Advance the cursor position by one.
;
</div><span class="l"><a class="anc" name="931e" href="#931e">[931e]</a><span class="cd"><span class="i">LDX</span> <span class="o">a:<a href="RAM.html#Password_FieldCursorPos">Password_FieldCursorPos</a></span></span><span class="ce">; X = Cursor position again.</span></span>
<span class="l"><a class="anc" name="9321" href="#9321">[9321]</a><span class="cd"><span class="i">INX</span></span><span class="ce">; X++</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Check if the maximum number of characters have been entered.
;
</div><span class="l"><a class="anc" name="9322" href="#9322">[9322]</a><span class="cd"><span class="i">CPX</span> <span class="o">a:<a href="RAM.html#Password_MaxChars">Password_MaxChars</a></span></span><span class="ce">; Has it reached the max number of characters?</span></span>
<span class="l"><a class="anc" name="9325" href="#9325">[9325]</a><span class="cd"><span class="i">BEQ</span> <span class="o"><a href="#@_maxCharsReached">@_maxCharsReached</a></span></span><span class="ce">; If so, jump.</span></span>
<span class="l"><a class="anc" name="9327" href="#9327">[9327]</a><span class="cd"><span class="i">DEX</span></span><span class="ce">; X--</span></span>
<span class="l"><a class="anc" name="9328" href="#9328">[9328]</a><span class="cd"><span class="i">CPX</span> <span class="o">a:<a href="RAM.html#Password_EnteredCharsLength">Password_EnteredCharsLength</a></span></span><span class="ce">; Was the cursor at the end of the entered characters?</span></span>
<span class="l"><a class="anc" name="932b" href="#932b">[932b]</a><span class="cd"><span class="i">BNE</span> <span class="o"><a href="#@_advanceCursorPos">@_advanceCursorPos</a></span></span><span class="ce">; If not, jump.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; The cursor was at the end of the password. Advance the
; number of entered characters.
;
</div><span class="l"><a class="anc" name="932d" href="#932d">[932d]</a><span class="cd"><span class="i">INC</span> <span class="o">a:<a href="RAM.html#Password_EnteredCharsLength">Password_EnteredCharsLength</a></span></span><span class="ce">; Increment the entered chars length.</span></span>
<span class="l"></span>
<a name=":9330:@_advanceCursorPos"></a><span class="l"><a class="anc" name="9330" href="#9330">[9330]</a><a href="#:9330:@_advanceCursorPos" class="lla">@_advanceCursorPos:</a><span class="ce">; [$9330]</span></span>
<span class="l"><a class="anc" name="9330" href="#9330">[9330]</a><span class="cd"><span class="i">INC</span> <span class="o">a:<a href="RAM.html#Password_FieldCursorPos">Password_FieldCursorPos</a></span></span><span class="ce">; Increment the cursor position.</span></span>
<span class="l"><a class="anc" name="9333" href="#9333">[9333]</a><span class="cd"><span class="i">JMP</span> <span class="o"><a href="#PasswordScreen_DrawAtCursorPosition">PasswordScreen_DrawAtCursorPosition</a></span></span><span class="ce">; Write the character.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name=":9336:@_maxCharsReached"></a><div class="c">;
; The max number of characters was reached. Move the cursor
; back to the start of the field and write the character.
;
</div><span class="l"><a class="anc" name="9336" href="#9336">[9336]</a><a href="#:9336:@_maxCharsReached" class="lla">@_maxCharsReached:</a><span class="ce">; [$9336]</span></span>
<span class="l"><a class="anc" name="9336" href="#9336">[9336]</a><span class="cd"><span class="i">STX</span> <span class="o">a:<a href="RAM.html#Password_EnteredCharsLength">Password_EnteredCharsLength</a></span></span><span class="ce">; Store the new entered password length.</span></span>
<span class="l"><a class="anc" name="9339" href="#9339">[9339]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$00</span></span></span>
<span class="l"><a class="anc" name="933b" href="#933b">[933b]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#Password_FieldCursorPos">Password_FieldCursorPos</a></span></span><span class="ce">; Reset the cursor position to 0.</span></span>
<span class="l"><a class="anc" name="933e" href="#933e">[933e]</a><span class="cd"><span class="i">JMP</span> <span class="o"><a href="#PasswordScreen_DrawAtCursorPosition">PasswordScreen_DrawAtCursorPosition</a></span></span><span class="ce">; Write the character.</span></span>
<span class="l"></span>
<span class="l"></span>
</pre><pre><a name="Sound_PlayInputSound"></a><div class="cp">;============================================================================
; Play the Character Input sound.
;
; INPUTS:
;     None
;
; OUTPUTS:
;     None
;
; CALLS:
;     <a href="PRG15_MIRROR.html#Sound_PlayEffect">Sound_PlayEffect</a>
;
; XREFS:
;     <a href="#PasswordScreen_9175">PasswordScreen_9175</a>
;     <a href="#PasswordScreen_HandleMoveCursorRight">PasswordScreen_HandleMoveCursorRight</a>
;     <a href="#PasswordScreen_HandleWrongPasswordAndWaitForInput">PasswordScreen_HandleWrongPasswordAndWaitForInput</a>
;============================================================================
</div><span class="l"><a class="anc" name="9341" href="#9341">[9341]</a><a href="#Sound_PlayInputSound" class="la">Sound_PlayInputSound:</a><span class="ce">; [$9341]</span></span>
<span class="l"><a class="anc" name="9341" href="#9341">[9341]</a><span class="cd"><span class="i">PHA</span></span><span class="ce">; Push A to the stack.</span></span>
<span class="l"><a class="anc" name="9342" href="#9342">[9342]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$0d</span></span><span class="ce">; 0xD == Character Input sound</span></span>
<span class="l"><a class="anc" name="9344" href="#9344">[9344]</a><span class="cd"><span class="i">JSR</span> <span class="o">$d0e4</span></span><span class="ce">; Play the sound effect.</span></span>
<span class="l"><a class="anc" name="9347" href="#9347">[9347]</a><span class="cd"><span class="i">PLA</span></span><span class="ce">; Pop A from the stack.</span></span>
<span class="l"><a class="anc" name="9348" href="#9348">[9348]</a><span class="cd"><span class="i">RTS</span></span></span>
<span class="l"></span>
<span class="l"></span>
</pre><pre><a name="Sound_PlayMoveCursorSound"></a><div class="cp">;============================================================================
; Play the Move Cursor sound.
;
; INPUTS:
;     None
;
; OUTPUTS:
;     None
;
; CALLS:
;     <a href="PRG15_MIRROR.html#Sound_PlayEffect">Sound_PlayEffect</a>
;
; XREFS:
;     <a href="#Password_HandleDPadInput">Password_HandleDPadInput</a>
;============================================================================
</div><span class="l"><a class="anc" name="9349" href="#9349">[9349]</a><a href="#Sound_PlayMoveCursorSound" class="la">Sound_PlayMoveCursorSound:</a><span class="ce">; [$9349]</span></span>
<span class="l"><a class="anc" name="9349" href="#9349">[9349]</a><span class="cd"><span class="i">PHA</span></span><span class="ce">; Push A to the stack.</span></span>
<span class="l"><a class="anc" name="934a" href="#934a">[934a]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$0b</span></span><span class="ce">; 0xB == Cursor Movement sound.</span></span>
<span class="l"><a class="anc" name="934c" href="#934c">[934c]</a><span class="cd"><span class="i">JSR</span> <span class="o">$d0e4</span></span><span class="ce">; Play the sound effect.</span></span>
<span class="l"><a class="anc" name="934f" href="#934f">[934f]</a><span class="cd"><span class="i">PLA</span></span><span class="ce">; Pop A from the stack.</span></span>
<span class="l"></span>
<a name="RETURN_9350"></a><div class="c">;
; XREFS:
;     <a href="#PasswordScreen_HandleMoveCursorOrDelete">PasswordScreen_HandleMoveCursorOrDelete</a>
;
</div><span class="l"><a class="anc" name="9350" href="#9350">[9350]</a><a href="#RETURN_9350" class="la">RETURN_9350:</a><span class="ce">; [$9350]</span></span>
<span class="l"><a class="anc" name="9350" href="#9350">[9350]</a><span class="cd"><span class="i">RTS</span></span></span>
</pre><pre><a name="PasswordScreen_HandleMoveCursorOrDelete"></a><div class="cp">;============================================================================
; TODO: Document PasswordScreen_HandleMoveCursorOrDelete
;
; INPUTS:
;     A
;
; OUTPUTS:
;     TODO
;
; XREFS:
;     <a href="#PasswordScreen_HandleInputChar">PasswordScreen_HandleInputChar</a>
;============================================================================
</div><span class="l"><a class="anc" name="9351" href="#9351">[9351]</a><a href="#PasswordScreen_HandleMoveCursorOrDelete" class="la">PasswordScreen_HandleMoveCursorOrDelete:</a><span class="ce">; [$9351]</span></span>
<div class="c">;
; Check if this is Move Left (0x81).
;
</div><span class="l"><a class="anc" name="9351" href="#9351">[9351]</a><span class="cd"><span class="i">CMP</span> <span class="o">#$81</span></span><span class="ce">; Is this Move Left?</span></span>
<span class="l"><a class="anc" name="9353" href="#9353">[9353]</a><span class="cd"><span class="i">BEQ</span> <span class="o"><a href="#PasswordScreen_HandleMoveCursorLeft">PasswordScreen_HandleMoveCursorLeft</a></span></span><span class="ce">; If so, jump to handle Move Left.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Check if this is Move Right (0x80).
;
</div><span class="l"><a class="anc" name="9355" href="#9355">[9355]</a><span class="cd"><span class="i">CMP</span> <span class="o">#$80</span></span><span class="ce">; Is this Move Right?</span></span>
<span class="l"><a class="anc" name="9357" href="#9357">[9357]</a><span class="cd"><span class="i">BEQ</span> <span class="o"><a href="#PasswordScreen_HandleMoveCursorRight">PasswordScreen_HandleMoveCursorRight</a></span></span><span class="ce">; If so, jump to handle Move Right.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Check if this is Delete Character (0x82).
;
</div><span class="l"><a class="anc" name="9359" href="#9359">[9359]</a><span class="cd"><span class="i">CMP</span> <span class="o">#$82</span></span><span class="ce">; Is this DEL?</span></span>
<span class="l"><a class="anc" name="935b" href="#935b">[935b]</a><span class="cd"><span class="i">BNE</span> <span class="o"><a href="#RETURN_9350">RETURN_9350</a></span></span><span class="ce">; If not, return.</span></span>
<span class="l"><a class="anc" name="935d" href="#935d">[935d]</a><span class="cd"><span class="i">JMP</span> <span class="o"><a href="#PasswordScreen_HandleDeleteAtCursor">PasswordScreen_HandleDeleteAtCursor</a></span></span><span class="ce">; Else, jump to handle DEL.</span></span>
</pre><pre><a name="PasswordScreen_HandleMoveCursorLeft"></a><div class="cp">;============================================================================
; TODO: Document PasswordScreen_HandleMoveCursorLeft
;
; INPUTS:
;     None.
;
; OUTPUTS:
;     TODO
;
; XREFS:
;     <a href="#PasswordScreen_HandleMoveCursorOrDelete">PasswordScreen_HandleMoveCursorOrDelete</a>
;============================================================================
</div><span class="l"><a class="anc" name="9360" href="#9360">[9360]</a><a href="#PasswordScreen_HandleMoveCursorLeft" class="la">PasswordScreen_HandleMoveCursorLeft:</a><span class="ce">; [$9360]</span></span>
<div class="c">;
; Check if there are any entered characters.
;
</div><span class="l"><a class="anc" name="9360" href="#9360">[9360]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#Password_EnteredCharsLength">Password_EnteredCharsLength</a></span></span><span class="ce">; Is the password field empty?</span></span>
<span class="l"><a class="anc" name="9363" href="#9363">[9363]</a><span class="cd"><span class="i">BEQ</span> <span class="o"><a href="#Call_Sound_PlayInputSound">Call_Sound_PlayInputSound</a></span></span><span class="ce">; If so, play the input sound and return.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; There are entered characters. Check if we're at the
; beginning of the password.
;
</div><span class="l"><a class="anc" name="9365" href="#9365">[9365]</a><span class="cd"><span class="i">LDX</span> <span class="o">a:<a href="RAM.html#Password_FieldCursorPos">Password_FieldCursorPos</a></span></span><span class="ce">; Is the cursor position &gt; 0?</span></span>
<span class="l"><a class="anc" name="9368" href="#9368">[9368]</a><span class="cd"><span class="i">BNE</span> <span class="o"><a href="#@LAB_PRG12__937d">@LAB_PRG12__937d</a></span></span><span class="ce">; If so, jump.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; The cursor is at the beginning of the password.
;
</div><span class="l"><a class="anc" name="936a" href="#936a">[936a]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#PasswordScreen_DrawAtCursorPosition">PasswordScreen_DrawAtCursorPosition</a></span></span></span>
<span class="l"><a class="anc" name="936d" href="#936d">[936d]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#Password_EnteredCharsLength">Password_EnteredCharsLength</a></span></span><span class="ce">; Get the number of entered characters.</span></span>
<span class="l"><a class="anc" name="9370" href="#9370">[9370]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#Password_FieldCursorPos">Password_FieldCursorPos</a></span></span><span class="ce">; Set the cursor position to the end of it.</span></span>
<span class="l"><a class="anc" name="9373" href="#9373">[9373]</a><span class="cd"><span class="i">CMP</span> <span class="o">a:<a href="RAM.html#Password_MaxChars">Password_MaxChars</a></span></span></span>
<span class="l"><a class="anc" name="9376" href="#9376">[9376]</a><span class="cd"><span class="i">BNE</span> <span class="o"><a href="#@LAB_PRG12__9383">@LAB_PRG12__9383</a></span></span></span>
<span class="l"><a class="anc" name="9378" href="#9378">[9378]</a><span class="cd"><span class="i">DEC</span> <span class="o">a:<a href="RAM.html#Password_FieldCursorPos">Password_FieldCursorPos</a></span></span></span>
<span class="l"><a class="anc" name="937b" href="#937b">[937b]</a><span class="cd"><span class="i">BNE</span> <span class="o"><a href="#@LAB_PRG12__9383">@LAB_PRG12__9383</a></span></span></span>
<span class="l"></span>
<a name=":937d:@LAB_PRG12__937d"></a><span class="l"><a class="anc" name="937d" href="#937d">[937d]</a><a href="#:937d:@LAB_PRG12__937d" class="lla">@LAB_PRG12__937d:</a><span class="ce">; [$937d]</span></span>
<span class="l"><a class="anc" name="937d" href="#937d">[937d]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#PasswordScreen_DrawAtCursorPosition">PasswordScreen_DrawAtCursorPosition</a></span></span></span>
<span class="l"><a class="anc" name="9380" href="#9380">[9380]</a><span class="cd"><span class="i">DEC</span> <span class="o">a:<a href="RAM.html#Password_FieldCursorPos">Password_FieldCursorPos</a></span></span></span>
<span class="l"></span>
<a name=":9383:@LAB_PRG12__9383"></a><span class="l"><a class="anc" name="9383" href="#9383">[9383]</a><a href="#:9383:@LAB_PRG12__9383" class="lla">@LAB_PRG12__9383:</a><span class="ce">; [$9383]</span></span>
<span class="l"><a class="anc" name="9383" href="#9383">[9383]</a><span class="cd"><span class="i">JMP</span> <span class="o"><a href="#PasswordScreen_DrawAtCursorPosition">PasswordScreen_DrawAtCursorPosition</a></span></span></span>
<span class="l"></span>
</pre><pre><a name="PasswordScreen_HandleMoveCursorRight"></a><div class="cp">;============================================================================
; TODO: Document PasswordScreen_HandleMoveCursorRight
;
; INPUTS:
;     None.
;
; OUTPUTS:
;     TODO
;
; XREFS:
;     <a href="#PasswordScreen_HandleMoveCursorOrDelete">PasswordScreen_HandleMoveCursorOrDelete</a>
;============================================================================
</div><span class="l"><a class="anc" name="9386" href="#9386">[9386]</a><a href="#PasswordScreen_HandleMoveCursorRight" class="la">PasswordScreen_HandleMoveCursorRight:</a><span class="ce">; [$9386]</span></span>
<span class="l"><a class="anc" name="9386" href="#9386">[9386]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#Password_EnteredCharsLength">Password_EnteredCharsLength</a></span></span></span>
<span class="l"><a class="anc" name="9389" href="#9389">[9389]</a><span class="cd"><span class="i">BEQ</span> <span class="o"><a href="#Call_Sound_PlayInputSound">Call_Sound_PlayInputSound</a></span></span></span>
<span class="l"><a class="anc" name="938b" href="#938b">[938b]</a><span class="cd"><span class="i">LDX</span> <span class="o">a:<a href="RAM.html#Password_FieldCursorPos">Password_FieldCursorPos</a></span></span></span>
<span class="l"><a class="anc" name="938e" href="#938e">[938e]</a><span class="cd"><span class="i">CPX</span> <span class="o">a:<a href="RAM.html#Password_EnteredCharsLength">Password_EnteredCharsLength</a></span></span></span>
<span class="l"><a class="anc" name="9391" href="#9391">[9391]</a><span class="cd"><span class="i">BEQ</span> <span class="o"><a href="#@LAB_PRG12__939e">@LAB_PRG12__939e</a></span></span></span>
<span class="l"><a class="anc" name="9393" href="#9393">[9393]</a><span class="cd"><span class="i">INX</span></span></span>
<span class="l"><a class="anc" name="9394" href="#9394">[9394]</a><span class="cd"><span class="i">CPX</span> <span class="o">a:<a href="RAM.html#Password_EnteredCharsLength">Password_EnteredCharsLength</a></span></span></span>
<span class="l"><a class="anc" name="9397" href="#9397">[9397]</a><span class="cd"><span class="i">BNE</span> <span class="o"><a href="#@_writeAndAdvanceCursor">@_writeAndAdvanceCursor</a></span></span></span>
<span class="l"><a class="anc" name="9399" href="#9399">[9399]</a><span class="cd"><span class="i">CPX</span> <span class="o">a:<a href="RAM.html#Password_MaxChars">Password_MaxChars</a></span></span></span>
<span class="l"><a class="anc" name="939c" href="#939c">[939c]</a><span class="cd"><span class="i">BNE</span> <span class="o"><a href="#@_writeAndAdvanceCursor">@_writeAndAdvanceCursor</a></span></span></span>
<span class="l"></span>
<a name=":939e:@LAB_PRG12__939e"></a><span class="l"><a class="anc" name="939e" href="#939e">[939e]</a><a href="#:939e:@LAB_PRG12__939e" class="lla">@LAB_PRG12__939e:</a><span class="ce">; [$939e]</span></span>
<span class="l"><a class="anc" name="939e" href="#939e">[939e]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#PasswordScreen_DrawAtCursorPosition">PasswordScreen_DrawAtCursorPosition</a></span></span></span>
<span class="l"><a class="anc" name="93a1" href="#93a1">[93a1]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$00</span></span></span>
<span class="l"><a class="anc" name="93a3" href="#93a3">[93a3]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#Password_FieldCursorPos">Password_FieldCursorPos</a></span></span></span>
<span class="l"><a class="anc" name="93a6" href="#93a6">[93a6]</a><span class="cd"><span class="i">BEQ</span> <span class="o"><a href="#@_writeAtCursor">@_writeAtCursor</a></span></span></span>
<span class="l"></span>
<a name=":93a8:@_writeAndAdvanceCursor"></a><span class="l"><a class="anc" name="93a8" href="#93a8">[93a8]</a><a href="#:93a8:@_writeAndAdvanceCursor" class="lla">@_writeAndAdvanceCursor:</a><span class="ce">; [$93a8]</span></span>
<span class="l"><a class="anc" name="93a8" href="#93a8">[93a8]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#PasswordScreen_DrawAtCursorPosition">PasswordScreen_DrawAtCursorPosition</a></span></span></span>
<span class="l"><a class="anc" name="93ab" href="#93ab">[93ab]</a><span class="cd"><span class="i">INC</span> <span class="o">a:<a href="RAM.html#Password_FieldCursorPos">Password_FieldCursorPos</a></span></span></span>
<span class="l"></span>
<a name=":93ae:@_writeAtCursor"></a><span class="l"><a class="anc" name="93ae" href="#93ae">[93ae]</a><a href="#:93ae:@_writeAtCursor" class="lla">@_writeAtCursor:</a><span class="ce">; [$93ae]</span></span>
<span class="l"><a class="anc" name="93ae" href="#93ae">[93ae]</a><span class="cd"><span class="i">JMP</span> <span class="o"><a href="#PasswordScreen_DrawAtCursorPosition">PasswordScreen_DrawAtCursorPosition</a></span></span></span>
<span class="l"></span>
<a name="Call_Sound_PlayInputSound"></a><div class="c">;
; XREFS:
;     <a href="#PasswordScreen_HandleDeleteLastChar">PasswordScreen_HandleDeleteLastChar</a>
;     <a href="#PasswordScreen_HandleMoveCursorLeft">PasswordScreen_HandleMoveCursorLeft</a>
;     <a href="#PasswordScreen_HandleMoveCursorRight">PasswordScreen_HandleMoveCursorRight</a>
;
</div><span class="l"><a class="anc" name="93b1" href="#93b1">[93b1]</a><a href="#Call_Sound_PlayInputSound" class="la">Call_Sound_PlayInputSound:</a><span class="ce">; [$93b1]</span></span>
<span class="l"><a class="anc" name="93b1" href="#93b1">[93b1]</a><span class="cd"><span class="i">JMP</span> <span class="o"><a href="#Sound_PlayInputSound">Sound_PlayInputSound</a></span></span></span>
<span class="l"></span>
</pre><pre><a name="PasswordScreen_HandleDeleteAtCursor"></a><div class="cp">;============================================================================
; TODO: Document PasswordScreen_HandleDeleteAtCursor
;
; INPUTS:
;     None.
;
; OUTPUTS:
;     TODO
;
; XREFS:
;     <a href="#PasswordScreen_HandleMoveCursorOrDelete">PasswordScreen_HandleMoveCursorOrDelete</a>
;============================================================================
</div><span class="l"><a class="anc" name="93b4" href="#93b4">[93b4]</a><a href="#PasswordScreen_HandleDeleteAtCursor" class="la">PasswordScreen_HandleDeleteAtCursor:</a><span class="ce">; [$93b4]</span></span>
<span class="l"><a class="anc" name="93b4" href="#93b4">[93b4]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#Password_FieldCursorPos">Password_FieldCursorPos</a></span></span></span>
<span class="l"><a class="anc" name="93b7" href="#93b7">[93b7]</a><span class="cd"><span class="i">CMP</span> <span class="o">a:<a href="RAM.html#Password_EnteredCharsLength">Password_EnteredCharsLength</a></span></span></span>
<span class="l"><a class="anc" name="93ba" href="#93ba">[93ba]</a><span class="cd"><span class="i">BEQ</span> <span class="o"><a href="#PasswordScreen_HandleDeleteLastChar">PasswordScreen_HandleDeleteLastChar</a></span></span></span>
<span class="l"><a class="anc" name="93bc" href="#93bc">[93bc]</a><span class="cd"><span class="i">PHA</span></span></span>
<span class="l"></span>
<a name=":93bd:@_loop"></a><span class="l"><a class="anc" name="93bd" href="#93bd">[93bd]</a><a href="#:93bd:@_loop" class="lla">@_loop:</a><span class="ce">; [$93bd]</span></span>
<span class="l"><a class="anc" name="93bd" href="#93bd">[93bd]</a><span class="cd"><span class="i">LDX</span> <span class="o">a:<a href="RAM.html#Password_FieldCursorPos">Password_FieldCursorPos</a></span></span></span>
<span class="l"><a class="anc" name="93c0" href="#93c0">[93c0]</a><span class="cd"><span class="i">INX</span></span></span>
<span class="l"><a class="anc" name="93c1" href="#93c1">[93c1]</a><span class="cd"><span class="i">CPX</span> <span class="o">a:<a href="RAM.html#Password_EnteredCharsLength">Password_EnteredCharsLength</a></span></span></span>
<span class="l"><a class="anc" name="93c4" href="#93c4">[93c4]</a><span class="cd"><span class="i">BEQ</span> <span class="o"><a href="#@LAB_PRG12__93d7">@LAB_PRG12__93d7</a></span></span></span>
<span class="l"><a class="anc" name="93c6" href="#93c6">[93c6]</a><span class="cd"><span class="i">LDX</span> <span class="o">a:<a href="RAM.html#Password_FieldCursorPos">Password_FieldCursorPos</a></span></span></span>
<span class="l"><a class="anc" name="93c9" href="#93c9">[93c9]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="RAM.html#ScreenBuffer">ScreenBuffer</a>+1,X</span></span></span>
<span class="l"><a class="anc" name="93cc" href="#93cc">[93cc]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#ScreenBuffer">ScreenBuffer</a>,X</span></span></span>
<span class="l"><a class="anc" name="93cf" href="#93cf">[93cf]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#PasswordScreen_DrawAtCursorPosition">PasswordScreen_DrawAtCursorPosition</a></span></span></span>
<span class="l"><a class="anc" name="93d2" href="#93d2">[93d2]</a><span class="cd"><span class="i">INC</span> <span class="o">a:<a href="RAM.html#Password_FieldCursorPos">Password_FieldCursorPos</a></span></span></span>
<span class="l"><a class="anc" name="93d5" href="#93d5">[93d5]</a><span class="cd"><span class="i">BNE</span> <span class="o"><a href="#@_loop">@_loop</a></span></span></span>
<span class="l"></span>
<a name=":93d7:@LAB_PRG12__93d7"></a><span class="l"><a class="anc" name="93d7" href="#93d7">[93d7]</a><a href="#:93d7:@LAB_PRG12__93d7" class="lla">@LAB_PRG12__93d7:</a><span class="ce">; [$93d7]</span></span>
<span class="l"><a class="anc" name="93d7" href="#93d7">[93d7]</a><span class="cd"><span class="i">LDX</span> <span class="o">a:<a href="RAM.html#Password_FieldCursorPos">Password_FieldCursorPos</a></span></span></span>
<span class="l"><a class="anc" name="93da" href="#93da">[93da]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$ff</span></span></span>
<span class="l"><a class="anc" name="93dc" href="#93dc">[93dc]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#ScreenBuffer">ScreenBuffer</a>,X</span></span></span>
<span class="l"><a class="anc" name="93df" href="#93df">[93df]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#PasswordScreen_DrawAtCursorPosition">PasswordScreen_DrawAtCursorPosition</a></span></span></span>
<span class="l"><a class="anc" name="93e2" href="#93e2">[93e2]</a><span class="cd"><span class="i">DEC</span> <span class="o">a:<a href="RAM.html#Password_EnteredCharsLength">Password_EnteredCharsLength</a></span></span></span>
<span class="l"><a class="anc" name="93e5" href="#93e5">[93e5]</a><span class="cd"><span class="i">PLA</span></span></span>
<span class="l"><a class="anc" name="93e6" href="#93e6">[93e6]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#Password_FieldCursorPos">Password_FieldCursorPos</a></span></span></span>
<span class="l"><a class="anc" name="93e9" href="#93e9">[93e9]</a><span class="cd"><span class="i">JMP</span> <span class="o"><a href="#PasswordScreen_DrawAtCursorPosition">PasswordScreen_DrawAtCursorPosition</a></span></span></span>
<span class="l"></span>
</pre><pre><a name="PasswordScreen_HandleDeleteLastChar"></a><div class="cp">;============================================================================
; TODO: Document PasswordScreen_HandleDeleteLastChar
;
; INPUTS:
;     None.
;
; OUTPUTS:
;     TODO
;
; XREFS:
;     <a href="#PasswordScreen_HandleDeleteAtCursor">PasswordScreen_HandleDeleteAtCursor</a>
;============================================================================
</div><span class="l"><a class="anc" name="93ec" href="#93ec">[93ec]</a><a href="#PasswordScreen_HandleDeleteLastChar" class="la">PasswordScreen_HandleDeleteLastChar:</a><span class="ce">; [$93ec]</span></span>
<span class="l"><a class="anc" name="93ec" href="#93ec">[93ec]</a><span class="cd"><span class="i">LDX</span> <span class="o">a:<a href="RAM.html#Password_FieldCursorPos">Password_FieldCursorPos</a></span></span></span>
<span class="l"><a class="anc" name="93ef" href="#93ef">[93ef]</a><span class="cd"><span class="i">BEQ</span> <span class="o"><a href="#Call_Sound_PlayInputSound">Call_Sound_PlayInputSound</a></span></span></span>
<span class="l"><a class="anc" name="93f1" href="#93f1">[93f1]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#PasswordScreen_DrawAtCursorPosition">PasswordScreen_DrawAtCursorPosition</a></span></span></span>
<span class="l"><a class="anc" name="93f4" href="#93f4">[93f4]</a><span class="cd"><span class="i">DEC</span> <span class="o">a:<a href="RAM.html#Password_FieldCursorPos">Password_FieldCursorPos</a></span></span></span>
<span class="l"><a class="anc" name="93f7" href="#93f7">[93f7]</a><span class="cd"><span class="i">DEC</span> <span class="o">a:<a href="RAM.html#Password_EnteredCharsLength">Password_EnteredCharsLength</a></span></span></span>
<span class="l"><a class="anc" name="93fa" href="#93fa">[93fa]</a><span class="cd"><span class="i">LDX</span> <span class="o">a:<a href="RAM.html#Password_FieldCursorPos">Password_FieldCursorPos</a></span></span></span>
<span class="l"><a class="anc" name="93fd" href="#93fd">[93fd]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$ff</span></span></span>
<span class="l"><a class="anc" name="93ff" href="#93ff">[93ff]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#ScreenBuffer">ScreenBuffer</a>,X</span></span></span>
<span class="l"><a class="anc" name="9402" href="#9402">[9402]</a><span class="cd"><span class="i">JMP</span> <span class="o"><a href="#PasswordScreen_DrawAtCursorPosition">PasswordScreen_DrawAtCursorPosition</a></span></span></span>
<span class="l"></span>
</pre><pre><a name="PasswordScreen_DrawAndHandleInputLoop"></a><div class="cp">;============================================================================
; TODO: Document PasswordScreen_DrawAndHandleInputLoop
;
; INPUTS:
;     X
;
; OUTPUTS:
;     C
;
; XREFS:
;     <a href="#PasswordScreen_WaitForInput">PasswordScreen_WaitForInput</a>
;============================================================================
</div><span class="l"><a class="anc" name="9405" href="#9405">[9405]</a><a href="#PasswordScreen_DrawAndHandleInputLoop" class="la">PasswordScreen_DrawAndHandleInputLoop:</a><span class="ce">; [$9405]</span></span>
<span class="l"><a class="anc" name="9405" href="#9405">[9405]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#PasswordScreen_DrawPasswordFieldCursor">PasswordScreen_DrawPasswordFieldCursor</a></span></span></span>
<span class="l"><a class="anc" name="9408" href="#9408">[9408]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#Password_HandleDPadInput">Password_HandleDPadInput</a></span></span></span>
<span class="l"><a class="anc" name="940b" href="#940b">[940b]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#PasswordScreen_DrawSelectionCursor">PasswordScreen_DrawSelectionCursor</a></span></span></span>
<span class="l"><a class="anc" name="940e" href="#940e">[940e]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="RAM.html#Joy1_ChangedButtonMask">Joy1_ChangedButtonMask</a></span></span></span>
<span class="l"><a class="anc" name="9410" href="#9410">[9410]</a><span class="cd"><span class="i">BMI</span> <span class="o"><a href="#@LAB_PRG12__9416">@LAB_PRG12__9416</a></span></span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Return whether the "A" button was pressed.
;
</div><span class="l"><a class="anc" name="9412" href="#9412">[9412]</a><span class="cd"><span class="i">ASL</span> <span class="o">A</span></span></span>
<span class="l"><a class="anc" name="9413" href="#9413">[9413]</a><span class="cd"><span class="i">BMI</span> <span class="o"><a href="#@LAB_PRG12__9422">@LAB_PRG12__9422</a></span></span></span>
<span class="l"><a class="anc" name="9415" href="#9415">[9415]</a><span class="cd"><span class="i">RTS</span></span></span>
<span class="l"></span>
<a name=":9416:@LAB_PRG12__9416"></a><span class="l"><a class="anc" name="9416" href="#9416">[9416]</a><a href="#:9416:@LAB_PRG12__9416" class="lla">@LAB_PRG12__9416:</a><span class="ce">; [$9416]</span></span>
<span class="l"><a class="anc" name="9416" href="#9416">[9416]</a><span class="cd"><span class="i">PHA</span></span></span>
<span class="l"><a class="anc" name="9417" href="#9417">[9417]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$0e</span></span></span>
<span class="l"><a class="anc" name="9419" href="#9419">[9419]</a><span class="cd"><span class="i">JSR</span> <span class="o">$d0e4</span></span></span>
<span class="l"><a class="anc" name="941c" href="#941c">[941c]</a><span class="cd"><span class="i">PLA</span></span></span>
<span class="l"><a class="anc" name="941d" href="#941d">[941d]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#PasswordScreen_IsCursorSpotInvalid">PasswordScreen_IsCursorSpotInvalid</a></span></span></span>
<span class="l"><a class="anc" name="9420" href="#9420">[9420]</a><span class="cd"><span class="i">SEC</span></span></span>
<span class="l"><a class="anc" name="9421" href="#9421">[9421]</a><span class="cd"><span class="i">RTS</span></span></span>
<span class="l"></span>
<a name=":9422:@LAB_PRG12__9422"></a><span class="l"><a class="anc" name="9422" href="#9422">[9422]</a><a href="#:9422:@LAB_PRG12__9422" class="lla">@LAB_PRG12__9422:</a><span class="ce">; [$9422]</span></span>
<span class="l"><a class="anc" name="9422" href="#9422">[9422]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$81</span></span></span>
<span class="l"><a class="anc" name="9424" href="#9424">[9424]</a><span class="cd"><span class="i">SEC</span></span></span>
<span class="l"><a class="anc" name="9425" href="#9425">[9425]</a><span class="cd"><span class="i">RTS</span></span></span>
<span class="l"></span>
<span class="l"></span>
</pre><pre><a name="PasswordScreen_IsCursorSpotInvalid"></a><div class="cp">;============================================================================
; Return whether the cursor position is in an invalid spot.
;
; If the cursor is in a spot not containing an input
; character, this will set Carry to 1.
;
; INPUTS:
;     <a href="RAM.html#Password_CursorCol">Password_CursorCol</a>:
;         The current cursor column.
;
;     <a href="RAM.html#Password_CursorRow">Password_CursorRow</a>:
;         The current cursor row.
;
;     <a href="#PASSWORD_VALUES_FOR_CURSOR_POS">PASSWORD_VALUES_FOR_CURSOR_POS</a>:
;         The password input values for each cursor
;         position.
;
; OUTPUTS:
;     C:
;         0 = The cursor spot is valid.
;         1 = The cursor spot is invalid.
;
; XREFS:
;     <a href="#PasswordScreen_DrawAndHandleInputLoop">PasswordScreen_DrawAndHandleInputLoop</a>
;     <a href="#Password_HandleDPadInput">Password_HandleDPadInput</a>
;============================================================================
</div><span class="l"><a class="anc" name="9426" href="#9426">[9426]</a><a href="#PasswordScreen_IsCursorSpotInvalid" class="la">PasswordScreen_IsCursorSpotInvalid:</a><span class="ce">; [$9426]</span></span>
<div class="c">;
; Calculate an offset into
; <a href="#PASSWORD_VALUES_FOR_CURSOR_POS">PASSWORD_VALUES_FOR_CURSOR_POS</a>.
;
; This starts with:
;
;     offset = (row * 2) + (row * 4)
;
; There are 13 columns in a row. The above gives us an
; offset into the characters for that row. So:
;
;     0 * 12 == 0
;     1 * 12 == 12
;
; XXX TODO
;
</div><span class="l"><a class="anc" name="9426" href="#9426">[9426]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#Password_CursorRow">Password_CursorRow</a></span></span><span class="ce">; A = Cursor row.</span></span>
<span class="l"><a class="anc" name="9429" href="#9429">[9429]</a><span class="cd"><span class="i">ASL</span> <span class="o">A</span></span><span class="ce">; A = A * 2</span></span>
<span class="l"><a class="anc" name="942a" href="#942a">[942a]</a><span class="cd"><span class="i">ADC</span> <span class="o">a:<a href="RAM.html#Password_CursorRow">Password_CursorRow</a></span></span><span class="ce">; A++</span></span>
<span class="l"><a class="anc" name="942d" href="#942d">[942d]</a><span class="cd"><span class="i">ASL</span> <span class="o">A</span></span></span>
<span class="l"><a class="anc" name="942e" href="#942e">[942e]</a><span class="cd"><span class="i">ASL</span> <span class="o">A</span></span></span>
<span class="l"><a class="anc" name="942f" href="#942f">[942f]</a><span class="cd"><span class="i">ADC</span> <span class="o">a:<a href="RAM.html#Password_CursorRow">Password_CursorRow</a></span></span></span>
<span class="l"><a class="anc" name="9432" href="#9432">[9432]</a><span class="cd"><span class="i">ADC</span> <span class="o">a:<a href="RAM.html#Password_CursorCol">Password_CursorCol</a></span></span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Load the value from that entry in the table.
;
</div><span class="l"><a class="anc" name="9435" href="#9435">[9435]</a><span class="cd"><span class="i">TAX</span></span></span>
<span class="l"><a class="anc" name="9436" href="#9436">[9436]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="#PASSWORD_VALUES_FOR_CURSOR_POS">PASSWORD_VALUES_FOR_CURSOR_POS</a>,X</span></span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; See if that is 0xFF, which maps to values like DEL, END,
; arrows. If so, the result is false.
;
</div><span class="l"><a class="anc" name="9439" href="#9439">[9439]</a><span class="cd"><span class="i">CMP</span> <span class="o">#$ff</span></span></span>
<span class="l"><a class="anc" name="943b" href="#943b">[943b]</a><span class="cd"><span class="i">RTS</span></span></span>
<span class="l"></span>
<a name="PASSWORD_VALUES_FOR_CURSOR_POS"></a><div class="c">;
; XREFS:
;     <a href="#PasswordScreen_IsCursorSpotInvalid">PasswordScreen_IsCursorSpotInvalid</a>
;
</div><span class="l"><a class="anc" name="943c" href="#943c">[943c]</a><a href="#PASSWORD_VALUES_FOR_CURSOR_POS" class="la">PASSWORD_VALUES_FOR_CURSOR_POS:</a><span class="ce">; [$943c]</span></span>
<span class="l"><a class="anc" name="943c" href="#943c">[943c]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [0]:</span></span>
<span class="l"><a class="anc" name="943d" href="#943d">[943d]</a><span class="cd"><span class="i">db</span> <span class="o">$01</span></span><span class="ce">; [1]:</span></span>
<span class="l"><a class="anc" name="943e" href="#943e">[943e]</a><span class="cd"><span class="i">db</span> <span class="o">$02</span></span><span class="ce">; [2]:</span></span>
<span class="l"><a class="anc" name="943f" href="#943f">[943f]</a><span class="cd"><span class="i">db</span> <span class="o">$03</span></span><span class="ce">; [3]:</span></span>
<span class="l"><a class="anc" name="9440" href="#9440">[9440]</a><span class="cd"><span class="i">db</span> <span class="o">$04</span></span><span class="ce">; [4]:</span></span>
<span class="l"><a class="anc" name="9441" href="#9441">[9441]</a><span class="cd"><span class="i">db</span> <span class="o">$05</span></span><span class="ce">; [5]:</span></span>
<span class="l"><a class="anc" name="9442" href="#9442">[9442]</a><span class="cd"><span class="i">db</span> <span class="o">$06</span></span><span class="ce">; [6]:</span></span>
<span class="l"><a class="anc" name="9443" href="#9443">[9443]</a><span class="cd"><span class="i">db</span> <span class="o">$07</span></span><span class="ce">; [7]:</span></span>
<span class="l"><a class="anc" name="9444" href="#9444">[9444]</a><span class="cd"><span class="i">db</span> <span class="o">$08</span></span><span class="ce">; [8]:</span></span>
<span class="l"><a class="anc" name="9445" href="#9445">[9445]</a><span class="cd"><span class="i">db</span> <span class="o">$09</span></span><span class="ce">; [9]:</span></span>
<span class="l"><a class="anc" name="9446" href="#9446">[9446]</a><span class="cd"><span class="i">db</span> <span class="o">$0a</span></span><span class="ce">; [10]:</span></span>
<span class="l"><a class="anc" name="9447" href="#9447">[9447]</a><span class="cd"><span class="i">db</span> <span class="o">$0b</span></span><span class="ce">; [11]:</span></span>
<span class="l"><a class="anc" name="9448" href="#9448">[9448]</a><span class="cd"><span class="i">db</span> <span class="o">$0c</span></span><span class="ce">; [12]:</span></span>
<span class="l"><a class="anc" name="9449" href="#9449">[9449]</a><span class="cd"><span class="i">db</span> <span class="o">$0d</span></span><span class="ce">; [13]:</span></span>
<span class="l"><a class="anc" name="944a" href="#944a">[944a]</a><span class="cd"><span class="i">db</span> <span class="o">$0e</span></span><span class="ce">; [14]:</span></span>
<span class="l"><a class="anc" name="944b" href="#944b">[944b]</a><span class="cd"><span class="i">db</span> <span class="o">$0f</span></span><span class="ce">; [15]:</span></span>
<span class="l"><a class="anc" name="944c" href="#944c">[944c]</a><span class="cd"><span class="i">db</span> <span class="o">$10</span></span><span class="ce">; [16]:</span></span>
<span class="l"><a class="anc" name="944d" href="#944d">[944d]</a><span class="cd"><span class="i">db</span> <span class="o">$11</span></span><span class="ce">; [17]:</span></span>
<span class="l"><a class="anc" name="944e" href="#944e">[944e]</a><span class="cd"><span class="i">db</span> <span class="o">$12</span></span><span class="ce">; [18]:</span></span>
<span class="l"><a class="anc" name="944f" href="#944f">[944f]</a><span class="cd"><span class="i">db</span> <span class="o">$13</span></span><span class="ce">; [19]:</span></span>
<span class="l"><a class="anc" name="9450" href="#9450">[9450]</a><span class="cd"><span class="i">db</span> <span class="o">$14</span></span><span class="ce">; [20]:</span></span>
<span class="l"><a class="anc" name="9451" href="#9451">[9451]</a><span class="cd"><span class="i">db</span> <span class="o">$15</span></span><span class="ce">; [21]:</span></span>
<span class="l"><a class="anc" name="9452" href="#9452">[9452]</a><span class="cd"><span class="i">db</span> <span class="o">$16</span></span><span class="ce">; [22]:</span></span>
<span class="l"><a class="anc" name="9453" href="#9453">[9453]</a><span class="cd"><span class="i">db</span> <span class="o">$17</span></span><span class="ce">; [23]:</span></span>
<span class="l"><a class="anc" name="9454" href="#9454">[9454]</a><span class="cd"><span class="i">db</span> <span class="o">$18</span></span><span class="ce">; [24]:</span></span>
<span class="l"><a class="anc" name="9455" href="#9455">[9455]</a><span class="cd"><span class="i">db</span> <span class="o">$19</span></span><span class="ce">; [25]:</span></span>
<span class="l"><a class="anc" name="9456" href="#9456">[9456]</a><span class="cd"><span class="i">db</span> <span class="o">$1a</span></span><span class="ce">; [26]:</span></span>
<span class="l"><a class="anc" name="9457" href="#9457">[9457]</a><span class="cd"><span class="i">db</span> <span class="o">$1b</span></span><span class="ce">; [27]:</span></span>
<span class="l"><a class="anc" name="9458" href="#9458">[9458]</a><span class="cd"><span class="i">db</span> <span class="o">$1c</span></span><span class="ce">; [28]:</span></span>
<span class="l"><a class="anc" name="9459" href="#9459">[9459]</a><span class="cd"><span class="i">db</span> <span class="o">$1d</span></span><span class="ce">; [29]:</span></span>
<span class="l"><a class="anc" name="945a" href="#945a">[945a]</a><span class="cd"><span class="i">db</span> <span class="o">$1e</span></span><span class="ce">; [30]:</span></span>
<span class="l"><a class="anc" name="945b" href="#945b">[945b]</a><span class="cd"><span class="i">db</span> <span class="o">$1f</span></span><span class="ce">; [31]:</span></span>
<span class="l"><a class="anc" name="945c" href="#945c">[945c]</a><span class="cd"><span class="i">db</span> <span class="o">$20</span></span><span class="ce">; [32]:</span></span>
<span class="l"><a class="anc" name="945d" href="#945d">[945d]</a><span class="cd"><span class="i">db</span> <span class="o">$21</span></span><span class="ce">; [33]:</span></span>
<span class="l"><a class="anc" name="945e" href="#945e">[945e]</a><span class="cd"><span class="i">db</span> <span class="o">$22</span></span><span class="ce">; [34]:</span></span>
<span class="l"><a class="anc" name="945f" href="#945f">[945f]</a><span class="cd"><span class="i">db</span> <span class="o">$23</span></span><span class="ce">; [35]:</span></span>
<span class="l"><a class="anc" name="9460" href="#9460">[9460]</a><span class="cd"><span class="i">db</span> <span class="o">$24</span></span><span class="ce">; [36]:</span></span>
<span class="l"><a class="anc" name="9461" href="#9461">[9461]</a><span class="cd"><span class="i">db</span> <span class="o">$25</span></span><span class="ce">; [37]:</span></span>
<span class="l"><a class="anc" name="9462" href="#9462">[9462]</a><span class="cd"><span class="i">db</span> <span class="o">$26</span></span><span class="ce">; [38]:</span></span>
<span class="l"><a class="anc" name="9463" href="#9463">[9463]</a><span class="cd"><span class="i">db</span> <span class="o">$27</span></span><span class="ce">; [39]:</span></span>
<span class="l"><a class="anc" name="9464" href="#9464">[9464]</a><span class="cd"><span class="i">db</span> <span class="o">$28</span></span><span class="ce">; [40]:</span></span>
<span class="l"><a class="anc" name="9465" href="#9465">[9465]</a><span class="cd"><span class="i">db</span> <span class="o">$29</span></span><span class="ce">; [41]:</span></span>
<span class="l"><a class="anc" name="9466" href="#9466">[9466]</a><span class="cd"><span class="i">db</span> <span class="o">$2a</span></span><span class="ce">; [42]:</span></span>
<span class="l"><a class="anc" name="9467" href="#9467">[9467]</a><span class="cd"><span class="i">db</span> <span class="o">$2b</span></span><span class="ce">; [43]:</span></span>
<span class="l"><a class="anc" name="9468" href="#9468">[9468]</a><span class="cd"><span class="i">db</span> <span class="o">$2c</span></span><span class="ce">; [44]:</span></span>
<span class="l"><a class="anc" name="9469" href="#9469">[9469]</a><span class="cd"><span class="i">db</span> <span class="o">$2d</span></span><span class="ce">; [45]:</span></span>
<span class="l"><a class="anc" name="946a" href="#946a">[946a]</a><span class="cd"><span class="i">db</span> <span class="o">$2e</span></span><span class="ce">; [46]:</span></span>
<span class="l"><a class="anc" name="946b" href="#946b">[946b]</a><span class="cd"><span class="i">db</span> <span class="o">$2f</span></span><span class="ce">; [47]:</span></span>
<span class="l"><a class="anc" name="946c" href="#946c">[946c]</a><span class="cd"><span class="i">db</span> <span class="o">$30</span></span><span class="ce">; [48]:</span></span>
<span class="l"><a class="anc" name="946d" href="#946d">[946d]</a><span class="cd"><span class="i">db</span> <span class="o">$31</span></span><span class="ce">; [49]:</span></span>
<span class="l"><a class="anc" name="946e" href="#946e">[946e]</a><span class="cd"><span class="i">db</span> <span class="o">$32</span></span><span class="ce">; [50]:</span></span>
<span class="l"><a class="anc" name="946f" href="#946f">[946f]</a><span class="cd"><span class="i">db</span> <span class="o">$33</span></span><span class="ce">; [51]:</span></span>
<span class="l"><a class="anc" name="9470" href="#9470">[9470]</a><span class="cd"><span class="i">db</span> <span class="o">$34</span></span><span class="ce">; [52]:</span></span>
<span class="l"><a class="anc" name="9471" href="#9471">[9471]</a><span class="cd"><span class="i">db</span> <span class="o">$35</span></span><span class="ce">; [53]:</span></span>
<span class="l"><a class="anc" name="9472" href="#9472">[9472]</a><span class="cd"><span class="i">db</span> <span class="o">$36</span></span><span class="ce">; [54]:</span></span>
<span class="l"><a class="anc" name="9473" href="#9473">[9473]</a><span class="cd"><span class="i">db</span> <span class="o">$37</span></span><span class="ce">; [55]:</span></span>
<span class="l"><a class="anc" name="9474" href="#9474">[9474]</a><span class="cd"><span class="i">db</span> <span class="o">$38</span></span><span class="ce">; [56]:</span></span>
<span class="l"><a class="anc" name="9475" href="#9475">[9475]</a><span class="cd"><span class="i">db</span> <span class="o">$39</span></span><span class="ce">; [57]:</span></span>
<span class="l"><a class="anc" name="9476" href="#9476">[9476]</a><span class="cd"><span class="i">db</span> <span class="o">$3a</span></span><span class="ce">; [58]:</span></span>
<span class="l"><a class="anc" name="9477" href="#9477">[9477]</a><span class="cd"><span class="i">db</span> <span class="o">$3b</span></span><span class="ce">; [59]:</span></span>
<span class="l"><a class="anc" name="9478" href="#9478">[9478]</a><span class="cd"><span class="i">db</span> <span class="o">$3c</span></span><span class="ce">; [60]:</span></span>
<span class="l"><a class="anc" name="9479" href="#9479">[9479]</a><span class="cd"><span class="i">db</span> <span class="o">$3d</span></span><span class="ce">; [61]:</span></span>
<span class="l"><a class="anc" name="947a" href="#947a">[947a]</a><span class="cd"><span class="i">db</span> <span class="o">$3e</span></span><span class="ce">; [62]:</span></span>
<span class="l"><a class="anc" name="947b" href="#947b">[947b]</a><span class="cd"><span class="i">db</span> <span class="o">$3f</span></span><span class="ce">; [63]:</span></span>
<span class="l"><a class="anc" name="947c" href="#947c">[947c]</a><span class="cd"><span class="i">db</span> <span class="o">$ff</span></span><span class="ce">; [64]:</span></span>
<span class="l"><a class="anc" name="947d" href="#947d">[947d]</a><span class="cd"><span class="i">db</span> <span class="o">$80</span></span><span class="ce">; [65]:</span></span>
<span class="l"><a class="anc" name="947e" href="#947e">[947e]</a><span class="cd"><span class="i">db</span> <span class="o">$81</span></span><span class="ce">; [66]:</span></span>
<span class="l"><a class="anc" name="947f" href="#947f">[947f]</a><span class="cd"><span class="i">db</span> <span class="o">$82</span></span><span class="ce">; [67]:</span></span>
<span class="l"><a class="anc" name="9480" href="#9480">[9480]</a><span class="cd"><span class="i">db</span> <span class="o">$83</span></span><span class="ce">; [68]:</span></span>
<span class="l"><a class="anc" name="9481" href="#9481">[9481]</a><span class="cd"><span class="i">db</span> <span class="o">$ff</span></span><span class="ce">; [69]:</span></span>
<span class="l"><a class="anc" name="9482" href="#9482">[9482]</a><span class="cd"><span class="i">db</span> <span class="o">$ff</span></span><span class="ce">; [70]:</span></span>
<span class="l"><a class="anc" name="9483" href="#9483">[9483]</a><span class="cd"><span class="i">db</span> <span class="o">$ff</span></span><span class="ce">; [71]:</span></span>
<span class="l"><a class="anc" name="9484" href="#9484">[9484]</a><span class="cd"><span class="i">db</span> <span class="o">$ff</span></span><span class="ce">; [72]:</span></span>
<span class="l"><a class="anc" name="9485" href="#9485">[9485]</a><span class="cd"><span class="i">db</span> <span class="o">$ff</span></span><span class="ce">; [73]:</span></span>
<span class="l"><a class="anc" name="9486" href="#9486">[9486]</a><span class="cd"><span class="i">db</span> <span class="o">$ff</span></span><span class="ce">; [74]:</span></span>
<span class="l"><a class="anc" name="9487" href="#9487">[9487]</a><span class="cd"><span class="i">db</span> <span class="o">$ff</span></span><span class="ce">; [75]:</span></span>
<span class="l"><a class="anc" name="9488" href="#9488">[9488]</a><span class="cd"><span class="i">db</span> <span class="o">$ff</span></span><span class="ce">; [76]:</span></span>
<span class="l"><a class="anc" name="9489" href="#9489">[9489]</a><span class="cd"><span class="i">db</span> <span class="o">$ff</span></span><span class="ce">; [77]:</span></span>
<span class="l"></span>
<span class="l"></span>
</pre><pre><a name="PasswordScreen_GetDPadBits"></a><div class="cp">;============================================================================
; Get the DPad bits for cursor movement, with auto-repeat.
;
; This will return a bitmask of the DPad bits from
; controller 1. If a button is being held down, it
; will wait a short period of time and then begin
; auto-repeating input at regular intervals (but not
; continuously per-call).
;
; INPUTS:
;     <a href="RAM.html#Joy1_ButtonMask">Joy1_ButtonMask</a>:
;         All the pressed buttons.
;
;     <a href="RAM.html#Joy1_ChangedButtonMask">Joy1_ChangedButtonMask</a>:
;         The newly-pressed buttons.
;
; OUTPUTS:
;     <a href="RAM.html#Password_CounterBeforeAutoRepeatMove">Password_CounterBeforeAutoRepeatMove</a>:
;         A counter used to wait before auto-repeating
;         the next button.
;
;     A:
;     <a href="RAM.html#Password_DPadBits">Password_DPadBits</a>:
;         The current DPad bits.
;
; XREFS:
;     <a href="#Password_HandleDPadInput">Password_HandleDPadInput</a>
;============================================================================
</div><span class="l"><a class="anc" name="948a" href="#948a">[948a]</a><a href="#PasswordScreen_GetDPadBits" class="la">PasswordScreen_GetDPadBits:</a><span class="ce">; [$948a]</span></span>
<div class="c">;
; Check if there have been any changes to the directional
; button presses since we were last called.
;
</div><span class="l"><a class="anc" name="948a" href="#948a">[948a]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="RAM.html#Joy1_ChangedButtonMask">Joy1_ChangedButtonMask</a></span></span></span>
<span class="l"><a class="anc" name="948c" href="#948c">[948c]</a><span class="cd"><span class="i">AND</span> <span class="o">#$0f</span></span></span>
<span class="l"><a class="anc" name="948e" href="#948e">[948e]</a><span class="cd"><span class="i">BNE</span> <span class="o"><a href="#@_handleAutoRepeat">@_handleAutoRepeat</a></span></span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; There were no new changes to buttons. Check whether any
; directional buttons were already being held down.
;
</div><span class="l"><a class="anc" name="9490" href="#9490">[9490]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="RAM.html#Joy1_ButtonMask">Joy1_ButtonMask</a></span></span></span>
<span class="l"><a class="anc" name="9492" href="#9492">[9492]</a><span class="cd"><span class="i">AND</span> <span class="o">#$0f</span></span></span>
<span class="l"><a class="anc" name="9494" href="#9494">[9494]</a><span class="cd"><span class="i">BEQ</span> <span class="o"><a href="#@_stopAutoRepeat">@_stopAutoRepeat</a></span></span></span>
<span class="l"><a class="anc" name="9496" href="#9496">[9496]</a><span class="cd"><span class="i">CMP</span> <span class="o">a:<a href="RAM.html#Password_DPadBits">Password_DPadBits</a></span></span></span>
<span class="l"><a class="anc" name="9499" href="#9499">[9499]</a><span class="cd"><span class="i">BNE</span> <span class="o"><a href="#@_stopAutoRepeat">@_stopAutoRepeat</a></span></span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; A direction key has been held down. We're now going to
; begin considering moving in that direction until the
; player changes directions or stops holding down the
; button.
;
; Here's how this works:
;
; 1. This will start at 0 and count up until it gets to 0x29.
;
; 2. Once it hits that, it will switch to 0x80 and immediately
;    return the directional button mask, telling the caller
;    it can move one space.
;
; 3. It will then count up until it hits 0x85. Until it hits
;    that, it won't return any directional button masks. This
;    serves as a delay between movements.
;
; 4. Once it hits 0x85, it'll drop back to 0x80 and begin again.
;
</div><span class="l"><a class="anc" name="949b" href="#949b">[949b]</a><span class="cd"><span class="i">LDX</span> <span class="o">a:<a href="RAM.html#Password_CounterBeforeAutoRepeatMove">Password_CounterBeforeAutoRepeatMove</a></span></span></span>
<span class="l"><a class="anc" name="949e" href="#949e">[949e]</a><span class="cd"><span class="i">BPL</span> <span class="o"><a href="#@_updateAndCheckAutoRepeatCounter">@_updateAndCheckAutoRepeatCounter</a></span></span></span>
<span class="l"><a class="anc" name="94a0" href="#94a0">[94a0]</a><span class="cd"><span class="i">INC</span> <span class="o">a:<a href="RAM.html#Password_CounterBeforeAutoRepeatMove">Password_CounterBeforeAutoRepeatMove</a></span></span></span>
<span class="l"><a class="anc" name="94a3" href="#94a3">[94a3]</a><span class="cd"><span class="i">INX</span></span></span>
<span class="l"><a class="anc" name="94a4" href="#94a4">[94a4]</a><span class="cd"><span class="i">CPX</span> <span class="o">#$86</span></span></span>
<span class="l"><a class="anc" name="94a6" href="#94a6">[94a6]</a><span class="cd"><span class="i">BNE</span> <span class="o"><a href="#@_incCounter">@_incCounter</a></span></span></span>
<span class="l"></span>
<a name=":94a8:@_resetAutoRepeatCounter"></a><span class="l"><a class="anc" name="94a8" href="#94a8">[94a8]</a><a href="#:94a8:@_resetAutoRepeatCounter" class="lla">@_resetAutoRepeatCounter:</a><span class="ce">; [$94a8]</span></span>
<span class="l"><a class="anc" name="94a8" href="#94a8">[94a8]</a><span class="cd"><span class="i">LDX</span> <span class="o">#$80</span></span></span>
<span class="l"><a class="anc" name="94aa" href="#94aa">[94aa]</a><span class="cd"><span class="i">STX</span> <span class="o">a:<a href="RAM.html#Password_CounterBeforeAutoRepeatMove">Password_CounterBeforeAutoRepeatMove</a></span></span></span>
<span class="l"><a class="anc" name="94ad" href="#94ad">[94ad]</a><span class="cd"><span class="i">RTS</span></span></span>
<span class="l"></span>
<a name=":94ae:@_updateAndCheckAutoRepeatCounter"></a><span class="l"><a class="anc" name="94ae" href="#94ae">[94ae]</a><a href="#:94ae:@_updateAndCheckAutoRepeatCounter" class="lla">@_updateAndCheckAutoRepeatCounter:</a><span class="ce">; [$94ae]</span></span>
<span class="l"><a class="anc" name="94ae" href="#94ae">[94ae]</a><span class="cd"><span class="i">INC</span> <span class="o">a:<a href="RAM.html#Password_CounterBeforeAutoRepeatMove">Password_CounterBeforeAutoRepeatMove</a></span></span></span>
<span class="l"><a class="anc" name="94b1" href="#94b1">[94b1]</a><span class="cd"><span class="i">INX</span></span></span>
<span class="l"><a class="anc" name="94b2" href="#94b2">[94b2]</a><span class="cd"><span class="i">CPX</span> <span class="o">#$2a</span></span></span>
<span class="l"><a class="anc" name="94b4" href="#94b4">[94b4]</a><span class="cd"><span class="i">BEQ</span> <span class="o"><a href="#@_resetAutoRepeatCounter">@_resetAutoRepeatCounter</a></span></span></span>
<span class="l"></span>
<a name=":94b6:@_incCounter"></a><span class="l"><a class="anc" name="94b6" href="#94b6">[94b6]</a><a href="#:94b6:@_incCounter" class="lla">@_incCounter:</a><span class="ce">; [$94b6]</span></span>
<span class="l"><a class="anc" name="94b6" href="#94b6">[94b6]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$00</span></span></span>
<span class="l"><a class="anc" name="94b8" href="#94b8">[94b8]</a><span class="cd"><span class="i">RTS</span></span></span>
<span class="l"></span>
<span class="l"></span>
<a name=":94b9:@_handleAutoRepeat"></a><div class="c">;
; A new direction has been held down. Store it and return it,
; moving the cursor.
;
</div><span class="l"><a class="anc" name="94b9" href="#94b9">[94b9]</a><a href="#:94b9:@_handleAutoRepeat" class="lla">@_handleAutoRepeat:</a><span class="ce">; [$94b9]</span></span>
<span class="l"><a class="anc" name="94b9" href="#94b9">[94b9]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#Password_DPadBits">Password_DPadBits</a></span></span></span>
<span class="l"><a class="anc" name="94bc" href="#94bc">[94bc]</a><span class="cd"><span class="i">LDX</span> <span class="o">#$00</span></span></span>
<span class="l"><a class="anc" name="94be" href="#94be">[94be]</a><span class="cd"><span class="i">STX</span> <span class="o">a:<a href="RAM.html#Password_CounterBeforeAutoRepeatMove">Password_CounterBeforeAutoRepeatMove</a></span></span></span>
<span class="l"><a class="anc" name="94c1" href="#94c1">[94c1]</a><span class="cd"><span class="i">RTS</span></span></span>
<span class="l"></span>
<span class="l"></span>
<a name=":94c2:@_stopAutoRepeat"></a><div class="c">;
; No direction buttons are being pressed, or the direction
; has changed. Stop moving the cursor.
;
</div><span class="l"><a class="anc" name="94c2" href="#94c2">[94c2]</a><a href="#:94c2:@_stopAutoRepeat" class="lla">@_stopAutoRepeat:</a><span class="ce">; [$94c2]</span></span>
<span class="l"><a class="anc" name="94c2" href="#94c2">[94c2]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$00</span></span></span>
<span class="l"><a class="anc" name="94c4" href="#94c4">[94c4]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#Password_DPadBits">Password_DPadBits</a></span></span></span>
<span class="l"><a class="anc" name="94c7" href="#94c7">[94c7]</a><span class="cd"><span class="i">RTS</span></span></span>
<span class="l"></span>
<span class="l"></span>
</pre><pre><a name="Password_HandleDPadInput"></a><div class="cp">;============================================================================
; Handle DPad input on the password screen.
;
; This will listen for Up, Down, Left, or Right button
; presses, moving the cursor as appropriate.
;
; The cursor will be positioned to the correct spot on the
; new row or column, wrapping or repositioning if needed
; to ensure it's on a valid input location.
;
; There's special handling for the 5th row, which has
; the directional arrows, DEL, and END, all of which take
; up 2 tiles. All other rows have an input taking 1 tile and
; space between.
;
; INPUTS:
;     <a href="RAM.html#Password_CursorCol">Password_CursorCol</a>:
;         The current cursor column.
;
;     <a href="RAM.html#Password_CursorRow">Password_CursorRow</a>:
;         The current cursor row.
;
; OUTPUTS:
;     <a href="RAM.html#Password_CursorCol">Password_CursorCol</a>:
;         The updated cursor column.
;
;     <a href="RAM.html#Password_CursorRow">Password_CursorRow</a>:
;         The updated cursor row.
;
; CALLS:
;     <a href="#PasswordScreen_GetDPadBits">PasswordScreen_GetDPadBits</a>
;     <a href="#PasswordScreen_IsCursorSpotInvalid">PasswordScreen_IsCursorSpotInvalid</a>
;     <a href="#PasswordScreen_UpdateCursorMovedFromLastRow">PasswordScreen_UpdateCursorMovedFromLastRow</a>
;     <a href="#PasswordScreen_UpdateCursorMovedToLastRow">PasswordScreen_UpdateCursorMovedToLastRow</a>
;     <a href="#Sound_PlayMoveCursorSound">Sound_PlayMoveCursorSound</a>
;
; XREFS:
;     <a href="#PasswordScreen_DrawAndHandleInputLoop">PasswordScreen_DrawAndHandleInputLoop</a>
;============================================================================
</div><span class="l"><a class="anc" name="94c8" href="#94c8">[94c8]</a><a href="#Password_HandleDPadInput" class="la">Password_HandleDPadInput:</a><span class="ce">; [$94c8]</span></span>
<span class="l"><a class="anc" name="94c8" href="#94c8">[94c8]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#PasswordScreen_GetDPadBits">PasswordScreen_GetDPadBits</a></span></span><span class="ce">; Get the DPad bits.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Only consider the bitmask bits, which shouldn't be
; necessary since <a href="#PasswordScreen_GetDPadBits">PasswordScreen_GetDPadBits</a>
; already does this.
;
</div><span class="l"><a class="anc" name="94cb" href="#94cb">[94cb]</a><span class="cd"><span class="i">AND</span> <span class="o">#$0f</span></span><span class="ce">; Keep the lower nibble (DPad bits -- redundant).</span></span>
<span class="l"><a class="anc" name="94cd" href="#94cd">[94cd]</a><span class="cd"><span class="i">BEQ</span> <span class="o"><a href="#@_return">@_return</a></span></span><span class="ce">; If nothing is pressed, return.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; We can move in a direction. Play a sound and figure
; out which direction we're moving.
;
</div><span class="l"><a class="anc" name="94cf" href="#94cf">[94cf]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#Sound_PlayMoveCursorSound">Sound_PlayMoveCursorSound</a></span></span><span class="ce">; Play the cursor movement sound.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Move the cursor right, handling wrapping.
;
</div><span class="l"><a class="anc" name="94d2" href="#94d2">[94d2]</a><span class="cd"><span class="i">LSR</span> <span class="o">A</span></span><span class="ce">; Shift the "Right" bit into Carry.</span></span>
<span class="l"><a class="anc" name="94d3" href="#94d3">[94d3]</a><span class="cd"><span class="i">BCS</span> <span class="o"><a href="#@_moveRight">@_moveRight</a></span></span><span class="ce">; If set, handle moving right.</span></span>
<span class="l"><a class="anc" name="94d5" href="#94d5">[94d5]</a><span class="cd"><span class="i">LSR</span> <span class="o">A</span></span><span class="ce">; Shift the "Left" bit into Carry.</span></span>
<span class="l"><a class="anc" name="94d6" href="#94d6">[94d6]</a><span class="cd"><span class="i">BCS</span> <span class="o"><a href="#@_moveLeft">@_moveLeft</a></span></span><span class="ce">; if set, handle moving left.</span></span>
<span class="l"><a class="anc" name="94d8" href="#94d8">[94d8]</a><span class="cd"><span class="i">LSR</span> <span class="o">A</span></span><span class="ce">; Shift the "Down" bit into Carry.</span></span>
<span class="l"><a class="anc" name="94d9" href="#94d9">[94d9]</a><span class="cd"><span class="i">BCS</span> <span class="o"><a href="#@_moveDown">@_moveDown</a></span></span><span class="ce">; If set, handle moving down.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name=":94db:@_moveUp"></a><div class="c">;
; We're moving one row up.
;
</div><span class="l"><a class="anc" name="94db" href="#94db">[94db]</a><a href="#:94db:@_moveUp" class="lla">@_moveUp:</a><span class="ce">; [$94db]</span></span>
<span class="l"><a class="anc" name="94db" href="#94db">[94db]</a><span class="cd"><span class="i">LDX</span> <span class="o">a:<a href="RAM.html#Password_CursorRow">Password_CursorRow</a></span></span><span class="ce">; X = Cursor row</span></span>
<span class="l"><a class="anc" name="94de" href="#94de">[94de]</a><span class="cd"><span class="i">DEX</span></span><span class="ce">; X-- (move up)</span></span>
<span class="l"><a class="anc" name="94df" href="#94df">[94df]</a><span class="cd"><span class="i">BPL</span> <span class="o"><a href="#@_checkRow4">@_checkRow4</a></span></span><span class="ce">; If the new row is &lt;= 4, jump to handle it.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; The cursor wrapped up to row 5.
;
</div><span class="l"><a class="anc" name="94e1" href="#94e1">[94e1]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#PasswordScreen_UpdateCursorMovedToLastRow">PasswordScreen_UpdateCursorMovedToLastRow</a></span></span><span class="ce">; Handle moving to row 5.</span></span>
<span class="l"><a class="anc" name="94e4" href="#94e4">[94e4]</a><span class="cd"><span class="i">LDX</span> <span class="o">#$05</span></span><span class="ce">; Set the new row as 5.</span></span>
<span class="l"><a class="anc" name="94e6" href="#94e6">[94e6]</a><span class="cd"><span class="i">BNE</span> <span class="o"><a href="#@_updateCursorRow">@_updateCursorRow</a></span></span></span>
<span class="l"></span>
<span class="l"></span>
<a name=":94e8:@_checkRow4"></a><div class="c">;
; Check if this is row 4 (moving from arrows/DEL/END).
;
</div><span class="l"><a class="anc" name="94e8" href="#94e8">[94e8]</a><a href="#:94e8:@_checkRow4" class="lla">@_checkRow4:</a><span class="ce">; [$94e8]</span></span>
<span class="l"><a class="anc" name="94e8" href="#94e8">[94e8]</a><span class="cd"><span class="i">CPX</span> <span class="o">#$04</span></span><span class="ce">; Is the new row &lt; 4?</span></span>
<span class="l"><a class="anc" name="94ea" href="#94ea">[94ea]</a><span class="cd"><span class="i">BNE</span> <span class="o"><a href="#@_updateCursorRow">@_updateCursorRow</a></span></span><span class="ce">; If so, move the cursor there.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Cursor moved from row 5 to 4 (numeric, symbols).
;
</div><span class="l"><a class="anc" name="94ec" href="#94ec">[94ec]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#PasswordScreen_UpdateCursorMovedFromLastRow">PasswordScreen_UpdateCursorMovedFromLastRow</a></span></span><span class="ce">; Handle moving away from row 5.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name=":94ef:@_updateCursorRow"></a><div class="c">;
; Update the cursor row and check if the new spot is valid.
;
; This handles the case where we move to row 4, which has a
; blank spot in the last column. If we'd be putting the
; cursor there, move up again one more row.
;
</div><span class="l"><a class="anc" name="94ef" href="#94ef">[94ef]</a><a href="#:94ef:@_updateCursorRow" class="lla">@_updateCursorRow:</a><span class="ce">; [$94ef]</span></span>
<span class="l"><a class="anc" name="94ef" href="#94ef">[94ef]</a><span class="cd"><span class="i">STX</span> <span class="o">a:<a href="RAM.html#Password_CursorRow">Password_CursorRow</a></span></span><span class="ce">; Set the new cursor row.</span></span>
<span class="l"><a class="anc" name="94f2" href="#94f2">[94f2]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#PasswordScreen_IsCursorSpotInvalid">PasswordScreen_IsCursorSpotInvalid</a></span></span><span class="ce">; Check if the destination spot is valid.</span></span>
<span class="l"><a class="anc" name="94f5" href="#94f5">[94f5]</a><span class="cd"><span class="i">BCS</span> <span class="o"><a href="#@_moveUp">@_moveUp</a></span></span><span class="ce">; If not, move up one row.</span></span>
<span class="l"></span>
<a name=":94f7:@_return"></a><span class="l"><a class="anc" name="94f7" href="#94f7">[94f7]</a><a href="#:94f7:@_return" class="lla">@_return:</a><span class="ce">; [$94f7]</span></span>
<span class="l"><a class="anc" name="94f7" href="#94f7">[94f7]</a><span class="cd"><span class="i">RTS</span></span></span>
<span class="l"></span>
<span class="l"></span>
<a name=":94f8:@_moveDown"></a><div class="c">;
; We're moving one row down.
;
</div><span class="l"><a class="anc" name="94f8" href="#94f8">[94f8]</a><a href="#:94f8:@_moveDown" class="lla">@_moveDown:</a><span class="ce">; [$94f8]</span></span>
<span class="l"><a class="anc" name="94f8" href="#94f8">[94f8]</a><span class="cd"><span class="i">LDX</span> <span class="o">a:<a href="RAM.html#Password_CursorRow">Password_CursorRow</a></span></span><span class="ce">; X = Cursor row</span></span>
<span class="l"><a class="anc" name="94fb" href="#94fb">[94fb]</a><span class="cd"><span class="i">INX</span></span><span class="ce">; X++ (move down)</span></span>
<span class="l"><a class="anc" name="94fc" href="#94fc">[94fc]</a><span class="cd"><span class="i">CPX</span> <span class="o">#$05</span></span><span class="ce">; Did we move to row 5?</span></span>
<span class="l"><a class="anc" name="94fe" href="#94fe">[94fe]</a><span class="cd"><span class="i">BEQ</span> <span class="o"><a href="#@_moveDownToRow5">@_moveDownToRow5</a></span></span><span class="ce">; If so, jump to handle it specially.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; The cursor moved down to row &lt; 5.
;
</div><span class="l"><a class="anc" name="9500" href="#9500">[9500]</a><span class="cd"><span class="i">BCC</span> <span class="o"><a href="#@_updateCursorRowDown">@_updateCursorRowDown</a></span></span><span class="ce">; Move the cursor down a row.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; We've moved down past the last row. We'll be wrapping.
;
</div><span class="l"><a class="anc" name="9502" href="#9502">[9502]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#PasswordScreen_UpdateCursorMovedFromLastRow">PasswordScreen_UpdateCursorMovedFromLastRow</a></span></span><span class="ce">; Handle moving from the last row.</span></span>
<span class="l"><a class="anc" name="9505" href="#9505">[9505]</a><span class="cd"><span class="i">LDX</span> <span class="o">#$00</span></span><span class="ce">; X = 0 (new row)</span></span>
<span class="l"><a class="anc" name="9507" href="#9507">[9507]</a><span class="cd"><span class="i">BEQ</span> <span class="o"><a href="#@_updateCursorRowDown">@_updateCursorRowDown</a></span></span><span class="ce">; Move the cursor there.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name=":9509:@_moveDownToRow5"></a><div class="c">;
; We're on the final row, with the arrows, DEL, and END.
; We have to ensure the cursor position is a multiple of 2,
; since each of these take 2 character positions.
;
</div><span class="l"><a class="anc" name="9509" href="#9509">[9509]</a><a href="#:9509:@_moveDownToRow5" class="lla">@_moveDownToRow5:</a><span class="ce">; [$9509]</span></span>
<span class="l"><a class="anc" name="9509" href="#9509">[9509]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#PasswordScreen_UpdateCursorMovedToLastRow">PasswordScreen_UpdateCursorMovedToLastRow</a></span></span><span class="ce">; Handle moving to the last row.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name=":950c:@_updateCursorRowDown"></a><div class="c">;
; Save the new row position.
;
</div><span class="l"><a class="anc" name="950c" href="#950c">[950c]</a><a href="#:950c:@_updateCursorRowDown" class="lla">@_updateCursorRowDown:</a><span class="ce">; [$950c]</span></span>
<span class="l"><a class="anc" name="950c" href="#950c">[950c]</a><span class="cd"><span class="i">STX</span> <span class="o">a:<a href="RAM.html#Password_CursorRow">Password_CursorRow</a></span></span><span class="ce">; Store the new cursor row.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Keep running this logic while the cursor is wrapping
; vertically so we end up with a proper row and column
; offset.
;
</div><span class="l"><a class="anc" name="950f" href="#950f">[950f]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#PasswordScreen_IsCursorSpotInvalid">PasswordScreen_IsCursorSpotInvalid</a></span></span><span class="ce">; Check if the new position is invalid.</span></span>
<span class="l"><a class="anc" name="9512" href="#9512">[9512]</a><span class="cd"><span class="i">BCS</span> <span class="o"><a href="#@_moveDown">@_moveDown</a></span></span><span class="ce">; If so, move down one more row (looping as necessary).</span></span>
<span class="l"><a class="anc" name="9514" href="#9514">[9514]</a><span class="cd"><span class="i">RTS</span></span><span class="ce">; And return.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name=":9515:@_moveLeft"></a><div class="c">;
; Move the cursor left, handling wrapping and repositioning
; if on an invalid spot.
;
</div><span class="l"><a class="anc" name="9515" href="#9515">[9515]</a><a href="#:9515:@_moveLeft" class="lla">@_moveLeft:</a><span class="ce">; [$9515]</span></span>
<span class="l"><a class="anc" name="9515" href="#9515">[9515]</a><span class="cd"><span class="i">LDX</span> <span class="o">a:<a href="RAM.html#Password_CursorCol">Password_CursorCol</a></span></span><span class="ce">; X = Cursor column</span></span>
<span class="l"><a class="anc" name="9518" href="#9518">[9518]</a><span class="cd"><span class="i">DEX</span></span><span class="ce">; X-- (move left)</span></span>
<span class="l"><a class="anc" name="9519" href="#9519">[9519]</a><span class="cd"><span class="i">BPL</span> <span class="o"><a href="#@_updateCursorColRight">@_updateCursorColRight</a></span></span><span class="ce">; If &gt;= 0, jump to move right.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; We're wrapping from the left to the right.
;
</div><span class="l"><a class="anc" name="951b" href="#951b">[951b]</a><span class="cd"><span class="i">LDX</span> <span class="o">#$0c</span></span><span class="ce">; Set the cursor to column 12.</span></span>
<span class="l"></span>
<a name=":951d:@_updateCursorColRight"></a><span class="l"><a class="anc" name="951d" href="#951d">[951d]</a><a href="#:951d:@_updateCursorColRight" class="lla">@_updateCursorColRight:</a><span class="ce">; [$951d]</span></span>
<span class="l"><a class="anc" name="951d" href="#951d">[951d]</a><span class="cd"><span class="i">STX</span> <span class="o">a:<a href="RAM.html#Password_CursorCol">Password_CursorCol</a></span></span><span class="ce">; Store the new cursor column.</span></span>
<span class="l"><a class="anc" name="9520" href="#9520">[9520]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#PasswordScreen_IsCursorSpotInvalid">PasswordScreen_IsCursorSpotInvalid</a></span></span><span class="ce">; Check if the new position is invalid.</span></span>
<span class="l"><a class="anc" name="9523" href="#9523">[9523]</a><span class="cd"><span class="i">BCS</span> <span class="o"><a href="#@_moveLeft">@_moveLeft</a></span></span><span class="ce">; If so, move left again.</span></span>
<span class="l"><a class="anc" name="9525" href="#9525">[9525]</a><span class="cd"><span class="i">RTS</span></span><span class="ce">; And return.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name=":9526:@_moveRight"></a><div class="c">;
; Move the cursor right, handling wrapping and repositioning
; if on an invalid spot.
;
</div><span class="l"><a class="anc" name="9526" href="#9526">[9526]</a><a href="#:9526:@_moveRight" class="lla">@_moveRight:</a><span class="ce">; [$9526]</span></span>
<span class="l"><a class="anc" name="9526" href="#9526">[9526]</a><span class="cd"><span class="i">LDX</span> <span class="o">a:<a href="RAM.html#Password_CursorCol">Password_CursorCol</a></span></span><span class="ce">; X = Cursor column.</span></span>
<span class="l"><a class="anc" name="9529" href="#9529">[9529]</a><span class="cd"><span class="i">INX</span></span><span class="ce">; X++ (move right)</span></span>
<span class="l"><a class="anc" name="952a" href="#952a">[952a]</a><span class="cd"><span class="i">CPX</span> <span class="o">#$0d</span></span><span class="ce">; Is the new position &lt; 13?</span></span>
<span class="l"><a class="anc" name="952c" href="#952c">[952c]</a><span class="cd"><span class="i">BCC</span> <span class="o"><a href="#@_updateCursorColLeft">@_updateCursorColLeft</a></span></span><span class="ce">; If so, jump to move left.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; We're wrapping from the right to the left.
;
</div><span class="l"><a class="anc" name="952e" href="#952e">[952e]</a><span class="cd"><span class="i">LDX</span> <span class="o">#$00</span></span><span class="ce">; X = 0 (new cursor position).</span></span>
<span class="l"></span>
<a name=":9530:@_updateCursorColLeft"></a><span class="l"><a class="anc" name="9530" href="#9530">[9530]</a><a href="#:9530:@_updateCursorColLeft" class="lla">@_updateCursorColLeft:</a><span class="ce">; [$9530]</span></span>
<span class="l"><a class="anc" name="9530" href="#9530">[9530]</a><span class="cd"><span class="i">STX</span> <span class="o">a:<a href="RAM.html#Password_CursorCol">Password_CursorCol</a></span></span><span class="ce">; Store the new cursor position.</span></span>
<span class="l"><a class="anc" name="9533" href="#9533">[9533]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#PasswordScreen_IsCursorSpotInvalid">PasswordScreen_IsCursorSpotInvalid</a></span></span><span class="ce">; Check if the new position is invalid.</span></span>
<span class="l"><a class="anc" name="9536" href="#9536">[9536]</a><span class="cd"><span class="i">BCS</span> <span class="o"><a href="#@_moveRight">@_moveRight</a></span></span><span class="ce">; If so, move right again (looping as needed).</span></span>
<span class="l"><a class="anc" name="9538" href="#9538">[9538]</a><span class="cd"><span class="i">RTS</span></span><span class="ce">; And return.</span></span>
<span class="l"></span>
<span class="l"></span>
</pre><pre><a name="PasswordScreen_UpdateCursorMovedToLastRow"></a><div class="cp">;============================================================================
; Update the cursor column for the bottom row of the password screen.
;
; When the cursor is on the bottom row, the cursor doesn't
; move one step at a time, it moves 2. The reason is that
; the arrows, DEL, and END are all 2 characters.
;
; INPUTS:
;     <a href="RAM.html#Password_CursorCol">Password_CursorCol</a>:
;         The current cursor column position.
;
; OUTPUTS:
;     <a href="RAM.html#Password_CursorCol">Password_CursorCol</a>:
;         The normalized cursor position.
;
; XREFS:
;     <a href="#Password_HandleDPadInput">Password_HandleDPadInput</a>
;============================================================================
</div><span class="l"><a class="anc" name="9539" href="#9539">[9539]</a><a href="#PasswordScreen_UpdateCursorMovedToLastRow" class="la">PasswordScreen_UpdateCursorMovedToLastRow:</a><span class="ce">; [$9539]</span></span>
<span class="l"><a class="anc" name="9539" href="#9539">[9539]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#Password_CursorCol">Password_CursorCol</a></span></span><span class="ce">; Load the cursor column.</span></span>
<span class="l"><a class="anc" name="953c" href="#953c">[953c]</a><span class="cd"><span class="i">CMP</span> <span class="o">#$08</span></span><span class="ce">; Is it &gt;= 8? (invalid position)</span></span>
<span class="l"><a class="anc" name="953e" href="#953e">[953e]</a><span class="cd"><span class="i">BCS</span> <span class="o"><a href="#RETURN_9544">RETURN_9544</a></span></span><span class="ce">; If so, return.</span></span>
<span class="l"><a class="anc" name="9540" href="#9540">[9540]</a><span class="cd"><span class="i">LSR</span> <span class="o">A</span></span><span class="ce">; Else, divide by 2 (each symbol is 2 tiles).</span></span>
<span class="l"></span>
<div class="c">;
; v-- Fall through --v
;
</div><span class="l"></span>
<span class="l"></span>
</pre><pre><a name="PasswordScreen_SetCursorCol"></a><div class="cp">;============================================================================
; Set the cursor column in the password input grid.
;
; INPUTS:
;     A:
;         The cursor column.
;
; OUTPUTS:
;     <a href="RAM.html#Password_CursorCol">Password_CursorCol</a>:
;         The updated cursor column.
;
; XREFS:
;     <a href="#PasswordScreen_UpdateCursorMovedFromLastRow">PasswordScreen_UpdateCursorMovedFromLastRow</a>
;============================================================================
</div><span class="l"><a class="anc" name="9541" href="#9541">[9541]</a><a href="#PasswordScreen_SetCursorCol" class="la">PasswordScreen_SetCursorCol:</a><span class="ce">; [$9541]</span></span>
<span class="l"><a class="anc" name="9541" href="#9541">[9541]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#Password_CursorCol">Password_CursorCol</a></span></span><span class="ce">; Set the cursor position.</span></span>
<span class="l"></span>
<a name="RETURN_9544"></a><div class="c">;
; XREFS:
;     <a href="#PasswordScreen_UpdateCursorMovedFromLastRow">PasswordScreen_UpdateCursorMovedFromLastRow</a>
;     <a href="#PasswordScreen_UpdateCursorMovedToLastRow">PasswordScreen_UpdateCursorMovedToLastRow</a>
;
</div><span class="l"><a class="anc" name="9544" href="#9544">[9544]</a><a href="#RETURN_9544" class="la">RETURN_9544:</a><span class="ce">; [$9544]</span></span>
<span class="l"><a class="anc" name="9544" href="#9544">[9544]</a><span class="cd"><span class="i">RTS</span></span></span>
<span class="l"></span>
<span class="l"></span>
</pre><pre><a name="PasswordScreen_UpdateCursorMovedFromLastRow"></a><div class="cp">;============================================================================
; Handle moving the cursor away from the last input row.
;
; This is called either when moving up from the row or down
; from the row (wrapping around to the top).
;
; The cursor position may be normalized to fit in a matching
; column on the destination row. The hand will then be
; redrawn.
;
; There's some protection against invalid positions, which
; in theory should not happen (at least with the US release).
;
; INPUTS:
;     <a href="RAM.html#Password_CursorCol">Password_CursorCol</a>:
;         The current cursor column.
;
; OUTPUTS:
;     <a href="RAM.html#Password_CursorCol">Password_CursorCol</a>:
;         The updated cursor column.
;
; CALLS:
;     <a href="PRG15_MIRROR.html#UI_DrawPromptInputSymbol">UI_DrawPromptInputSymbol</a>
;
; XREFS:
;     <a href="#Password_HandleDPadInput">Password_HandleDPadInput</a>
;============================================================================
</div><span class="l"><a class="anc" name="9545" href="#9545">[9545]</a><a href="#PasswordScreen_UpdateCursorMovedFromLastRow" class="la">PasswordScreen_UpdateCursorMovedFromLastRow:</a><span class="ce">; [$9545]</span></span>
<span class="l"><a class="anc" name="9545" href="#9545">[9545]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#Password_CursorCol">Password_CursorCol</a></span></span><span class="ce">; Load the cursor column.</span></span>
<span class="l"><a class="anc" name="9548" href="#9548">[9548]</a><span class="cd"><span class="i">CMP</span> <span class="o">#$04</span></span><span class="ce">; Is it &gt;= 4? (invalid position)</span></span>
<span class="l"><a class="anc" name="954a" href="#954a">[954a]</a><span class="cd"><span class="i">BCS</span> <span class="o"><a href="#RETURN_9544">RETURN_9544</a></span></span><span class="ce">; If so, return.</span></span>
<span class="l"><a class="anc" name="954c" href="#954c">[954c]</a><span class="cd"><span class="i">ASL</span> <span class="o">A</span></span><span class="ce">; Else, multiply by 2 (each symbol is 2 tiles).</span></span>
<span class="l"><a class="anc" name="954d" href="#954d">[954d]</a><span class="cd"><span class="i">BCC</span> <span class="o"><a href="#PasswordScreen_SetCursorCol">PasswordScreen_SetCursorCol</a></span></span><span class="ce">; If the new position is invalid, reset the cursor position.</span></span>
<span class="l"></span>
<div class="c">;
; v-- Fall through --v
;
</div><span class="l"></span>
<span class="l"></span>
</pre><pre><a name="PasswordScreen_DrawSelectionCursor"></a><div class="cp">;============================================================================
; Draw the selection cursor on the password screen.
;
; This will draw the cursor at the given cursor position on
; the screen. This is drawn every frame.
;
; INPUTS:
;     <a href="RAM.html#InterruptCounter">InterruptCounter</a>:
;         The current interrupt counter, used to rate limit
;         updates.
;
;     <a href="RAM.html#Password_CursorCol">Password_CursorCol</a>:
;         The tile X position of the cursor.
;
;     <a href="RAM.html#Password_CursorRow">Password_CursorRow</a>:
;         The tile Y position of the cursor.
;
; OUTPUTS:
;     None.
;
; CALLS:
;     <a href="PRG15_MIRROR.html#UI_DrawPromptInputSymbol">UI_DrawPromptInputSymbol</a>
;
; XREFS:
;     <a href="#PasswordScreen_DrawAndHandleInputLoop">PasswordScreen_DrawAndHandleInputLoop</a>
;============================================================================
</div><span class="l"><a class="anc" name="954f" href="#954f">[954f]</a><a href="#PasswordScreen_DrawSelectionCursor" class="la">PasswordScreen_DrawSelectionCursor:</a><span class="ce">; [$954f]</span></span>
<span class="l"><a class="anc" name="954f" href="#954f">[954f]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#Password_CursorCol">Password_CursorCol</a></span></span><span class="ce">; A = cursor column.</span></span>
<span class="l"><a class="anc" name="9552" href="#9552">[9552]</a><span class="cd"><span class="i">LDX</span> <span class="o">a:<a href="RAM.html#Password_CursorRow">Password_CursorRow</a></span></span><span class="ce">; X = cursor row.</span></span>
<span class="l"><a class="anc" name="9555" href="#9555">[9555]</a><span class="cd"><span class="i">CPX</span> <span class="o">#$05</span></span><span class="ce">; Is the row 5 (arrows, delete, end)?</span></span>
<span class="l"><a class="anc" name="9557" href="#9557">[9557]</a><span class="cd"><span class="i">BNE</span> <span class="o"><a href="#@_setSymbolPos">@_setSymbolPos</a></span></span><span class="ce">; If not, jump.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; This is row 5, containing the back/forward arrows,
; DEL, and END.
;
; Each symbol takes 2 columns, so we'll start by multiplying
; the cursor by 2 so we always jump 2 at a time.
;
</div><span class="l"><a class="anc" name="9559" href="#9559">[9559]</a><span class="cd"><span class="i">ASL</span> <span class="o">A</span></span><span class="ce">; Multiply the column by 2.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name=":955a:@_setSymbolPos"></a><div class="c">;
; Compute an X position for the symbol.
;
</div><span class="l"><a class="anc" name="955a" href="#955a">[955a]</a><a href="#:955a:@_setSymbolPos" class="lla">@_setSymbolPos:</a><span class="ce">; [$955a]</span></span>
<span class="l"><a class="anc" name="955a" href="#955a">[955a]</a><span class="cd"><span class="i">ASL</span> <span class="o">A</span></span><span class="ce">; Convert to pixel position (2 tile width: 16).</span></span>
<span class="l"><a class="anc" name="955b" href="#955b">[955b]</a><span class="cd"><span class="i">ASL</span> <span class="o">A</span></span></span>
<span class="l"><a class="anc" name="955c" href="#955c">[955c]</a><span class="cd"><span class="i">ASL</span> <span class="o">A</span></span></span>
<span class="l"><a class="anc" name="955d" href="#955d">[955d]</a><span class="cd"><span class="i">ASL</span> <span class="o">A</span></span></span>
<span class="l"><a class="anc" name="955e" href="#955e">[955e]</a><span class="cd"><span class="i">ADC</span> <span class="o">#$20</span></span><span class="ce">; Add 32 (left padding).</span></span>
<span class="l"><a class="anc" name="9560" href="#9560">[9560]</a><span class="cd"><span class="i">TAX</span></span><span class="ce">; X = result.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Compute a Y position for the symbol.
;
</div><span class="l"><a class="anc" name="9561" href="#9561">[9561]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#Password_CursorRow">Password_CursorRow</a></span></span><span class="ce">; A = cursor row.</span></span>
<span class="l"><a class="anc" name="9564" href="#9564">[9564]</a><span class="cd"><span class="i">ASL</span> <span class="o">A</span></span><span class="ce">; Convert to pixel position (2 tile height: 16).</span></span>
<span class="l"><a class="anc" name="9565" href="#9565">[9565]</a><span class="cd"><span class="i">ASL</span> <span class="o">A</span></span></span>
<span class="l"><a class="anc" name="9566" href="#9566">[9566]</a><span class="cd"><span class="i">ASL</span> <span class="o">A</span></span></span>
<span class="l"><a class="anc" name="9567" href="#9567">[9567]</a><span class="cd"><span class="i">ASL</span> <span class="o">A</span></span></span>
<span class="l"><a class="anc" name="9568" href="#9568">[9568]</a><span class="cd"><span class="i">ADC</span> <span class="o">#$55</span></span><span class="ce">; Add 85 (start of first row).</span></span>
<span class="l"><a class="anc" name="956a" href="#956a">[956a]</a><span class="cd"><span class="i">TAY</span></span><span class="ce">; Y = result.</span></span>
<span class="l"><a class="anc" name="956b" href="#956b">[956b]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$e4</span></span><span class="ce">; A = 0xE4 (hand symbol)</span></span>
<span class="l"><a class="anc" name="956d" href="#956d">[956d]</a><span class="cd"><span class="i">JMP</span> <span class="o">$fca7</span></span><span class="ce">; Draw the symbol.</span></span>
<span class="l"></span>
<span class="l"></span>
</pre><pre><a name="Player_SetStartGameState"></a><div class="cp">;============================================================================
; Set the starting game state for the player.
;
; This will place them in Eolis, with all basic stats,
; no gold, no experience, no inventory.
;
; INPUTS:
;     None
;
; OUTPUTS:
;     <a href="RAM.html#TempleSpawnPoint">TempleSpawnPoint</a>:
;     <a href="RAM.html#PlayerTitle">PlayerTitle</a>:
;     <a href="RAM.html#SpecialItems">SpecialItems</a>:
;     <a href="RAM.html#Quests">Quests</a>:
;     <a href="RAM.html#NumberOfWeapons">NumberOfWeapons</a>:
;     <a href="RAM.html#NumberOfArmors">NumberOfArmors</a>:
;     <a href="RAM.html#NumberOfShields">NumberOfShields</a>:
;     <a href="RAM.html#NumberOfMagicSpells">NumberOfMagicSpells</a>:
;     <a href="RAM.html#NumberOfItems">NumberOfItems</a>:
;     <a href="RAM.html#NextPlayerTitle">NextPlayerTitle</a>:
;     <a href="RAM.html#Gold">Gold</a>:
;     <a href="RAM.html#Gold_M">Gold_M</a>:
;     <a href="RAM.html#Gold_U">Gold_U</a>:
;         0
;
;     <a href="RAM.html#SelectedWeapon">SelectedWeapon</a>:
;     <a href="RAM.html#SelectedArmor">SelectedArmor</a>:
;     <a href="RAM.html#SelectedShield">SelectedShield</a>:
;     <a href="RAM.html#SelectedMagic">SelectedMagic</a>:
;     <a href="RAM.html#SelectedItem">SelectedItem</a>:
;         0xFF
;
; XREFS:
;     <a href="PRG15_MIRROR.html#Game_ShowStartScreen">Game_ShowStartScreen</a>
;============================================================================
</div><span class="l"><a class="anc" name="9570" href="#9570">[9570]</a><a href="#Player_SetStartGameState" class="la">Player_SetStartGameState:</a><span class="ce">; [$9570]</span></span>
<span class="l"><a class="anc" name="9570" href="#9570">[9570]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$00</span></span></span>
<span class="l"><a class="anc" name="9572" href="#9572">[9572]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#TempleSpawnPoint">TempleSpawnPoint</a></span></span><span class="ce">; Set the temple spawn to 0.</span></span>
<span class="l"><a class="anc" name="9575" href="#9575">[9575]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#PlayerTitle">PlayerTitle</a></span></span><span class="ce">; Set the player title to 0 (Novice).</span></span>
<span class="l"><a class="anc" name="9578" href="#9578">[9578]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#SpecialItems">SpecialItems</a></span></span><span class="ce">; Clear the special items.</span></span>
<span class="l"><a class="anc" name="957b" href="#957b">[957b]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#Quests">Quests</a></span></span><span class="ce">; Clear the quests.</span></span>
<span class="l"><a class="anc" name="957e" href="#957e">[957e]</a><span class="cd"><span class="i">LDX</span> <span class="o">#$ff</span></span></span>
<span class="l"><a class="anc" name="9580" href="#9580">[9580]</a><span class="cd"><span class="i">STX</span> <span class="o">a:<a href="RAM.html#SelectedWeapon">SelectedWeapon</a></span></span><span class="ce">; Clear the selected weapon.</span></span>
<span class="l"><a class="anc" name="9583" href="#9583">[9583]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#SelectedArmor">SelectedArmor</a></span></span><span class="ce">; Clear the selected armor.</span></span>
<span class="l"><a class="anc" name="9586" href="#9586">[9586]</a><span class="cd"><span class="i">STX</span> <span class="o">a:<a href="RAM.html#SelectedShield">SelectedShield</a></span></span><span class="ce">; Clear the selected shield.</span></span>
<span class="l"><a class="anc" name="9589" href="#9589">[9589]</a><span class="cd"><span class="i">STX</span> <span class="o">a:<a href="RAM.html#SelectedMagic">SelectedMagic</a></span></span><span class="ce">; Clear the selected magic.</span></span>
<span class="l"><a class="anc" name="958c" href="#958c">[958c]</a><span class="cd"><span class="i">STX</span> <span class="o">a:<a href="RAM.html#SelectedItem">SelectedItem</a></span></span><span class="ce">; Clear the selected item.</span></span>
<span class="l"><a class="anc" name="958f" href="#958f">[958f]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#NumberOfWeapons">NumberOfWeapons</a></span></span><span class="ce">; Set the number of weapons to 0.</span></span>
<span class="l"><a class="anc" name="9592" href="#9592">[9592]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#NumberOfArmors">NumberOfArmors</a></span></span><span class="ce">; Set the number of armor to 0.</span></span>
<span class="l"><a class="anc" name="9595" href="#9595">[9595]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#NumberOfShields">NumberOfShields</a></span></span><span class="ce">; Set the number of shields to 0.</span></span>
<span class="l"><a class="anc" name="9598" href="#9598">[9598]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#NumberOfMagicSpells">NumberOfMagicSpells</a></span></span><span class="ce">; Set the number of magic spells to 0.</span></span>
<span class="l"><a class="anc" name="959b" href="#959b">[959b]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#NumberOfItems">NumberOfItems</a></span></span><span class="ce">; Set the number of items to 0.</span></span>
<span class="l"><a class="anc" name="959e" href="#959e">[959e]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#Experience">Experience</a></span></span><span class="ce">; Set the experience to 0.</span></span>
<span class="l"><a class="anc" name="95a1" href="#95a1">[95a1]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#Experience_U">Experience_U</a></span></span></span>
<span class="l"><a class="anc" name="95a4" href="#95a4">[95a4]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#Gold">Gold</a></span></span><span class="ce">; Set the gold to 0.</span></span>
<span class="l"><a class="anc" name="95a7" href="#95a7">[95a7]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#Gold_M">Gold_M</a></span></span></span>
<span class="l"><a class="anc" name="95aa" href="#95aa">[95aa]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#Gold_U">Gold_U</a></span></span></span>
<span class="l"><a class="anc" name="95ad" href="#95ad">[95ad]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#NextPlayerTitle">NextPlayerTitle</a></span></span><span class="ce">; Set the next player title to 0 (Novice).</span></span>
<span class="l"><a class="anc" name="95b0" href="#95b0">[95b0]</a><span class="cd"><span class="i">RTS</span></span></span>
<span class="l"></span>
<span class="l"></span>
</pre><pre><a name="Player_SetInitialExpAndGold"></a><div class="cp">;============================================================================
; Set the initial experience and gold based on the title.
;
; This will set initial experience and gold for the player
; based on their title. This is used after starting from a
; password.
;
; INPUTS:
;     <a href="RAM.html#PlayerTitle">PlayerTitle</a>:
;         The player's title.
;
;     <a href="PRG15_MIRROR.html#PLAYER_TITLE_EXP_NEEDED">PLAYER_TITLE_EXP_NEEDED</a>:
;         Lookup table for the experience, based on title
;         index.
;
;     <a href="PRG15_MIRROR.html#PLAYER_TITLE_GOLD">PLAYER_TITLE_GOLD</a>:
;         Lookup table for the gold, based on title index.
;
; OUTPUTS:
;     <a href="RAM.html#NextPlayerTitle">NextPlayerTitle</a>:
;         The next player title.
;
;     <a href="RAM.html#Experience">Experience</a>:
;     <a href="RAM.html#Experience_U">Experience_U</a>:
;         The player's new starting experience.
;
;     <a href="RAM.html#Gold">Gold</a>:
;     <a href="RAM.html#Gold_M">Gold_M</a>:
;     <a href="RAM.html#Gold_U">Gold_U</a>:
;          The player's new starting gold.
;
; XREFS:
;     <a href="PRG15_MIRROR.html#Game_ShowStartScreen">Game_ShowStartScreen</a>
;============================================================================
</div><span class="l"><a class="anc" name="95b1" href="#95b1">[95b1]</a><a href="#Player_SetInitialExpAndGold" class="la">Player_SetInitialExpAndGold:</a><span class="ce">; [$95b1]</span></span>
<div class="c">;
; Set the next player title as the current.
;
</div><span class="l"><a class="anc" name="95b1" href="#95b1">[95b1]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#PlayerTitle">PlayerTitle</a></span></span><span class="ce">; Load the current player title.</span></span>
<span class="l"><a class="anc" name="95b4" href="#95b4">[95b4]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#NextPlayerTitle">NextPlayerTitle</a></span></span><span class="ce">; Set it as the next.</span></span>
<span class="l"><a class="anc" name="95b7" href="#95b7">[95b7]</a><span class="cd"><span class="i">BEQ</span> <span class="o"><a href="#@_isNovice">@_isNovice</a></span></span><span class="ce">; If it's 0 (Novice), jump.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Generate an offset into the gold and experience arrays.
;
</div><span class="l"><a class="anc" name="95b9" href="#95b9">[95b9]</a><span class="cd"><span class="i">ASL</span> <span class="o">A</span></span><span class="ce">; Multiply by 2 to generate an offset into the lookup tables.</span></span>
<span class="l"><a class="anc" name="95ba" href="#95ba">[95ba]</a><span class="cd"><span class="i">TAX</span></span><span class="ce">; X = A</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Set the player's experience.
;
; Note that this looks up starting at an offset 2 bytes
; *before* the lookup table. This is because this code
; is always working with an X starting at 2, which becomes
; effectively 0 in the lookup table.
;
; These tables are in bank 15.
;
</div><span class="l"><a class="anc" name="95bb" href="#95bb">[95bb]</a><span class="cd"><span class="i">LDA</span> <span class="o">$f747,X</span></span><span class="ce">; Load the lower byte of experience for the title.</span></span>
<span class="l"><a class="anc" name="95be" href="#95be">[95be]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#Experience">Experience</a></span></span><span class="ce">; Set it as the player's experience.</span></span>
<span class="l"><a class="anc" name="95c1" href="#95c1">[95c1]</a><span class="cd"><span class="i">LDA</span> <span class="o">$f748,X</span></span><span class="ce">; Load the uper byte of experience for the title.</span></span>
<span class="l"><a class="anc" name="95c4" href="#95c4">[95c4]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#Experience_U">Experience_U</a></span></span><span class="ce">; Set it as the player's experience.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Set the player's gold.
;
; The same off-by-2 trick is being used for this lookup table.
;
</div><span class="l"><a class="anc" name="95c7" href="#95c7">[95c7]</a><span class="cd"><span class="i">LDA</span> <span class="o">$f765,X</span></span><span class="ce">; Load the lower byte of gold.</span></span>
<span class="l"><a class="anc" name="95ca" href="#95ca">[95ca]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#Gold">Gold</a></span></span><span class="ce">; Set it.</span></span>
<span class="l"><a class="anc" name="95cd" href="#95cd">[95cd]</a><span class="cd"><span class="i">LDA</span> <span class="o">$f766,X</span></span><span class="ce">; Load the middle byte of gold.</span></span>
<span class="l"><a class="anc" name="95d0" href="#95d0">[95d0]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#Gold_M">Gold_M</a></span></span><span class="ce">; Set it.</span></span>
<span class="l"><a class="anc" name="95d3" href="#95d3">[95d3]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$00</span></span><span class="ce">; Set the upper byte to 0.</span></span>
<span class="l"><a class="anc" name="95d5" href="#95d5">[95d5]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#Gold_U">Gold_U</a></span></span></span>
<span class="l"><a class="anc" name="95d8" href="#95d8">[95d8]</a><span class="cd"><span class="i">RTS</span></span></span>
<span class="l"></span>
<span class="l"></span>
<a name=":95d9:@_isNovice"></a><div class="c">;
; The player is Novice. Set experience and gold to 0.
;
</div><span class="l"><a class="anc" name="95d9" href="#95d9">[95d9]</a><a href="#:95d9:@_isNovice" class="lla">@_isNovice:</a><span class="ce">; [$95d9]</span></span>
<span class="l"><a class="anc" name="95d9" href="#95d9">[95d9]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#Experience">Experience</a></span></span><span class="ce">; Set experience to 0.</span></span>
<span class="l"><a class="anc" name="95dc" href="#95dc">[95dc]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#Experience_U">Experience_U</a></span></span></span>
<span class="l"><a class="anc" name="95df" href="#95df">[95df]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#Gold">Gold</a></span></span><span class="ce">; Set gold to 0.</span></span>
<span class="l"><a class="anc" name="95e2" href="#95e2">[95e2]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#Gold_M">Gold_M</a></span></span></span>
<span class="l"><a class="anc" name="95e5" href="#95e5">[95e5]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#Gold_U">Gold_U</a></span></span></span>
<span class="l"><a class="anc" name="95e8" href="#95e8">[95e8]</a><span class="cd"><span class="i">RTS</span></span></span>
<span class="l"></span>
<span class="l"></span>
</pre><pre><a name="Password_Load"></a><div class="cp">;============================================================================
; Load from the calculated password state.
;
; This will decode all the state stored by the password into
; memory, performing validation to ensure that there's no
; corruption.
;
; If the state is invalid, C will be set to 1, triggering
; a Bad Password failure message.
;
; INPUTS:
;     None
;
; OUTPUTS:
;     C:
;         0 = Successfully loaded password state.
;         1 = Error with password state.
;
;     <a href="RAM.html#NumberOfArmors">NumberOfArmors</a>:
;     <a href="RAM.html#NumberOfItems">NumberOfItems</a>:
;     <a href="RAM.html#NumberOfMagicSpells">NumberOfMagicSpells</a>:
;     <a href="RAM.html#NumberOfShields">NumberOfShields</a>:
;     <a href="RAM.html#NumberOfWeapons">NumberOfWeapons</a>:
;     <a href="RAM.html#PlayerTitle">PlayerTitle</a>:
;     <a href="RAM.html#Quests">Quests</a>:
;     <a href="RAM.html#SelectedArmor">SelectedArmor</a>:
;     <a href="RAM.html#SelectedMagic">SelectedMagic</a>:
;     <a href="RAM.html#SelectedItem">SelectedItem</a>:
;     <a href="RAM.html#SelectedShield">SelectedShield</a>:
;     <a href="RAM.html#SelectedWeapon">SelectedWeapon</a>:
;     <a href="RAM.html#TempleSpawnPoint">TempleSpawnPoint</a>:
;     <a href="RAM.html#SpecialItems">SpecialItems</a>:
;         The new state loaded from the password.
;
;     <a href="RAM.html#Password_ByteCounter">Password_ByteCounter</a>:
;     <a href="RAM.html#Password_BitCounter">Password_BitCounter</a>:
;     $ee:
;     <a href="RAM.html#Maybe_Temp4">Maybe_Temp4</a>:
;         Clobbered.
;
; CALLS:
;     <a href="#Password_DecodeValue">Password_DecodeValue</a>
;     <a href="#Password_DecodeValueList">Password_DecodeValueList</a>
;     <a href="#Password_DecodeValueOrUnset">Password_DecodeValueOrUnset</a>
;
; XREFS:
;     <a href="#PasswordScreen_WaitForInput">PasswordScreen_WaitForInput</a>
;============================================================================
</div><span class="l"><a class="anc" name="95e9" href="#95e9">[95e9]</a><a href="#Password_Load" class="la">Password_Load:</a><span class="ce">; [$95e9]</span></span>
<div class="c">;
; Clear the state counters.
;
</div><span class="l"><a class="anc" name="95e9" href="#95e9">[95e9]</a><span class="cd"><span class="i">LDX</span> <span class="o">#$00</span></span></span>
<span class="l"><a class="anc" name="95eb" href="#95eb">[95eb]</a><span class="cd"><span class="i">STX</span> <span class="o">a:<a href="RAM.html#Password_ByteCounter">Password_ByteCounter</a></span></span><span class="ce">; Clear the byte counter.</span></span>
<span class="l"><a class="anc" name="95ee" href="#95ee">[95ee]</a><span class="cd"><span class="i">STX</span> <span class="o">a:<a href="RAM.html#Password_BitCounter">Password_BitCounter</a></span></span><span class="ce">; Clear the bit counter.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Decode the start and checksum values (13 bits total) and throw
; them away.
;
</div><span class="l"><a class="anc" name="95f1" href="#95f1">[95f1]</a><span class="cd"><span class="i">LDY</span> <span class="o">#$0d</span></span><span class="ce">; Y = 13 bits</span></span>
<span class="l"><a class="anc" name="95f3" href="#95f3">[95f3]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#Password_DecodeValue">Password_DecodeValue</a></span></span><span class="ce">; Decode the checksum.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Decode the temple spawn point (3 bits).
;
</div><span class="l"><a class="anc" name="95f6" href="#95f6">[95f6]</a><span class="cd"><span class="i">LDY</span> <span class="o">#$03</span></span><span class="ce">; Y = 3 bits</span></span>
<span class="l"><a class="anc" name="95f8" href="#95f8">[95f8]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#Password_DecodeValue">Password_DecodeValue</a></span></span><span class="ce">; Decode the spawn point.</span></span>
<span class="l"><a class="anc" name="95fb" href="#95fb">[95fb]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#TempleSpawnPoint">TempleSpawnPoint</a></span></span><span class="ce">; And store it.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Decode the player title (4 bits).
;
</div><span class="l"><a class="anc" name="95fe" href="#95fe">[95fe]</a><span class="cd"><span class="i">LDY</span> <span class="o">#$04</span></span><span class="ce">; Y = 4 bits</span></span>
<span class="l"><a class="anc" name="9600" href="#9600">[9600]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#Password_DecodeValue">Password_DecodeValue</a></span></span><span class="ce">; Decode the player title.</span></span>
<span class="l"><a class="anc" name="9603" href="#9603">[9603]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#PlayerTitle">PlayerTitle</a></span></span><span class="ce">; And store it.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Decode the special items bitmask (8 bits).
;
</div><span class="l"><a class="anc" name="9606" href="#9606">[9606]</a><span class="cd"><span class="i">LDY</span> <span class="o">#$08</span></span><span class="ce">; Y = 8 bits</span></span>
<span class="l"><a class="anc" name="9608" href="#9608">[9608]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#Password_DecodeValue">Password_DecodeValue</a></span></span><span class="ce">; Decode the special items bitmask.</span></span>
<span class="l"><a class="anc" name="960b" href="#960b">[960b]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#SpecialItems">SpecialItems</a></span></span><span class="ce">; And store it.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Decode the quests bitmask (8 bits).
;
</div><span class="l"><a class="anc" name="960e" href="#960e">[960e]</a><span class="cd"><span class="i">LDY</span> <span class="o">#$08</span></span><span class="ce">; Y = 8 bits</span></span>
<span class="l"><a class="anc" name="9610" href="#9610">[9610]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#Password_DecodeValue">Password_DecodeValue</a></span></span><span class="ce">; Decode the quests bitmask.</span></span>
<span class="l"><a class="anc" name="9613" href="#9613">[9613]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#Quests">Quests</a></span></span><span class="ce">; And store it.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Decode the selected weapon (2 bits).
;
</div><span class="l"><a class="anc" name="9616" href="#9616">[9616]</a><span class="cd"><span class="i">LDY</span> <span class="o">#$02</span></span><span class="ce">; Y = 2 bits</span></span>
<span class="l"><a class="anc" name="9618" href="#9618">[9618]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#Password_DecodeValueOrUnset">Password_DecodeValueOrUnset</a></span></span><span class="ce">; Decode the selected weapon.</span></span>
<span class="l"><a class="anc" name="961b" href="#961b">[961b]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#SelectedWeapon">SelectedWeapon</a></span></span><span class="ce">; And store it.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Decode the selected armor (2 bits).
;
</div><span class="l"><a class="anc" name="961e" href="#961e">[961e]</a><span class="cd"><span class="i">LDY</span> <span class="o">#$02</span></span><span class="ce">; Y = 2 bits</span></span>
<span class="l"><a class="anc" name="9620" href="#9620">[9620]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#Password_DecodeValueOrUnset">Password_DecodeValueOrUnset</a></span></span><span class="ce">; Decode the selected armor.</span></span>
<span class="l"><a class="anc" name="9623" href="#9623">[9623]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#SelectedArmor">SelectedArmor</a></span></span><span class="ce">; And store it.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Decode the selected shield (2 bits).
;
</div><span class="l"><a class="anc" name="9626" href="#9626">[9626]</a><span class="cd"><span class="i">LDY</span> <span class="o">#$02</span></span><span class="ce">; Y = 2 bits</span></span>
<span class="l"><a class="anc" name="9628" href="#9628">[9628]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#Password_DecodeValueOrUnset">Password_DecodeValueOrUnset</a></span></span><span class="ce">; Decode the selected shield.</span></span>
<span class="l"><a class="anc" name="962b" href="#962b">[962b]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#SelectedShield">SelectedShield</a></span></span><span class="ce">; And store it.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Decode the selected magic spell (3 bits).
;
</div><span class="l"><a class="anc" name="962e" href="#962e">[962e]</a><span class="cd"><span class="i">LDY</span> <span class="o">#$03</span></span><span class="ce">; Y = 3 bits</span></span>
<span class="l"><a class="anc" name="9630" href="#9630">[9630]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#Password_DecodeValueOrUnset">Password_DecodeValueOrUnset</a></span></span><span class="ce">; Decode the selected magic spell.</span></span>
<span class="l"><a class="anc" name="9633" href="#9633">[9633]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#SelectedMagic">SelectedMagic</a></span></span><span class="ce">; And store it.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Decode the selected item (5 bits).
;
</div><span class="l"><a class="anc" name="9636" href="#9636">[9636]</a><span class="cd"><span class="i">LDY</span> <span class="o">#$05</span></span><span class="ce">; Y = 5 bits</span></span>
<span class="l"><a class="anc" name="9638" href="#9638">[9638]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#Password_DecodeValueOrUnset">Password_DecodeValueOrUnset</a></span></span><span class="ce">; Decode the selected item.</span></span>
<span class="l"><a class="anc" name="963b" href="#963b">[963b]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#SelectedItem">SelectedItem</a></span></span><span class="ce">; And store it.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Decode the weapon inventory into <a href="RAM.html#WeaponInventory">WeaponInventory</a>.
;
</div><span class="l"><a class="anc" name="963e" href="#963e">[963e]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$9d</span></span><span class="ce">; 0x9D == Lower byte of inventory.</span></span>
<span class="l"><a class="anc" name="9640" href="#9640">[9640]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Temp_Int24_U">Temp_Int24_U</a></span></span><span class="ce">; Store it.</span></span>
<span class="l"><a class="anc" name="9642" href="#9642">[9642]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$03</span></span><span class="ce">; 0x03 == Upper byte of inventory.</span></span>
<span class="l"><a class="anc" name="9644" href="#9644">[9644]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Maybe_Temp4">Maybe_Temp4</a></span></span><span class="ce">; Store it.</span></span>
<span class="l"><a class="anc" name="9646" href="#9646">[9646]</a><span class="cd"><span class="i">LDY</span> <span class="o">#$03</span></span><span class="ce">; Y = 3 bits for items.</span></span>
<span class="l"><a class="anc" name="9648" href="#9648">[9648]</a><span class="cd"><span class="i">LDX</span> <span class="o">#$02</span></span><span class="ce">; X = 2 bits for max count.</span></span>
<span class="l"><a class="anc" name="964a" href="#964a">[964a]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#Password_DecodeValueList">Password_DecodeValueList</a></span></span><span class="ce">; Decode the weapon inventory.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Check if under the allowed number of weapons. If too many,
; bail with error.
;
</div><span class="l"><a class="anc" name="964d" href="#964d">[964d]</a><span class="cd"><span class="i">CMP</span> <span class="o">#$05</span></span><span class="ce">; Has this exceeded the inventory size?</span></span>
<span class="l"><a class="anc" name="964f" href="#964f">[964f]</a><span class="cd"><span class="i">BCS</span> <span class="o"><a href="#@_returnTrue">@_returnTrue</a></span></span><span class="ce">; If so, return with failure.</span></span>
<span class="l"><a class="anc" name="9651" href="#9651">[9651]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#NumberOfWeapons">NumberOfWeapons</a></span></span><span class="ce">; Else, store the weapon count.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Decode the armor inventory into <a href="RAM.html#ArmorInventory">ArmorInventory</a>.
;
</div><span class="l"><a class="anc" name="9654" href="#9654">[9654]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$a1</span></span><span class="ce">; 0xA1 == Lower byte of inventory.</span></span>
<span class="l"><a class="anc" name="9656" href="#9656">[9656]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Temp_Int24_U">Temp_Int24_U</a></span></span><span class="ce">; Store it.</span></span>
<span class="l"><a class="anc" name="9658" href="#9658">[9658]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$03</span></span><span class="ce">; 0x03 == Upper byte of inventory.</span></span>
<span class="l"><a class="anc" name="965a" href="#965a">[965a]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Maybe_Temp4">Maybe_Temp4</a></span></span><span class="ce">; Store it.</span></span>
<span class="l"><a class="anc" name="965c" href="#965c">[965c]</a><span class="cd"><span class="i">LDY</span> <span class="o">#$03</span></span><span class="ce">; Y = 3 bits for items.</span></span>
<span class="l"><a class="anc" name="965e" href="#965e">[965e]</a><span class="cd"><span class="i">LDX</span> <span class="o">#$02</span></span><span class="ce">; X = 2 bits for max count.</span></span>
<span class="l"><a class="anc" name="9660" href="#9660">[9660]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#Password_DecodeValueList">Password_DecodeValueList</a></span></span><span class="ce">; Decode the armor inventory.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Check if under the allowed number of armors. If too many,
; bail with error.
;
</div><span class="l"><a class="anc" name="9663" href="#9663">[9663]</a><span class="cd"><span class="i">CMP</span> <span class="o">#$05</span></span><span class="ce">; Has this exceeded the inventory size?</span></span>
<span class="l"><a class="anc" name="9665" href="#9665">[9665]</a><span class="cd"><span class="i">BCS</span> <span class="o"><a href="#@_returnTrue">@_returnTrue</a></span></span><span class="ce">; If so, return with failure.</span></span>
<span class="l"><a class="anc" name="9667" href="#9667">[9667]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#NumberOfArmors">NumberOfArmors</a></span></span><span class="ce">; Else, store the armor count.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Decode the shield inventory into <a href="RAM.html#ShieldInventory">ShieldInventory</a>.
;
</div><span class="l"><a class="anc" name="966a" href="#966a">[966a]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$a5</span></span><span class="ce">; 0xA5 == Lower byte of inventory.</span></span>
<span class="l"><a class="anc" name="966c" href="#966c">[966c]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Temp_Int24_U">Temp_Int24_U</a></span></span><span class="ce">; Store it.</span></span>
<span class="l"><a class="anc" name="966e" href="#966e">[966e]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$03</span></span><span class="ce">; 0x03 == Upper byte of inventory.</span></span>
<span class="l"><a class="anc" name="9670" href="#9670">[9670]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Maybe_Temp4">Maybe_Temp4</a></span></span><span class="ce">; Store it.</span></span>
<span class="l"><a class="anc" name="9672" href="#9672">[9672]</a><span class="cd"><span class="i">LDY</span> <span class="o">#$03</span></span><span class="ce">; Y = 3 bits for items.</span></span>
<span class="l"><a class="anc" name="9674" href="#9674">[9674]</a><span class="cd"><span class="i">LDX</span> <span class="o">#$02</span></span><span class="ce">; X = 2 bits for max count.</span></span>
<span class="l"><a class="anc" name="9676" href="#9676">[9676]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#Password_DecodeValueList">Password_DecodeValueList</a></span></span><span class="ce">; Decode the shield inventory.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Check if under the allowed number of shields. If too many,
; bail with error.
;
</div><span class="l"><a class="anc" name="9679" href="#9679">[9679]</a><span class="cd"><span class="i">CMP</span> <span class="o">#$05</span></span><span class="ce">; Has this exceeded the inventory size?</span></span>
<span class="l"><a class="anc" name="967b" href="#967b">[967b]</a><span class="cd"><span class="i">BCS</span> <span class="o"><a href="#@_returnTrue">@_returnTrue</a></span></span><span class="ce">; If so, return with failure.</span></span>
<span class="l"><a class="anc" name="967d" href="#967d">[967d]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#NumberOfShields">NumberOfShields</a></span></span><span class="ce">; Else, store the shield count.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Decode the magic inventory into <a href="RAM.html#MagicInventory">MagicInventory</a>.
;
</div><span class="l"><a class="anc" name="9680" href="#9680">[9680]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$a9</span></span><span class="ce">; 0xA9 == Lower byte of inventory.</span></span>
<span class="l"><a class="anc" name="9682" href="#9682">[9682]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Temp_Int24_U">Temp_Int24_U</a></span></span><span class="ce">; Store it.</span></span>
<span class="l"><a class="anc" name="9684" href="#9684">[9684]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$03</span></span><span class="ce">; 0x03 == Upper byte of inventory.</span></span>
<span class="l"><a class="anc" name="9686" href="#9686">[9686]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Maybe_Temp4">Maybe_Temp4</a></span></span><span class="ce">; Store it.</span></span>
<span class="l"><a class="anc" name="9688" href="#9688">[9688]</a><span class="cd"><span class="i">LDY</span> <span class="o">#$03</span></span><span class="ce">; Y = 3 bits for items.</span></span>
<span class="l"><a class="anc" name="968a" href="#968a">[968a]</a><span class="cd"><span class="i">LDX</span> <span class="o">#$03</span></span><span class="ce">; X = 3 bits for max count.</span></span>
<span class="l"><a class="anc" name="968c" href="#968c">[968c]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#Password_DecodeValueList">Password_DecodeValueList</a></span></span><span class="ce">; Decode the magic inventory.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Check if under the allowed number of magic spells. If too
; many, bail with error.
;
</div><span class="l"><a class="anc" name="968f" href="#968f">[968f]</a><span class="cd"><span class="i">CMP</span> <span class="o">#$05</span></span><span class="ce">; Has this exceeded the inventory size?</span></span>
<span class="l"><a class="anc" name="9691" href="#9691">[9691]</a><span class="cd"><span class="i">BCS</span> <span class="o"><a href="#@_returnTrue">@_returnTrue</a></span></span><span class="ce">; If so, return with failure.</span></span>
<span class="l"><a class="anc" name="9693" href="#9693">[9693]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#NumberOfMagicSpells">NumberOfMagicSpells</a></span></span><span class="ce">; Else, store the magic count.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Decode the items inventory into <a href="RAM.html#ItemInventory">ItemInventory</a>.
;
</div><span class="l"><a class="anc" name="9696" href="#9696">[9696]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$ad</span></span><span class="ce">; 0xAD == Lower byte of inventory.</span></span>
<span class="l"><a class="anc" name="9698" href="#9698">[9698]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Temp_Int24_U">Temp_Int24_U</a></span></span><span class="ce">; Store it.</span></span>
<span class="l"><a class="anc" name="969a" href="#969a">[969a]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$03</span></span><span class="ce">; 0x03 == Upper byte of inventory.</span></span>
<span class="l"><a class="anc" name="969c" href="#969c">[969c]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Maybe_Temp4">Maybe_Temp4</a></span></span><span class="ce">; Store it.</span></span>
<span class="l"><a class="anc" name="969e" href="#969e">[969e]</a><span class="cd"><span class="i">LDY</span> <span class="o">#$04</span></span><span class="ce">; Y = 4 bits for items.</span></span>
<span class="l"><a class="anc" name="96a0" href="#96a0">[96a0]</a><span class="cd"><span class="i">LDX</span> <span class="o">#$05</span></span><span class="ce">; X = 5 bits for max count.</span></span>
<span class="l"><a class="anc" name="96a2" href="#96a2">[96a2]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#Password_DecodeValueList">Password_DecodeValueList</a></span></span><span class="ce">; Decode the item inventory.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Check if under the allowed number of items. If too many,
; bail with error.
;
</div><span class="l"><a class="anc" name="96a5" href="#96a5">[96a5]</a><span class="cd"><span class="i">CMP</span> <span class="o">#$09</span></span><span class="ce">; Has this exceeded the inventory size?</span></span>
<span class="l"><a class="anc" name="96a7" href="#96a7">[96a7]</a><span class="cd"><span class="i">BCS</span> <span class="o"><a href="#@_returnTrue">@_returnTrue</a></span></span><span class="ce">; If so, return with failure.</span></span>
<span class="l"><a class="anc" name="96a9" href="#96a9">[96a9]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#NumberOfItems">NumberOfItems</a></span></span><span class="ce">; Else, store the item count.</span></span>
<span class="l"><a class="anc" name="96ac" href="#96ac">[96ac]</a><span class="cd"><span class="i">CLC</span></span><span class="ce">; Set C = 0 for success.</span></span>
<span class="l"><a class="anc" name="96ad" href="#96ad">[96ad]</a><span class="cd"><span class="i">RTS</span></span><span class="ce">; And return it.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name=":96ae:@_returnTrue"></a><div class="c">;
; The state was corrupted or invalid. Return a fail result.
;
</div><span class="l"><a class="anc" name="96ae" href="#96ae">[96ae]</a><a href="#:96ae:@_returnTrue" class="lla">@_returnTrue:</a><span class="ce">; [$96ae]</span></span>
<span class="l"><a class="anc" name="96ae" href="#96ae">[96ae]</a><span class="cd"><span class="i">SEC</span></span><span class="ce">; Set C = 0 for failure.</span></span>
<span class="l"><a class="anc" name="96af" href="#96af">[96af]</a><span class="cd"><span class="i">RTS</span></span><span class="ce">; And return it.</span></span>
<span class="l"></span>
<span class="l"></span>
</pre><pre><a name="Password_DecodeValueOrUnset"></a><div class="cp">;============================================================================
; Decode an optional value that may be unset.
;
; This will decode a 1 bit flag indicating if a value is
; set.
;
; If the flag is 1, a value is set, and will be decoded and
; returned.
;
; If the flag is 0, an unset value (0xFF) will be returned.
;
; INPUTS:
;     Y:
;         The storage size of the value in bits.
;
; OUTPUTS:
;     A:
;         The decoded value, or 0xFF if unset.
;
; CALLS:
;     <a href="#Password_DecodeValue">Password_DecodeValue</a>
;
; XREFS:
;     <a href="#Password_Load">Password_Load</a>
;============================================================================
</div><span class="l"><a class="anc" name="96b0" href="#96b0">[96b0]</a><a href="#Password_DecodeValueOrUnset" class="la">Password_DecodeValueOrUnset:</a><span class="ce">; [$96b0]</span></span>
<span class="l"><a class="anc" name="96b0" href="#96b0">[96b0]</a><span class="cd"><span class="i">TYA</span></span><span class="ce">; A = Y (number of bits)</span></span>
<span class="l"><a class="anc" name="96b1" href="#96b1">[96b1]</a><span class="cd"><span class="i">PHA</span></span><span class="ce">; Push it to the stack.</span></span>
<span class="l"><a class="anc" name="96b2" href="#96b2">[96b2]</a><span class="cd"><span class="i">LDY</span> <span class="o">#$01</span></span><span class="ce">; Y = 1</span></span>
<span class="l"><a class="anc" name="96b4" href="#96b4">[96b4]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#Password_DecodeValue">Password_DecodeValue</a></span></span><span class="ce">; Decode the set/unset flag.</span></span>
<span class="l"><a class="anc" name="96b7" href="#96b7">[96b7]</a><span class="cd"><span class="i">LSR</span> <span class="o">A</span></span><span class="ce">; Shift into Carry.</span></span>
<span class="l"><a class="anc" name="96b8" href="#96b8">[96b8]</a><span class="cd"><span class="i">PLA</span></span><span class="ce">; Pop our saved Y (number of bits).</span></span>
<span class="l"><a class="anc" name="96b9" href="#96b9">[96b9]</a><span class="cd"><span class="i">TAY</span></span><span class="ce">; Set back into Y.</span></span>
<span class="l"><a class="anc" name="96ba" href="#96ba">[96ba]</a><span class="cd"><span class="i">BCC</span> <span class="o"><a href="#@_returnUnset">@_returnUnset</a></span></span><span class="ce">; If the flag was 0, jump to return unset.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; The value is set. Decode it.
;
</div><span class="l"><a class="anc" name="96bc" href="#96bc">[96bc]</a><span class="cd"><span class="i">JMP</span> <span class="o"><a href="#Password_DecodeValue">Password_DecodeValue</a></span></span><span class="ce">; Decode the value and return it.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name=":96bf:@_returnUnset"></a><div class="c">;
; The value was not set. Return 0xFF.
;
</div><span class="l"><a class="anc" name="96bf" href="#96bf">[96bf]</a><a href="#:96bf:@_returnUnset" class="lla">@_returnUnset:</a><span class="ce">; [$96bf]</span></span>
<span class="l"><a class="anc" name="96bf" href="#96bf">[96bf]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$ff</span></span><span class="ce">; A = 0xFF (unset value).</span></span>
<span class="l"><a class="anc" name="96c1" href="#96c1">[96c1]</a><span class="cd"><span class="i">RTS</span></span><span class="ce">; And return it.</span></span>
<span class="l"></span>
<span class="l"></span>
</pre><pre><a name="Password_DecodeValueList"></a><div class="cp">;============================================================================
; Decode a list of values from a password.
;
; INPUTS:
;     X:
;         The number of bits used to store an item.
;
;     Y:
;         The number of bits used to store the list length.
;
; OUTPUTS:
;     A:
;         The number of items read.
;
;     $ee:
;         The decoded items.
;
;     <a href="RAM.html#Password_TempA">Password_TempA</a>:
;     <a href="RAM.html#Password_TempX">Password_TempX</a>:
;         Clobbered.
;
; CALLS:
;     <a href="#Password_DecodeValue">Password_DecodeValue</a>
;
; XREFS:
;     <a href="#Password_Load">Password_Load</a>
;============================================================================
</div><span class="l"><a class="anc" name="96c2" href="#96c2">[96c2]</a><a href="#Password_DecodeValueList" class="la">Password_DecodeValueList:</a><span class="ce">; [$96c2]</span></span>
<span class="l"><a class="anc" name="96c2" href="#96c2">[96c2]</a><span class="cd"><span class="i">STX</span> <span class="o">a:<a href="RAM.html#Password_TempX">Password_TempX</a></span></span><span class="ce">; Store X temporarily.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Decode the length count.
;
</div><span class="l"><a class="anc" name="96c5" href="#96c5">[96c5]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#Password_DecodeValue">Password_DecodeValue</a></span></span><span class="ce">; Decode the next value.</span></span>
<span class="l"><a class="anc" name="96c8" href="#96c8">[96c8]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#Password_TempA">Password_TempA</a></span></span><span class="ce">; Store the result temporarily.</span></span>
<span class="l"><a class="anc" name="96cb" href="#96cb">[96cb]</a><span class="cd"><span class="i">BEQ</span> <span class="o"><a href="#@_return">@_return</a></span></span><span class="ce">; If it's 0 (no items), return 0.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; The list has at least 1 item. Iterate through the items.
;
</div><span class="l"><a class="anc" name="96cd" href="#96cd">[96cd]</a><span class="cd"><span class="i">LDY</span> <span class="o">#$00</span></span><span class="ce">; Y = 0 (loop counter).</span></span>
<span class="l"></span>
<a name=":96cf:@_loop"></a><span class="l"><a class="anc" name="96cf" href="#96cf">[96cf]</a><a href="#:96cf:@_loop" class="lla">@_loop:</a><span class="ce">; [$96cf]</span></span>
<span class="l"><a class="anc" name="96cf" href="#96cf">[96cf]</a><span class="cd"><span class="i">TYA</span></span><span class="ce">; A = Y</span></span>
<span class="l"><a class="anc" name="96d0" href="#96d0">[96d0]</a><span class="cd"><span class="i">PHA</span></span><span class="ce">; Push the loop counter to the stack.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Read an item from the list.
;
</div><span class="l"><a class="anc" name="96d1" href="#96d1">[96d1]</a><span class="cd"><span class="i">LDY</span> <span class="o">a:<a href="RAM.html#Password_TempX">Password_TempX</a></span></span><span class="ce">; Y = number of item bits to read.</span></span>
<span class="l"><a class="anc" name="96d4" href="#96d4">[96d4]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#Password_DecodeValue">Password_DecodeValue</a></span></span><span class="ce">; Decode the item value.</span></span>
<span class="l"><a class="anc" name="96d7" href="#96d7">[96d7]</a><span class="cd"><span class="i">TAX</span></span><span class="ce">; X = resulting item value</span></span>
<span class="l"><a class="anc" name="96d8" href="#96d8">[96d8]</a><span class="cd"><span class="i">PLA</span></span><span class="ce">; Pop the loop counter.</span></span>
<span class="l"><a class="anc" name="96d9" href="#96d9">[96d9]</a><span class="cd"><span class="i">TAY</span></span><span class="ce">; Y = loop counter</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Store the resulting item in our buffer.
;
</div><span class="l"><a class="anc" name="96da" href="#96da">[96da]</a><span class="cd"><span class="i">TXA</span></span><span class="ce">; A = item value</span></span>
<span class="l"><a class="anc" name="96db" href="#96db">[96db]</a><span class="cd"><span class="i">STA</span> <span class="o">($ee),Y</span></span><span class="ce">; Store in our decode buffer.</span></span>
<span class="l"><a class="anc" name="96dd" href="#96dd">[96dd]</a><span class="cd"><span class="i">INY</span></span><span class="ce">; Y++</span></span>
<span class="l"><a class="anc" name="96de" href="#96de">[96de]</a><span class="cd"><span class="i">CPY</span> <span class="o">a:<a href="RAM.html#Password_TempA">Password_TempA</a></span></span><span class="ce">; Have we read all the items?</span></span>
<span class="l"><a class="anc" name="96e1" href="#96e1">[96e1]</a><span class="cd"><span class="i">BNE</span> <span class="o"><a href="#@_loop">@_loop</a></span></span><span class="ce">; If not, loop.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; We're done! Return the number of items.
;
</div><span class="l"><a class="anc" name="96e3" href="#96e3">[96e3]</a><span class="cd"><span class="i">TYA</span></span><span class="ce">; A = Y (loop counter, result)</span></span>
<span class="l"></span>
<a name=":96e4:@_return"></a><span class="l"><a class="anc" name="96e4" href="#96e4">[96e4]</a><a href="#:96e4:@_return" class="lla">@_return:</a><span class="ce">; [$96e4]</span></span>
<span class="l"><a class="anc" name="96e4" href="#96e4">[96e4]</a><span class="cd"><span class="i">RTS</span></span><span class="ce">; And return it.</span></span>
<span class="l"></span>
<span class="l"></span>
</pre><pre><a name="Password_GenerateStateAndReset"></a><div class="cp">;============================================================================
; Generate the full password byte state for the game and reset.
;
; This wraps <a href="#Password_GenerateState">Password_GenerateState</a> and then resets
; counters.
; See that method for details and other outputs.
;
; INPUTS:
;     None.
;
; OUTPUTS:
;     <a href="RAM.html#Password_EncodedState">Password_EncodedState</a>:
;         The resulting computed password state.
;
;     <a href="RAM.html#Password_ByteCounter">Password_ByteCounter</a>:
;     <a href="RAM.html#Password_BitCounter">Password_BitCounter</a>:
;         Internal, and clobbered.
;
; CALLS:
;     <a href="#Password_GenerateState">Password_GenerateState</a>
;
; XREFS:
;     <a href="#IScriptAction_ShowPassword">IScriptAction_ShowPassword</a>
;============================================================================
</div><span class="l"><a class="anc" name="96e5" href="#96e5">[96e5]</a><a href="#Password_GenerateStateAndReset" class="la">Password_GenerateStateAndReset:</a><span class="ce">; [$96e5]</span></span>
<span class="l"><a class="anc" name="96e5" href="#96e5">[96e5]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#Password_GenerateState">Password_GenerateState</a></span></span><span class="ce">; Generate the password state.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Reset the state.
;
</div><span class="l"><a class="anc" name="96e8" href="#96e8">[96e8]</a><span class="cd"><span class="i">LDX</span> <span class="o">#$00</span></span></span>
<span class="l"><a class="anc" name="96ea" href="#96ea">[96ea]</a><span class="cd"><span class="i">STX</span> <span class="o">a:<a href="RAM.html#Password_ByteCounter">Password_ByteCounter</a></span></span><span class="ce">; Reset byte counter to 0.</span></span>
<span class="l"><a class="anc" name="96ed" href="#96ed">[96ed]</a><span class="cd"><span class="i">STX</span> <span class="o">a:<a href="RAM.html#Password_BitCounter">Password_BitCounter</a></span></span><span class="ce">; Reset bit counter to 0.</span></span>
<span class="l"><a class="anc" name="96f0" href="#96f0">[96f0]</a><span class="cd"><span class="i">RTS</span></span></span>
<span class="l"></span>
<span class="l"></span>
</pre><pre><a name="Password_GetNext6Bits"></a><div class="cp">;============================================================================
; Return the next 6 bits from the encoded password state.
;
; INPUTS:
;     <a href="RAM.html#Password_6BitCount">Password_6BitCount</a>:
;         The number of 6 bit values remaining.
;
; OUTPUTS:
;     A:
;         The decoded value.
;
;     C:
;         0 = Data remaining to read.
;         1 = Data has been read.
;
;     <a href="RAM.html#Password_6BitCount">Password_6BitCount</a>:
;         The decremented number of 6 bit values remaining.
;
; CALLS:
;     <a href="#Password_DecodeValue">Password_DecodeValue</a>
;
; XREFS:
;     <a href="#PasswordScreen_ShowNextChar">PasswordScreen_ShowNextChar</a>
;============================================================================
</div><span class="l"><a class="anc" name="96f1" href="#96f1">[96f1]</a><a href="#Password_GetNext6Bits" class="la">Password_GetNext6Bits:</a><span class="ce">; [$96f1]</span></span>
<span class="l"><a class="anc" name="96f1" href="#96f1">[96f1]</a><span class="cd"><span class="i">LDY</span> <span class="o">#$06</span></span></span>
<span class="l"><a class="anc" name="96f3" href="#96f3">[96f3]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#Password_DecodeValue">Password_DecodeValue</a></span></span><span class="ce">; Decode the next 6 bits.</span></span>
<span class="l"><a class="anc" name="96f6" href="#96f6">[96f6]</a><span class="cd"><span class="i">CLC</span></span></span>
<span class="l"><a class="anc" name="96f7" href="#96f7">[96f7]</a><span class="cd"><span class="i">DEC</span> <span class="o">a:<a href="RAM.html#Password_6BitCount">Password_6BitCount</a></span></span><span class="ce">; Decrement the 6 bit counter.</span></span>
<span class="l"><a class="anc" name="96fa" href="#96fa">[96fa]</a><span class="cd"><span class="i">BNE</span> <span class="o"><a href="#@_return">@_return</a></span></span><span class="ce">; If &gt; 0, set C=0 and jump to return.</span></span>
<span class="l"><a class="anc" name="96fc" href="#96fc">[96fc]</a><span class="cd"><span class="i">SEC</span></span><span class="ce">; Set C=1.</span></span>
<span class="l"></span>
<a name=":96fd:@_return"></a><span class="l"><a class="anc" name="96fd" href="#96fd">[96fd]</a><a href="#:96fd:@_return" class="lla">@_return:</a><span class="ce">; [$96fd]</span></span>
<span class="l"><a class="anc" name="96fd" href="#96fd">[96fd]</a><span class="cd"><span class="i">RTS</span></span></span>
<span class="l"></span>
<span class="l"></span>
</pre><pre><a name="Password_GenerateState"></a><div class="cp">;============================================================================
; Generate the full password byte state for the game.
;
; This generates the password state based on the game state,
; prior to building the readable alphanumeric/symbolic
; password.
;
; This is done by encoding an initial but incomplete
; password state, which contains all the saved game
; elements (spawn point, items, weapons, armor, etc.)
; but does not contain some of the initial validation
; state (checksum and a 6-bit-length data counter).
;
; Then it calculates the 6-bit length data counter based
; on that, which will go into the final password.
;
; The state is reset and password state is generated again.
; This time, the first 5 bits of the second byte is
; populated with the 6-bit data counter, following by the
; game state, followed by padding bits to round up to the
; nearest byte.
;
; The checksum is then stored in the first byte.
;
; INPUTS:
;     None.
;
; OUTPUTS:
;     <a href="RAM.html#Password_EncodedState">Password_EncodedState</a>:
;         The resulting computed password state.
;
;     <a href="RAM.html#Password_ByteCounter">Password_ByteCounter</a>:
;     <a href="RAM.html#Password_BitCounter">Password_BitCounter</a>:
;     <a href="RAM.html#Password_Checksum">Password_Checksum</a>:
;         Internal, and clobbered.
;
; CALLS:
;     <a href="#Password_EncodeValue">Password_EncodeValue</a>
;     <a href="#Password_EncodeGameState">Password_EncodeGameState</a>
;
; XREFS:
;     <a href="#Password_GenerateStateAndReset">Password_GenerateStateAndReset</a>
;============================================================================
</div><span class="l"><a class="anc" name="96fe" href="#96fe">[96fe]</a><a href="#Password_GenerateState" class="la">Password_GenerateState:</a><span class="ce">; [$96fe]</span></span>
<div class="c">;
; Reset all the encoding state.
;
</div><span class="l"><a class="anc" name="96fe" href="#96fe">[96fe]</a><span class="cd"><span class="i">LDX</span> <span class="o">#$00</span></span></span>
<span class="l"><a class="anc" name="9700" href="#9700">[9700]</a><span class="cd"><span class="i">STX</span> <span class="o">a:<a href="RAM.html#Password_ByteCounter">Password_ByteCounter</a></span></span><span class="ce">; Reset byte counter to 0.</span></span>
<span class="l"><a class="anc" name="9703" href="#9703">[9703]</a><span class="cd"><span class="i">STX</span> <span class="o">a:<a href="RAM.html#Password_BitCounter">Password_BitCounter</a></span></span><span class="ce">; Reset bit counter to 0.</span></span>
<span class="l"><a class="anc" name="9706" href="#9706">[9706]</a><span class="cd"><span class="i">STX</span> <span class="o">a:<a href="RAM.html#Password_Checksum">Password_Checksum</a></span></span><span class="ce">; Reset checksum to 0.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Place 0x00 in the first byte.
;
</div><span class="l"><a class="anc" name="9709" href="#9709">[9709]</a><span class="cd"><span class="i">LDY</span> <span class="o">#$08</span></span><span class="ce">; Y = 8 (value storage size in bits)</span></span>
<span class="l"><a class="anc" name="970b" href="#970b">[970b]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$00</span></span><span class="ce">; A = 0 (value)</span></span>
<span class="l"><a class="anc" name="970d" href="#970d">[970d]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#Password_EncodeValue">Password_EncodeValue</a></span></span><span class="ce">; Encode it.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Place 0x00 in the first 5 bits of the second byte.
;
</div><span class="l"><a class="anc" name="9710" href="#9710">[9710]</a><span class="cd"><span class="i">LDY</span> <span class="o">#$05</span></span><span class="ce">; Y = 5 (value storage size in bits)</span></span>
<span class="l"><a class="anc" name="9712" href="#9712">[9712]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$00</span></span><span class="ce">; A = 0 (value)</span></span>
<span class="l"><a class="anc" name="9714" href="#9714">[9714]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#Password_EncodeValue">Password_EncodeValue</a></span></span><span class="ce">; Encode it.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Save all the game state into the remaining bits and
; progress the checksum.
;
</div><span class="l"><a class="anc" name="9717" href="#9717">[9717]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#Password_EncodeGameState">Password_EncodeGameState</a></span></span><span class="ce">; Encode the game state.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Begin resetting state again for another run, but now using
; the calculated values as part of the final state.
;
; First, generate the total bits placed in the state as:
;
;     total_bits = total_bytes * 8 + remaining_bits;
;
;     If total_bytes == 32:  // End of password state
;         total_bits--;
;
</div><span class="l"><a class="anc" name="971a" href="#971a">[971a]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#Password_ByteCounter">Password_ByteCounter</a></span></span><span class="ce">; Multiply the current state byte index by 8, and track carry.</span></span>
<span class="l"><a class="anc" name="971d" href="#971d">[971d]</a><span class="cd"><span class="i">ASL</span> <span class="o">A</span></span></span>
<span class="l"><a class="anc" name="971e" href="#971e">[971e]</a><span class="cd"><span class="i">ASL</span> <span class="o">A</span></span></span>
<span class="l"><a class="anc" name="971f" href="#971f">[971f]</a><span class="cd"><span class="i">ASL</span> <span class="o">A</span></span></span>
<span class="l"><a class="anc" name="9720" href="#9720">[9720]</a><span class="cd"><span class="i">ADC</span> <span class="o">a:<a href="RAM.html#Password_BitCounter">Password_BitCounter</a></span></span><span class="ce">; Add the current bit counter within the final byte - the carry.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Begin our 6-bit count loop.
;
; Roughly:
;
;     result = ceil(total_bits / 6)
;
</div><span class="l"><a class="anc" name="9723" href="#9723">[9723]</a><span class="cd"><span class="i">LDX</span> <span class="o">#$00</span></span><span class="ce">; X = 0 (Loop counter)</span></span>
<span class="l"></span>
<a name=":9725:@_6BitCountLoop"></a><span class="l"><a class="anc" name="9725" href="#9725">[9725]</a><a href="#:9725:@_6BitCountLoop" class="lla">@_6BitCountLoop:</a><span class="ce">; [$9725]</span></span>
<span class="l"><a class="anc" name="9725" href="#9725">[9725]</a><span class="cd"><span class="i">INX</span></span><span class="ce">; X++</span></span>
<span class="l"><a class="anc" name="9726" href="#9726">[9726]</a><span class="cd"><span class="i">SEC</span></span><span class="ce">; X = 1</span></span>
<span class="l"><a class="anc" name="9727" href="#9727">[9727]</a><span class="cd"><span class="i">SBC</span> <span class="o">#$06</span></span><span class="ce">; A -= 6</span></span>
<span class="l"><a class="anc" name="9729" href="#9729">[9729]</a><span class="cd"><span class="i">BEQ</span> <span class="o"><a href="#@_resetLoop">@_resetLoop</a></span></span><span class="ce">; If 0, break out of the loop.</span></span>
<span class="l"><a class="anc" name="972b" href="#972b">[972b]</a><span class="cd"><span class="i">BCS</span> <span class="o"><a href="#@_6BitCountLoop">@_6BitCountLoop</a></span></span><span class="ce">; Else, loop.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name=":972d:@_resetLoop"></a><div class="c">;
; Store the final expected 6 bit counter for the password state.
;
</div><span class="l"><a class="anc" name="972d" href="#972d">[972d]</a><a href="#:972d:@_resetLoop" class="lla">@_resetLoop:</a><span class="ce">; [$972d]</span></span>
<span class="l"><a class="anc" name="972d" href="#972d">[972d]</a><span class="cd"><span class="i">STX</span> <span class="o">a:<a href="RAM.html#Password_6BitCount">Password_6BitCount</a></span></span><span class="ce">; X = 6-bit counter</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Reset for a new password generation using the counter.
;
</div><span class="l"><a class="anc" name="9730" href="#9730">[9730]</a><span class="cd"><span class="i">LDX</span> <span class="o">#$00</span></span></span>
<span class="l"><a class="anc" name="9732" href="#9732">[9732]</a><span class="cd"><span class="i">STX</span> <span class="o">a:<a href="RAM.html#Password_ByteCounter">Password_ByteCounter</a></span></span><span class="ce">; Reset byte counter to 0.</span></span>
<span class="l"><a class="anc" name="9735" href="#9735">[9735]</a><span class="cd"><span class="i">STX</span> <span class="o">a:<a href="RAM.html#Password_BitCounter">Password_BitCounter</a></span></span><span class="ce">; Reset bit counter to 0.</span></span>
<span class="l"><a class="anc" name="9738" href="#9738">[9738]</a><span class="cd"><span class="i">STX</span> <span class="o">a:<a href="RAM.html#Password_Checksum">Password_Checksum</a></span></span><span class="ce">; Reset checksum to 0.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Encode the blank checksum.
;
</div><span class="l"><a class="anc" name="973b" href="#973b">[973b]</a><span class="cd"><span class="i">LDY</span> <span class="o">#$08</span></span><span class="ce">; Y = 8 (value storage size in bits)</span></span>
<span class="l"><a class="anc" name="973d" href="#973d">[973d]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$00</span></span><span class="ce">; A = 0 (checksum value)</span></span>
<span class="l"><a class="anc" name="973f" href="#973f">[973f]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#Password_EncodeValue">Password_EncodeValue</a></span></span><span class="ce">; Encode the checksum value.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Encode the 6-bit counter.
;
</div><span class="l"><a class="anc" name="9742" href="#9742">[9742]</a><span class="cd"><span class="i">LDY</span> <span class="o">#$05</span></span><span class="ce">; Y = 5 (value storage size in bits)</span></span>
<span class="l"><a class="anc" name="9744" href="#9744">[9744]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#Password_6BitCount">Password_6BitCount</a></span></span><span class="ce">; A = 6 bit count value</span></span>
<span class="l"><a class="anc" name="9747" href="#9747">[9747]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#Password_EncodeValue">Password_EncodeValue</a></span></span><span class="ce">; Encode the value.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Encode the game state again.
;
</div><span class="l"><a class="anc" name="974a" href="#974a">[974a]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#Password_EncodeGameState">Password_EncodeGameState</a></span></span><span class="ce">; Encode the game state.</span></span>
<span class="l"><a class="anc" name="974d" href="#974d">[974d]</a><span class="cd"><span class="i">JMP</span> <span class="o"><a href="#@_fillPaddedBits">@_fillPaddedBits</a></span></span></span>
<span class="l"></span>
<span class="l"></span>
<a name=":9750:@_fillPaddedBitsLoop"></a><div class="c">;
; Encode a padding bits for any remaining bits.
;
</div><span class="l"><a class="anc" name="9750" href="#9750">[9750]</a><a href="#:9750:@_fillPaddedBitsLoop" class="lla">@_fillPaddedBitsLoop:</a><span class="ce">; [$9750]</span></span>
<span class="l"><a class="anc" name="9750" href="#9750">[9750]</a><span class="cd"><span class="i">LDY</span> <span class="o">#$01</span></span><span class="ce">; Y = 1 (value storage size in bits)</span></span>
<span class="l"><a class="anc" name="9752" href="#9752">[9752]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$00</span></span><span class="ce">; A = 0 (value)</span></span>
<span class="l"><a class="anc" name="9754" href="#9754">[9754]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#Password_EncodeValue">Password_EncodeValue</a></span></span><span class="ce">; Encode the padding.</span></span>
<span class="l"></span>
<a name=":9757:@_fillPaddedBits"></a><span class="l"><a class="anc" name="9757" href="#9757">[9757]</a><a href="#:9757:@_fillPaddedBits" class="lla">@_fillPaddedBits:</a><span class="ce">; [$9757]</span></span>
<span class="l"><a class="anc" name="9757" href="#9757">[9757]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#Password_BitCounter">Password_BitCounter</a></span></span><span class="ce">; A = current bit offset</span></span>
<span class="l"><a class="anc" name="975a" href="#975a">[975a]</a><span class="cd"><span class="i">BNE</span> <span class="o"><a href="#@_fillPaddedBitsLoop">@_fillPaddedBitsLoop</a></span></span><span class="ce">; If not 0, add our padding bit.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Set the last byte to 0.
;
</div><span class="l"><a class="anc" name="975c" href="#975c">[975c]</a><span class="cd"><span class="i">LDX</span> <span class="o">a:<a href="RAM.html#Password_ByteCounter">Password_ByteCounter</a></span></span><span class="ce">; X = byte counter</span></span>
<span class="l"><a class="anc" name="975f" href="#975f">[975f]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$00</span></span><span class="ce">; A = 0</span></span>
<span class="l"><a class="anc" name="9761" href="#9761">[9761]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Password_EncodedState">Password_EncodedState</a>,X</span></span><span class="ce">; Store as the final byte value.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Set the checksum.
;
</div><span class="l"><a class="anc" name="9764" href="#9764">[9764]</a><span class="cd"><span class="i">SEC</span></span></span>
<span class="l"><a class="anc" name="9765" href="#9765">[9765]</a><span class="cd"><span class="i">SBC</span> <span class="o">a:<a href="RAM.html#Password_Checksum">Password_Checksum</a></span></span><span class="ce">; Negate the checksum.</span></span>
<span class="l"><a class="anc" name="9768" href="#9768">[9768]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#Password_EncodedState">Password_EncodedState</a></span></span><span class="ce">; Store as the first byte of the encoded state.</span></span>
<span class="l"><a class="anc" name="976b" href="#976b">[976b]</a><span class="cd"><span class="i">RTS</span></span></span>
<span class="l"></span>
<span class="l"></span>
</pre><pre><a name="Password_EncodeGameState"></a><div class="cp">;============================================================================
; Encode game state for the new password.
;
; INPUTS:
;     <a href="RAM.html#NumberOfArmors">NumberOfArmors</a>:
;         The number of armor items to encode.
;
;     <a href="RAM.html#NumberOfItems">NumberOfItems</a>:
;         The number of items to encode.
;
;     <a href="RAM.html#NumberOfMagicSpells">NumberOfMagicSpells</a>:
;         The number of magic spells to encode.
;
;     <a href="RAM.html#NumberOfShields">NumberOfShields</a>:
;         The number of shields to encode.
;
;     <a href="RAM.html#NumberOfWeapons">NumberOfWeapons</a>:
;         The number of weapons to encode.
;
;     <a href="RAM.html#PlayerTitle">PlayerTitle</a>:
;         The player title to encode.
;
;     <a href="RAM.html#Quests">Quests</a>:
;         The quests to encode.
;
;     <a href="RAM.html#SelectedArmor">SelectedArmor</a>:
;         The selected armor to encode.
;
;     <a href="RAM.html#SelectedItem">SelectedItem</a>:
;         The selected item to encode.
;
;     <a href="RAM.html#SelectedMagic">SelectedMagic</a>:
;         The selected magic to encode.
;
;     <a href="RAM.html#SelectedShield">SelectedShield</a>:
;         The selected shield to encode.
;
;     <a href="RAM.html#SelectedWeapon">SelectedWeapon</a>:
;         The selected weapon to encode.
;
;     <a href="RAM.html#SpecialItems">SpecialItems</a>:
;         The special items to encode.
;
;     <a href="RAM.html#TempleSpawnPoint">TempleSpawnPoint</a>:
;         The temple spawn point to encode.
;
;     <a href="RAM.html#ArmorInventory">ArmorInventory</a>:
;         The armor inventory items to encode.
;
;     <a href="RAM.html#ItemInventory">ItemInventory</a>:
;         The consumable inventory items to encode.
;
;     <a href="RAM.html#MagicInventory">MagicInventory</a>:
;         The magic inventory items to encode.
;
;     <a href="RAM.html#ShieldInventory">ShieldInventory</a>:
;         The shield inventory items to encode.
;
;     <a href="RAM.html#WeaponInventory">WeaponInventory</a>:
;         The weapon inventory items to encode.
;
; OUTPUTS:
;     None.
;
; CALLS:
;     <a href="#Password_EncodeValue">Password_EncodeValue</a>
;     <a href="#Password_EncodeValueList">Password_EncodeValueList</a>
;     <a href="#Password_EncodeValueOrUnset">Password_EncodeValueOrUnset</a>
;
; XREFS:
;     <a href="#Password_GenerateState">Password_GenerateState</a>
;============================================================================
</div><span class="l"><a class="anc" name="976c" href="#976c">[976c]</a><a href="#Password_EncodeGameState" class="la">Password_EncodeGameState:</a><span class="ce">; [$976c]</span></span>
<div class="c">;
; Encode the temple spawn point.
;
</div><span class="l"><a class="anc" name="976c" href="#976c">[976c]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#TempleSpawnPoint">TempleSpawnPoint</a></span></span><span class="ce">; A = Temple spawn point.</span></span>
<span class="l"><a class="anc" name="976f" href="#976f">[976f]</a><span class="cd"><span class="i">LDY</span> <span class="o">#$03</span></span><span class="ce">; Y = 3 (storage size in bits)</span></span>
<span class="l"><a class="anc" name="9771" href="#9771">[9771]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#Password_EncodeValue">Password_EncodeValue</a></span></span><span class="ce">; Encode the spawn point.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Encode the player's title.
;
</div><span class="l"><a class="anc" name="9774" href="#9774">[9774]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#PlayerTitle">PlayerTitle</a></span></span><span class="ce">; A = Player title.</span></span>
<span class="l"><a class="anc" name="9777" href="#9777">[9777]</a><span class="cd"><span class="i">LDY</span> <span class="o">#$04</span></span><span class="ce">; Y = 4 (storage size in bits)</span></span>
<span class="l"><a class="anc" name="9779" href="#9779">[9779]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#Password_EncodeValue">Password_EncodeValue</a></span></span><span class="ce">; Encode the title.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Encode the player's special items bitmask.
;
</div><span class="l"><a class="anc" name="977c" href="#977c">[977c]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#SpecialItems">SpecialItems</a></span></span><span class="ce">; A = Special items bitmask.</span></span>
<span class="l"><a class="anc" name="977f" href="#977f">[977f]</a><span class="cd"><span class="i">LDY</span> <span class="o">#$08</span></span><span class="ce">; Y = 8 (storage size in bits)</span></span>
<span class="l"><a class="anc" name="9781" href="#9781">[9781]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#Password_EncodeValue">Password_EncodeValue</a></span></span><span class="ce">; Encode the special items bitmask.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Encode the completed quests.
;
</div><span class="l"><a class="anc" name="9784" href="#9784">[9784]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#Quests">Quests</a></span></span><span class="ce">; A = Quests bitmask.</span></span>
<span class="l"><a class="anc" name="9787" href="#9787">[9787]</a><span class="cd"><span class="i">LDY</span> <span class="o">#$08</span></span><span class="ce">; Y = 8 (storage size in bits)</span></span>
<span class="l"><a class="anc" name="9789" href="#9789">[9789]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#Password_EncodeValue">Password_EncodeValue</a></span></span><span class="ce">; Encode the quests bitmask.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Encode the selected weapon.
;
</div><span class="l"><a class="anc" name="978c" href="#978c">[978c]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#SelectedWeapon">SelectedWeapon</a></span></span><span class="ce">; A = Selected weapon.</span></span>
<span class="l"><a class="anc" name="978f" href="#978f">[978f]</a><span class="cd"><span class="i">LDY</span> <span class="o">#$02</span></span><span class="ce">; Y = 2 (storage size in bits)</span></span>
<span class="l"><a class="anc" name="9791" href="#9791">[9791]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#Password_EncodeValueOrUnset">Password_EncodeValueOrUnset</a></span></span><span class="ce">; Encode the selected weapon.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Encode the selected armor.
;
</div><span class="l"><a class="anc" name="9794" href="#9794">[9794]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#SelectedArmor">SelectedArmor</a></span></span><span class="ce">; A = Selected armor.</span></span>
<span class="l"><a class="anc" name="9797" href="#9797">[9797]</a><span class="cd"><span class="i">LDY</span> <span class="o">#$02</span></span><span class="ce">; Y = 2 (storage size in bits)</span></span>
<span class="l"><a class="anc" name="9799" href="#9799">[9799]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#Password_EncodeValueOrUnset">Password_EncodeValueOrUnset</a></span></span><span class="ce">; Encode the selected armor.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Encode the selected shield.
;
</div><span class="l"><a class="anc" name="979c" href="#979c">[979c]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#SelectedShield">SelectedShield</a></span></span><span class="ce">; A = Selected shield.</span></span>
<span class="l"><a class="anc" name="979f" href="#979f">[979f]</a><span class="cd"><span class="i">LDY</span> <span class="o">#$02</span></span><span class="ce">; Y = 2 (storage size in bits)</span></span>
<span class="l"><a class="anc" name="97a1" href="#97a1">[97a1]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#Password_EncodeValueOrUnset">Password_EncodeValueOrUnset</a></span></span><span class="ce">; Encode the selected shield.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Encode the selected magic spell.
;
</div><span class="l"><a class="anc" name="97a4" href="#97a4">[97a4]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#SelectedMagic">SelectedMagic</a></span></span><span class="ce">; A = Selected magic.</span></span>
<span class="l"><a class="anc" name="97a7" href="#97a7">[97a7]</a><span class="cd"><span class="i">LDY</span> <span class="o">#$03</span></span><span class="ce">; Y = 3 (storage size in bits)</span></span>
<span class="l"><a class="anc" name="97a9" href="#97a9">[97a9]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#Password_EncodeValueOrUnset">Password_EncodeValueOrUnset</a></span></span><span class="ce">; Encode the selected magic.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Encode the selected item.
;
</div><span class="l"><a class="anc" name="97ac" href="#97ac">[97ac]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#SelectedItem">SelectedItem</a></span></span><span class="ce">; A = Selected item.</span></span>
<span class="l"><a class="anc" name="97af" href="#97af">[97af]</a><span class="cd"><span class="i">LDY</span> <span class="o">#$05</span></span><span class="ce">; Y = 5 (storage size in bits)</span></span>
<span class="l"><a class="anc" name="97b1" href="#97b1">[97b1]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#Password_EncodeValueOrUnset">Password_EncodeValueOrUnset</a></span></span><span class="ce">; Encode the selected item.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Set the value to write to the address of
; <a href="RAM.html#Player_ShieldPositionY">Player_ShieldPositionY</a>+1
;
; This hard-codes $039D.
;
</div><span class="l"><a class="anc" name="97b4" href="#97b4">[97b4]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$9d</span></span></span>
<span class="l"><a class="anc" name="97b6" href="#97b6">[97b6]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Temp_Int24_U">Temp_Int24_U</a></span></span></span>
<span class="l"><a class="anc" name="97b8" href="#97b8">[97b8]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$03</span></span></span>
<span class="l"><a class="anc" name="97ba" href="#97ba">[97ba]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Maybe_Temp4">Maybe_Temp4</a></span></span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Encode the weapon inventory.
;
</div><span class="l"><a class="anc" name="97bc" href="#97bc">[97bc]</a><span class="cd"><span class="i">LDY</span> <span class="o">#$03</span></span><span class="ce">; Y = 3 (storage size in bits)</span></span>
<span class="l"><a class="anc" name="97be" href="#97be">[97be]</a><span class="cd"><span class="i">LDX</span> <span class="o">#$02</span></span><span class="ce">; X = 2 (start offset)</span></span>
<span class="l"><a class="anc" name="97c0" href="#97c0">[97c0]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#NumberOfWeapons">NumberOfWeapons</a></span></span><span class="ce">; A = Number of weapons.</span></span>
<span class="l"><a class="anc" name="97c3" href="#97c3">[97c3]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#Password_EncodeValueList">Password_EncodeValueList</a></span></span><span class="ce">; Encode the weapon inventory.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Set the value to write to the address of 0x3a1.
;
; This hard-codes $03A1.
;
</div><span class="l"><a class="anc" name="97c6" href="#97c6">[97c6]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$a1</span></span></span>
<span class="l"><a class="anc" name="97c8" href="#97c8">[97c8]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Temp_Int24_U">Temp_Int24_U</a></span></span></span>
<span class="l"><a class="anc" name="97ca" href="#97ca">[97ca]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$03</span></span></span>
<span class="l"><a class="anc" name="97cc" href="#97cc">[97cc]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Maybe_Temp4">Maybe_Temp4</a></span></span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Encode the armor inventory.
;
</div><span class="l"><a class="anc" name="97ce" href="#97ce">[97ce]</a><span class="cd"><span class="i">LDY</span> <span class="o">#$03</span></span><span class="ce">; Y = 3 (storage size in bits)</span></span>
<span class="l"><a class="anc" name="97d0" href="#97d0">[97d0]</a><span class="cd"><span class="i">LDX</span> <span class="o">#$02</span></span><span class="ce">; X = 2 (start offset)</span></span>
<span class="l"><a class="anc" name="97d2" href="#97d2">[97d2]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#NumberOfArmors">NumberOfArmors</a></span></span><span class="ce">; A = Number of armors.</span></span>
<span class="l"><a class="anc" name="97d5" href="#97d5">[97d5]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#Password_EncodeValueList">Password_EncodeValueList</a></span></span><span class="ce">; Encode the armor inventory.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Set the value to write to the address of 0x3a5.
;
; This hard-codes $03A5.
;
</div><span class="l"><a class="anc" name="97d8" href="#97d8">[97d8]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$a5</span></span></span>
<span class="l"><a class="anc" name="97da" href="#97da">[97da]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Temp_Int24_U">Temp_Int24_U</a></span></span></span>
<span class="l"><a class="anc" name="97dc" href="#97dc">[97dc]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$03</span></span></span>
<span class="l"><a class="anc" name="97de" href="#97de">[97de]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Maybe_Temp4">Maybe_Temp4</a></span></span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Encode the shield inventory.
;
</div><span class="l"><a class="anc" name="97e0" href="#97e0">[97e0]</a><span class="cd"><span class="i">LDY</span> <span class="o">#$03</span></span><span class="ce">; Y = 3 (storage size in bits)</span></span>
<span class="l"><a class="anc" name="97e2" href="#97e2">[97e2]</a><span class="cd"><span class="i">LDX</span> <span class="o">#$02</span></span><span class="ce">; X = 2 (start offset)</span></span>
<span class="l"><a class="anc" name="97e4" href="#97e4">[97e4]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#NumberOfShields">NumberOfShields</a></span></span><span class="ce">; A = Number of shields.</span></span>
<span class="l"><a class="anc" name="97e7" href="#97e7">[97e7]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#Password_EncodeValueList">Password_EncodeValueList</a></span></span><span class="ce">; Encode the shield inventory.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Set the value to write to the address of 0x3a9.
;
; This hard-codes $03A9.
;
</div><span class="l"><a class="anc" name="97ea" href="#97ea">[97ea]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$a9</span></span></span>
<span class="l"><a class="anc" name="97ec" href="#97ec">[97ec]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Temp_Int24_U">Temp_Int24_U</a></span></span></span>
<span class="l"><a class="anc" name="97ee" href="#97ee">[97ee]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$03</span></span></span>
<span class="l"><a class="anc" name="97f0" href="#97f0">[97f0]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Maybe_Temp4">Maybe_Temp4</a></span></span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Encode the magic inventory.
;
</div><span class="l"><a class="anc" name="97f2" href="#97f2">[97f2]</a><span class="cd"><span class="i">LDY</span> <span class="o">#$03</span></span><span class="ce">; Y = 3 (storage size in bits)</span></span>
<span class="l"><a class="anc" name="97f4" href="#97f4">[97f4]</a><span class="cd"><span class="i">LDX</span> <span class="o">#$03</span></span><span class="ce">; X = 3 (start offset)</span></span>
<span class="l"><a class="anc" name="97f6" href="#97f6">[97f6]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#NumberOfMagicSpells">NumberOfMagicSpells</a></span></span><span class="ce">; A = Number of magic spells.</span></span>
<span class="l"><a class="anc" name="97f9" href="#97f9">[97f9]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#Password_EncodeValueList">Password_EncodeValueList</a></span></span><span class="ce">; Encode the magic inventory.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Set the value to write to the address of 0x3ad.
;
; This hard-codes $03AD.
;
</div><span class="l"><a class="anc" name="97fc" href="#97fc">[97fc]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$ad</span></span></span>
<span class="l"><a class="anc" name="97fe" href="#97fe">[97fe]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Temp_Int24_U">Temp_Int24_U</a></span></span></span>
<span class="l"><a class="anc" name="9800" href="#9800">[9800]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$03</span></span></span>
<span class="l"><a class="anc" name="9802" href="#9802">[9802]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Maybe_Temp4">Maybe_Temp4</a></span></span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Encode the item inventory.
;
</div><span class="l"><a class="anc" name="9804" href="#9804">[9804]</a><span class="cd"><span class="i">LDY</span> <span class="o">#$04</span></span><span class="ce">; Y = 4 (storage size in bits)</span></span>
<span class="l"><a class="anc" name="9806" href="#9806">[9806]</a><span class="cd"><span class="i">LDX</span> <span class="o">#$05</span></span><span class="ce">; X = 5 (start offset)</span></span>
<span class="l"><a class="anc" name="9808" href="#9808">[9808]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#NumberOfItems">NumberOfItems</a></span></span><span class="ce">; A = Number of items.</span></span>
<span class="l"><a class="anc" name="980b" href="#980b">[980b]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#Password_EncodeValueList">Password_EncodeValueList</a></span></span><span class="ce">; Encode the item inventory.</span></span>
<span class="l"><a class="anc" name="980e" href="#980e">[980e]</a><span class="cd"><span class="i">RTS</span></span></span>
<span class="l"></span>
<span class="l"></span>
</pre><pre><a name="Password_EncodeValueOrUnset"></a><div class="cp">;============================================================================
; Encode a Set/Unset state and a value if set.
;
; If the value is 0xFF, this will encode just 1 bit, an Unset
; value (0).
;
; Otherwise, this will encode a Set bit (1) and the value.
;
; INPUTS:
;     A:
;         The value to encode (or 0xFF).
;
;     X:
;         The start offset.
;
;     Y:
;         The storage size of the value in bits.
;
; OUTPUTS:
;     X:
;         The new offset.
;
; CALLS:
;     <a href="#Password_EncodeValue">Password_EncodeValue</a>
;
; XREFS:
;     <a href="#Password_EncodeGameState">Password_EncodeGameState</a>
;============================================================================
</div><span class="l"><a class="anc" name="980f" href="#980f">[980f]</a><a href="#Password_EncodeValueOrUnset" class="la">Password_EncodeValueOrUnset:</a><span class="ce">; [$980f]</span></span>
<span class="l"><a class="anc" name="980f" href="#980f">[980f]</a><span class="cd"><span class="i">CMP</span> <span class="o">#$ff</span></span><span class="ce">; Is the value to encode 0xFF?</span></span>
<span class="l"><a class="anc" name="9811" href="#9811">[9811]</a><span class="cd"><span class="i">BEQ</span> <span class="o"><a href="#@_isUnset">@_isUnset</a></span></span><span class="ce">; If so, then jump.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; The value is set. First, push our value and storage size
; to the stack.
;
</div><span class="l"><a class="anc" name="9813" href="#9813">[9813]</a><span class="cd"><span class="i">PHA</span></span><span class="ce">; Push the value to the stack.</span></span>
<span class="l"><a class="anc" name="9814" href="#9814">[9814]</a><span class="cd"><span class="i">TYA</span></span><span class="ce">; A = Y (storage size in bits)</span></span>
<span class="l"><a class="anc" name="9815" href="#9815">[9815]</a><span class="cd"><span class="i">PHA</span></span><span class="ce">; Push the value to the stack.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Encode the Set flag.
;
</div><span class="l"><a class="anc" name="9816" href="#9816">[9816]</a><span class="cd"><span class="i">LDY</span> <span class="o">#$01</span></span><span class="ce">; Y = 1 (storage size in bits)</span></span>
<span class="l"><a class="anc" name="9818" href="#9818">[9818]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$01</span></span><span class="ce">; A = 1 (set)</span></span>
<span class="l"><a class="anc" name="981a" href="#981a">[981a]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#Password_EncodeValue">Password_EncodeValue</a></span></span><span class="ce">; Encode the value.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Encode the value.
;
</div><span class="l"><a class="anc" name="981d" href="#981d">[981d]</a><span class="cd"><span class="i">PLA</span></span><span class="ce">; Pop the storage size in bits.</span></span>
<span class="l"><a class="anc" name="981e" href="#981e">[981e]</a><span class="cd"><span class="i">TAY</span></span><span class="ce">; Y = result</span></span>
<span class="l"><a class="anc" name="981f" href="#981f">[981f]</a><span class="cd"><span class="i">PLA</span></span><span class="ce">; Pop the value.</span></span>
<span class="l"><a class="anc" name="9820" href="#9820">[9820]</a><span class="cd"><span class="i">JMP</span> <span class="o"><a href="#Password_EncodeValue">Password_EncodeValue</a></span></span><span class="ce">; Encode the value.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name=":9823:@_isUnset"></a><div class="c">;
; The value is unset. Encode only the unset state.
;
</div><span class="l"><a class="anc" name="9823" href="#9823">[9823]</a><a href="#:9823:@_isUnset" class="lla">@_isUnset:</a><span class="ce">; [$9823]</span></span>
<span class="l"><a class="anc" name="9823" href="#9823">[9823]</a><span class="cd"><span class="i">LDY</span> <span class="o">#$01</span></span><span class="ce">; Y = 1 (storage size in bits)</span></span>
<span class="l"><a class="anc" name="9825" href="#9825">[9825]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$00</span></span><span class="ce">; A = 0 (unset)</span></span>
<span class="l"><a class="anc" name="9827" href="#9827">[9827]</a><span class="cd"><span class="i">JMP</span> <span class="o"><a href="#Password_EncodeValue">Password_EncodeValue</a></span></span><span class="ce">; Encode the value.</span></span>
<span class="l"></span>
<span class="l"></span>
</pre><pre><a name="Password_EncodeValueList"></a><div class="cp">;============================================================================
; Encode a list of values for state in the password.
;
; INPUTS:
;     A:
;         The number of values to encode.
;
;     Y:
;         The number of bits of storage used to encode
;         the state.
;
; OUTPUTS:
;     <a href="RAM.html#Password_TempA">Password_TempA</a>:
;     <a href="RAM.html#Password_TempX">Password_TempX</a>:
;     <a href="RAM.html#Password_TempY">Password_TempY</a>:
;         Clobbered.
;
; CALLS:
;     <a href="#Password_EncodeValue">Password_EncodeValue</a>
;
; XREFS:
;     <a href="#Password_EncodeGameState">Password_EncodeGameState</a>
;============================================================================
</div><span class="l"><a class="anc" name="982a" href="#982a">[982a]</a><a href="#Password_EncodeValueList" class="la">Password_EncodeValueList:</a><span class="ce">; [$982a]</span></span>
<span class="l"><a class="anc" name="982a" href="#982a">[982a]</a><span class="cd"><span class="i">BEQ</span> <span class="o"><a href="#@_encodeValue">@_encodeValue</a></span></span><span class="ce">; If empty, just encode the value directly.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Store A, X, and Y so we can work with these variables.
;
</div><span class="l"><a class="anc" name="982c" href="#982c">[982c]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#Password_TempA">Password_TempA</a></span></span><span class="ce">; <a href="RAM.html#Password_TempA">Password_TempA</a> = A</span></span>
<span class="l"><a class="anc" name="982f" href="#982f">[982f]</a><span class="cd"><span class="i">STY</span> <span class="o">a:<a href="RAM.html#Password_TempY">Password_TempY</a></span></span><span class="ce">; <a href="RAM.html#Password_TempY">Password_TempY</a> = Y</span></span>
<span class="l"><a class="anc" name="9832" href="#9832">[9832]</a><span class="cd"><span class="i">STX</span> <span class="o">a:<a href="RAM.html#Password_TempX">Password_TempX</a></span></span><span class="ce">; <a href="RAM.html#Password_TempX">Password_TempX</a> = X</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Encode the number of entries as a value. Roughly:
;
; <a href="#Password_EncodeValue">Password_EncodeValue</a>(numEntries, startOffset, numBits)
;
</div><span class="l"><a class="anc" name="9835" href="#9835">[9835]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#Password_EncodeValue">Password_EncodeValue</a></span></span><span class="ce">; Encode that value.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Prepare for the loop.
;
; Y is our counter.
; <a href="RAM.html#Password_TempA">Password_TempA</a> is our upper bounds.
;
</div><span class="l"><a class="anc" name="9838" href="#9838">[9838]</a><span class="cd"><span class="i">LDY</span> <span class="o">#$00</span></span><span class="ce">; Y = 0 (loop counter)</span></span>
<span class="l"></span>
<a name=":983a:@_loop"></a><span class="l"><a class="anc" name="983a" href="#983a">[983a]</a><a href="#:983a:@_loop" class="lla">@_loop:</a><span class="ce">; [$983a]</span></span>
<span class="l"><a class="anc" name="983a" href="#983a">[983a]</a><span class="cd"><span class="i">TYA</span></span><span class="ce">; A = Y</span></span>
<span class="l"><a class="anc" name="983b" href="#983b">[983b]</a><span class="cd"><span class="i">PHA</span></span><span class="ce">; Push A to stack</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Encode a value from the list. Roughly:
;
; <a href="#Password_EncodeValue">Password_EncodeValue</a>(entryList[Y], X, numBits)
;
</div><span class="l"><a class="anc" name="983c" href="#983c">[983c]</a><span class="cd"><span class="i">LDA</span> <span class="o">($ee),Y</span></span><span class="ce">; A = value at bits offset</span></span>
<span class="l"><a class="anc" name="983e" href="#983e">[983e]</a><span class="cd"><span class="i">LDY</span> <span class="o">a:<a href="RAM.html#Password_TempX">Password_TempX</a></span></span><span class="ce">; Y = <a href="RAM.html#Password_TempX">Password_TempX</a> (num bits)</span></span>
<span class="l"><a class="anc" name="9841" href="#9841">[9841]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#Password_EncodeValue">Password_EncodeValue</a></span></span><span class="ce">; Encode this value.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; We're done encoding. See if we've reached the end
; of the encoding loop.
;
</div><span class="l"><a class="anc" name="9844" href="#9844">[9844]</a><span class="cd"><span class="i">PLA</span></span><span class="ce">; Pop A from stack</span></span>
<span class="l"><a class="anc" name="9845" href="#9845">[9845]</a><span class="cd"><span class="i">TAY</span></span><span class="ce">; Y = A</span></span>
<span class="l"><a class="anc" name="9846" href="#9846">[9846]</a><span class="cd"><span class="i">INY</span></span><span class="ce">; Y++</span></span>
<span class="l"><a class="anc" name="9847" href="#9847">[9847]</a><span class="cd"><span class="i">CPY</span> <span class="o">a:<a href="RAM.html#Password_TempA">Password_TempA</a></span></span><span class="ce">; If Y != <a href="RAM.html#Password_TempA">Password_TempA</a> ...</span></span>
<span class="l"><a class="anc" name="984a" href="#984a">[984a]</a><span class="cd"><span class="i">BNE</span> <span class="o"><a href="#@_loop">@_loop</a></span></span><span class="ce">; ... Loop.</span></span>
<span class="l"><a class="anc" name="984c" href="#984c">[984c]</a><span class="cd"><span class="i">RTS</span></span></span>
<span class="l"></span>
<a name=":984d:@_encodeValue"></a><span class="l"><a class="anc" name="984d" href="#984d">[984d]</a><a href="#:984d:@_encodeValue" class="lla">@_encodeValue:</a><span class="ce">; [$984d]</span></span>
<span class="l"><a class="anc" name="984d" href="#984d">[984d]</a><span class="cd"><span class="i">JMP</span> <span class="o"><a href="#Password_EncodeValue">Password_EncodeValue</a></span></span></span>
<span class="l"></span>
</pre><pre><a name="Password_Maybe_CheckPasswordLength"></a><div class="cp">;============================================================================
; TODO: Document Password_Maybe_CheckPasswordLength
;
; INPUTS:
;     None.
;
; OUTPUTS:
;     C
;
; XREFS:
;     <a href="#PasswordScreen_WaitForInput">PasswordScreen_WaitForInput</a>
;============================================================================
</div><span class="l"><a class="anc" name="9850" href="#9850">[9850]</a><a href="#Password_Maybe_CheckPasswordLength" class="la">Password_Maybe_CheckPasswordLength:</a><span class="ce">; [$9850]</span></span>
<span class="l"><a class="anc" name="9850" href="#9850">[9850]</a><span class="cd"><span class="i">LDX</span> <span class="o">#$00</span></span></span>
<span class="l"><a class="anc" name="9852" href="#9852">[9852]</a><span class="cd"><span class="i">STX</span> <span class="o">a:<a href="RAM.html#Password_ByteCounter">Password_ByteCounter</a></span></span></span>
<span class="l"><a class="anc" name="9855" href="#9855">[9855]</a><span class="cd"><span class="i">STX</span> <span class="o">a:<a href="RAM.html#Password_BitCounter">Password_BitCounter</a></span></span></span>
<span class="l"><a class="anc" name="9858" href="#9858">[9858]</a><span class="cd"><span class="i">STX</span> <span class="o">a:<a href="RAM.html#Password_Checksum">Password_Checksum</a></span></span></span>
<span class="l"><a class="anc" name="985b" href="#985b">[985b]</a><span class="cd"><span class="i">LDY</span> <span class="o">#$06</span></span></span>
<span class="l"><a class="anc" name="985d" href="#985d">[985d]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="RAM.html#ScreenBuffer">ScreenBuffer</a>,X</span></span></span>
<span class="l"><a class="anc" name="9860" href="#9860">[9860]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#Password_EncodeValue">Password_EncodeValue</a></span></span></span>
<span class="l"><a class="anc" name="9863" href="#9863">[9863]</a><span class="cd"><span class="i">INX</span></span></span>
<span class="l"><a class="anc" name="9864" href="#9864">[9864]</a><span class="cd"><span class="i">LDY</span> <span class="o">#$06</span></span></span>
<span class="l"><a class="anc" name="9866" href="#9866">[9866]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="RAM.html#ScreenBuffer">ScreenBuffer</a>,X</span></span></span>
<span class="l"><a class="anc" name="9869" href="#9869">[9869]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#Password_EncodeValue">Password_EncodeValue</a></span></span></span>
<span class="l"><a class="anc" name="986c" href="#986c">[986c]</a><span class="cd"><span class="i">INX</span></span></span>
<span class="l"><a class="anc" name="986d" href="#986d">[986d]</a><span class="cd"><span class="i">LDY</span> <span class="o">#$06</span></span></span>
<span class="l"><a class="anc" name="986f" href="#986f">[986f]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="RAM.html#ScreenBuffer">ScreenBuffer</a>,X</span></span></span>
<span class="l"><a class="anc" name="9872" href="#9872">[9872]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#Password_EncodeValue">Password_EncodeValue</a></span></span></span>
<span class="l"><a class="anc" name="9875" href="#9875">[9875]</a><span class="cd"><span class="i">INX</span></span></span>
<span class="l"><a class="anc" name="9876" href="#9876">[9876]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#Password_EncodedState_1_">Password_EncodedState_1_</a></span></span></span>
<span class="l"><a class="anc" name="9879" href="#9879">[9879]</a><span class="cd"><span class="i">LSR</span> <span class="o">A</span></span></span>
<span class="l"><a class="anc" name="987a" href="#987a">[987a]</a><span class="cd"><span class="i">LSR</span> <span class="o">A</span></span></span>
<span class="l"><a class="anc" name="987b" href="#987b">[987b]</a><span class="cd"><span class="i">LSR</span> <span class="o">A</span></span></span>
<span class="l"><a class="anc" name="987c" href="#987c">[987c]</a><span class="cd"><span class="i">CMP</span> <span class="o">a:<a href="RAM.html#Password_EnteredCharsLength">Password_EnteredCharsLength</a></span></span></span>
<span class="l"><a class="anc" name="987f" href="#987f">[987f]</a><span class="cd"><span class="i">BNE</span> <span class="o"><a href="#@_returnTrue">@_returnTrue</a></span></span></span>
<span class="l"></span>
<a name=":9881:@LAB_PRG12__9881"></a><span class="l"><a class="anc" name="9881" href="#9881">[9881]</a><a href="#:9881:@LAB_PRG12__9881" class="lla">@LAB_PRG12__9881:</a><span class="ce">; [$9881]</span></span>
<span class="l"><a class="anc" name="9881" href="#9881">[9881]</a><span class="cd"><span class="i">LDY</span> <span class="o">#$06</span></span></span>
<span class="l"><a class="anc" name="9883" href="#9883">[9883]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="RAM.html#ScreenBuffer">ScreenBuffer</a>,X</span></span></span>
<span class="l"><a class="anc" name="9886" href="#9886">[9886]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#Password_EncodeValue">Password_EncodeValue</a></span></span></span>
<span class="l"><a class="anc" name="9889" href="#9889">[9889]</a><span class="cd"><span class="i">INX</span></span></span>
<span class="l"><a class="anc" name="988a" href="#988a">[988a]</a><span class="cd"><span class="i">CPX</span> <span class="o">a:<a href="RAM.html#Password_EnteredCharsLength">Password_EnteredCharsLength</a></span></span></span>
<span class="l"><a class="anc" name="988d" href="#988d">[988d]</a><span class="cd"><span class="i">BNE</span> <span class="o"><a href="#@LAB_PRG12__9881">@LAB_PRG12__9881</a></span></span></span>
<span class="l"></span>
<a name=":988f:@LAB_PRG12__988f"></a><span class="l"><a class="anc" name="988f" href="#988f">[988f]</a><a href="#:988f:@LAB_PRG12__988f" class="lla">@LAB_PRG12__988f:</a><span class="ce">; [$988f]</span></span>
<span class="l"><a class="anc" name="988f" href="#988f">[988f]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#Password_BitCounter">Password_BitCounter</a></span></span></span>
<span class="l"><a class="anc" name="9892" href="#9892">[9892]</a><span class="cd"><span class="i">BEQ</span> <span class="o"><a href="#@LAB_PRG12__989e">@LAB_PRG12__989e</a></span></span></span>
<span class="l"><a class="anc" name="9894" href="#9894">[9894]</a><span class="cd"><span class="i">LDY</span> <span class="o">#$01</span></span></span>
<span class="l"><a class="anc" name="9896" href="#9896">[9896]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$00</span></span></span>
<span class="l"><a class="anc" name="9898" href="#9898">[9898]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#Password_EncodeValue">Password_EncodeValue</a></span></span></span>
<span class="l"><a class="anc" name="989b" href="#989b">[989b]</a><span class="cd"><span class="i">JMP</span> <span class="o"><a href="#@LAB_PRG12__988f">@LAB_PRG12__988f</a></span></span></span>
<span class="l"></span>
<a name=":989e:@LAB_PRG12__989e"></a><span class="l"><a class="anc" name="989e" href="#989e">[989e]</a><a href="#:989e:@LAB_PRG12__989e" class="lla">@LAB_PRG12__989e:</a><span class="ce">; [$989e]</span></span>
<span class="l"><a class="anc" name="989e" href="#989e">[989e]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#Password_Checksum">Password_Checksum</a></span></span></span>
<span class="l"><a class="anc" name="98a1" href="#98a1">[98a1]</a><span class="cd"><span class="i">BNE</span> <span class="o"><a href="#@_returnTrue">@_returnTrue</a></span></span></span>
<span class="l"><a class="anc" name="98a3" href="#98a3">[98a3]</a><span class="cd"><span class="i">CLC</span></span></span>
<span class="l"><a class="anc" name="98a4" href="#98a4">[98a4]</a><span class="cd"><span class="i">RTS</span></span></span>
<span class="l"></span>
<a name=":98a5:@_returnTrue"></a><span class="l"><a class="anc" name="98a5" href="#98a5">[98a5]</a><a href="#:98a5:@_returnTrue" class="lla">@_returnTrue:</a><span class="ce">; [$98a5]</span></span>
<span class="l"><a class="anc" name="98a5" href="#98a5">[98a5]</a><span class="cd"><span class="i">SEC</span></span></span>
<span class="l"><a class="anc" name="98a6" href="#98a6">[98a6]</a><span class="cd"><span class="i">RTS</span></span></span>
<span class="l"></span>
</pre><pre><a name="Password_EncodeValue"></a><div class="cp">;============================================================================
; TODO: Document Password_EncodeValue
;
; INPUTS:
;     A
;     Y
;
; OUTPUTS:
;     TODO
;
; XREFS:
;     <a href="#Password_EncodeGameState">Password_EncodeGameState</a>
;     <a href="#Password_EncodeValueList">Password_EncodeValueList</a>
;     <a href="#Password_EncodeValueOrUnset">Password_EncodeValueOrUnset</a>
;     <a href="#Password_GenerateState">Password_GenerateState</a>
;     <a href="#Password_Maybe_CheckPasswordLength">Password_Maybe_CheckPasswordLength</a>
;============================================================================
</div><span class="l"><a class="anc" name="98a7" href="#98a7">[98a7]</a><a href="#Password_EncodeValue" class="la">Password_EncodeValue:</a><span class="ce">; [$98a7]</span></span>
<span class="l"><a class="anc" name="98a7" href="#98a7">[98a7]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Temp_Int24">Temp_Int24</a></span></span><span class="ce">; <a href="RAM.html#Temp_Int24">Temp_Int24</a> = A (character code value)</span></span>
<span class="l"><a class="anc" name="98a9" href="#98a9">[98a9]</a><span class="cd"><span class="i">TXA</span></span><span class="ce">; A = X (character code offset)</span></span>
<span class="l"><a class="anc" name="98aa" href="#98aa">[98aa]</a><span class="cd"><span class="i">PHA</span></span><span class="ce">; Push A to stack, saving it.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Determine the number of bits we'll be using as an
; offset in our math below.
;
; This will be 8 - Y.
;
; If that is &gt; 0, we'll do looped math below to
; calculate a source bit offset, storing in <a href="RAM.html#Temp_Int24">Temp_Int24</a>.
;
; If it's 0, we'll skip the math and keep
; <a href="RAM.html#Temp_Int24">Temp_Int24</a> = A (the character code value).
;
</div><span class="l"><a class="anc" name="98ab" href="#98ab">[98ab]</a><span class="cd"><span class="i">STY</span> <span class="o"><a href="RAM.html#Temp_Int24_M">Temp_Int24_M</a></span></span><span class="ce">; <a href="RAM.html#Temp_Int24">Temp_Int24</a>+1 = Y (number of bits)</span></span>
<span class="l"><a class="anc" name="98ad" href="#98ad">[98ad]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$08</span></span><span class="ce">; A = 8 (bits in a byte)</span></span>
<span class="l"><a class="anc" name="98af" href="#98af">[98af]</a><span class="cd"><span class="i">SEC</span></span><span class="ce">; C = 1</span></span>
<span class="l"><a class="anc" name="98b0" href="#98b0">[98b0]</a><span class="cd"><span class="i">SBC</span> <span class="o"><a href="RAM.html#Temp_Int24_M">Temp_Int24_M</a></span></span><span class="ce">; A = 8 - <a href="RAM.html#Temp_Int24">Temp_Int24</a>+1 - (1 - C)
  = 8 - <a href="RAM.html#Temp_Int24">Temp_Int24</a>+1
  = 8 - Y

If overflow, C = 0</span></span>
<span class="l"><a class="anc" name="98b2" href="#98b2">[98b2]</a><span class="cd"><span class="i">BEQ</span> <span class="o"><a href="#@_loop2">@_loop2</a></span></span><span class="ce">; If A == 0, skip the bit offset math.</span></span>
<span class="l"><a class="anc" name="98b4" href="#98b4">[98b4]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Temp_Int24_M">Temp_Int24_M</a></span></span><span class="ce">; <a href="RAM.html#Temp_Int24">Temp_Int24</a>+1 = A (our loop counter; remaining bits)</span></span>
<span class="l"></span>
<span class="l"></span>
<a name=":98b6:@_loop1"></a><div class="c">;
; Do:
;
; <a href="RAM.html#Temp_Int24">Temp_Int24</a> = <a href="RAM.html#Temp_Int24">Temp_Int24</a> * (2 to the
; power of <a href="RAM.html#Temp_Int24">Temp_Int24</a>+1)
;
; Or, rather:
;
; bitPos = charCode * (2 to the power of (8 - numBits))
;
; We're effectively taking a 0-based character code (A-Za-z0-9)
; into the entered password and we're getting a source bit offset
; using increments of (8 - numBits), which for value-to-ASCII
; encoding (for example) will be 8 - 6 = 2.
;
</div><span class="l"><a class="anc" name="98b6" href="#98b6">[98b6]</a><a href="#:98b6:@_loop1" class="lla">@_loop1:</a><span class="ce">; [$98b6]</span></span>
<span class="l"><a class="anc" name="98b6" href="#98b6">[98b6]</a><span class="cd"><span class="i">ASL</span> <span class="o"><a href="RAM.html#Temp_Int24">Temp_Int24</a></span></span><span class="ce">; <a href="RAM.html#Temp_Int24">Temp_Int24</a> *= 2
If overflow, C = 1</span></span>
<span class="l"><a class="anc" name="98b8" href="#98b8">[98b8]</a><span class="cd"><span class="i">DEC</span> <span class="o"><a href="RAM.html#Temp_Int24_M">Temp_Int24_M</a></span></span><span class="ce">; <a href="RAM.html#Temp_Int24">Temp_Int24</a>+1--</span></span>
<span class="l"><a class="anc" name="98ba" href="#98ba">[98ba]</a><span class="cd"><span class="i">BNE</span> <span class="o"><a href="#@_loop1">@_loop1</a></span></span><span class="ce">; If <a href="RAM.html#Temp_Int24">Temp_Int24</a>+1 != 0, loop.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name=":98bc:@_loop2"></a><div class="c">;
; Encode the character.
;
</div><span class="l"><a class="anc" name="98bc" href="#98bc">[98bc]</a><a href="#:98bc:@_loop2" class="lla">@_loop2:</a><span class="ce">; [$98bc]</span></span>
<span class="l"><a class="anc" name="98bc" href="#98bc">[98bc]</a><span class="cd"><span class="i">LDX</span> <span class="o">a:<a href="RAM.html#Password_ByteCounter">Password_ByteCounter</a></span></span><span class="ce">; X = index of the character to encode</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Advance our source bit position, multipying by 2 and
; OR'ing the carry flag from above.
;
</div><span class="l"><a class="anc" name="98bf" href="#98bf">[98bf]</a><span class="cd"><span class="i">ROL</span> <span class="o"><a href="RAM.html#Temp_Int24">Temp_Int24</a></span></span><span class="ce">; <a href="RAM.html#Temp_Int24">Temp_Int24</a> = <a href="RAM.html#Temp_Int24">Temp_Int24</a> * 2 | C
If overflow, C = 1</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Store a new computed value at the dest offset (X, or
; <a href="RAM.html#Password_ByteCounter">Password_ByteCounter</a>). This will be the stored value * 2,
; OR'd with the carry bit from the calculation above.
;
</div><span class="l"><a class="anc" name="98c1" href="#98c1">[98c1]</a><span class="cd"><span class="i">ROL</span> <span class="o"><a href="RAM.html#Password_EncodedState">Password_EncodedState</a>,X</span></span><span class="ce">; Dest value = Dest value * 2 | C
If overflow, C = 1</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Advance the bit position.
;
; If we're at the end of the byte, jump to advance
; the destination byte position and reset the bit counter.
;
</div><span class="l"><a class="anc" name="98c4" href="#98c4">[98c4]</a><span class="cd"><span class="i">INC</span> <span class="o">a:<a href="RAM.html#Password_BitCounter">Password_BitCounter</a></span></span><span class="ce">; <a href="RAM.html#Password_BitCounter">Password_BitCounter</a>++</span></span>
<span class="l"><a class="anc" name="98c7" href="#98c7">[98c7]</a><span class="cd"><span class="i">LDX</span> <span class="o">a:<a href="RAM.html#Password_BitCounter">Password_BitCounter</a></span></span><span class="ce">; X = <a href="RAM.html#Password_BitCounter">Password_BitCounter</a></span></span>
<span class="l"><a class="anc" name="98ca" href="#98ca">[98ca]</a><span class="cd"><span class="i">CPX</span> <span class="o">#$08</span></span><span class="ce">; If X != 8...</span></span>
<span class="l"><a class="anc" name="98cc" href="#98cc">[98cc]</a><span class="cd"><span class="i">BNE</span> <span class="o"><a href="#@_nextLoop">@_nextLoop</a></span></span><span class="ce">; ... Jump</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; We finished processing the byte. We can now update the
; checksum, reset the destination byte, and reset the dest
; bit counter.
;
</div><span class="l"><a class="anc" name="98ce" href="#98ce">[98ce]</a><span class="cd"><span class="i">LDX</span> <span class="o">a:<a href="RAM.html#Password_ByteCounter">Password_ByteCounter</a></span></span><span class="ce">; X = Computed byte index</span></span>
<span class="l"><a class="anc" name="98d1" href="#98d1">[98d1]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="RAM.html#Password_EncodedState">Password_EncodedState</a>,X</span></span><span class="ce">; A = Dest value</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Update the checksum value.
;
; The checksum is the sum of the character values computed.
;
</div><span class="l"><a class="anc" name="98d4" href="#98d4">[98d4]</a><span class="cd"><span class="i">CLC</span></span><span class="ce">; C = 0</span></span>
<span class="l"><a class="anc" name="98d5" href="#98d5">[98d5]</a><span class="cd"><span class="i">ADC</span> <span class="o">a:<a href="RAM.html#Password_Checksum">Password_Checksum</a></span></span><span class="ce">; <a href="RAM.html#Password_Checksum">Password_Checksum</a> += A (dest value)
If overflow, C = 1</span></span>
<span class="l"><a class="anc" name="98d8" href="#98d8">[98d8]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#Password_Checksum">Password_Checksum</a></span></span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Increment the destination index and reset the bit counter.
;
</div><span class="l"><a class="anc" name="98db" href="#98db">[98db]</a><span class="cd"><span class="i">INC</span> <span class="o">a:<a href="RAM.html#Password_ByteCounter">Password_ByteCounter</a></span></span></span>
<span class="l"><a class="anc" name="98de" href="#98de">[98de]</a><span class="cd"><span class="i">LDX</span> <span class="o">#$00</span></span></span>
<span class="l"><a class="anc" name="98e0" href="#98e0">[98e0]</a><span class="cd"><span class="i">STX</span> <span class="o">a:<a href="RAM.html#Password_BitCounter">Password_BitCounter</a></span></span></span>
<span class="l"></span>
<a name=":98e3:@_nextLoop"></a><span class="l"><a class="anc" name="98e3" href="#98e3">[98e3]</a><a href="#:98e3:@_nextLoop" class="lla">@_nextLoop:</a><span class="ce">; [$98e3]</span></span>
<span class="l"><a class="anc" name="98e3" href="#98e3">[98e3]</a><span class="cd"><span class="i">DEY</span></span><span class="ce">; Y--</span></span>
<span class="l"><a class="anc" name="98e4" href="#98e4">[98e4]</a><span class="cd"><span class="i">BNE</span> <span class="o"><a href="#@_loop2">@_loop2</a></span></span><span class="ce">; If not 0, loop.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Restore the original value for X. This won't be modified.
;
</div><span class="l"><a class="anc" name="98e6" href="#98e6">[98e6]</a><span class="cd"><span class="i">PLA</span></span><span class="ce">; Pull A from stack.</span></span>
<span class="l"><a class="anc" name="98e7" href="#98e7">[98e7]</a><span class="cd"><span class="i">TAX</span></span><span class="ce">; X = A. This is our result.</span></span>
<span class="l"><a class="anc" name="98e8" href="#98e8">[98e8]</a><span class="cd"><span class="i">RTS</span></span></span>
<span class="l"></span>
</pre><pre><a name="Password_DecodeValue"></a><div class="cp">;============================================================================
; TODO: Document Password_DecodeValue
;
; INPUTS:
;     Y
;
; OUTPUTS:
;     A
;
; XREFS:
;     <a href="#Password_DecodeValueList">Password_DecodeValueList</a>
;     <a href="#Password_DecodeValueOrUnset">Password_DecodeValueOrUnset</a>
;     <a href="#Password_GetNext6Bits">Password_GetNext6Bits</a>
;     <a href="#Password_Load">Password_Load</a>
;============================================================================
</div><span class="l"><a class="anc" name="98e9" href="#98e9">[98e9]</a><a href="#Password_DecodeValue" class="la">Password_DecodeValue:</a><span class="ce">; [$98e9]</span></span>
<span class="l"><a class="anc" name="98e9" href="#98e9">[98e9]</a><span class="cd"><span class="i">TXA</span></span></span>
<span class="l"><a class="anc" name="98ea" href="#98ea">[98ea]</a><span class="cd"><span class="i">PHA</span></span></span>
<span class="l"><a class="anc" name="98eb" href="#98eb">[98eb]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$00</span></span></span>
<span class="l"></span>
<a name=":98ed:@LAB_PRG12__98ed"></a><span class="l"><a class="anc" name="98ed" href="#98ed">[98ed]</a><a href="#:98ed:@LAB_PRG12__98ed" class="lla">@LAB_PRG12__98ed:</a><span class="ce">; [$98ed]</span></span>
<span class="l"><a class="anc" name="98ed" href="#98ed">[98ed]</a><span class="cd"><span class="i">LDX</span> <span class="o">a:<a href="RAM.html#Password_ByteCounter">Password_ByteCounter</a></span></span></span>
<span class="l"><a class="anc" name="98f0" href="#98f0">[98f0]</a><span class="cd"><span class="i">ASL</span> <span class="o"><a href="RAM.html#Password_EncodedState">Password_EncodedState</a>,X</span></span></span>
<span class="l"><a class="anc" name="98f3" href="#98f3">[98f3]</a><span class="cd"><span class="i">ROL</span> <span class="o">A</span></span></span>
<span class="l"><a class="anc" name="98f4" href="#98f4">[98f4]</a><span class="cd"><span class="i">INC</span> <span class="o">a:<a href="RAM.html#Password_BitCounter">Password_BitCounter</a></span></span></span>
<span class="l"><a class="anc" name="98f7" href="#98f7">[98f7]</a><span class="cd"><span class="i">LDX</span> <span class="o">a:<a href="RAM.html#Password_BitCounter">Password_BitCounter</a></span></span></span>
<span class="l"><a class="anc" name="98fa" href="#98fa">[98fa]</a><span class="cd"><span class="i">CPX</span> <span class="o">#$08</span></span></span>
<span class="l"><a class="anc" name="98fc" href="#98fc">[98fc]</a><span class="cd"><span class="i">BNE</span> <span class="o"><a href="#@LAB_PRG12__9906">@LAB_PRG12__9906</a></span></span></span>
<span class="l"><a class="anc" name="98fe" href="#98fe">[98fe]</a><span class="cd"><span class="i">INC</span> <span class="o">a:<a href="RAM.html#Password_ByteCounter">Password_ByteCounter</a></span></span></span>
<span class="l"><a class="anc" name="9901" href="#9901">[9901]</a><span class="cd"><span class="i">LDX</span> <span class="o">#$00</span></span></span>
<span class="l"><a class="anc" name="9903" href="#9903">[9903]</a><span class="cd"><span class="i">STX</span> <span class="o">a:<a href="RAM.html#Password_BitCounter">Password_BitCounter</a></span></span></span>
<span class="l"></span>
<a name=":9906:@LAB_PRG12__9906"></a><span class="l"><a class="anc" name="9906" href="#9906">[9906]</a><a href="#:9906:@LAB_PRG12__9906" class="lla">@LAB_PRG12__9906:</a><span class="ce">; [$9906]</span></span>
<span class="l"><a class="anc" name="9906" href="#9906">[9906]</a><span class="cd"><span class="i">DEY</span></span></span>
<span class="l"><a class="anc" name="9907" href="#9907">[9907]</a><span class="cd"><span class="i">BNE</span> <span class="o"><a href="#@LAB_PRG12__98ed">@LAB_PRG12__98ed</a></span></span></span>
<span class="l"><a class="anc" name="9909" href="#9909">[9909]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Temp_Int24">Temp_Int24</a></span></span></span>
<span class="l"><a class="anc" name="990b" href="#990b">[990b]</a><span class="cd"><span class="i">PLA</span></span></span>
<span class="l"><a class="anc" name="990c" href="#990c">[990c]</a><span class="cd"><span class="i">TAX</span></span></span>
<span class="l"><a class="anc" name="990d" href="#990d">[990d]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="RAM.html#Temp_Int24">Temp_Int24</a></span></span></span>
<span class="l"><a class="anc" name="990f" href="#990f">[990f]</a><span class="cd"><span class="i">RTS</span></span></span>
<span class="l"></span>
<span class="l"></span>
</pre><pre><a name="IScripts_FillPlaceholderText"></a><div class="cp">;============================================================================
; Fill a textbox with 4 lines of placeholder text.
;
; This will first clear any existing text tiles and then
; place 4 rows of placeholder text (letters and characters),
; ensuring the size and coordinates of the finished textbox.
;
; The text will not be displayed.
;
; INPUTS:
;     None.
;
; OUTPUTS:
;     None.
;
; CALLS:
;     <a href="PRG15_MIRROR.html#TextBox_ClearTextTiles">TextBox_ClearTextTiles</a>
;     <a href="PRG15_MIRROR.html#TextBox_FillPlaceholderTextAtLineWithStartChar">TextBox_FillPlaceholderTextAtLineWithStartChar</a>
;     <a href="PRG15_MIRROR.html#PPU_SetAddrForTextBoxPos">PPU_SetAddrForTextBoxPos</a>
;
; XREFS:
;     <a href="#IScripts_PositionAndFillPlaceholderText">IScripts_PositionAndFillPlaceholderText</a>
;============================================================================
</div><span class="l"><a class="anc" name="9910" href="#9910">[9910]</a><a href="#IScripts_FillPlaceholderText" class="la">IScripts_FillPlaceholderText:</a><span class="ce">; [$9910]</span></span>
<div class="c">;
; Clear the textbox and prepare to write to it.
;
</div><span class="l"><a class="anc" name="9910" href="#9910">[9910]</a><span class="cd"><span class="i">JSR</span> <span class="o">$f44a</span></span><span class="ce">; Clear the existing text tiles.</span></span>
<span class="l"><a class="anc" name="9913" href="#9913">[9913]</a><span class="cd"><span class="i">JSR</span> <span class="o">$f804</span></span><span class="ce">; Set the PPU address for the text position to write to.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Write 4 lines of arbitrary characters.
;
</div><span class="l"><a class="anc" name="9916" href="#9916">[9916]</a><span class="cd"><span class="i">LDY</span> <span class="o">#$40</span></span></span>
<span class="l"><a class="anc" name="9918" href="#9918">[9918]</a><span class="cd"><span class="i">JSR</span> <span class="o">$f5d9</span></span><span class="ce">; Write "@ABCDEFGHIJKLMNO"</span></span>
<span class="l"><a class="anc" name="991b" href="#991b">[991b]</a><span class="cd"><span class="i">LDY</span> <span class="o">#$50</span></span></span>
<span class="l"><a class="anc" name="991d" href="#991d">[991d]</a><span class="cd"><span class="i">JSR</span> <span class="o">$f5d9</span></span><span class="ce">; Write "PQRSTUVWXYZ[\]^_"</span></span>
<span class="l"><a class="anc" name="9920" href="#9920">[9920]</a><span class="cd"><span class="i">LDY</span> <span class="o">#$60</span></span></span>
<span class="l"><a class="anc" name="9922" href="#9922">[9922]</a><span class="cd"><span class="i">JSR</span> <span class="o">$f5d9</span></span><span class="ce">; Write "`abcdefghijklmno"</span></span>
<span class="l"><a class="anc" name="9925" href="#9925">[9925]</a><span class="cd"><span class="i">LDY</span> <span class="o">#$70</span></span></span>
<span class="l"><a class="anc" name="9927" href="#9927">[9927]</a><span class="cd"><span class="i">JMP</span> <span class="o">$f5d9</span></span><span class="ce">; Write "pqrstuvwxyz{|}~."</span></span>
<span class="l"></span>
</pre><pre><a name="TextBox_CheckShouldContinue"></a><div class="cp">;============================================================================
; TODO: Document TextBox_CheckShouldContinue
;
; INPUTS:
;     None.
;
; OUTPUTS:
;     C
;
; XREFS:
;     <a href="#IScriptAction_ShowUnskippableMessage">IScriptAction_ShowUnskippableMessage</a>
;============================================================================
</div><span class="l"><a class="anc" name="992a" href="#992a">[992a]</a><a href="#TextBox_CheckShouldContinue" class="la">TextBox_CheckShouldContinue:</a><span class="ce">; [$992a]</span></span>
<span class="l"><a class="anc" name="992a" href="#992a">[992a]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#MessageID">MessageID</a></span></span></span>
<span class="l"><a class="anc" name="992d" href="#992d">[992d]</a><span class="cd"><span class="i">BNE</span> <span class="o"><a href="#@LAB_PRG12__9938">@LAB_PRG12__9938</a></span></span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; There is no message ID set.
;
</div><span class="l"><a class="anc" name="992f" href="#992f">[992f]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#TextBox_DrawUpArrowTerminatorSymbol">TextBox_DrawUpArrowTerminatorSymbol</a></span></span></span>
<span class="l"><a class="anc" name="9932" href="#9932">[9932]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="RAM.html#Joy1_ChangedButtonMask">Joy1_ChangedButtonMask</a></span></span></span>
<span class="l"><a class="anc" name="9934" href="#9934">[9934]</a><span class="cd"><span class="i">BPL</span> <span class="o"><a href="#@LAB_PRG12__9947">@LAB_PRG12__9947</a></span></span></span>
<span class="l"><a class="anc" name="9936" href="#9936">[9936]</a><span class="cd"><span class="i">SEC</span></span></span>
<span class="l"><a class="anc" name="9937" href="#9937">[9937]</a><span class="cd"><span class="i">RTS</span></span></span>
<span class="l"></span>
<a name=":9938:@LAB_PRG12__9938"></a><span class="l"><a class="anc" name="9938" href="#9938">[9938]</a><a href="#:9938:@LAB_PRG12__9938" class="lla">@LAB_PRG12__9938:</a><span class="ce">; [$9938]</span></span>
<span class="l"><a class="anc" name="9938" href="#9938">[9938]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#TextBox_MessagePaused">TextBox_MessagePaused</a></span></span></span>
<span class="l"><a class="anc" name="993b" href="#993b">[993b]</a><span class="cd"><span class="i">BEQ</span> <span class="o"><a href="#@LAB_PRG12__9947">@LAB_PRG12__9947</a></span></span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; An existing message has ended.
;
</div><span class="l"><a class="anc" name="993d" href="#993d">[993d]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#TextBox_DrawDownArrowTerminatorSymbol">TextBox_DrawDownArrowTerminatorSymbol</a></span></span></span>
<span class="l"><a class="anc" name="9940" href="#9940">[9940]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="RAM.html#Joy1_ChangedButtonMask">Joy1_ChangedButtonMask</a></span></span></span>
<span class="l"><a class="anc" name="9942" href="#9942">[9942]</a><span class="cd"><span class="i">BPL</span> <span class="o"><a href="#@LAB_PRG12__9947">@LAB_PRG12__9947</a></span></span></span>
<span class="l"><a class="anc" name="9944" href="#9944">[9944]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#TextBox_PrepareContinueMessage">TextBox_PrepareContinueMessage</a></span></span></span>
<span class="l"></span>
<a name=":9947:@LAB_PRG12__9947"></a><span class="l"><a class="anc" name="9947" href="#9947">[9947]</a><a href="#:9947:@LAB_PRG12__9947" class="lla">@LAB_PRG12__9947:</a><span class="ce">; [$9947]</span></span>
<span class="l"><a class="anc" name="9947" href="#9947">[9947]</a><span class="cd"><span class="i">CLC</span></span></span>
<span class="l"><a class="anc" name="9948" href="#9948">[9948]</a><span class="cd"><span class="i">RTS</span></span></span>
<span class="l"></span>
</pre><pre><a name="TextBox_PrepareContinueMessage"></a><div class="cp">;============================================================================
; TODO: Document TextBox_PrepareContinueMessage
;
; INPUTS:
;     None.
;
; OUTPUTS:
;     TODO
;
; XREFS:
;     <a href="#TextBox_CheckForDismiss">TextBox_CheckForDismiss</a>
;     <a href="#TextBox_CheckShouldContinue">TextBox_CheckShouldContinue</a>
;     <a href="#TextBox_CheckShouldContinueOrDismissQuestion">TextBox_CheckShouldContinueOrDismissQuestion</a>
;============================================================================
</div><span class="l"><a class="anc" name="9949" href="#9949">[9949]</a><a href="#TextBox_PrepareContinueMessage" class="la">TextBox_PrepareContinueMessage:</a><span class="ce">; [$9949]</span></span>
<span class="l"><a class="anc" name="9949" href="#9949">[9949]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$00</span></span></span>
<span class="l"><a class="anc" name="994b" href="#994b">[994b]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#TextBox_MessagePaused">TextBox_MessagePaused</a></span></span></span>
<span class="l"><a class="anc" name="994e" href="#994e">[994e]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$04</span></span></span>
<span class="l"><a class="anc" name="9950" href="#9950">[9950]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#Unused_Arg_Text_NumLines">Unused_Arg_Text_NumLines</a></span></span></span>
<span class="l"><a class="anc" name="9953" href="#9953">[9953]</a><span class="cd"><span class="i">JMP</span> <span class="o">$f539</span></span></span>
<span class="l"></span>
</pre><pre><a name="TextBox_CheckShouldContinueOrDismissMessage"></a><div class="cp">;============================================================================
; TODO: Document TextBox_CheckShouldContinueOrDismissMessage
;
; INPUTS:
;     None.
;
; OUTPUTS:
;     C
;
; XREFS:
;     <a href="#IScriptAction_OpenShop">IScriptAction_OpenShop</a>
;     <a href="#IScriptAction_ShowMessage">IScriptAction_ShowMessage</a>
;     <a href="#IScriptAction_ShowSellMenu">IScriptAction_ShowSellMenu</a>
;     <a href="#IScripts_ShowFinalMessage">IScripts_ShowFinalMessage</a>
;============================================================================
</div><span class="l"><a class="anc" name="9956" href="#9956">[9956]</a><a href="#TextBox_CheckShouldContinueOrDismissMessage" class="la">TextBox_CheckShouldContinueOrDismissMessage:</a><span class="ce">; [$9956]</span></span>
<span class="l"><a class="anc" name="9956" href="#9956">[9956]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#MessageID">MessageID</a></span></span></span>
<span class="l"><a class="anc" name="9959" href="#9959">[9959]</a><span class="cd"><span class="i">BNE</span> <span class="o"><a href="#TextBox_CheckForDismiss">TextBox_CheckForDismiss</a></span></span></span>
<span class="l"><a class="anc" name="995b" href="#995b">[995b]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#TextBox_DrawUpArrowTerminatorSymbol">TextBox_DrawUpArrowTerminatorSymbol</a></span></span></span>
<span class="l"><a class="anc" name="995e" href="#995e">[995e]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="RAM.html#Joy1_ChangedButtonMask">Joy1_ChangedButtonMask</a></span></span></span>
<span class="l"><a class="anc" name="9960" href="#9960">[9960]</a><span class="cd"><span class="i">BMI</span> <span class="o"><a href="#IScripts_ReturnFalse">IScripts_ReturnFalse</a></span></span></span>
<span class="l"></span>
<div class="c">;
; v-- Fall through --v
;
</div><span class="l"></span>
<span class="l"></span>
</pre><pre><a name="TextBox_IsBPressed"></a><div class="cp">;============================================================================
; Return whether the B button was pressed.
;
; This is used to dismiss textboxes.
;
; INPUTS:
;     <a href="RAM.html#Joy1_ChangedButtonMask">Joy1_ChangedButtonMask</a>:
;         The changed buttons on controller 1.
;
; OUTPUTS:
;     A:
;         Set to 1.
;
;     C:
;         0 = Not pressed.
;         1 = Pressed.
;
; XREFS:
;     <a href="#TextBox_CheckForDismiss">TextBox_CheckForDismiss</a>
;     <a href="#TextBox_CheckShouldContinueOrDismissQuestion">TextBox_CheckShouldContinueOrDismissQuestion</a>
;============================================================================
</div><span class="l"><a class="anc" name="9962" href="#9962">[9962]</a><a href="#TextBox_IsBPressed" class="la">TextBox_IsBPressed:</a><span class="ce">; [$9962]</span></span>
<span class="l"><a class="anc" name="9962" href="#9962">[9962]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="RAM.html#Joy1_ChangedButtonMask">Joy1_ChangedButtonMask</a></span></span><span class="ce">; Load the changed button mask.</span></span>
<span class="l"><a class="anc" name="9964" href="#9964">[9964]</a><span class="cd"><span class="i">ASL</span> <span class="o">A</span></span><span class="ce">; Shift B into Carry.</span></span>
<span class="l"><a class="anc" name="9965" href="#9965">[9965]</a><span class="cd"><span class="i">ASL</span> <span class="o">A</span></span></span>
<span class="l"><a class="anc" name="9966" href="#9966">[9966]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$01</span></span><span class="ce">; A = 1</span></span>
<span class="l"><a class="anc" name="9968" href="#9968">[9968]</a><span class="cd"><span class="i">RTS</span></span><span class="ce">; Return.</span></span>
<span class="l"></span>
</pre><pre><a name="TextBox_CheckForDismiss"></a><div class="cp">;============================================================================
; TODO: Document TextBox_CheckForDismiss
;
; INPUTS:
;     None.
;
; OUTPUTS:
;     C
;
; XREFS:
;     <a href="#TextBox_CheckShouldContinueOrDismissMessage">TextBox_CheckShouldContinueOrDismissMessage</a>
;============================================================================
</div><span class="l"><a class="anc" name="9969" href="#9969">[9969]</a><a href="#TextBox_CheckForDismiss" class="la">TextBox_CheckForDismiss:</a><span class="ce">; [$9969]</span></span>
<span class="l"><a class="anc" name="9969" href="#9969">[9969]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#TextBox_MessagePaused">TextBox_MessagePaused</a></span></span></span>
<span class="l"><a class="anc" name="996c" href="#996c">[996c]</a><span class="cd"><span class="i">BEQ</span> <span class="o"><a href="#TextBox_IsBPressed">TextBox_IsBPressed</a></span></span></span>
<span class="l"><a class="anc" name="996e" href="#996e">[996e]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#TextBox_DrawDownArrowTerminatorSymbol">TextBox_DrawDownArrowTerminatorSymbol</a></span></span></span>
<span class="l"><a class="anc" name="9971" href="#9971">[9971]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="RAM.html#Joy1_ChangedButtonMask">Joy1_ChangedButtonMask</a></span></span></span>
<span class="l"><a class="anc" name="9973" href="#9973">[9973]</a><span class="cd"><span class="i">BPL</span> <span class="o"><a href="#TextBox_IsBPressed">TextBox_IsBPressed</a></span></span></span>
<span class="l"><a class="anc" name="9975" href="#9975">[9975]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#TextBox_PrepareContinueMessage">TextBox_PrepareContinueMessage</a></span></span></span>
<span class="l"><a class="anc" name="9978" href="#9978">[9978]</a><span class="cd"><span class="i">CLC</span></span></span>
<span class="l"><a class="anc" name="9979" href="#9979">[9979]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$01</span></span></span>
<span class="l"><a class="anc" name="997b" href="#997b">[997b]</a><span class="cd"><span class="i">RTS</span></span></span>
<span class="l"></span>
</pre><pre><a name="IScripts_ReturnFalse"></a><div class="cp">;============================================================================
; TODO: Document IScripts_ReturnFalse
;
; INPUTS:
;     None.
;
; OUTPUTS:
;     C
;
; XREFS:
;     <a href="#TextBox_CheckShouldContinueOrDismissMessage">TextBox_CheckShouldContinueOrDismissMessage</a>
;     <a href="#TextBox_CheckShouldContinueOrDismissQuestion">TextBox_CheckShouldContinueOrDismissQuestion</a>
;============================================================================
</div><span class="l"><a class="anc" name="997c" href="#997c">[997c]</a><a href="#IScripts_ReturnFalse" class="la">IScripts_ReturnFalse:</a><span class="ce">; [$997c]</span></span>
<span class="l"><a class="anc" name="997c" href="#997c">[997c]</a><span class="cd"><span class="i">CLC</span></span></span>
<span class="l"><a class="anc" name="997d" href="#997d">[997d]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$00</span></span></span>
<span class="l"><a class="anc" name="997f" href="#997f">[997f]</a><span class="cd"><span class="i">RTS</span></span></span>
<span class="l"></span>
</pre><pre><a name="TextBox_CheckShouldContinueOrDismissQuestion"></a><div class="cp">;============================================================================
; TODO: Document TextBox_CheckShouldContinueOrDismissQuestion
;
; INPUTS:
;     None.
;
; OUTPUTS:
;     C
;
; XREFS:
;     <a href="#IScriptAction_ShowQuestionMessage">IScriptAction_ShowQuestionMessage</a>
;     <a href="#IScriptAction_ShowQuestionMessageCheckIfDismissed">IScriptAction_ShowQuestionMessageCheckIfDismissed</a>
;============================================================================
</div><span class="l"><a class="anc" name="9980" href="#9980">[9980]</a><a href="#TextBox_CheckShouldContinueOrDismissQuestion" class="la">TextBox_CheckShouldContinueOrDismissQuestion:</a><span class="ce">; [$9980]</span></span>
<span class="l"><a class="anc" name="9980" href="#9980">[9980]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#MessageID">MessageID</a></span></span></span>
<span class="l"><a class="anc" name="9983" href="#9983">[9983]</a><span class="cd"><span class="i">BNE</span> <span class="o"><a href="#@LAB_PRG12__998e">@LAB_PRG12__998e</a></span></span></span>
<span class="l"><a class="anc" name="9985" href="#9985">[9985]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#TextBox_DrawQuestionMarkTerminatorSymbol">TextBox_DrawQuestionMarkTerminatorSymbol</a></span></span></span>
<span class="l"><a class="anc" name="9988" href="#9988">[9988]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="RAM.html#Joy1_ChangedButtonMask">Joy1_ChangedButtonMask</a></span></span></span>
<span class="l"><a class="anc" name="998a" href="#998a">[998a]</a><span class="cd"><span class="i">BMI</span> <span class="o"><a href="#IScripts_ReturnFalse">IScripts_ReturnFalse</a></span></span></span>
<span class="l"><a class="anc" name="998c" href="#998c">[998c]</a><span class="cd"><span class="i">BPL</span> <span class="o"><a href="#TextBox_IsBPressed">TextBox_IsBPressed</a></span></span></span>
<span class="l"></span>
<a name=":998e:@LAB_PRG12__998e"></a><span class="l"><a class="anc" name="998e" href="#998e">[998e]</a><a href="#:998e:@LAB_PRG12__998e" class="lla">@LAB_PRG12__998e:</a><span class="ce">; [$998e]</span></span>
<span class="l"><a class="anc" name="998e" href="#998e">[998e]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#TextBox_MessagePaused">TextBox_MessagePaused</a></span></span></span>
<span class="l"><a class="anc" name="9991" href="#9991">[9991]</a><span class="cd"><span class="i">BEQ</span> <span class="o"><a href="#TextBox_IsBPressed">TextBox_IsBPressed</a></span></span></span>
<span class="l"><a class="anc" name="9993" href="#9993">[9993]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#TextBox_DrawDownArrowTerminatorSymbol">TextBox_DrawDownArrowTerminatorSymbol</a></span></span></span>
<span class="l"><a class="anc" name="9996" href="#9996">[9996]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="RAM.html#Joy1_ChangedButtonMask">Joy1_ChangedButtonMask</a></span></span></span>
<span class="l"><a class="anc" name="9998" href="#9998">[9998]</a><span class="cd"><span class="i">BPL</span> <span class="o"><a href="#TextBox_IsBPressed">TextBox_IsBPressed</a></span></span></span>
<span class="l"><a class="anc" name="999a" href="#999a">[999a]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#TextBox_PrepareContinueMessage">TextBox_PrepareContinueMessage</a></span></span></span>
<span class="l"><a class="anc" name="999d" href="#999d">[999d]</a><span class="cd"><span class="i">CLC</span></span></span>
<span class="l"><a class="anc" name="999e" href="#999e">[999e]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$01</span></span></span>
<span class="l"></span>
<a name="RETURN_99A0"></a><div class="c">;
; XREFS:
;     <a href="#TextBox_DrawDownArrowTerminatorSymbol">TextBox_DrawDownArrowTerminatorSymbol</a>
;     <a href="#TextBox_DrawQuestionMarkTerminatorSymbol">TextBox_DrawQuestionMarkTerminatorSymbol</a>
;     <a href="#TextBox_DrawUpArrowTerminatorSymbol">TextBox_DrawUpArrowTerminatorSymbol</a>
;
</div><span class="l"><a class="anc" name="99a0" href="#99a0">[99a0]</a><a href="#RETURN_99A0" class="la">RETURN_99A0:</a><span class="ce">; [$99a0]</span></span>
<span class="l"><a class="anc" name="99a0" href="#99a0">[99a0]</a><span class="cd"><span class="i">RTS</span></span></span>
<span class="l"></span>
<span class="l"></span>
</pre><pre><a name="TextBox_DrawDownArrowTerminatorSymbol"></a><div class="cp">;============================================================================
; Draw the down arrow terminator symbol.
;
; This will draw the down arrow symbol at the bottom of the
; textbox.
;
; The symbol will appear to flash due to the textbox being
; redrawn in-between viable interrupt-based updates.
;
; INPUTS:
;     <a href="RAM.html#InterruptCounter">InterruptCounter</a>:
;         The current interrupt counter, used to rate limit
;         updates.
;
;     <a href="RAM.html#TextBox_X">TextBox_X</a>:
;         The tile X position of the textbox.
;
;     <a href="RAM.html#TextBox_Y">TextBox_Y</a>:
;         The tile Y position of the textbox.
;
; OUTPUTS:
;     None.
;
; CALLS:
;     <a href="PRG15_MIRROR.html#UI_DrawPromptInputSymbol">UI_DrawPromptInputSymbol</a>
;
; XREFS:
;     <a href="#TextBox_CheckForDismiss">TextBox_CheckForDismiss</a>
;     <a href="#TextBox_CheckShouldContinue">TextBox_CheckShouldContinue</a>
;     <a href="#TextBox_CheckShouldContinueOrDismissQuestion">TextBox_CheckShouldContinueOrDismissQuestion</a>
;============================================================================
</div><span class="l"><a class="anc" name="99a1" href="#99a1">[99a1]</a><a href="#TextBox_DrawDownArrowTerminatorSymbol" class="la">TextBox_DrawDownArrowTerminatorSymbol:</a><span class="ce">; [$99a1]</span></span>
<span class="l"><a class="anc" name="99a1" href="#99a1">[99a1]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="RAM.html#InterruptCounter">InterruptCounter</a></span></span><span class="ce">; Load the interrupt counter.</span></span>
<span class="l"><a class="anc" name="99a3" href="#99a3">[99a3]</a><span class="cd"><span class="i">AND</span> <span class="o">#$10</span></span><span class="ce">; Is bit 5 set?</span></span>
<span class="l"><a class="anc" name="99a5" href="#99a5">[99a5]</a><span class="cd"><span class="i">BEQ</span> <span class="o"><a href="#RETURN_99A0">RETURN_99A0</a></span></span><span class="ce">; If not, return (allowing it to clear).</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Compute an X position for the symbol.
;
</div><span class="l"><a class="anc" name="99a7" href="#99a7">[99a7]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#TextBox_X">TextBox_X</a></span></span><span class="ce">; Load the textbox X coordinate.</span></span>
<span class="l"><a class="anc" name="99aa" href="#99aa">[99aa]</a><span class="cd"><span class="i">ASL</span> <span class="o">A</span></span><span class="ce">; Convert to a pixel position.</span></span>
<span class="l"><a class="anc" name="99ab" href="#99ab">[99ab]</a><span class="cd"><span class="i">ASL</span> <span class="o">A</span></span></span>
<span class="l"><a class="anc" name="99ac" href="#99ac">[99ac]</a><span class="cd"><span class="i">ASL</span> <span class="o">A</span></span></span>
<span class="l"><a class="anc" name="99ad" href="#99ad">[99ad]</a><span class="cd"><span class="i">ADC</span> <span class="o">#$4c</span></span><span class="ce">; Add 76.</span></span>
<span class="l"><a class="anc" name="99af" href="#99af">[99af]</a><span class="cd"><span class="i">TAX</span></span><span class="ce">; X = result.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Compute a Y position for the symbol.
;
</div><span class="l"><a class="anc" name="99b0" href="#99b0">[99b0]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#TextBox_Y">TextBox_Y</a></span></span><span class="ce">; Load the textbox Y coordinate.</span></span>
<span class="l"><a class="anc" name="99b3" href="#99b3">[99b3]</a><span class="cd"><span class="i">ASL</span> <span class="o">A</span></span><span class="ce">; Convert to a pixel position.</span></span>
<span class="l"><a class="anc" name="99b4" href="#99b4">[99b4]</a><span class="cd"><span class="i">ASL</span> <span class="o">A</span></span></span>
<span class="l"><a class="anc" name="99b5" href="#99b5">[99b5]</a><span class="cd"><span class="i">ASL</span> <span class="o">A</span></span></span>
<span class="l"><a class="anc" name="99b6" href="#99b6">[99b6]</a><span class="cd"><span class="i">ADC</span> <span class="o">#$10</span></span><span class="ce">; Add 16.</span></span>
<span class="l"><a class="anc" name="99b8" href="#99b8">[99b8]</a><span class="cd"><span class="i">TAY</span></span><span class="ce">; Y = result.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Draw the symbol.
;
</div><span class="l"><a class="anc" name="99b9" href="#99b9">[99b9]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$e5</span></span><span class="ce">; A = 0xE5 (animation frame offset).</span></span>
<span class="l"><a class="anc" name="99bb" href="#99bb">[99bb]</a><span class="cd"><span class="i">JMP</span> <span class="o">$fca7</span></span><span class="ce">; Draw the symbol.</span></span>
<span class="l"></span>
<span class="l"></span>
</pre><pre><a name="TextBox_DrawUpArrowTerminatorSymbol"></a><div class="cp">;============================================================================
; Draw the up arrow terminator symbol.
;
; This will draw the up arrow symbol at the bottom-right of
; the textbox. This is used for the Guru, Add Inventory Item,
; and other textboxes.
;
; The symbol will appear to flash due to the textbox being
; redrawn in-between viable interrupt-based updates.
;
; INPUTS:
;     <a href="RAM.html#InterruptCounter">InterruptCounter</a>:
;         The current interrupt counter, used to rate limit
;         updates.
;
;     <a href="RAM.html#TextBox_X">TextBox_X</a>:
;         The tile X position of the textbox.
;
;     <a href="RAM.html#TextBox_Y">TextBox_Y</a>:
;         The tile Y position of the textbox.
;
; OUTPUTS:
;     None.
;
; CALLS:
;     <a href="PRG15_MIRROR.html#UI_DrawPromptInputSymbol">UI_DrawPromptInputSymbol</a>
;
; XREFS:
;     <a href="#IScriptAction_AddInventoryItem">IScriptAction_AddInventoryItem</a>
;     <a href="#IScriptAction_ShowPassword">IScriptAction_ShowPassword</a>
;     <a href="#TextBox_CheckShouldContinue">TextBox_CheckShouldContinue</a>
;     <a href="#TextBox_CheckShouldContinueOrDismissMessage">TextBox_CheckShouldContinueOrDismissMessage</a>
;============================================================================
</div><span class="l"><a class="anc" name="99be" href="#99be">[99be]</a><a href="#TextBox_DrawUpArrowTerminatorSymbol" class="la">TextBox_DrawUpArrowTerminatorSymbol:</a><span class="ce">; [$99be]</span></span>
<span class="l"><a class="anc" name="99be" href="#99be">[99be]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="RAM.html#InterruptCounter">InterruptCounter</a></span></span><span class="ce">; Load the interrupt counter.</span></span>
<span class="l"><a class="anc" name="99c0" href="#99c0">[99c0]</a><span class="cd"><span class="i">AND</span> <span class="o">#$10</span></span><span class="ce">; Is bit 5 set?</span></span>
<span class="l"><a class="anc" name="99c2" href="#99c2">[99c2]</a><span class="cd"><span class="i">BEQ</span> <span class="o"><a href="#RETURN_99A0">RETURN_99A0</a></span></span><span class="ce">; If not, return (allowing it to clear).</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Compute an X position for the symbol.
;
</div><span class="l"><a class="anc" name="99c4" href="#99c4">[99c4]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#TextBox_X">TextBox_X</a></span></span><span class="ce">; Load the textbox X coordinate.</span></span>
<span class="l"><a class="anc" name="99c7" href="#99c7">[99c7]</a><span class="cd"><span class="i">ASL</span> <span class="o">A</span></span><span class="ce">; Convert to a pixel position.</span></span>
<span class="l"><a class="anc" name="99c8" href="#99c8">[99c8]</a><span class="cd"><span class="i">ASL</span> <span class="o">A</span></span></span>
<span class="l"><a class="anc" name="99c9" href="#99c9">[99c9]</a><span class="cd"><span class="i">ASL</span> <span class="o">A</span></span></span>
<span class="l"><a class="anc" name="99ca" href="#99ca">[99ca]</a><span class="cd"><span class="i">ADC</span> <span class="o">#$8e</span></span><span class="ce">; Add 142.</span></span>
<span class="l"><a class="anc" name="99cc" href="#99cc">[99cc]</a><span class="cd"><span class="i">TAX</span></span><span class="ce">; X = result.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Compute a Y position for the symbol.
;
</div><span class="l"><a class="anc" name="99cd" href="#99cd">[99cd]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#TextBox_Y">TextBox_Y</a></span></span><span class="ce">; Load the textbox Y coordinate.</span></span>
<span class="l"><a class="anc" name="99d0" href="#99d0">[99d0]</a><span class="cd"><span class="i">ASL</span> <span class="o">A</span></span><span class="ce">; Convert to a pixel position.</span></span>
<span class="l"><a class="anc" name="99d1" href="#99d1">[99d1]</a><span class="cd"><span class="i">ASL</span> <span class="o">A</span></span></span>
<span class="l"><a class="anc" name="99d2" href="#99d2">[99d2]</a><span class="cd"><span class="i">ASL</span> <span class="o">A</span></span></span>
<span class="l"><a class="anc" name="99d3" href="#99d3">[99d3]</a><span class="cd"><span class="i">ADC</span> <span class="o">#$0e</span></span><span class="ce">; Add 14.</span></span>
<span class="l"><a class="anc" name="99d5" href="#99d5">[99d5]</a><span class="cd"><span class="i">TAY</span></span><span class="ce">; Y = result.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Draw the symbol.
;
</div><span class="l"><a class="anc" name="99d6" href="#99d6">[99d6]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$e6</span></span><span class="ce">; A = 0xE6 (up arrow symbol).</span></span>
<span class="l"><a class="anc" name="99d8" href="#99d8">[99d8]</a><span class="cd"><span class="i">JMP</span> <span class="o">$fca7</span></span><span class="ce">; Draw the symbol.</span></span>
<span class="l"></span>
<span class="l"></span>
</pre><pre><a name="TextBox_DrawQuestionMarkTerminatorSymbol"></a><div class="cp">;============================================================================
; Draw the question mark terminator symbol.
;
; This will draw the question mark symbol at the
; bottom-right of the textbox. This is used for the Guru,
; Add Inventory Item, and other textboxes.
;
; The symbol will appear to flash due to the textbox being
; redrawn in-between viable interrupt-based updates.
;
; INPUTS:
;     <a href="RAM.html#InterruptCounter">InterruptCounter</a>:
;         The current interrupt counter, used to rate limit
;         updates.
;
;     <a href="RAM.html#TextBox_X">TextBox_X</a>:
;         The tile X position of the textbox.
;
;     <a href="RAM.html#TextBox_Y">TextBox_Y</a>:
;         The tile Y position of the textbox.
;
; OUTPUTS:
;     None.
;
; CALLS:
;     <a href="PRG15_MIRROR.html#UI_DrawPromptInputSymbol">UI_DrawPromptInputSymbol</a>
;
; XREFS:
;     <a href="#TextBox_CheckShouldContinueOrDismissQuestion">TextBox_CheckShouldContinueOrDismissQuestion</a>
;============================================================================
</div><span class="l"><a class="anc" name="99db" href="#99db">[99db]</a><a href="#TextBox_DrawQuestionMarkTerminatorSymbol" class="la">TextBox_DrawQuestionMarkTerminatorSymbol:</a><span class="ce">; [$99db]</span></span>
<span class="l"><a class="anc" name="99db" href="#99db">[99db]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="RAM.html#InterruptCounter">InterruptCounter</a></span></span><span class="ce">; Load the interrupt counter.</span></span>
<span class="l"><a class="anc" name="99dd" href="#99dd">[99dd]</a><span class="cd"><span class="i">AND</span> <span class="o">#$10</span></span><span class="ce">; Is bit 5 set?</span></span>
<span class="l"><a class="anc" name="99df" href="#99df">[99df]</a><span class="cd"><span class="i">BEQ</span> <span class="o"><a href="#RETURN_99A0">RETURN_99A0</a></span></span><span class="ce">; If not, return (allowing it to clear).</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Compute an X position for the symbol.
;
</div><span class="l"><a class="anc" name="99e1" href="#99e1">[99e1]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#TextBox_X">TextBox_X</a></span></span><span class="ce">; Load the textbox X coordinate.</span></span>
<span class="l"><a class="anc" name="99e4" href="#99e4">[99e4]</a><span class="cd"><span class="i">ASL</span> <span class="o">A</span></span><span class="ce">; Convert to a pixel position.</span></span>
<span class="l"><a class="anc" name="99e5" href="#99e5">[99e5]</a><span class="cd"><span class="i">ASL</span> <span class="o">A</span></span></span>
<span class="l"><a class="anc" name="99e6" href="#99e6">[99e6]</a><span class="cd"><span class="i">ASL</span> <span class="o">A</span></span></span>
<span class="l"><a class="anc" name="99e7" href="#99e7">[99e7]</a><span class="cd"><span class="i">ADC</span> <span class="o">#$4c</span></span><span class="ce">; Add 76.</span></span>
<span class="l"><a class="anc" name="99e9" href="#99e9">[99e9]</a><span class="cd"><span class="i">TAX</span></span><span class="ce">; X = result.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Compute a Y position for the symbol.
;
</div><span class="l"><a class="anc" name="99ea" href="#99ea">[99ea]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#TextBox_Y">TextBox_Y</a></span></span><span class="ce">; Load the textbox Y coordinate.</span></span>
<span class="l"><a class="anc" name="99ed" href="#99ed">[99ed]</a><span class="cd"><span class="i">ASL</span> <span class="o">A</span></span><span class="ce">; Convert to a pixel position.</span></span>
<span class="l"><a class="anc" name="99ee" href="#99ee">[99ee]</a><span class="cd"><span class="i">ASL</span> <span class="o">A</span></span></span>
<span class="l"><a class="anc" name="99ef" href="#99ef">[99ef]</a><span class="cd"><span class="i">ASL</span> <span class="o">A</span></span></span>
<span class="l"><a class="anc" name="99f0" href="#99f0">[99f0]</a><span class="cd"><span class="i">ADC</span> <span class="o">#$10</span></span><span class="ce">; Add 16.</span></span>
<span class="l"><a class="anc" name="99f2" href="#99f2">[99f2]</a><span class="cd"><span class="i">TAY</span></span><span class="ce">; Y = result.</span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Draw the symbol.
;
</div><span class="l"><a class="anc" name="99f3" href="#99f3">[99f3]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$e7</span></span><span class="ce">; A = 0xE7 (question mark symbol)</span></span>
<span class="l"><a class="anc" name="99f5" href="#99f5">[99f5]</a><span class="cd"><span class="i">JMP</span> <span class="o">$fca7</span></span><span class="ce">; Draw the symbol.</span></span>
<span class="l"></span>
</pre><pre><a name="Shop_Draw"></a><div class="cp">;============================================================================
; TODO: Document Shop_Draw
;
; INPUTS:
;     Y
;
; OUTPUTS:
;     TODO
;
; XREFS:
;     <a href="#IScriptAction_OpenShop">IScriptAction_OpenShop</a>
;     <a href="#IScriptAction_ShowSellMenu">IScriptAction_ShowSellMenu</a>
;============================================================================
</div><span class="l"><a class="anc" name="99f8" href="#99f8">[99f8]</a><a href="#Shop_Draw" class="la">Shop_Draw:</a><span class="ce">; [$99f8]</span></span>
<span class="l"><a class="anc" name="99f8" href="#99f8">[99f8]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$0a</span></span></span>
<span class="l"><a class="anc" name="99fa" href="#99fa">[99fa]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#TextBox_X">TextBox_X</a></span></span></span>
<span class="l"><a class="anc" name="99fd" href="#99fd">[99fd]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$08</span></span></span>
<span class="l"><a class="anc" name="99ff" href="#99ff">[99ff]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#TextBox_Y">TextBox_Y</a></span></span></span>
<span class="l"><a class="anc" name="9a02" href="#9a02">[9a02]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$14</span></span></span>
<span class="l"><a class="anc" name="9a04" href="#9a04">[9a04]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#TextBox_Width">TextBox_Width</a></span></span></span>
<span class="l"><a class="anc" name="9a07" href="#9a07">[9a07]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$14</span></span></span>
<span class="l"><a class="anc" name="9a09" href="#9a09">[9a09]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#TextBox_Height">TextBox_Height</a></span></span></span>
<span class="l"><a class="anc" name="9a0c" href="#9a0c">[9a0c]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#TextBox_Open">TextBox_Open</a></span></span></span>
<span class="l"><a class="anc" name="9a0f" href="#9a0f">[9a0f]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#TextBox_Y">TextBox_Y</a></span></span></span>
<span class="l"><a class="anc" name="9a12" href="#9a12">[9a12]</a><span class="cd"><span class="i">CLC</span></span></span>
<span class="l"><a class="anc" name="9a13" href="#9a13">[9a13]</a><span class="cd"><span class="i">ADC</span> <span class="o">#$02</span></span></span>
<span class="l"><a class="anc" name="9a15" href="#9a15">[9a15]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#TextBox_ContentsY">TextBox_ContentsY</a></span></span></span>
<span class="l"><a class="anc" name="9a17" href="#9a17">[9a17]</a><span class="cd"><span class="i">LDX</span> <span class="o">#$00</span></span></span>
<span class="l"><a class="anc" name="9a19" href="#9a19">[9a19]</a><span class="cd"><span class="i">STX</span> <span class="o">a:<a href="RAM.html#Menu_CursorPos">Menu_CursorPos</a></span></span></span>
<span class="l"></span>
<a name=":9a1c:@LAB_PRG12__9a1c"></a><span class="l"><a class="anc" name="9a1c" href="#9a1c">[9a1c]</a><a href="#:9a1c:@LAB_PRG12__9a1c" class="lla">@LAB_PRG12__9a1c:</a><span class="ce">; [$9a1c]</span></span>
<span class="l"><a class="anc" name="9a1c" href="#9a1c">[9a1c]</a><span class="cd"><span class="i">TXA</span></span></span>
<span class="l"><a class="anc" name="9a1d" href="#9a1d">[9a1d]</a><span class="cd"><span class="i">PHA</span></span></span>
<span class="l"><a class="anc" name="9a1e" href="#9a1e">[9a1e]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#TextBox_X">TextBox_X</a></span></span></span>
<span class="l"><a class="anc" name="9a21" href="#9a21">[9a21]</a><span class="cd"><span class="i">CLC</span></span></span>
<span class="l"><a class="anc" name="9a22" href="#9a22">[9a22]</a><span class="cd"><span class="i">ADC</span> <span class="o">#$02</span></span></span>
<span class="l"><a class="anc" name="9a24" href="#9a24">[9a24]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#TextBox_ContentsX">TextBox_ContentsX</a></span></span></span>
<span class="l"><a class="anc" name="9a26" href="#9a26">[9a26]</a><span class="cd"><span class="i">TXA</span></span></span>
<span class="l"><a class="anc" name="9a27" href="#9a27">[9a27]</a><span class="cd"><span class="i">PHA</span></span></span>
<span class="l"><a class="anc" name="9a28" href="#9a28">[9a28]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="RAM.html#DataArray">DataArray</a>,X</span></span></span>
<span class="l"><a class="anc" name="9a2b" href="#9a2b">[9a2b]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#TextBox_DrawItemImage">TextBox_DrawItemImage</a></span></span></span>
<span class="l"><a class="anc" name="9a2e" href="#9a2e">[9a2e]</a><span class="cd"><span class="i">PLA</span></span></span>
<span class="l"><a class="anc" name="9a2f" href="#9a2f">[9a2f]</a><span class="cd"><span class="i">TAX</span></span></span>
<span class="l"><a class="anc" name="9a30" href="#9a30">[9a30]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="RAM.html#ShopItemCostsU">ShopItemCostsU</a>,X</span></span></span>
<span class="l"><a class="anc" name="9a33" href="#9a33">[9a33]</a><span class="cd"><span class="i">PHA</span></span></span>
<span class="l"><a class="anc" name="9a34" href="#9a34">[9a34]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="RAM.html#ShopItemCostsL">ShopItemCostsL</a>,X</span></span></span>
<span class="l"><a class="anc" name="9a37" href="#9a37">[9a37]</a><span class="cd"><span class="i">PHA</span></span></span>
<span class="l"><a class="anc" name="9a38" href="#9a38">[9a38]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#TextBox_X">TextBox_X</a></span></span></span>
<span class="l"><a class="anc" name="9a3b" href="#9a3b">[9a3b]</a><span class="cd"><span class="i">CLC</span></span></span>
<span class="l"><a class="anc" name="9a3c" href="#9a3c">[9a3c]</a><span class="cd"><span class="i">ADC</span> <span class="o">#$05</span></span></span>
<span class="l"><a class="anc" name="9a3e" href="#9a3e">[9a3e]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#TextBox_ContentsX">TextBox_ContentsX</a></span></span></span>
<span class="l"><a class="anc" name="9a40" href="#9a40">[9a40]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="RAM.html#DataArray">DataArray</a>,X</span></span></span>
<span class="l"><a class="anc" name="9a43" href="#9a43">[9a43]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#TextBox_DrawItemName">TextBox_DrawItemName</a></span></span></span>
<span class="l"><a class="anc" name="9a46" href="#9a46">[9a46]</a><span class="cd"><span class="i">PLA</span></span></span>
<span class="l"><a class="anc" name="9a47" href="#9a47">[9a47]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Temp_Int24">Temp_Int24</a></span></span></span>
<span class="l"><a class="anc" name="9a49" href="#9a49">[9a49]</a><span class="cd"><span class="i">PLA</span></span></span>
<span class="l"><a class="anc" name="9a4a" href="#9a4a">[9a4a]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Temp_Int24_M">Temp_Int24_M</a></span></span></span>
<span class="l"><a class="anc" name="9a4c" href="#9a4c">[9a4c]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$00</span></span></span>
<span class="l"><a class="anc" name="9a4e" href="#9a4e">[9a4e]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Temp_Int24_U">Temp_Int24_U</a></span></span></span>
<span class="l"><a class="anc" name="9a50" href="#9a50">[9a50]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#TextBox_X">TextBox_X</a></span></span></span>
<span class="l"><a class="anc" name="9a53" href="#9a53">[9a53]</a><span class="cd"><span class="i">CLC</span></span></span>
<span class="l"><a class="anc" name="9a54" href="#9a54">[9a54]</a><span class="cd"><span class="i">ADC</span> <span class="o">#$0d</span></span></span>
<span class="l"><a class="anc" name="9a56" href="#9a56">[9a56]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#TextBox_ContentsX">TextBox_ContentsX</a></span></span></span>
<span class="l"><a class="anc" name="9a58" href="#9a58">[9a58]</a><span class="cd"><span class="i">INC</span> <span class="o"><a href="RAM.html#TextBox_ContentsY">TextBox_ContentsY</a></span></span></span>
<span class="l"><a class="anc" name="9a5a" href="#9a5a">[9a5a]</a><span class="cd"><span class="i">LDY</span> <span class="o">#$05</span></span></span>
<span class="l"><a class="anc" name="9a5c" href="#9a5c">[9a5c]</a><span class="cd"><span class="i">JSR</span> <span class="o">$fa26</span></span></span>
<span class="l"><a class="anc" name="9a5f" href="#9a5f">[9a5f]</a><span class="cd"><span class="i">INC</span> <span class="o"><a href="RAM.html#TextBox_ContentsY">TextBox_ContentsY</a></span></span></span>
<span class="l"><a class="anc" name="9a61" href="#9a61">[9a61]</a><span class="cd"><span class="i">PLA</span></span></span>
<span class="l"><a class="anc" name="9a62" href="#9a62">[9a62]</a><span class="cd"><span class="i">TAX</span></span></span>
<span class="l"><a class="anc" name="9a63" href="#9a63">[9a63]</a><span class="cd"><span class="i">INX</span></span></span>
<span class="l"><a class="anc" name="9a64" href="#9a64">[9a64]</a><span class="cd"><span class="i">CPX</span> <span class="o">a:<a href="RAM.html#Arg_StringsCount">Arg_StringsCount</a></span></span></span>
<span class="l"><a class="anc" name="9a67" href="#9a67">[9a67]</a><span class="cd"><span class="i">BNE</span> <span class="o"><a href="#@LAB_PRG12__9a1c">@LAB_PRG12__9a1c</a></span></span></span>
<span class="l"><a class="anc" name="9a69" href="#9a69">[9a69]</a><span class="cd"><span class="i">RTS</span></span></span>
<span class="l"></span>
</pre><pre><a name="Player_RemoveItem"></a><div class="cp">;============================================================================
; TODO: Document Player_RemoveItem
;
; INPUTS:
;     A
;
; OUTPUTS:
;     TODO
;
; XREFS:
;     <a href="#IScriptAction_ConsumeItem">IScriptAction_ConsumeItem</a>
;     <a href="#IScriptAction_ShowSellMenu">IScriptAction_ShowSellMenu</a>
;     <a href="#Player_Equip">Player_Equip</a>
;============================================================================
</div><span class="l"><a class="anc" name="9a6a" href="#9a6a">[9a6a]</a><a href="#Player_RemoveItem" class="la">Player_RemoveItem:</a><span class="ce">; [$9a6a]</span></span>
<span class="l"><a class="anc" name="9a6a" href="#9a6a">[9a6a]</a><span class="cd"><span class="i">LDX</span> <span class="o">#$00</span></span></span>
<span class="l"><a class="anc" name="9a6c" href="#9a6c">[9a6c]</a><span class="cd"><span class="i">CMP</span> <span class="o">#$80</span></span></span>
<span class="l"><a class="anc" name="9a6e" href="#9a6e">[9a6e]</a><span class="cd"><span class="i">BEQ</span> <span class="o"><a href="#@_isSpecialItem">@_isSpecialItem</a></span></span></span>
<span class="l"><a class="anc" name="9a70" href="#9a70">[9a70]</a><span class="cd"><span class="i">INX</span></span></span>
<span class="l"><a class="anc" name="9a71" href="#9a71">[9a71]</a><span class="cd"><span class="i">CMP</span> <span class="o">#$81</span></span></span>
<span class="l"><a class="anc" name="9a73" href="#9a73">[9a73]</a><span class="cd"><span class="i">BEQ</span> <span class="o"><a href="#@_isSpecialItem">@_isSpecialItem</a></span></span></span>
<span class="l"><a class="anc" name="9a75" href="#9a75">[9a75]</a><span class="cd"><span class="i">INX</span></span></span>
<span class="l"><a class="anc" name="9a76" href="#9a76">[9a76]</a><span class="cd"><span class="i">CMP</span> <span class="o">#$82</span></span></span>
<span class="l"><a class="anc" name="9a78" href="#9a78">[9a78]</a><span class="cd"><span class="i">BEQ</span> <span class="o"><a href="#@_isSpecialItem">@_isSpecialItem</a></span></span></span>
<span class="l"><a class="anc" name="9a7a" href="#9a7a">[9a7a]</a><span class="cd"><span class="i">INX</span></span></span>
<span class="l"><a class="anc" name="9a7b" href="#9a7b">[9a7b]</a><span class="cd"><span class="i">CMP</span> <span class="o">#$83</span></span></span>
<span class="l"><a class="anc" name="9a7d" href="#9a7d">[9a7d]</a><span class="cd"><span class="i">BEQ</span> <span class="o"><a href="#@_isSpecialItem">@_isSpecialItem</a></span></span></span>
<span class="l"><a class="anc" name="9a7f" href="#9a7f">[9a7f]</a><span class="cd"><span class="i">INX</span></span></span>
<span class="l"><a class="anc" name="9a80" href="#9a80">[9a80]</a><span class="cd"><span class="i">CMP</span> <span class="o">#$92</span></span></span>
<span class="l"><a class="anc" name="9a82" href="#9a82">[9a82]</a><span class="cd"><span class="i">BEQ</span> <span class="o"><a href="#@_isSpecialItem">@_isSpecialItem</a></span></span></span>
<span class="l"><a class="anc" name="9a84" href="#9a84">[9a84]</a><span class="cd"><span class="i">INX</span></span></span>
<span class="l"><a class="anc" name="9a85" href="#9a85">[9a85]</a><span class="cd"><span class="i">CMP</span> <span class="o">#$8a</span></span></span>
<span class="l"><a class="anc" name="9a87" href="#9a87">[9a87]</a><span class="cd"><span class="i">BEQ</span> <span class="o"><a href="#@_isSpecialItem">@_isSpecialItem</a></span></span></span>
<span class="l"><a class="anc" name="9a89" href="#9a89">[9a89]</a><span class="cd"><span class="i">INX</span></span></span>
<span class="l"><a class="anc" name="9a8a" href="#9a8a">[9a8a]</a><span class="cd"><span class="i">CMP</span> <span class="o">#$93</span></span></span>
<span class="l"><a class="anc" name="9a8c" href="#9a8c">[9a8c]</a><span class="cd"><span class="i">BEQ</span> <span class="o"><a href="#@_isSpecialItem">@_isSpecialItem</a></span></span></span>
<span class="l"><a class="anc" name="9a8e" href="#9a8e">[9a8e]</a><span class="cd"><span class="i">INX</span></span></span>
<span class="l"><a class="anc" name="9a8f" href="#9a8f">[9a8f]</a><span class="cd"><span class="i">CMP</span> <span class="o">#$94</span></span></span>
<span class="l"><a class="anc" name="9a91" href="#9a91">[9a91]</a><span class="cd"><span class="i">BEQ</span> <span class="o"><a href="#@_isSpecialItem">@_isSpecialItem</a></span></span></span>
<span class="l"><a class="anc" name="9a93" href="#9a93">[9a93]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Temp_Int24_U">Temp_Int24_U</a></span></span></span>
<span class="l"><a class="anc" name="9a95" href="#9a95">[9a95]</a><span class="cd"><span class="i">JSR</span> <span class="o">$f785</span></span></span>
<span class="l"><a class="anc" name="9a98" href="#9a98">[9a98]</a><span class="cd"><span class="i">TAX</span></span></span>
<span class="l"><a class="anc" name="9a99" href="#9a99">[9a99]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="RAM.html#NumberOfWeapons">NumberOfWeapons</a>,X</span></span></span>
<span class="l"><a class="anc" name="9a9c" href="#9a9c">[9a9c]</a><span class="cd"><span class="i">BEQ</span> <span class="o"><a href="#@_return">@_return</a></span></span></span>
<span class="l"><a class="anc" name="9a9e" href="#9a9e">[9a9e]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Maybe_Temp4">Maybe_Temp4</a></span></span></span>
<span class="l"><a class="anc" name="9aa0" href="#9aa0">[9aa0]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="#INVENTORY_CATEGORY_L">INVENTORY_CATEGORY_L</a>,X</span></span></span>
<span class="l"><a class="anc" name="9aa3" href="#9aa3">[9aa3]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Temp_Int24">Temp_Int24</a></span></span></span>
<span class="l"><a class="anc" name="9aa5" href="#9aa5">[9aa5]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="#INVENTORY_CATEGORY_U">INVENTORY_CATEGORY_U</a>,X</span></span></span>
<span class="l"><a class="anc" name="9aa8" href="#9aa8">[9aa8]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Temp_Int24_M">Temp_Int24_M</a></span></span></span>
<span class="l"><a class="anc" name="9aaa" href="#9aaa">[9aaa]</a><span class="cd"><span class="i">LDY</span> <span class="o">#$00</span></span></span>
<span class="l"><a class="anc" name="9aac" href="#9aac">[9aac]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="RAM.html#Temp_Int24_U">Temp_Int24_U</a></span></span></span>
<span class="l"><a class="anc" name="9aae" href="#9aae">[9aae]</a><span class="cd"><span class="i">AND</span> <span class="o">#$1f</span></span></span>
<span class="l"></span>
<a name=":9ab0:@_inventoryCheckLoop"></a><span class="l"><a class="anc" name="9ab0" href="#9ab0">[9ab0]</a><a href="#:9ab0:@_inventoryCheckLoop" class="lla">@_inventoryCheckLoop:</a><span class="ce">; [$9ab0]</span></span>
<span class="l"><a class="anc" name="9ab0" href="#9ab0">[9ab0]</a><span class="cd"><span class="i">CMP</span> <span class="o">(<a href="RAM.html#Temp_Int24">Temp_Int24</a>),Y</span></span></span>
<span class="l"><a class="anc" name="9ab2" href="#9ab2">[9ab2]</a><span class="cd"><span class="i">BEQ</span> <span class="o"><a href="#@_moveInventoryLoop">@_moveInventoryLoop</a></span></span></span>
<span class="l"><a class="anc" name="9ab4" href="#9ab4">[9ab4]</a><span class="cd"><span class="i">INY</span></span></span>
<span class="l"><a class="anc" name="9ab5" href="#9ab5">[9ab5]</a><span class="cd"><span class="i">CPY</span> <span class="o"><a href="RAM.html#Maybe_Temp4">Maybe_Temp4</a></span></span></span>
<span class="l"><a class="anc" name="9ab7" href="#9ab7">[9ab7]</a><span class="cd"><span class="i">BNE</span> <span class="o"><a href="#@_inventoryCheckLoop">@_inventoryCheckLoop</a></span></span></span>
<span class="l"><a class="anc" name="9ab9" href="#9ab9">[9ab9]</a><span class="cd"><span class="i">RTS</span></span></span>
<span class="l"></span>
<a name=":9aba:@_moveInventoryLoop"></a><span class="l"><a class="anc" name="9aba" href="#9aba">[9aba]</a><a href="#:9aba:@_moveInventoryLoop" class="lla">@_moveInventoryLoop:</a><span class="ce">; [$9aba]</span></span>
<span class="l"><a class="anc" name="9aba" href="#9aba">[9aba]</a><span class="cd"><span class="i">INY</span></span></span>
<span class="l"><a class="anc" name="9abb" href="#9abb">[9abb]</a><span class="cd"><span class="i">CPY</span> <span class="o"><a href="RAM.html#Maybe_Temp4">Maybe_Temp4</a></span></span></span>
<span class="l"><a class="anc" name="9abd" href="#9abd">[9abd]</a><span class="cd"><span class="i">BEQ</span> <span class="o"><a href="#@_updateCountAndReturn">@_updateCountAndReturn</a></span></span></span>
<span class="l"><a class="anc" name="9abf" href="#9abf">[9abf]</a><span class="cd"><span class="i">LDA</span> <span class="o">(<a href="RAM.html#Temp_Int24">Temp_Int24</a>),Y</span></span></span>
<span class="l"><a class="anc" name="9ac1" href="#9ac1">[9ac1]</a><span class="cd"><span class="i">DEY</span></span></span>
<span class="l"><a class="anc" name="9ac2" href="#9ac2">[9ac2]</a><span class="cd"><span class="i">STA</span> <span class="o">(<a href="RAM.html#Temp_Int24">Temp_Int24</a>),Y</span></span></span>
<span class="l"><a class="anc" name="9ac4" href="#9ac4">[9ac4]</a><span class="cd"><span class="i">INY</span></span></span>
<span class="l"><a class="anc" name="9ac5" href="#9ac5">[9ac5]</a><span class="cd"><span class="i">BNE</span> <span class="o"><a href="#@_moveInventoryLoop">@_moveInventoryLoop</a></span></span></span>
<span class="l"></span>
<a name=":9ac7:@_updateCountAndReturn"></a><span class="l"><a class="anc" name="9ac7" href="#9ac7">[9ac7]</a><a href="#:9ac7:@_updateCountAndReturn" class="lla">@_updateCountAndReturn:</a><span class="ce">; [$9ac7]</span></span>
<span class="l"><a class="anc" name="9ac7" href="#9ac7">[9ac7]</a><span class="cd"><span class="i">DEC</span> <span class="o"><a href="RAM.html#NumberOfWeapons">NumberOfWeapons</a>,X</span></span></span>
<span class="l"></span>
<a name=":9aca:@_return"></a><span class="l"><a class="anc" name="9aca" href="#9aca">[9aca]</a><a href="#:9aca:@_return" class="lla">@_return:</a><span class="ce">; [$9aca]</span></span>
<span class="l"><a class="anc" name="9aca" href="#9aca">[9aca]</a><span class="cd"><span class="i">RTS</span></span></span>
<span class="l"></span>
<a name=":9acb:@_isSpecialItem"></a><span class="l"><a class="anc" name="9acb" href="#9acb">[9acb]</a><a href="#:9acb:@_isSpecialItem" class="lla">@_isSpecialItem:</a><span class="ce">; [$9acb]</span></span>
<span class="l"><a class="anc" name="9acb" href="#9acb">[9acb]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#SpecialItems">SpecialItems</a></span></span></span>
<span class="l"><a class="anc" name="9ace" href="#9ace">[9ace]</a><span class="cd"><span class="i">AND</span> <span class="o"><a href="#SHOP_ITEM_TO_CLEAR_SPECIAL_ITEM_BITS">SHOP_ITEM_TO_CLEAR_SPECIAL_ITEM_BITS</a>,X</span></span></span>
<span class="l"><a class="anc" name="9ad1" href="#9ad1">[9ad1]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#SpecialItems">SpecialItems</a></span></span></span>
<span class="l"><a class="anc" name="9ad4" href="#9ad4">[9ad4]</a><span class="cd"><span class="i">RTS</span></span></span>
<span class="l"></span>
<a name="SHOP_ITEM_TO_CLEAR_SPECIAL_ITEM_BITS"></a><div class="c">;
; XREFS:
;     <a href="#Player_RemoveItem">Player_RemoveItem</a>
;
</div><span class="l"><a class="anc" name="9ad5" href="#9ad5">[9ad5]</a><a href="#SHOP_ITEM_TO_CLEAR_SPECIAL_ITEM_BITS" class="la">SHOP_ITEM_TO_CLEAR_SPECIAL_ITEM_BITS:</a><span class="ce">; [$9ad5]</span></span>
<span class="l"><a class="anc" name="9ad5" href="#9ad5">[9ad5]</a><span class="cd"><span class="i">db</span> <span class="o">$7f</span></span><span class="ce">; [0]: Clear Ring of Elf</span></span>
<span class="l"></span>
<a name="SHOP_ITEM_TO_CLEAR_SPECIAL_ITEM_BITS_1_"></a><div class="c">;
; XREFS:
;     <a href="#Player_RemoveItem">Player_RemoveItem</a>
;
</div><span class="l"><a class="anc" name="9ad6" href="#9ad6">[9ad6]</a><a href="#SHOP_ITEM_TO_CLEAR_SPECIAL_ITEM_BITS_1_" class="la">SHOP_ITEM_TO_CLEAR_SPECIAL_ITEM_BITS_1_:</a><span class="ce">; [$9ad6]</span></span>
<span class="l"><a class="anc" name="9ad6" href="#9ad6">[9ad6]</a><span class="cd"><span class="i">db</span> <span class="o">$bf</span></span><span class="ce">; [1]: Clear Ring of Ruby</span></span>
<span class="l"></span>
<a name="SHOP_ITEM_TO_CLEAR_SPECIAL_ITEM_BITS_2_"></a><div class="c">;
; XREFS:
;     <a href="#Player_RemoveItem">Player_RemoveItem</a>
;
</div><span class="l"><a class="anc" name="9ad7" href="#9ad7">[9ad7]</a><a href="#SHOP_ITEM_TO_CLEAR_SPECIAL_ITEM_BITS_2_" class="la">SHOP_ITEM_TO_CLEAR_SPECIAL_ITEM_BITS_2_:</a><span class="ce">; [$9ad7]</span></span>
<span class="l"><a class="anc" name="9ad7" href="#9ad7">[9ad7]</a><span class="cd"><span class="i">db</span> <span class="o">$df</span></span><span class="ce">; [2]: Clear Ring of Dworf</span></span>
<span class="l"></span>
<a name="SHOP_ITEM_TO_CLEAR_SPECIAL_ITEM_BITS_3_"></a><div class="c">;
; XREFS:
;     <a href="#Player_RemoveItem">Player_RemoveItem</a>
;
</div><span class="l"><a class="anc" name="9ad8" href="#9ad8">[9ad8]</a><a href="#SHOP_ITEM_TO_CLEAR_SPECIAL_ITEM_BITS_3_" class="la">SHOP_ITEM_TO_CLEAR_SPECIAL_ITEM_BITS_3_:</a><span class="ce">; [$9ad8]</span></span>
<span class="l"><a class="anc" name="9ad8" href="#9ad8">[9ad8]</a><span class="cd"><span class="i">db</span> <span class="o">$ef</span></span><span class="ce">; [3]: Clear Demon's Ring</span></span>
<span class="l"></span>
<a name="SHOP_ITEM_TO_CLEAR_SPECIAL_ITEM_BITS_4_"></a><div class="c">;
; XREFS:
;     <a href="#Player_RemoveItem">Player_RemoveItem</a>
;
</div><span class="l"><a class="anc" name="9ad9" href="#9ad9">[9ad9]</a><a href="#SHOP_ITEM_TO_CLEAR_SPECIAL_ITEM_BITS_4_" class="la">SHOP_ITEM_TO_CLEAR_SPECIAL_ITEM_BITS_4_:</a><span class="ce">; [$9ad9]</span></span>
<span class="l"><a class="anc" name="9ad9" href="#9ad9">[9ad9]</a><span class="cd"><span class="i">db</span> <span class="o">$f7</span></span><span class="ce">; [4]: Clear Elixir</span></span>
<span class="l"></span>
<a name="SHOP_ITEM_TO_CLEAR_SPECIAL_ITEM_BITS_5_"></a><div class="c">;
; XREFS:
;     <a href="#Player_RemoveItem">Player_RemoveItem</a>
;
</div><span class="l"><a class="anc" name="9ada" href="#9ada">[9ada]</a><a href="#SHOP_ITEM_TO_CLEAR_SPECIAL_ITEM_BITS_5_" class="la">SHOP_ITEM_TO_CLEAR_SPECIAL_ITEM_BITS_5_:</a><span class="ce">; [$9ada]</span></span>
<span class="l"><a class="anc" name="9ada" href="#9ada">[9ada]</a><span class="cd"><span class="i">db</span> <span class="o">$fb</span></span><span class="ce">; [5]: Clear Magical Rod</span></span>
<span class="l"></span>
<a name="SHOP_ITEM_TO_CLEAR_SPECIAL_ITEM_BITS_6_"></a><div class="c">;
; XREFS:
;     <a href="#Player_RemoveItem">Player_RemoveItem</a>
;
</div><span class="l"><a class="anc" name="9adb" href="#9adb">[9adb]</a><a href="#SHOP_ITEM_TO_CLEAR_SPECIAL_ITEM_BITS_6_" class="la">SHOP_ITEM_TO_CLEAR_SPECIAL_ITEM_BITS_6_:</a><span class="ce">; [$9adb]</span></span>
<span class="l"><a class="anc" name="9adb" href="#9adb">[9adb]</a><span class="cd"><span class="i">db</span> <span class="o">$fd</span></span><span class="ce">; [6]: Clear Pendant</span></span>
<span class="l"></span>
<a name="SHOP_ITEM_TO_CLEAR_SPECIAL_ITEM_BITS_7_"></a><div class="c">;
; XREFS:
;     <a href="#Player_RemoveItem">Player_RemoveItem</a>
;
</div><span class="l"><a class="anc" name="9adc" href="#9adc">[9adc]</a><a href="#SHOP_ITEM_TO_CLEAR_SPECIAL_ITEM_BITS_7_" class="la">SHOP_ITEM_TO_CLEAR_SPECIAL_ITEM_BITS_7_:</a><span class="ce">; [$9adc]</span></span>
<span class="l"><a class="anc" name="9adc" href="#9adc">[9adc]</a><span class="cd"><span class="i">db</span> <span class="o">$fe</span></span><span class="ce">; [7]: Clear Black Onyx</span></span>
<span class="l"></span>
<a name="SPECIAL_ITEM_IDS"></a><span class="l"><a class="anc" name="9add" href="#9add">[9add]</a><a href="#SPECIAL_ITEM_IDS" class="la">SPECIAL_ITEM_IDS:</a><span class="ce">; [$9add]</span></span>
<span class="l"><a class="anc" name="9add" href="#9add">[9add]</a><span class="cd"><span class="i">db</span> <span class="o">SPECIAL_RING_OF_ELF</span></span><span class="ce">; [0]:</span></span>
<span class="l"><a class="anc" name="9ade" href="#9ade">[9ade]</a><span class="cd"><span class="i">db</span> <span class="o">SPECIAL_RING_OF_RUBY</span></span><span class="ce">; [1]:</span></span>
<span class="l"><a class="anc" name="9adf" href="#9adf">[9adf]</a><span class="cd"><span class="i">db</span> <span class="o">SPECIAL_RING_OF_DWORF</span></span><span class="ce">; [2]:</span></span>
<span class="l"><a class="anc" name="9ae0" href="#9ae0">[9ae0]</a><span class="cd"><span class="i">db</span> <span class="o">SPECIAL_DEMONS_RING</span></span><span class="ce">; [3]:</span></span>
<span class="l"><a class="anc" name="9ae1" href="#9ae1">[9ae1]</a><span class="cd"><span class="i">db</span> <span class="o">SPECIAL_ELIXIR</span></span><span class="ce">; [4]:</span></span>
<span class="l"><a class="anc" name="9ae2" href="#9ae2">[9ae2]</a><span class="cd"><span class="i">db</span> <span class="o">SPECIAL_MAGICAL_ROD</span></span><span class="ce">; [5]:</span></span>
<span class="l"></span>
<a name="SPECIAL_ITEM_IDS_6_"></a><div class="c">;
; XREFS:
;     <a href="#Player_AddToInventory">Player_AddToInventory</a>
;
</div><span class="l"><a class="anc" name="9ae3" href="#9ae3">[9ae3]</a><a href="#SPECIAL_ITEM_IDS_6_" class="la">SPECIAL_ITEM_IDS_6_:</a><span class="ce">; [$9ae3]</span></span>
<span class="l"><a class="anc" name="9ae3" href="#9ae3">[9ae3]</a><span class="cd"><span class="i">db</span> <span class="o">SPECIAL_PENDANT</span></span><span class="ce">; [6]:</span></span>
<span class="l"></span>
<a name="SPECIAL_ITEM_IDS_7_"></a><div class="c">;
; XREFS:
;     <a href="#Player_AddToInventory">Player_AddToInventory</a>
;
</div><span class="l"><a class="anc" name="9ae4" href="#9ae4">[9ae4]</a><a href="#SPECIAL_ITEM_IDS_7_" class="la">SPECIAL_ITEM_IDS_7_:</a><span class="ce">; [$9ae4]</span></span>
<span class="l"><a class="anc" name="9ae4" href="#9ae4">[9ae4]</a><span class="cd"><span class="i">db</span> <span class="o">SPECIAL_BLACK_ONYX</span></span><span class="ce">; [7]:</span></span>
<span class="l"></span>
<a name="SPECIAL_ITEM_BITMASKS"></a><span class="l"><a class="anc" name="9ae5" href="#9ae5">[9ae5]</a><a href="#SPECIAL_ITEM_BITMASKS" class="la">SPECIAL_ITEM_BITMASKS:</a><span class="ce">; [$9ae5]</span></span>
<span class="l"><a class="anc" name="9ae5" href="#9ae5">[9ae5]</a><span class="cd"><span class="i">db</span> <span class="o">$80</span></span><span class="ce">; [0]:</span></span>
<span class="l"><a class="anc" name="9ae6" href="#9ae6">[9ae6]</a><span class="cd"><span class="i">db</span> <span class="o">$40</span></span><span class="ce">; [1]:</span></span>
<span class="l"><a class="anc" name="9ae7" href="#9ae7">[9ae7]</a><span class="cd"><span class="i">db</span> <span class="o">$20</span></span><span class="ce">; [2]:</span></span>
<span class="l"><a class="anc" name="9ae8" href="#9ae8">[9ae8]</a><span class="cd"><span class="i">db</span> <span class="o">$10</span></span><span class="ce">; [3]:</span></span>
<span class="l"><a class="anc" name="9ae9" href="#9ae9">[9ae9]</a><span class="cd"><span class="i">db</span> <span class="o">$08</span></span><span class="ce">; [4]:</span></span>
<span class="l"><a class="anc" name="9aea" href="#9aea">[9aea]</a><span class="cd"><span class="i">db</span> <span class="o">$04</span></span><span class="ce">; [5]:</span></span>
<span class="l"><a class="anc" name="9aeb" href="#9aeb">[9aeb]</a><span class="cd"><span class="i">db</span> <span class="o">$02</span></span><span class="ce">; [6]:</span></span>
<span class="l"></span>
<a name="BYTE_PRG12__9aec"></a><div class="c">;
; XREFS:
;     <a href="#Player_AddSpecialItem">Player_AddSpecialItem</a>
;
</div><span class="l"><a class="anc" name="9aec" href="#9aec">[9aec]</a><a href="#BYTE_PRG12__9aec" class="la">BYTE_PRG12__9aec:</a><span class="ce">; [$9aec]</span></span>
<span class="l"><a class="anc" name="9aec" href="#9aec">[9aec]</a><span class="cd"><span class="i">db</span> <span class="o">$01</span></span><span class="ce">; [$9aec] byte</span></span>
<span class="l"></span>
</pre><pre><a name="Player_AddSpecialItem"></a><div class="cp">;============================================================================
; TODO: Document Player_AddSpecialItem
;
; INPUTS:
;     X
;
; OUTPUTS:
;     TODO
;
; XREFS:
;     <a href="#Player_AddToInventory">Player_AddToInventory</a>
;============================================================================
</div><span class="l"><a class="anc" name="9aed" href="#9aed">[9aed]</a><a href="#Player_AddSpecialItem" class="la">Player_AddSpecialItem:</a><span class="ce">; [$9aed]</span></span>
<span class="l"><a class="anc" name="9aed" href="#9aed">[9aed]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#SpecialItems">SpecialItems</a></span></span></span>
<span class="l"><a class="anc" name="9af0" href="#9af0">[9af0]</a><span class="cd"><span class="i">ORA</span> <span class="o"><a href="#SPECIAL_ITEM_BITMASKS">SPECIAL_ITEM_BITMASKS</a>,X</span></span></span>
<span class="l"><a class="anc" name="9af3" href="#9af3">[9af3]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#SpecialItems">SpecialItems</a></span></span></span>
<span class="l"><a class="anc" name="9af6" href="#9af6">[9af6]</a><span class="cd"><span class="i">RTS</span></span></span>
<span class="l"></span>
</pre><pre><a name="Player_AddToInventory"></a><div class="cp">;============================================================================
; TODO: Document Player_AddToInventory
;
; INPUTS:
;     A
;
; OUTPUTS:
;     TODO
;
; XREFS:
;     <a href="#IScriptAction_AddInventoryItem">IScriptAction_AddInventoryItem</a>
;     <a href="#IScriptAction_OpenShop">IScriptAction_OpenShop</a>
;     <a href="#Player_Equip">Player_Equip</a>
;============================================================================
</div><span class="l"><a class="anc" name="9af7" href="#9af7">[9af7]</a><a href="#Player_AddToInventory" class="la">Player_AddToInventory:</a><span class="ce">; [$9af7]</span></span>
<span class="l"><a class="anc" name="9af7" href="#9af7">[9af7]</a><span class="cd"><span class="i">LDX</span> <span class="o">#$07</span></span><span class="ce">; i = 7; Loop through item bits.</span></span>
<span class="l"></span>
<a name=":9af9:@_checkSpecialItems"></a><span class="l"><a class="anc" name="9af9" href="#9af9">[9af9]</a><a href="#:9af9:@_checkSpecialItems" class="lla">@_checkSpecialItems:</a><span class="ce">; [$9af9]</span></span>
<span class="l"><a class="anc" name="9af9" href="#9af9">[9af9]</a><span class="cd"><span class="i">CMP</span> <span class="o"><a href="#SPECIAL_ITEM_IDS">SPECIAL_ITEM_IDS</a>,X</span></span><span class="ce">; Check if this is a special, non-consumable item</span></span>
<span class="l"><a class="anc" name="9afc" href="#9afc">[9afc]</a><span class="cd"><span class="i">BEQ</span> <span class="o"><a href="#Player_AddSpecialItem">Player_AddSpecialItem</a></span></span><span class="ce">; If this is a special item...</span></span>
<span class="l"><a class="anc" name="9afe" href="#9afe">[9afe]</a><span class="cd"><span class="i">DEX</span></span><span class="ce">; Next i</span></span>
<span class="l"><a class="anc" name="9aff" href="#9aff">[9aff]</a><span class="cd"><span class="i">BPL</span> <span class="o"><a href="#@_checkSpecialItems">@_checkSpecialItems</a></span></span></span>
<span class="l"><a class="anc" name="9b01" href="#9b01">[9b01]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Temp_Int24_U">Temp_Int24_U</a></span></span></span>
<span class="l"><a class="anc" name="9b03" href="#9b03">[9b03]</a><span class="cd"><span class="i">JSR</span> <span class="o">$f785</span></span><span class="ce">; Convert the item ID to a category.</span></span>
<span class="l"><a class="anc" name="9b06" href="#9b06">[9b06]</a><span class="cd"><span class="i">TAX</span></span></span>
<span class="l"><a class="anc" name="9b07" href="#9b07">[9b07]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="#INVENTORY_CATEGORY_L">INVENTORY_CATEGORY_L</a>,X</span></span></span>
<span class="l"><a class="anc" name="9b0a" href="#9b0a">[9b0a]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Temp_Int24">Temp_Int24</a></span></span></span>
<span class="l"><a class="anc" name="9b0c" href="#9b0c">[9b0c]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="#INVENTORY_CATEGORY_U">INVENTORY_CATEGORY_U</a>,X</span></span></span>
<span class="l"><a class="anc" name="9b0f" href="#9b0f">[9b0f]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Temp_Int24_M">Temp_Int24_M</a></span></span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Check if the maximum has been reached for the inventory category.
;
</div><span class="l"><a class="anc" name="9b11" href="#9b11">[9b11]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="RAM.html#NumberOfWeapons">NumberOfWeapons</a>,X</span></span><span class="ce">; Load the number of items in the inventory category</span></span>
<span class="l"><a class="anc" name="9b14" href="#9b14">[9b14]</a><span class="cd"><span class="i">CMP</span> <span class="o"><a href="#MAX_INVENTORY_SLOTS">MAX_INVENTORY_SLOTS</a>,X</span></span><span class="ce">; Check if the max has been hit</span></span>
<span class="l"><a class="anc" name="9b17" href="#9b17">[9b17]</a><span class="cd"><span class="i">BNE</span> <span class="o"><a href="#@_addItem">@_addItem</a></span></span></span>
<span class="l"><a class="anc" name="9b19" href="#9b19">[9b19]</a><span class="cd"><span class="i">DEC</span> <span class="o"><a href="RAM.html#NumberOfWeapons">NumberOfWeapons</a>,X</span></span><span class="ce">; The max has been hit. Remove one.</span></span>
<span class="l"></span>
<a name=":9b1c:@_addItem"></a><span class="l"><a class="anc" name="9b1c" href="#9b1c">[9b1c]</a><a href="#:9b1c:@_addItem" class="lla">@_addItem:</a><span class="ce">; [$9b1c]</span></span>
<span class="l"><a class="anc" name="9b1c" href="#9b1c">[9b1c]</a><span class="cd"><span class="i">LDY</span> <span class="o"><a href="RAM.html#NumberOfWeapons">NumberOfWeapons</a>,X</span></span></span>
<span class="l"><a class="anc" name="9b1f" href="#9b1f">[9b1f]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="RAM.html#Temp_Int24_U">Temp_Int24_U</a></span></span></span>
<span class="l"><a class="anc" name="9b21" href="#9b21">[9b21]</a><span class="cd"><span class="i">AND</span> <span class="o">#$1f</span></span></span>
<span class="l"><a class="anc" name="9b23" href="#9b23">[9b23]</a><span class="cd"><span class="i">STA</span> <span class="o">(<a href="RAM.html#Temp_Int24">Temp_Int24</a>),Y</span></span></span>
<span class="l"><a class="anc" name="9b25" href="#9b25">[9b25]</a><span class="cd"><span class="i">INC</span> <span class="o"><a href="RAM.html#NumberOfWeapons">NumberOfWeapons</a>,X</span></span><span class="ce">; Increase the length of the inventory</span></span>
<span class="l"><a class="anc" name="9b28" href="#9b28">[9b28]</a><span class="cd"><span class="i">RTS</span></span></span>
<span class="l"></span>
<span class="l"></span>
<a name="INVENTORY_CATEGORY_L"></a><div class="cp">;============================================================================
; Lower nibble lookup table for inventory category addresses
;
; XREFS:
;     <a href="#PlayerMenu_ShowInventoryMenu">PlayerMenu_ShowInventoryMenu</a>
;     <a href="#Player_AddToInventory">Player_AddToInventory</a>
;     <a href="#Player_LacksItem">Player_LacksItem</a>
;     <a href="#Player_RemoveItem">Player_RemoveItem</a>
;     <a href="#Shop_GetPlayerHasSelectedItem">Shop_GetPlayerHasSelectedItem</a>
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#PlayerMenu_ShowInventoryMenu">PlayerMenu_ShowInventoryMenu</a>
;     <a href="#Player_AddToInventory">Player_AddToInventory</a>
;     <a href="#Player_LacksItem">Player_LacksItem</a>
;     <a href="#Player_RemoveItem">Player_RemoveItem</a>
;     <a href="#Shop_GetPlayerHasSelectedItem">Shop_GetPlayerHasSelectedItem</a>
;
</div><span class="l"><a class="anc" name="9b29" href="#9b29">[9b29]</a><a href="#INVENTORY_CATEGORY_L" class="la">INVENTORY_CATEGORY_L:</a><span class="ce">; [$9b29]</span></span>
<span class="l"><a class="anc" name="9b29" href="#9b29">[9b29]</a><span class="cd"><span class="i">db</span> <span class="o">$9d</span></span><span class="ce">; [0]: Weapons</span></span>
<span class="l"><a class="anc" name="9b2a" href="#9b2a">[9b2a]</a><span class="cd"><span class="i">db</span> <span class="o">$a1</span></span><span class="ce">; [1]: Armor</span></span>
<span class="l"><a class="anc" name="9b2b" href="#9b2b">[9b2b]</a><span class="cd"><span class="i">db</span> <span class="o">$a5</span></span><span class="ce">; [2]: Shields</span></span>
<span class="l"><a class="anc" name="9b2c" href="#9b2c">[9b2c]</a><span class="cd"><span class="i">db</span> <span class="o">$a9</span></span><span class="ce">; [3]: Magic</span></span>
<span class="l"></span>
<a name="INVENTORY_CATEGORY_L_4_"></a><div class="c">;
; XREFS:
;     <a href="#IScriptAction_ShowSellMenu">IScriptAction_ShowSellMenu</a>
;
</div><span class="l"><a class="anc" name="9b2d" href="#9b2d">[9b2d]</a><a href="#INVENTORY_CATEGORY_L_4_" class="la">INVENTORY_CATEGORY_L_4_:</a><span class="ce">; [$9b2d]</span></span>
<span class="l"><a class="anc" name="9b2d" href="#9b2d">[9b2d]</a><span class="cd"><span class="i">db</span> <span class="o">$ad</span></span><span class="ce">; [4]: Items</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="INVENTORY_CATEGORY_U"></a><div class="cp">;============================================================================
; Upper nibble lookup table for inventory category addresses
;
; XREFS:
;     <a href="#PlayerMenu_ShowInventoryMenu">PlayerMenu_ShowInventoryMenu</a>
;     <a href="#Player_AddToInventory">Player_AddToInventory</a>
;     <a href="#Player_LacksItem">Player_LacksItem</a>
;     <a href="#Player_RemoveItem">Player_RemoveItem</a>
;     <a href="#Shop_GetPlayerHasSelectedItem">Shop_GetPlayerHasSelectedItem</a>
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#PlayerMenu_ShowInventoryMenu">PlayerMenu_ShowInventoryMenu</a>
;     <a href="#Player_AddToInventory">Player_AddToInventory</a>
;     <a href="#Player_LacksItem">Player_LacksItem</a>
;     <a href="#Player_RemoveItem">Player_RemoveItem</a>
;     <a href="#Shop_GetPlayerHasSelectedItem">Shop_GetPlayerHasSelectedItem</a>
;
</div><span class="l"><a class="anc" name="9b2e" href="#9b2e">[9b2e]</a><a href="#INVENTORY_CATEGORY_U" class="la">INVENTORY_CATEGORY_U:</a><span class="ce">; [$9b2e]</span></span>
<span class="l"><a class="anc" name="9b2e" href="#9b2e">[9b2e]</a><span class="cd"><span class="i">db</span> <span class="o">$03</span></span><span class="ce">; [0]: Weapons</span></span>
<span class="l"><a class="anc" name="9b2f" href="#9b2f">[9b2f]</a><span class="cd"><span class="i">db</span> <span class="o">$03</span></span><span class="ce">; [1]: Armor</span></span>
<span class="l"><a class="anc" name="9b30" href="#9b30">[9b30]</a><span class="cd"><span class="i">db</span> <span class="o">$03</span></span><span class="ce">; [2]: Shields</span></span>
<span class="l"><a class="anc" name="9b31" href="#9b31">[9b31]</a><span class="cd"><span class="i">db</span> <span class="o">$03</span></span><span class="ce">; [3]: Magic</span></span>
<span class="l"></span>
<a name="INVENTORY_CATEGORY_U_4_"></a><div class="c">;
; XREFS:
;     <a href="#IScriptAction_ShowSellMenu">IScriptAction_ShowSellMenu</a>
;
</div><span class="l"><a class="anc" name="9b32" href="#9b32">[9b32]</a><a href="#INVENTORY_CATEGORY_U_4_" class="la">INVENTORY_CATEGORY_U_4_:</a><span class="ce">; [$9b32]</span></span>
<span class="l"><a class="anc" name="9b32" href="#9b32">[9b32]</a><span class="cd"><span class="i">db</span> <span class="o">$03</span></span><span class="ce">; [4]: Special</span></span>
<span class="l"></span>
<a name="ITEM_NAME_CATEGORIES_L"></a><div class="c">;
; XREFS:
;     <a href="#TextBox_DrawItemName">TextBox_DrawItemName</a>
;
</div><span class="l"><a class="anc" name="9b33" href="#9b33">[9b33]</a><a href="#ITEM_NAME_CATEGORIES_L" class="la">ITEM_NAME_CATEGORIES_L:</a><span class="ce">; [$9b33]</span></span>
<span class="l"><a class="anc" name="9b33" href="#9b33">[9b33]</a><span class="cd"><span class="i">db</span> <span class="o">$3d</span></span><span class="ce">; [0]:</span></span>
<span class="l"><a class="anc" name="9b34" href="#9b34">[9b34]</a><span class="cd"><span class="i">db</span> <span class="o">$7d</span></span><span class="ce">; [1]:</span></span>
<span class="l"><a class="anc" name="9b35" href="#9b35">[9b35]</a><span class="cd"><span class="i">db</span> <span class="o">$bd</span></span><span class="ce">; [2]:</span></span>
<span class="l"><a class="anc" name="9b36" href="#9b36">[9b36]</a><span class="cd"><span class="i">db</span> <span class="o">$fd</span></span><span class="ce">; [3]:</span></span>
<span class="l"><a class="anc" name="9b37" href="#9b37">[9b37]</a><span class="cd"><span class="i">db</span> <span class="o">$4d</span></span><span class="ce">; [4]:</span></span>
<span class="l"></span>
<a name="ITEM_NAME_CATEGORIES_U"></a><div class="c">;
; XREFS:
;     <a href="#TextBox_DrawItemName">TextBox_DrawItemName</a>
;
</div><span class="l"><a class="anc" name="9b38" href="#9b38">[9b38]</a><a href="#ITEM_NAME_CATEGORIES_U" class="la">ITEM_NAME_CATEGORIES_U:</a><span class="ce">; [$9b38]</span></span>
<span class="l"><a class="anc" name="9b38" href="#9b38">[9b38]</a><span class="cd"><span class="i">db</span> <span class="o">$9b</span></span><span class="ce">; [0]:</span></span>
<span class="l"><a class="anc" name="9b39" href="#9b39">[9b39]</a><span class="cd"><span class="i">db</span> <span class="o">$9b</span></span><span class="ce">; [1]:</span></span>
<span class="l"><a class="anc" name="9b3a" href="#9b3a">[9b3a]</a><span class="cd"><span class="i">db</span> <span class="o">$9b</span></span><span class="ce">; [2]:</span></span>
<span class="l"><a class="anc" name="9b3b" href="#9b3b">[9b3b]</a><span class="cd"><span class="i">db</span> <span class="o">$9b</span></span><span class="ce">; [3]:</span></span>
<span class="l"><a class="anc" name="9b3c" href="#9b3c">[9b3c]</a><span class="cd"><span class="i">db</span> <span class="o">$9c</span></span><span class="ce">; [4]:</span></span>
<span class="l"></span>
<a name="ITEM_NAMES_WEAPONS"></a><div class="c">;
; XREFS:
;     <a href="#ITEM_NAME_CATEGORIES_L">ITEM_NAME_CATEGORIES_L</a> [$PRG12::9b33]
;     <a href="#ITEM_NAME_CATEGORIES_U">ITEM_NAME_CATEGORIES_U</a> [$PRG12::9b38]
;
</div><span class="l"><a class="anc" name="9b3d" href="#9b3d">[9b3d]</a><a href="#ITEM_NAMES_WEAPONS" class="la">ITEM_NAMES_WEAPONS:</a><span class="ce">; [$9b3d]</span></span>
<span class="l"><a class="anc" name="9b3d" href="#9b3d">[9b3d]</a><span class="cd"><span class="i">db</span> <span class="o">$0d,"HAND DAGGER    "</span></span><span class="ce">; [$9b3d] char</span></span>
<span class="l"><a class="anc" name="9b4d" href="#9b4d">[9b4d]</a><span class="cd"><span class="i">db</span> <span class="o">$0d,"LONG SWORD     "</span></span><span class="ce">; [$9b4d] char</span></span>
<span class="l"><a class="anc" name="9b5d" href="#9b5d">[9b5d]</a><span class="cd"><span class="i">db</span> <span class="o">$0d,"GIANT BLADE    "</span></span><span class="ce">; [$9b5d] char</span></span>
<span class="l"><a class="anc" name="9b6d" href="#9b6d">[9b6d]</a><span class="cd"><span class="i">db</span> <span class="o">$0d,"DRAGON SLAYER  "</span></span><span class="ce">; [$9b6d] char</span></span>
<span class="l"></span>
<a name="ITEM_NAMES_ARMOR"></a><div class="c">;
; XREFS:
;     <a href="#ITEM_NAME_CATEGORIES_L">ITEM_NAME_CATEGORIES_L</a> [$PRG12::9b34]
;     <a href="#ITEM_NAME_CATEGORIES_U">ITEM_NAME_CATEGORIES_U</a> [$PRG12::9b39]
;
</div><span class="l"><a class="anc" name="9b7d" href="#9b7d">[9b7d]</a><a href="#ITEM_NAMES_ARMOR" class="la">ITEM_NAMES_ARMOR:</a><span class="ce">; [$9b7d]</span></span>
<span class="l"><a class="anc" name="9b7d" href="#9b7d">[9b7d]</a><span class="cd"><span class="i">db</span> <span class="o">$0d,"LEATHER ARMOR  "</span></span><span class="ce">; [$9b7d] char</span></span>
<span class="l"><a class="anc" name="9b8d" href="#9b8d">[9b8d]</a><span class="cd"><span class="i">db</span> <span class="o">$0d,"STUDDED MAIL   "</span></span><span class="ce">; [$9b8d] char</span></span>
<span class="l"><a class="anc" name="9b9d" href="#9b9d">[9b9d]</a><span class="cd"><span class="i">db</span> <span class="o">$0d,"FULL PLATE     "</span></span><span class="ce">; [$9b9d] char</span></span>
<span class="l"><a class="anc" name="9bad" href="#9bad">[9bad]</a><span class="cd"><span class="i">db</span> <span class="o">$0d,"BATTLE SUIT    "</span></span><span class="ce">; [$9bad] char</span></span>
<span class="l"></span>
<a name="ITEM_NAMES_SHIELDS"></a><div class="c">;
; XREFS:
;     <a href="#ITEM_NAME_CATEGORIES_L">ITEM_NAME_CATEGORIES_L</a> [$PRG12::9b35]
;     <a href="#ITEM_NAME_CATEGORIES_U">ITEM_NAME_CATEGORIES_U</a> [$PRG12::9b3a]
;
</div><span class="l"><a class="anc" name="9bbd" href="#9bbd">[9bbd]</a><a href="#ITEM_NAMES_SHIELDS" class="la">ITEM_NAMES_SHIELDS:</a><span class="ce">; [$9bbd]</span></span>
<span class="l"><a class="anc" name="9bbd" href="#9bbd">[9bbd]</a><span class="cd"><span class="i">db</span> <span class="o">$0d,"SMALL SHIELD   "</span></span><span class="ce">; [$9bbd] char</span></span>
<span class="l"><a class="anc" name="9bcd" href="#9bcd">[9bcd]</a><span class="cd"><span class="i">db</span> <span class="o">$0d,"LARGE SHIELD   "</span></span><span class="ce">; [$9bcd] char</span></span>
<span class="l"><a class="anc" name="9bdd" href="#9bdd">[9bdd]</a><span class="cd"><span class="i">db</span> <span class="o">$0d,"MAGIC SHIELD   "</span></span><span class="ce">; [$9bdd] char</span></span>
<span class="l"><a class="anc" name="9bed" href="#9bed">[9bed]</a><span class="cd"><span class="i">db</span> <span class="o">$0d,"BATTLE HELMET  "</span></span><span class="ce">; [$9bed] char</span></span>
<span class="l"></span>
<a name="ITEM_NAMES_MAGIC"></a><div class="c">;
; XREFS:
;     <a href="#ITEM_NAME_CATEGORIES_L">ITEM_NAME_CATEGORIES_L</a> [$PRG12::9b36]
;     <a href="#ITEM_NAME_CATEGORIES_U">ITEM_NAME_CATEGORIES_U</a> [$PRG12::9b3b]
;
</div><span class="l"><a class="anc" name="9bfd" href="#9bfd">[9bfd]</a><a href="#ITEM_NAMES_MAGIC" class="la">ITEM_NAMES_MAGIC:</a><span class="ce">; [$9bfd]</span></span>
<span class="l"><a class="anc" name="9bfd" href="#9bfd">[9bfd]</a><span class="cd"><span class="i">db</span> <span class="o">$0d,"DELUGE         "</span></span><span class="ce">; [$9bfd] char</span></span>
<span class="l"><a class="anc" name="9c0d" href="#9c0d">[9c0d]</a><span class="cd"><span class="i">db</span> <span class="o">$0d,"THUNDER        "</span></span><span class="ce">; [$9c0d] char</span></span>
<span class="l"><a class="anc" name="9c1d" href="#9c1d">[9c1d]</a><span class="cd"><span class="i">db</span> <span class="o">$0d,"FIRE           "</span></span><span class="ce">; [$9c1d] char</span></span>
<span class="l"><a class="anc" name="9c2d" href="#9c2d">[9c2d]</a><span class="cd"><span class="i">db</span> <span class="o">$0d,"DEATH          "</span></span><span class="ce">; [$9c2d] char</span></span>
<span class="l"><a class="anc" name="9c3d" href="#9c3d">[9c3d]</a><span class="cd"><span class="i">db</span> <span class="o">$0d,"TILTE          "</span></span><span class="ce">; [$9c3d] char</span></span>
<span class="l"></span>
<a name="ITEM_NAMES_KEYS"></a><div class="c">;
; XREFS:
;     <a href="#ITEM_NAME_CATEGORIES_L">ITEM_NAME_CATEGORIES_L</a> [$PRG12::9b37]
;     <a href="#ITEM_NAME_CATEGORIES_U">ITEM_NAME_CATEGORIES_U</a> [$PRG12::9b3c]
;
</div><span class="l"><a class="anc" name="9c4d" href="#9c4d">[9c4d]</a><a href="#ITEM_NAMES_KEYS" class="la">ITEM_NAMES_KEYS:</a><span class="ce">; [$9c4d]</span></span>
<span class="l"><a class="anc" name="9c4d" href="#9c4d">[9c4d]</a><span class="cd"><span class="i">db</span> <span class="o">$0d,"RING OF ELF    "</span></span><span class="ce">; [$9c4d] char</span></span>
<span class="l"><a class="anc" name="9c5d" href="#9c5d">[9c5d]</a><span class="cd"><span class="i">db</span> <span class="o">$0d,"RUBY RING      "</span></span><span class="ce">; [$9c5d] char</span></span>
<span class="l"><a class="anc" name="9c6d" href="#9c6d">[9c6d]</a><span class="cd"><span class="i">db</span> <span class="o">$0d,"RING OF DWORF  "</span></span><span class="ce">; [$9c6d] char</span></span>
<span class="l"><a class="anc" name="9c7d" href="#9c7d">[9c7d]</a><span class="cd"><span class="i">db</span> <span class="o">$0d,"DEMONS RING    "</span></span><span class="ce">; [$9c7d] char</span></span>
<span class="l"><a class="anc" name="9c8d" href="#9c8d">[9c8d]</a><span class="cd"><span class="i">db</span> <span class="o">$0d,"KEY A          "</span></span><span class="ce">; [$9c8d] char</span></span>
<span class="l"><a class="anc" name="9c9d" href="#9c9d">[9c9d]</a><span class="cd"><span class="i">db</span> <span class="o">$0d,"KEY K          "</span></span><span class="ce">; [$9c9d] char</span></span>
<span class="l"><a class="anc" name="9cad" href="#9cad">[9cad]</a><span class="cd"><span class="i">db</span> <span class="o">$0d,"KEY Q          "</span></span><span class="ce">; [$9cad] char</span></span>
<span class="l"><a class="anc" name="9cbd" href="#9cbd">[9cbd]</a><span class="cd"><span class="i">db</span> <span class="o">$0d,"KEY J          "</span></span><span class="ce">; [$9cbd] char</span></span>
<span class="l"><a class="anc" name="9ccd" href="#9ccd">[9ccd]</a><span class="cd"><span class="i">db</span> <span class="o">$0d,"KEY JO         "</span></span><span class="ce">; [$9ccd] char</span></span>
<span class="l"><a class="anc" name="9cdd" href="#9cdd">[9cdd]</a><span class="cd"><span class="i">db</span> <span class="o">$0d,"MATTOCK        "</span></span><span class="ce">; [$9cdd] char</span></span>
<span class="l"><a class="anc" name="9ced" href="#9ced">[9ced]</a><span class="cd"><span class="i">db</span> <span class="o">$0d,"ROD            "</span></span><span class="ce">; [$9ced] char</span></span>
<span class="l"><a class="anc" name="9cfd" href="#9cfd">[9cfd]</a><span class="cd"><span class="i">db</span> <span class="o">$0d,"CRYSTAL        "</span></span><span class="ce">; [$9cfd] char</span></span>
<span class="l"><a class="anc" name="9d0d" href="#9d0d">[9d0d]</a><span class="cd"><span class="i">db</span> <span class="o">$0d,"LAMP           "</span></span><span class="ce">; [$9d0d] char</span></span>
<span class="l"><a class="anc" name="9d1d" href="#9d1d">[9d1d]</a><span class="cd"><span class="i">db</span> <span class="o">$0d,"HOUR GLASS     "</span></span><span class="ce">; [$9d1d] char</span></span>
<span class="l"><a class="anc" name="9d2d" href="#9d2d">[9d2d]</a><span class="cd"><span class="i">db</span> <span class="o">$0d,"BOOK           "</span></span><span class="ce">; [$9d2d] char</span></span>
<span class="l"><a class="anc" name="9d3d" href="#9d3d">[9d3d]</a><span class="cd"><span class="i">db</span> <span class="o">$0d,"WING BOOTS     "</span></span><span class="ce">; [$9d3d] char</span></span>
<span class="l"><a class="anc" name="9d4d" href="#9d4d">[9d4d]</a><span class="cd"><span class="i">db</span> <span class="o">$0d,"RED POTION     "</span></span><span class="ce">; [$9d4d] char</span></span>
<span class="l"><a class="anc" name="9d5d" href="#9d5d">[9d5d]</a><span class="cd"><span class="i">db</span> <span class="o">$0d,"BLACK POTION   "</span></span><span class="ce">; [$9d5d] char</span></span>
<span class="l"><a class="anc" name="9d6d" href="#9d6d">[9d6d]</a><span class="cd"><span class="i">db</span> <span class="o">$0d,"ELIXIR         "</span></span><span class="ce">; [$9d6d] char</span></span>
<span class="l"><a class="anc" name="9d7d" href="#9d7d">[9d7d]</a><span class="cd"><span class="i">db</span> <span class="o">$0d,"PENDANT        "</span></span><span class="ce">; [$9d7d] char</span></span>
<span class="l"><a class="anc" name="9d8d" href="#9d8d">[9d8d]</a><span class="cd"><span class="i">db</span> <span class="o">$0d,"BLACK ONIX     "</span></span><span class="ce">; [$9d8d] char</span></span>
<span class="l"><a class="anc" name="9d9d" href="#9d9d">[9d9d]</a><span class="cd"><span class="i">db</span> <span class="o">$0d,"FIRE CRYSTAL   "</span></span><span class="ce">; [$9d9d] char</span></span>
<span class="l"><a class="anc" name="9dad" href="#9dad">[9dad]</a><span class="cd"><span class="i">db</span> <span class="o">$0f</span></span><span class="ce">; [0]:</span></span>
<span class="l"><a class="anc" name="9dae" href="#9dae">[9dae]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [1]:</span></span>
<span class="l"><a class="anc" name="9daf" href="#9daf">[9daf]</a><span class="cd"><span class="i">db</span> <span class="o">$10</span></span><span class="ce">; [2]:</span></span>
<span class="l"><a class="anc" name="9db0" href="#9db0">[9db0]</a><span class="cd"><span class="i">db</span> <span class="o">$20</span></span><span class="ce">; [3]:</span></span>
<span class="l"><a class="anc" name="9db1" href="#9db1">[9db1]</a><span class="cd"><span class="i">db</span> <span class="o">$0f</span></span><span class="ce">; [4]:</span></span>
<span class="l"><a class="anc" name="9db2" href="#9db2">[9db2]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [5]:</span></span>
<span class="l"><a class="anc" name="9db3" href="#9db3">[9db3]</a><span class="cd"><span class="i">db</span> <span class="o">$10</span></span><span class="ce">; [6]:</span></span>
<span class="l"><a class="anc" name="9db4" href="#9db4">[9db4]</a><span class="cd"><span class="i">db</span> <span class="o">$20</span></span><span class="ce">; [7]:</span></span>
<span class="l"><a class="anc" name="9db5" href="#9db5">[9db5]</a><span class="cd"><span class="i">db</span> <span class="o">$0f</span></span><span class="ce">; [8]:</span></span>
<span class="l"><a class="anc" name="9db6" href="#9db6">[9db6]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [9]:</span></span>
<span class="l"><a class="anc" name="9db7" href="#9db7">[9db7]</a><span class="cd"><span class="i">db</span> <span class="o">$10</span></span><span class="ce">; [10]:</span></span>
<span class="l"><a class="anc" name="9db8" href="#9db8">[9db8]</a><span class="cd"><span class="i">db</span> <span class="o">$20</span></span><span class="ce">; [11]:</span></span>
<span class="l"><a class="anc" name="9db9" href="#9db9">[9db9]</a><span class="cd"><span class="i">db</span> <span class="o">$0f</span></span><span class="ce">; [12]:</span></span>
<span class="l"><a class="anc" name="9dba" href="#9dba">[9dba]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [13]:</span></span>
<span class="l"></span>
<a name="BYTE_ARRAY_PRG12__9dad_14_"></a><div class="c">;
; XREFS:
;     <a href="#StartScreen_Draw">StartScreen_Draw</a>
;
</div><span class="l"><a class="anc" name="9dbb" href="#9dbb">[9dbb]</a><a href="#BYTE_ARRAY_PRG12__9dad_14_" class="la">BYTE_ARRAY_PRG12__9dad_14_:</a><span class="ce">; [$9dbb]</span></span>
<span class="l"><a class="anc" name="9dbb" href="#9dbb">[9dbb]</a><span class="cd"><span class="i">db</span> <span class="o">$10</span></span><span class="ce">; [14]:</span></span>
<span class="l"></span>
<a name="BYTE_ARRAY_PRG12__9dad_15_"></a><div class="c">;
; XREFS:
;     <a href="#StartScreen_Draw">StartScreen_Draw</a>
;
</div><span class="l"><a class="anc" name="9dbc" href="#9dbc">[9dbc]</a><a href="#BYTE_ARRAY_PRG12__9dad_15_" class="la">BYTE_ARRAY_PRG12__9dad_15_:</a><span class="ce">; [$9dbc]</span></span>
<span class="l"><a class="anc" name="9dbc" href="#9dbc">[9dbc]</a><span class="cd"><span class="i">db</span> <span class="o">$20</span></span><span class="ce">; [15]:</span></span>
<span class="l"></span>
<a name="TEXT_TILES_START"></a><span class="l"><a class="anc" name="9dbd" href="#9dbd">[9dbd]</a><a href="#TEXT_TILES_START" class="la">TEXT_TILES_START:</a><span class="ce">; [$9dbd]</span></span>
<span class="l"><a class="anc" name="9dbd" href="#9dbd">[9dbd]</a><span class="cd"><span class="i">db</span> <span class="o">$f2</span></span><span class="ce">; [0]: S</span></span>
<span class="l"><a class="anc" name="9dbe" href="#9dbe">[9dbe]</a><span class="cd"><span class="i">db</span> <span class="o">$f3</span></span><span class="ce">; [1]: T</span></span>
<span class="l"><a class="anc" name="9dbf" href="#9dbf">[9dbf]</a><span class="cd"><span class="i">db</span> <span class="o">$e0</span></span><span class="ce">; [2]: A</span></span>
<span class="l"><a class="anc" name="9dc0" href="#9dc0">[9dc0]</a><span class="cd"><span class="i">db</span> <span class="o">$f1</span></span><span class="ce">; [3]: R</span></span>
<span class="l"><a class="anc" name="9dc1" href="#9dc1">[9dc1]</a><span class="cd"><span class="i">db</span> <span class="o">$f3</span></span><span class="ce">; [4]: T</span></span>
<span class="l"><a class="anc" name="9dc2" href="#9dc2">[9dc2]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [5]: \0</span></span>
<span class="l"></span>
<a name="TEXT_TILES_CONTINUE"></a><span class="l"><a class="anc" name="9dc3" href="#9dc3">[9dc3]</a><a href="#TEXT_TILES_CONTINUE" class="la">TEXT_TILES_CONTINUE:</a><span class="ce">; [$9dc3]</span></span>
<span class="l"><a class="anc" name="9dc3" href="#9dc3">[9dc3]</a><span class="cd"><span class="i">db</span> <span class="o">$e2</span></span><span class="ce">; [0]: C</span></span>
<span class="l"><a class="anc" name="9dc4" href="#9dc4">[9dc4]</a><span class="cd"><span class="i">db</span> <span class="o">$ee</span></span><span class="ce">; [1]: O</span></span>
<span class="l"><a class="anc" name="9dc5" href="#9dc5">[9dc5]</a><span class="cd"><span class="i">db</span> <span class="o">$ed</span></span><span class="ce">; [2]: N</span></span>
<span class="l"><a class="anc" name="9dc6" href="#9dc6">[9dc6]</a><span class="cd"><span class="i">db</span> <span class="o">$f3</span></span><span class="ce">; [3]: T</span></span>
<span class="l"><a class="anc" name="9dc7" href="#9dc7">[9dc7]</a><span class="cd"><span class="i">db</span> <span class="o">$e8</span></span><span class="ce">; [4]: I</span></span>
<span class="l"><a class="anc" name="9dc8" href="#9dc8">[9dc8]</a><span class="cd"><span class="i">db</span> <span class="o">$ed</span></span><span class="ce">; [5]: N</span></span>
<span class="l"><a class="anc" name="9dc9" href="#9dc9">[9dc9]</a><span class="cd"><span class="i">db</span> <span class="o">$f4</span></span><span class="ce">; [6]: U</span></span>
<span class="l"><a class="anc" name="9dca" href="#9dca">[9dca]</a><span class="cd"><span class="i">db</span> <span class="o">$e4</span></span><span class="ce">; [7]: E</span></span>
<span class="l"><a class="anc" name="9dcb" href="#9dcb">[9dcb]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [8]: \0</span></span>
<span class="l"></span>
<a name="TEXT_TILES_COPYRIGHT_1998_HUDSON_SOFT"></a><span class="l"><a class="anc" name="9dcc" href="#9dcc">[9dcc]</a><a href="#TEXT_TILES_COPYRIGHT_1998_HUDSON_SOFT" class="la">TEXT_TILES_COPYRIGHT_1998_HUDSON_SOFT:</a><span class="ce">; [$9dcc]</span></span>
<span class="l"><a class="anc" name="9dcc" href="#9dcc">[9dcc]</a><span class="cd"><span class="i">db</span> <span class="o">$fa</span></span><span class="ce">; [0]: (C)</span></span>
<span class="l"><a class="anc" name="9dcd" href="#9dcd">[9dcd]</a><span class="cd"><span class="i">db</span> <span class="o">$20</span></span><span class="ce">; [1]:</span></span>
<span class="l"><a class="anc" name="9dce" href="#9dce">[9dce]</a><span class="cd"><span class="i">db</span> <span class="o">$d7</span></span><span class="ce">; [2]: 1</span></span>
<span class="l"><a class="anc" name="9dcf" href="#9dcf">[9dcf]</a><span class="cd"><span class="i">db</span> <span class="o">$df</span></span><span class="ce">; [3]: 9</span></span>
<span class="l"><a class="anc" name="9dd0" href="#9dd0">[9dd0]</a><span class="cd"><span class="i">db</span> <span class="o">$de</span></span><span class="ce">; [4]: 9</span></span>
<span class="l"><a class="anc" name="9dd1" href="#9dd1">[9dd1]</a><span class="cd"><span class="i">db</span> <span class="o">$de</span></span><span class="ce">; [5]: 8</span></span>
<span class="l"><a class="anc" name="9dd2" href="#9dd2">[9dd2]</a><span class="cd"><span class="i">db</span> <span class="o">$20</span></span><span class="ce">; [6]:</span></span>
<span class="l"><a class="anc" name="9dd3" href="#9dd3">[9dd3]</a><span class="cd"><span class="i">db</span> <span class="o">$e7</span></span><span class="ce">; [7]: H</span></span>
<span class="l"><a class="anc" name="9dd4" href="#9dd4">[9dd4]</a><span class="cd"><span class="i">db</span> <span class="o">$f4</span></span><span class="ce">; [8]: U</span></span>
<span class="l"><a class="anc" name="9dd5" href="#9dd5">[9dd5]</a><span class="cd"><span class="i">db</span> <span class="o">$e3</span></span><span class="ce">; [9]: D</span></span>
<span class="l"><a class="anc" name="9dd6" href="#9dd6">[9dd6]</a><span class="cd"><span class="i">db</span> <span class="o">$f2</span></span><span class="ce">; [10]: S</span></span>
<span class="l"><a class="anc" name="9dd7" href="#9dd7">[9dd7]</a><span class="cd"><span class="i">db</span> <span class="o">$ee</span></span><span class="ce">; [11]: O</span></span>
<span class="l"><a class="anc" name="9dd8" href="#9dd8">[9dd8]</a><span class="cd"><span class="i">db</span> <span class="o">$ed</span></span><span class="ce">; [12]: N</span></span>
<span class="l"><a class="anc" name="9dd9" href="#9dd9">[9dd9]</a><span class="cd"><span class="i">db</span> <span class="o">$20</span></span><span class="ce">; [13]:</span></span>
<span class="l"><a class="anc" name="9dda" href="#9dda">[9dda]</a><span class="cd"><span class="i">db</span> <span class="o">$f2</span></span><span class="ce">; [14]: S</span></span>
<span class="l"><a class="anc" name="9ddb" href="#9ddb">[9ddb]</a><span class="cd"><span class="i">db</span> <span class="o">$ee</span></span><span class="ce">; [15]: O</span></span>
<span class="l"><a class="anc" name="9ddc" href="#9ddc">[9ddc]</a><span class="cd"><span class="i">db</span> <span class="o">$e5</span></span><span class="ce">; [16]: F</span></span>
<span class="l"><a class="anc" name="9ddd" href="#9ddd">[9ddd]</a><span class="cd"><span class="i">db</span> <span class="o">$f3</span></span><span class="ce">; [17]: T</span></span>
<span class="l"><a class="anc" name="9dde" href="#9dde">[9dde]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [18]: \0</span></span>
<span class="l"></span>
<a name="TEXT_TILES_UNDER_LICENSE_FROM_FALCOM"></a><span class="l"><a class="anc" name="9ddf" href="#9ddf">[9ddf]</a><a href="#TEXT_TILES_UNDER_LICENSE_FROM_FALCOM" class="la">TEXT_TILES_UNDER_LICENSE_FROM_FALCOM:</a><span class="ce">; [$9ddf]</span></span>
<span class="l"><a class="anc" name="9ddf" href="#9ddf">[9ddf]</a><span class="cd"><span class="i">db</span> <span class="o">$f4</span></span><span class="ce">; [0]: U</span></span>
<span class="l"><a class="anc" name="9de0" href="#9de0">[9de0]</a><span class="cd"><span class="i">db</span> <span class="o">$ed</span></span><span class="ce">; [1]: N</span></span>
<span class="l"><a class="anc" name="9de1" href="#9de1">[9de1]</a><span class="cd"><span class="i">db</span> <span class="o">$e3</span></span><span class="ce">; [2]: D</span></span>
<span class="l"><a class="anc" name="9de2" href="#9de2">[9de2]</a><span class="cd"><span class="i">db</span> <span class="o">$e4</span></span><span class="ce">; [3]: E</span></span>
<span class="l"><a class="anc" name="9de3" href="#9de3">[9de3]</a><span class="cd"><span class="i">db</span> <span class="o">$f1</span></span><span class="ce">; [4]: R</span></span>
<span class="l"><a class="anc" name="9de4" href="#9de4">[9de4]</a><span class="cd"><span class="i">db</span> <span class="o">$20</span></span><span class="ce">; [5]:</span></span>
<span class="l"><a class="anc" name="9de5" href="#9de5">[9de5]</a><span class="cd"><span class="i">db</span> <span class="o">$eb</span></span><span class="ce">; [6]: L</span></span>
<span class="l"><a class="anc" name="9de6" href="#9de6">[9de6]</a><span class="cd"><span class="i">db</span> <span class="o">$e8</span></span><span class="ce">; [7]: I</span></span>
<span class="l"><a class="anc" name="9de7" href="#9de7">[9de7]</a><span class="cd"><span class="i">db</span> <span class="o">$e2</span></span><span class="ce">; [8]: C</span></span>
<span class="l"><a class="anc" name="9de8" href="#9de8">[9de8]</a><span class="cd"><span class="i">db</span> <span class="o">$e4</span></span><span class="ce">; [9]: E</span></span>
<span class="l"><a class="anc" name="9de9" href="#9de9">[9de9]</a><span class="cd"><span class="i">db</span> <span class="o">$ed</span></span><span class="ce">; [10]: N</span></span>
<span class="l"><a class="anc" name="9dea" href="#9dea">[9dea]</a><span class="cd"><span class="i">db</span> <span class="o">$f2</span></span><span class="ce">; [11]: S</span></span>
<span class="l"><a class="anc" name="9deb" href="#9deb">[9deb]</a><span class="cd"><span class="i">db</span> <span class="o">$e4</span></span><span class="ce">; [12]: E</span></span>
<span class="l"><a class="anc" name="9dec" href="#9dec">[9dec]</a><span class="cd"><span class="i">db</span> <span class="o">$20</span></span><span class="ce">; [13]:</span></span>
<span class="l"><a class="anc" name="9ded" href="#9ded">[9ded]</a><span class="cd"><span class="i">db</span> <span class="o">$e5</span></span><span class="ce">; [14]: F</span></span>
<span class="l"><a class="anc" name="9dee" href="#9dee">[9dee]</a><span class="cd"><span class="i">db</span> <span class="o">$f1</span></span><span class="ce">; [15]: R</span></span>
<span class="l"><a class="anc" name="9def" href="#9def">[9def]</a><span class="cd"><span class="i">db</span> <span class="o">$ee</span></span><span class="ce">; [16]: O</span></span>
<span class="l"><a class="anc" name="9df0" href="#9df0">[9df0]</a><span class="cd"><span class="i">db</span> <span class="o">$ec</span></span><span class="ce">; [17]: M</span></span>
<span class="l"><a class="anc" name="9df1" href="#9df1">[9df1]</a><span class="cd"><span class="i">db</span> <span class="o">$20</span></span><span class="ce">; [18]:</span></span>
<span class="l"><a class="anc" name="9df2" href="#9df2">[9df2]</a><span class="cd"><span class="i">db</span> <span class="o">$e5</span></span><span class="ce">; [19]: F</span></span>
<span class="l"><a class="anc" name="9df3" href="#9df3">[9df3]</a><span class="cd"><span class="i">db</span> <span class="o">$e0</span></span><span class="ce">; [20]: A</span></span>
<span class="l"><a class="anc" name="9df4" href="#9df4">[9df4]</a><span class="cd"><span class="i">db</span> <span class="o">$eb</span></span><span class="ce">; [21]: L</span></span>
<span class="l"><a class="anc" name="9df5" href="#9df5">[9df5]</a><span class="cd"><span class="i">db</span> <span class="o">$e2</span></span><span class="ce">; [22]: C</span></span>
<span class="l"><a class="anc" name="9df6" href="#9df6">[9df6]</a><span class="cd"><span class="i">db</span> <span class="o">$ee</span></span><span class="ce">; [23]: O</span></span>
<span class="l"><a class="anc" name="9df7" href="#9df7">[9df7]</a><span class="cd"><span class="i">db</span> <span class="o">$ec</span></span><span class="ce">; [24]: M</span></span>
<span class="l"><a class="anc" name="9df8" href="#9df8">[9df8]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [25]: \0</span></span>
<span class="l"></span>
<a name="TEXT_TILES_LICENSED_TO_NINTENDO"></a><span class="l"><a class="anc" name="9df9" href="#9df9">[9df9]</a><a href="#TEXT_TILES_LICENSED_TO_NINTENDO" class="la">TEXT_TILES_LICENSED_TO_NINTENDO:</a><span class="ce">; [$9df9]</span></span>
<span class="l"><a class="anc" name="9df9" href="#9df9">[9df9]</a><span class="cd"><span class="i">db</span> <span class="o">$eb</span></span><span class="ce">; [0]: L</span></span>
<span class="l"><a class="anc" name="9dfa" href="#9dfa">[9dfa]</a><span class="cd"><span class="i">db</span> <span class="o">$e8</span></span><span class="ce">; [1]: I</span></span>
<span class="l"><a class="anc" name="9dfb" href="#9dfb">[9dfb]</a><span class="cd"><span class="i">db</span> <span class="o">$e2</span></span><span class="ce">; [2]: C</span></span>
<span class="l"><a class="anc" name="9dfc" href="#9dfc">[9dfc]</a><span class="cd"><span class="i">db</span> <span class="o">$e4</span></span><span class="ce">; [3]: E</span></span>
<span class="l"><a class="anc" name="9dfd" href="#9dfd">[9dfd]</a><span class="cd"><span class="i">db</span> <span class="o">$ed</span></span><span class="ce">; [4]: N</span></span>
<span class="l"><a class="anc" name="9dfe" href="#9dfe">[9dfe]</a><span class="cd"><span class="i">db</span> <span class="o">$f2</span></span><span class="ce">; [5]: S</span></span>
<span class="l"><a class="anc" name="9dff" href="#9dff">[9dff]</a><span class="cd"><span class="i">db</span> <span class="o">$e4</span></span><span class="ce">; [6]: E</span></span>
<span class="l"><a class="anc" name="9e00" href="#9e00">[9e00]</a><span class="cd"><span class="i">db</span> <span class="o">$e3</span></span><span class="ce">; [7]: D</span></span>
<span class="l"><a class="anc" name="9e01" href="#9e01">[9e01]</a><span class="cd"><span class="i">db</span> <span class="o">$20</span></span><span class="ce">; [8]:</span></span>
<span class="l"><a class="anc" name="9e02" href="#9e02">[9e02]</a><span class="cd"><span class="i">db</span> <span class="o">$f3</span></span><span class="ce">; [9]: T</span></span>
<span class="l"><a class="anc" name="9e03" href="#9e03">[9e03]</a><span class="cd"><span class="i">db</span> <span class="o">$ee</span></span><span class="ce">; [10]: O</span></span>
<span class="l"><a class="anc" name="9e04" href="#9e04">[9e04]</a><span class="cd"><span class="i">db</span> <span class="o">$20</span></span><span class="ce">; [11]:</span></span>
<span class="l"><a class="anc" name="9e05" href="#9e05">[9e05]</a><span class="cd"><span class="i">db</span> <span class="o">$ed</span></span><span class="ce">; [12]: N</span></span>
<span class="l"><a class="anc" name="9e06" href="#9e06">[9e06]</a><span class="cd"><span class="i">db</span> <span class="o">$e8</span></span><span class="ce">; [13]: I</span></span>
<span class="l"><a class="anc" name="9e07" href="#9e07">[9e07]</a><span class="cd"><span class="i">db</span> <span class="o">$ed</span></span><span class="ce">; [14]: N</span></span>
<span class="l"><a class="anc" name="9e08" href="#9e08">[9e08]</a><span class="cd"><span class="i">db</span> <span class="o">$f3</span></span><span class="ce">; [15]: T</span></span>
<span class="l"><a class="anc" name="9e09" href="#9e09">[9e09]</a><span class="cd"><span class="i">db</span> <span class="o">$e4</span></span><span class="ce">; [16]: E</span></span>
<span class="l"><a class="anc" name="9e0a" href="#9e0a">[9e0a]</a><span class="cd"><span class="i">db</span> <span class="o">$ed</span></span><span class="ce">; [17]: N</span></span>
<span class="l"><a class="anc" name="9e0b" href="#9e0b">[9e0b]</a><span class="cd"><span class="i">db</span> <span class="o">$e3</span></span><span class="ce">; [18]: D</span></span>
<span class="l"><a class="anc" name="9e0c" href="#9e0c">[9e0c]</a><span class="cd"><span class="i">db</span> <span class="o">$ee</span></span><span class="ce">; [19]: O</span></span>
<span class="l"><a class="anc" name="9e0d" href="#9e0d">[9e0d]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [20]: \0</span></span>
<span class="l"></span>
</pre><pre><a name="UI_DrawText"></a><div class="cp">;============================================================================
; TODO: Document UI_DrawText
;
; INPUTS:
;     None.
;
; OUTPUTS:
;     A
;
; XREFS:
;     <a href="#PasswordScreen_Show">PasswordScreen_Show</a>
;     <a href="#StartScreen_Draw">StartScreen_Draw</a>
;============================================================================
</div><span class="l"><a class="anc" name="9e0e" href="#9e0e">[9e0e]</a><a href="#UI_DrawText" class="la">UI_DrawText:</a><span class="ce">; [$9e0e]</span></span>
<span class="l"><a class="anc" name="9e0e" href="#9e0e">[9e0e]</a><span class="cd"><span class="i">LDY</span> <span class="o">#$00</span></span></span>
<span class="l"></span>
<a name=":9e10:@_loop"></a><span class="l"><a class="anc" name="9e10" href="#9e10">[9e10]</a><a href="#:9e10:@_loop" class="lla">@_loop:</a><span class="ce">; [$9e10]</span></span>
<span class="l"><a class="anc" name="9e10" href="#9e10">[9e10]</a><span class="cd"><span class="i">LDA</span> <span class="o">(<a href="RAM.html#Temp_Int24">Temp_Int24</a>),Y</span></span></span>
<span class="l"><a class="anc" name="9e12" href="#9e12">[9e12]</a><span class="cd"><span class="i">BEQ</span> <span class="o"><a href="#@_return">@_return</a></span></span></span>
<span class="l"><a class="anc" name="9e14" href="#9e14">[9e14]</a><span class="cd"><span class="i">CMP</span> <span class="o">#$20</span></span></span>
<span class="l"><a class="anc" name="9e16" href="#9e16">[9e16]</a><span class="cd"><span class="i">BNE</span> <span class="o"><a href="#@_writePPUData">@_writePPUData</a></span></span></span>
<span class="l"><a class="anc" name="9e18" href="#9e18">[9e18]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$00</span></span></span>
<span class="l"></span>
<a name=":9e1a:@_writePPUData"></a><span class="l"><a class="anc" name="9e1a" href="#9e1a">[9e1a]</a><a href="#:9e1a:@_writePPUData" class="lla">@_writePPUData:</a><span class="ce">; [$9e1a]</span></span>
<span class="l"><a class="anc" name="9e1a" href="#9e1a">[9e1a]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#PPUDATA">PPUDATA</a></span></span></span>
<span class="l"><a class="anc" name="9e1d" href="#9e1d">[9e1d]</a><span class="cd"><span class="i">INY</span></span></span>
<span class="l"><a class="anc" name="9e1e" href="#9e1e">[9e1e]</a><span class="cd"><span class="i">BNE</span> <span class="o"><a href="#@_loop">@_loop</a></span></span></span>
<span class="l"></span>
<a name=":9e20:@_return"></a><span class="l"><a class="anc" name="9e20" href="#9e20">[9e20]</a><a href="#:9e20:@_return" class="lla">@_return:</a><span class="ce">; [$9e20]</span></span>
<span class="l"><a class="anc" name="9e20" href="#9e20">[9e20]</a><span class="cd"><span class="i">RTS</span></span></span>
<span class="l"></span>
</pre><pre><a name="StartScreen_Draw"></a><div class="cp">;============================================================================
; TODO: Document StartScreen_Draw
;
; INPUTS:
;     None.
;
; OUTPUTS:
;     TODO
;============================================================================
</div><span class="l"><a class="anc" name="9e21" href="#9e21">[9e21]</a><a href="#StartScreen_Draw" class="la">StartScreen_Draw:</a><span class="ce">; [$9e21]</span></span>
<span class="l"><a class="anc" name="9e21" href="#9e21">[9e21]</a><span class="cd"><span class="i">JSR</span> <span class="o">$caf7</span></span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Write 224 Faxanadu logo tiles
;
; From: CHR ROM: Bank 10, 0x8E00: <a href="PRG10.html#CHR_FAXANADU_LOGO">CHR_FAXANADU_LOGO</a>
; To:   CHR RAM: 0x1000
;
</div><span class="l"><a class="anc" name="9e24" href="#9e24">[9e24]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$00</span></span></span>
<span class="l"><a class="anc" name="9e26" href="#9e26">[9e26]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#IScriptOrCHRAddr">IScriptOrCHRAddr</a></span></span></span>
<span class="l"><a class="anc" name="9e28" href="#9e28">[9e28]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$8e</span></span></span>
<span class="l"><a class="anc" name="9e2a" href="#9e2a">[9e2a]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#IScriptOrCHRAddr_U">IScriptOrCHRAddr_U</a></span></span></span>
<span class="l"><a class="anc" name="9e2c" href="#9e2c">[9e2c]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$00</span></span></span>
<span class="l"><a class="anc" name="9e2e" href="#9e2e">[9e2e]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#PPU_TargetAddr">PPU_TargetAddr</a></span></span></span>
<span class="l"><a class="anc" name="9e30" href="#9e30">[9e30]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$10</span></span></span>
<span class="l"><a class="anc" name="9e32" href="#9e32">[9e32]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#PPU_TargetAddr_U">PPU_TargetAddr_U</a></span></span></span>
<span class="l"><a class="anc" name="9e34" href="#9e34">[9e34]</a><span class="cd"><span class="i">LDX</span> <span class="o">#$0a</span></span></span>
<span class="l"><a class="anc" name="9e36" href="#9e36">[9e36]</a><span class="cd"><span class="i">LDY</span> <span class="o">#$e0</span></span></span>
<span class="l"><a class="anc" name="9e38" href="#9e38">[9e38]</a><span class="cd"><span class="i">JSR</span> <span class="o">$f89e</span></span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Write 27 letter tiles:
;
; From: CHR ROM: Bank 10, 0x8240: <a href="PRG10.html#CHR_LETTERS">CHR_LETTERS</a>
; To:   CHR RAM: 0x1E00
;
</div><span class="l"><a class="anc" name="9e3b" href="#9e3b">[9e3b]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$40</span></span></span>
<span class="l"><a class="anc" name="9e3d" href="#9e3d">[9e3d]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#IScriptOrCHRAddr">IScriptOrCHRAddr</a></span></span></span>
<span class="l"><a class="anc" name="9e3f" href="#9e3f">[9e3f]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$82</span></span></span>
<span class="l"><a class="anc" name="9e41" href="#9e41">[9e41]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#IScriptOrCHRAddr_U">IScriptOrCHRAddr_U</a></span></span></span>
<span class="l"><a class="anc" name="9e43" href="#9e43">[9e43]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$00</span></span></span>
<span class="l"><a class="anc" name="9e45" href="#9e45">[9e45]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#PPU_TargetAddr">PPU_TargetAddr</a></span></span></span>
<span class="l"><a class="anc" name="9e47" href="#9e47">[9e47]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$1e</span></span></span>
<span class="l"><a class="anc" name="9e49" href="#9e49">[9e49]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#PPU_TargetAddr_U">PPU_TargetAddr_U</a></span></span></span>
<span class="l"><a class="anc" name="9e4b" href="#9e4b">[9e4b]</a><span class="cd"><span class="i">LDX</span> <span class="o">#$0a</span></span></span>
<span class="l"><a class="anc" name="9e4d" href="#9e4d">[9e4d]</a><span class="cd"><span class="i">LDY</span> <span class="o">#$1b</span></span></span>
<span class="l"><a class="anc" name="9e4f" href="#9e4f">[9e4f]</a><span class="cd"><span class="i">JSR</span> <span class="o">$f89e</span></span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Write 10 number tiles:
;
; From: CHR ROM: Bank 10, 0x8440: <a href="PRG10.html#CHR_NUMBERS">CHR_NUMBERS</a>
; To:   CHR RAM: 0x1D60
;
</div><span class="l"><a class="anc" name="9e52" href="#9e52">[9e52]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$40</span></span></span>
<span class="l"><a class="anc" name="9e54" href="#9e54">[9e54]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#IScriptOrCHRAddr">IScriptOrCHRAddr</a></span></span></span>
<span class="l"><a class="anc" name="9e56" href="#9e56">[9e56]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$84</span></span></span>
<span class="l"><a class="anc" name="9e58" href="#9e58">[9e58]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#IScriptOrCHRAddr_U">IScriptOrCHRAddr_U</a></span></span></span>
<span class="l"><a class="anc" name="9e5a" href="#9e5a">[9e5a]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$60</span></span></span>
<span class="l"><a class="anc" name="9e5c" href="#9e5c">[9e5c]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#PPU_TargetAddr">PPU_TargetAddr</a></span></span></span>
<span class="l"><a class="anc" name="9e5e" href="#9e5e">[9e5e]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$1d</span></span></span>
<span class="l"><a class="anc" name="9e60" href="#9e60">[9e60]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#PPU_TargetAddr_U">PPU_TargetAddr_U</a></span></span></span>
<span class="l"><a class="anc" name="9e62" href="#9e62">[9e62]</a><span class="cd"><span class="i">LDX</span> <span class="o">#$0a</span></span></span>
<span class="l"><a class="anc" name="9e64" href="#9e64">[9e64]</a><span class="cd"><span class="i">LDY</span> <span class="o">#$0a</span></span></span>
<span class="l"><a class="anc" name="9e66" href="#9e66">[9e66]</a><span class="cd"><span class="i">JSR</span> <span class="o">$f89e</span></span></span>
<span class="l"><a class="anc" name="9e69" href="#9e69">[9e69]</a><span class="cd"><span class="i">JSR</span> <span class="o">$fcb9</span></span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Write 4 attribute values
;
; From: Bank 10, 0x9B60: PRG10:9B60
; To:   Attribute table: 0x23C0
;
</div><span class="l"><a class="anc" name="9e6c" href="#9e6c">[9e6c]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$60</span></span></span>
<span class="l"><a class="anc" name="9e6e" href="#9e6e">[9e6e]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#IScriptOrCHRAddr">IScriptOrCHRAddr</a></span></span></span>
<span class="l"><a class="anc" name="9e70" href="#9e70">[9e70]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$9b</span></span></span>
<span class="l"><a class="anc" name="9e72" href="#9e72">[9e72]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#IScriptOrCHRAddr_U">IScriptOrCHRAddr_U</a></span></span></span>
<span class="l"><a class="anc" name="9e74" href="#9e74">[9e74]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$c0</span></span></span>
<span class="l"><a class="anc" name="9e76" href="#9e76">[9e76]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#PPU_TargetAddr">PPU_TargetAddr</a></span></span></span>
<span class="l"><a class="anc" name="9e78" href="#9e78">[9e78]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$23</span></span></span>
<span class="l"><a class="anc" name="9e7a" href="#9e7a">[9e7a]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#PPU_TargetAddr_U">PPU_TargetAddr_U</a></span></span></span>
<span class="l"><a class="anc" name="9e7c" href="#9e7c">[9e7c]</a><span class="cd"><span class="i">LDX</span> <span class="o">#$0a</span></span></span>
<span class="l"><a class="anc" name="9e7e" href="#9e7e">[9e7e]</a><span class="cd"><span class="i">LDY</span> <span class="o">#$04</span></span></span>
<span class="l"><a class="anc" name="9e80" href="#9e80">[9e80]</a><span class="cd"><span class="i">JSR</span> <span class="o">$f89e</span></span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Set to top-left of bordered Faxanadu logo (0x2042) and draw
; the tiles.
;
; Copy from the CHR RAM we populated earlier, drawing from the
; bottom row to the top.
;
</div><span class="l"><a class="anc" name="9e83" href="#9e83">[9e83]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$20</span></span></span>
<span class="l"><a class="anc" name="9e85" href="#9e85">[9e85]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#PPUADDR">PPUADDR</a></span></span></span>
<span class="l"><a class="anc" name="9e88" href="#9e88">[9e88]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$42</span></span></span>
<span class="l"><a class="anc" name="9e8a" href="#9e8a">[9e8a]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#PPUADDR">PPUADDR</a></span></span></span>
<span class="l"><a class="anc" name="9e8d" href="#9e8d">[9e8d]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$00</span></span></span>
<span class="l"><a class="anc" name="9e8f" href="#9e8f">[9e8f]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Temp_Int24">Temp_Int24</a></span></span></span>
<span class="l"><a class="anc" name="9e91" href="#9e91">[9e91]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$80</span></span></span>
<span class="l"><a class="anc" name="9e93" href="#9e93">[9e93]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Temp_Int24_M">Temp_Int24_M</a></span></span></span>
<span class="l"><a class="anc" name="9e95" href="#9e95">[9e95]</a><span class="cd"><span class="i">LDY</span> <span class="o">#$00</span></span></span>
<span class="l"><a class="anc" name="9e97" href="#9e97">[9e97]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$10</span></span></span>
<span class="l"><a class="anc" name="9e99" href="#9e99">[9e99]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Temp_Int24_U">Temp_Int24_U</a></span></span></span>
<span class="l"></span>
<a name=":9e9b:@LAB_PRG12__9e9b"></a><span class="l"><a class="anc" name="9e9b" href="#9e9b">[9e9b]</a><a href="#:9e9b:@LAB_PRG12__9e9b" class="lla">@LAB_PRG12__9e9b:</a><span class="ce">; [$9e9b]</span></span>
<span class="l"><a class="anc" name="9e9b" href="#9e9b">[9e9b]</a><span class="cd"><span class="i">LDX</span> <span class="o">#$1c</span></span></span>
<span class="l"></span>
<a name=":9e9d:@LAB_PRG12__9e9d"></a><span class="l"><a class="anc" name="9e9d" href="#9e9d">[9e9d]</a><a href="#:9e9d:@LAB_PRG12__9e9d" class="lla">@LAB_PRG12__9e9d:</a><span class="ce">; [$9e9d]</span></span>
<span class="l"><a class="anc" name="9e9d" href="#9e9d">[9e9d]</a><span class="cd"><span class="i">LDA</span> <span class="o">(<a href="RAM.html#Temp_Int24">Temp_Int24</a>),Y</span></span></span>
<span class="l"><a class="anc" name="9e9f" href="#9e9f">[9e9f]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#PPUDATA">PPUDATA</a></span></span></span>
<span class="l"><a class="anc" name="9ea2" href="#9ea2">[9ea2]</a><span class="cd"><span class="i">INY</span></span></span>
<span class="l"><a class="anc" name="9ea3" href="#9ea3">[9ea3]</a><span class="cd"><span class="i">BNE</span> <span class="o"><a href="#@LAB_PRG12__9ea7">@LAB_PRG12__9ea7</a></span></span></span>
<span class="l"><a class="anc" name="9ea5" href="#9ea5">[9ea5]</a><span class="cd"><span class="i">INC</span> <span class="o"><a href="RAM.html#Temp_Int24_M">Temp_Int24_M</a></span></span></span>
<span class="l"></span>
<a name=":9ea7:@LAB_PRG12__9ea7"></a><span class="l"><a class="anc" name="9ea7" href="#9ea7">[9ea7]</a><a href="#:9ea7:@LAB_PRG12__9ea7" class="lla">@LAB_PRG12__9ea7:</a><span class="ce">; [$9ea7]</span></span>
<span class="l"><a class="anc" name="9ea7" href="#9ea7">[9ea7]</a><span class="cd"><span class="i">DEX</span></span></span>
<span class="l"><a class="anc" name="9ea8" href="#9ea8">[9ea8]</a><span class="cd"><span class="i">BNE</span> <span class="o"><a href="#@LAB_PRG12__9e9d">@LAB_PRG12__9e9d</a></span></span></span>
<span class="l"><a class="anc" name="9eaa" href="#9eaa">[9eaa]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$00</span></span></span>
<span class="l"><a class="anc" name="9eac" href="#9eac">[9eac]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#PPUDATA">PPUDATA</a></span></span></span>
<span class="l"><a class="anc" name="9eaf" href="#9eaf">[9eaf]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#PPUDATA">PPUDATA</a></span></span></span>
<span class="l"><a class="anc" name="9eb2" href="#9eb2">[9eb2]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#PPUDATA">PPUDATA</a></span></span></span>
<span class="l"><a class="anc" name="9eb5" href="#9eb5">[9eb5]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#PPUDATA">PPUDATA</a></span></span></span>
<span class="l"><a class="anc" name="9eb8" href="#9eb8">[9eb8]</a><span class="cd"><span class="i">DEC</span> <span class="o"><a href="RAM.html#Temp_Int24_U">Temp_Int24_U</a></span></span></span>
<span class="l"><a class="anc" name="9eba" href="#9eba">[9eba]</a><span class="cd"><span class="i">BNE</span> <span class="o"><a href="#@LAB_PRG12__9e9b">@LAB_PRG12__9e9b</a></span></span></span>
<span class="l"><a class="anc" name="9ebc" href="#9ebc">[9ebc]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$00</span></span></span>
<span class="l"><a class="anc" name="9ebe" href="#9ebe">[9ebe]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#DAT_0687">DAT_0687</a></span></span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Set position to the start of "START" (0x2288) and
; draw the text tiles.
;
</div><span class="l"><a class="anc" name="9ec1" href="#9ec1">[9ec1]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$22</span></span></span>
<span class="l"><a class="anc" name="9ec3" href="#9ec3">[9ec3]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#PPUADDR">PPUADDR</a></span></span></span>
<span class="l"><a class="anc" name="9ec6" href="#9ec6">[9ec6]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$88</span></span></span>
<span class="l"><a class="anc" name="9ec8" href="#9ec8">[9ec8]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#PPUADDR">PPUADDR</a></span></span></span>
<span class="l"><a class="anc" name="9ecb" href="#9ecb">[9ecb]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$bd</span></span></span>
<span class="l"><a class="anc" name="9ecd" href="#9ecd">[9ecd]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Temp_Int24">Temp_Int24</a></span></span></span>
<span class="l"><a class="anc" name="9ecf" href="#9ecf">[9ecf]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$9d</span></span></span>
<span class="l"><a class="anc" name="9ed1" href="#9ed1">[9ed1]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Temp_Int24_M">Temp_Int24_M</a></span></span></span>
<span class="l"><a class="anc" name="9ed3" href="#9ed3">[9ed3]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#UI_DrawText">UI_DrawText</a></span></span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Set position to the start of "CONTINUE" (0x2290) and
; draw the text tiles.
;
</div><span class="l"><a class="anc" name="9ed6" href="#9ed6">[9ed6]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$22</span></span></span>
<span class="l"><a class="anc" name="9ed8" href="#9ed8">[9ed8]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#PPUADDR">PPUADDR</a></span></span></span>
<span class="l"><a class="anc" name="9edb" href="#9edb">[9edb]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$90</span></span></span>
<span class="l"><a class="anc" name="9edd" href="#9edd">[9edd]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#PPUADDR">PPUADDR</a></span></span></span>
<span class="l"><a class="anc" name="9ee0" href="#9ee0">[9ee0]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$c3</span></span></span>
<span class="l"><a class="anc" name="9ee2" href="#9ee2">[9ee2]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Temp_Int24">Temp_Int24</a></span></span></span>
<span class="l"><a class="anc" name="9ee4" href="#9ee4">[9ee4]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$9d</span></span></span>
<span class="l"><a class="anc" name="9ee6" href="#9ee6">[9ee6]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Temp_Int24_M">Temp_Int24_M</a></span></span></span>
<span class="l"><a class="anc" name="9ee8" href="#9ee8">[9ee8]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#UI_DrawText">UI_DrawText</a></span></span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Set position to the start of "(C) 1988 Hudson Soft" (0x22E7)
; and draw the text tiles.
;
</div><span class="l"><a class="anc" name="9eeb" href="#9eeb">[9eeb]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$22</span></span></span>
<span class="l"><a class="anc" name="9eed" href="#9eed">[9eed]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#PPUADDR">PPUADDR</a></span></span></span>
<span class="l"><a class="anc" name="9ef0" href="#9ef0">[9ef0]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$e7</span></span></span>
<span class="l"><a class="anc" name="9ef2" href="#9ef2">[9ef2]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#PPUADDR">PPUADDR</a></span></span></span>
<span class="l"><a class="anc" name="9ef5" href="#9ef5">[9ef5]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$cc</span></span></span>
<span class="l"><a class="anc" name="9ef7" href="#9ef7">[9ef7]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Temp_Int24">Temp_Int24</a></span></span></span>
<span class="l"><a class="anc" name="9ef9" href="#9ef9">[9ef9]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$9d</span></span></span>
<span class="l"><a class="anc" name="9efb" href="#9efb">[9efb]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Temp_Int24_M">Temp_Int24_M</a></span></span></span>
<span class="l"><a class="anc" name="9efd" href="#9efd">[9efd]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#UI_DrawText">UI_DrawText</a></span></span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Set position to the start of "Under license from Falcom" (0x2423)
; and draw the text tiles.
;
</div><span class="l"><a class="anc" name="9f00" href="#9f00">[9f00]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$23</span></span></span>
<span class="l"><a class="anc" name="9f02" href="#9f02">[9f02]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#PPUADDR">PPUADDR</a></span></span></span>
<span class="l"><a class="anc" name="9f05" href="#9f05">[9f05]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$24</span></span></span>
<span class="l"><a class="anc" name="9f07" href="#9f07">[9f07]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#PPUADDR">PPUADDR</a></span></span></span>
<span class="l"><a class="anc" name="9f0a" href="#9f0a">[9f0a]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$df</span></span></span>
<span class="l"><a class="anc" name="9f0c" href="#9f0c">[9f0c]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Temp_Int24">Temp_Int24</a></span></span></span>
<span class="l"><a class="anc" name="9f0e" href="#9f0e">[9f0e]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$9d</span></span></span>
<span class="l"><a class="anc" name="9f10" href="#9f10">[9f10]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Temp_Int24_M">Temp_Int24_M</a></span></span></span>
<span class="l"><a class="anc" name="9f12" href="#9f12">[9f12]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#UI_DrawText">UI_DrawText</a></span></span></span>
<span class="l"></span>
<span class="l"></span>
<div class="c">;
; Set position to the start of "Licensed to Nintendo" (0x2366)
; and draw the text tiles.
;
</div><span class="l"><a class="anc" name="9f15" href="#9f15">[9f15]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$23</span></span></span>
<span class="l"><a class="anc" name="9f17" href="#9f17">[9f17]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#PPUADDR">PPUADDR</a></span></span></span>
<span class="l"><a class="anc" name="9f1a" href="#9f1a">[9f1a]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$66</span></span></span>
<span class="l"><a class="anc" name="9f1c" href="#9f1c">[9f1c]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#PPUADDR">PPUADDR</a></span></span></span>
<span class="l"><a class="anc" name="9f1f" href="#9f1f">[9f1f]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$f9</span></span></span>
<span class="l"><a class="anc" name="9f21" href="#9f21">[9f21]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Temp_Int24">Temp_Int24</a></span></span></span>
<span class="l"><a class="anc" name="9f23" href="#9f23">[9f23]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$9d</span></span></span>
<span class="l"><a class="anc" name="9f25" href="#9f25">[9f25]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Temp_Int24_M">Temp_Int24_M</a></span></span></span>
<span class="l"><a class="anc" name="9f27" href="#9f27">[9f27]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#UI_DrawText">UI_DrawText</a></span></span></span>
<span class="l"><a class="anc" name="9f2a" href="#9f2a">[9f2a]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$10</span></span></span>
<span class="l"><a class="anc" name="9f2c" href="#9f2c">[9f2c]</a><span class="cd"><span class="i">JSR</span> <span class="o">$d03b</span></span></span>
<span class="l"><a class="anc" name="9f2f" href="#9f2f">[9f2f]</a><span class="cd"><span class="i">LDX</span> <span class="o">#$0f</span></span></span>
<span class="l"></span>
<a name=":9f31:@LAB_PRG12__9f31"></a><span class="l"><a class="anc" name="9f31" href="#9f31">[9f31]</a><a href="#:9f31:@LAB_PRG12__9f31" class="lla">@LAB_PRG12__9f31:</a><span class="ce">; [$9f31]</span></span>
<span class="l"><a class="anc" name="9f31" href="#9f31">[9f31]</a><span class="cd"><span class="i">LDA</span> <span class="o">$9dad,X</span></span></span>
<span class="l"><a class="anc" name="9f34" href="#9f34">[9f34]</a><span class="cd"><span class="i">STA</span> <span class="o">$02a3,X</span></span></span>
<span class="l"><a class="anc" name="9f37" href="#9f37">[9f37]</a><span class="cd"><span class="i">DEX</span></span></span>
<span class="l"><a class="anc" name="9f38" href="#9f38">[9f38]</a><span class="cd"><span class="i">BPL</span> <span class="o"><a href="#@LAB_PRG12__9f31">@LAB_PRG12__9f31</a></span></span></span>
<span class="l"><a class="anc" name="9f3a" href="#9f3a">[9f3a]</a><span class="cd"><span class="i">JSR</span> <span class="o">$d090</span></span></span>
<span class="l"><a class="anc" name="9f3d" href="#9f3d">[9f3d]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$01</span></span></span>
<span class="l"><a class="anc" name="9f3f" href="#9f3f">[9f3f]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#CurrentMusic">CurrentMusic</a></span></span></span>
<span class="l"><a class="anc" name="9f41" href="#9f41">[9f41]</a><span class="cd"><span class="i">JMP</span> <span class="o">$cb27</span></span></span>
<span class="l"></span>
</pre><pre><a name="StartScreen_CheckHandleInput"></a><div class="cp">;============================================================================
; TODO: Document StartScreen_CheckHandleInput
;
; INPUTS:
;     None.
;
; OUTPUTS:
;     TODO
;============================================================================
</div><span class="l"><a class="anc" name="9f44" href="#9f44">[9f44]</a><a href="#StartScreen_CheckHandleInput" class="la">StartScreen_CheckHandleInput:</a><span class="ce">; [$9f44]</span></span>
<span class="l"><a class="anc" name="9f44" href="#9f44">[9f44]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="RAM.html#Joy1_ChangedButtonMask">Joy1_ChangedButtonMask</a></span></span></span>
<span class="l"><a class="anc" name="9f46" href="#9f46">[9f46]</a><span class="cd"><span class="i">AND</span> <span class="o">#$20</span></span></span>
<span class="l"><a class="anc" name="9f48" href="#9f48">[9f48]</a><span class="cd"><span class="i">BEQ</span> <span class="o"><a href="#@LAB_PRG12__9f57">@LAB_PRG12__9f57</a></span></span></span>
<span class="l"><a class="anc" name="9f4a" href="#9f4a">[9f4a]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#DAT_0687">DAT_0687</a></span></span></span>
<span class="l"><a class="anc" name="9f4d" href="#9f4d">[9f4d]</a><span class="cd"><span class="i">EOR</span> <span class="o">#$01</span></span></span>
<span class="l"><a class="anc" name="9f4f" href="#9f4f">[9f4f]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#DAT_0687">DAT_0687</a></span></span></span>
<span class="l"><a class="anc" name="9f52" href="#9f52">[9f52]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$0b</span></span></span>
<span class="l"><a class="anc" name="9f54" href="#9f54">[9f54]</a><span class="cd"><span class="i">JSR</span> <span class="o">$d0e4</span></span></span>
<span class="l"></span>
<a name=":9f57:@LAB_PRG12__9f57"></a><span class="l"><a class="anc" name="9f57" href="#9f57">[9f57]</a><a href="#:9f57:@LAB_PRG12__9f57" class="lla">@LAB_PRG12__9f57:</a><span class="ce">; [$9f57]</span></span>
<span class="l"><a class="anc" name="9f57" href="#9f57">[9f57]</a><span class="cd"><span class="i">LDY</span> <span class="o">#$00</span></span></span>
<span class="l"><a class="anc" name="9f59" href="#9f59">[9f59]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#DAT_0687">DAT_0687</a></span></span></span>
<span class="l"><a class="anc" name="9f5c" href="#9f5c">[9f5c]</a><span class="cd"><span class="i">BEQ</span> <span class="o"><a href="#@_drawCurrentItemSymbol">@_drawCurrentItemSymbol</a></span></span></span>
<span class="l"><a class="anc" name="9f5e" href="#9f5e">[9f5e]</a><span class="cd"><span class="i">INY</span></span></span>
<span class="l"></span>
<span class="l"></span>
<a name=":9f5f:@_drawCurrentItemSymbol"></a><div class="c">;
; Draw the symbol used to show the current menu item selection.
;
</div><span class="l"><a class="anc" name="9f5f" href="#9f5f">[9f5f]</a><a href="#:9f5f:@_drawCurrentItemSymbol" class="lla">@_drawCurrentItemSymbol:</a><span class="ce">; [$9f5f]</span></span>
<span class="l"><a class="anc" name="9f5f" href="#9f5f">[9f5f]</a><span class="cd"><span class="i">LDX</span> <span class="o">$9f69,Y</span></span><span class="ce">; X = menu item X position.</span></span>
<span class="l"><a class="anc" name="9f62" href="#9f62">[9f62]</a><span class="cd"><span class="i">LDY</span> <span class="o">#$7e</span></span><span class="ce">; Y = 126.</span></span>
<span class="l"><a class="anc" name="9f64" href="#9f64">[9f64]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$ad</span></span><span class="ce">; A = 0xAD (right arrow symbol)</span></span>
<span class="l"><a class="anc" name="9f66" href="#9f66">[9f66]</a><span class="cd"><span class="i">JMP</span> <span class="o">$fca7</span></span><span class="ce">; Draw the symbol.</span></span>
<span class="l"></span>
<a name="BYTE_ARRAY_PRG12__9f69"></a><div class="c">;
; XREFS:
;     <a href="#StartScreen_CheckHandleInput">StartScreen_CheckHandleInput</a>
;
</div><span class="l"><a class="anc" name="9f69" href="#9f69">[9f69]</a><a href="#BYTE_ARRAY_PRG12__9f69" class="la">BYTE_ARRAY_PRG12__9f69:</a><span class="ce">; [$9f69]</span></span>
<span class="l"><a class="anc" name="9f69" href="#9f69">[9f69]</a><span class="cd"><span class="i">db</span> <span class="o">$34</span></span><span class="ce">; [0]:</span></span>
<span class="l"></span>
<a name="BYTE_ARRAY_PRG12__9f69_1_"></a><div class="c">;
; XREFS:
;     <a href="#StartScreen_CheckHandleInput">StartScreen_CheckHandleInput</a>
;
</div><span class="l"><a class="anc" name="9f6a" href="#9f6a">[9f6a]</a><a href="#BYTE_ARRAY_PRG12__9f69_1_" class="la">BYTE_ARRAY_PRG12__9f69_1_:</a><span class="ce">; [$9f6a]</span></span>
<span class="l"><a class="anc" name="9f6a" href="#9f6a">[9f6a]</a><span class="cd"><span class="i">db</span> <span class="o">$74</span></span><span class="ce">; [1]:</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_ADDRS_L"></a><div class="cp">;============================================================================
; Lower bytes of IScript addresses by entrypoint index.
;============================================================================
</div><span class="l"><a class="anc" name="9f6b" href="#9f6b">[9f6b]</a><a href="#ISCRIPT_ADDRS_L" class="la">ISCRIPT_ADDRS_L:</a><span class="ce">; [$9f6b]</span></span>
<span class="l"><a class="anc" name="9f6b" href="#9f6b">[9f6b]</a><span class="cd"><span class="i">db</span> <span class="o">$9f</span></span><span class="ce">; [0]:</span></span>
<span class="l"><a class="anc" name="9f6c" href="#9f6c">[9f6c]</a><span class="cd"><span class="i">db</span> <span class="o">$a3</span></span><span class="ce">; [1]:</span></span>
<span class="l"><a class="anc" name="9f6d" href="#9f6d">[9f6d]</a><span class="cd"><span class="i">db</span> <span class="o">$ad</span></span><span class="ce">; [2]:</span></span>
<span class="l"><a class="anc" name="9f6e" href="#9f6e">[9f6e]</a><span class="cd"><span class="i">db</span> <span class="o">$b1</span></span><span class="ce">; [3]:</span></span>
<span class="l"><a class="anc" name="9f6f" href="#9f6f">[9f6f]</a><span class="cd"><span class="i">db</span> <span class="o">$bc</span></span><span class="ce">; [4]:</span></span>
<span class="l"><a class="anc" name="9f70" href="#9f70">[9f70]</a><span class="cd"><span class="i">db</span> <span class="o">$c9</span></span><span class="ce">; [5]:</span></span>
<span class="l"><a class="anc" name="9f71" href="#9f71">[9f71]</a><span class="cd"><span class="i">db</span> <span class="o">$d3</span></span><span class="ce">; [6]:</span></span>
<span class="l"><a class="anc" name="9f72" href="#9f72">[9f72]</a><span class="cd"><span class="i">db</span> <span class="o">$dd</span></span><span class="ce">; [7]:</span></span>
<span class="l"><a class="anc" name="9f73" href="#9f73">[9f73]</a><span class="cd"><span class="i">db</span> <span class="o">$50</span></span><span class="ce">; [8]:</span></span>
<span class="l"><a class="anc" name="9f74" href="#9f74">[9f74]</a><span class="cd"><span class="i">db</span> <span class="o">$ee</span></span><span class="ce">; [9]:</span></span>
<span class="l"><a class="anc" name="9f75" href="#9f75">[9f75]</a><span class="cd"><span class="i">db</span> <span class="o">$f8</span></span><span class="ce">; [10]:</span></span>
<span class="l"><a class="anc" name="9f76" href="#9f76">[9f76]</a><span class="cd"><span class="i">db</span> <span class="o">$a1</span></span><span class="ce">; [11]:</span></span>
<span class="l"><a class="anc" name="9f77" href="#9f77">[9f77]</a><span class="cd"><span class="i">db</span> <span class="o">$fc</span></span><span class="ce">; [12]:</span></span>
<span class="l"><a class="anc" name="9f78" href="#9f78">[9f78]</a><span class="cd"><span class="i">db</span> <span class="o">$7a</span></span><span class="ce">; [13]:</span></span>
<span class="l"><a class="anc" name="9f79" href="#9f79">[9f79]</a><span class="cd"><span class="i">db</span> <span class="o">$5d</span></span><span class="ce">; [14]:</span></span>
<span class="l"><a class="anc" name="9f7a" href="#9f7a">[9f7a]</a><span class="cd"><span class="i">db</span> <span class="o">$02</span></span><span class="ce">; [15]:</span></span>
<span class="l"><a class="anc" name="9f7b" href="#9f7b">[9f7b]</a><span class="cd"><span class="i">db</span> <span class="o">$0b</span></span><span class="ce">; [16]:</span></span>
<span class="l"><a class="anc" name="9f7c" href="#9f7c">[9f7c]</a><span class="cd"><span class="i">db</span> <span class="o">$16</span></span><span class="ce">; [17]:</span></span>
<span class="l"><a class="anc" name="9f7d" href="#9f7d">[9f7d]</a><span class="cd"><span class="i">db</span> <span class="o">$21</span></span><span class="ce">; [18]:</span></span>
<span class="l"><a class="anc" name="9f7e" href="#9f7e">[9f7e]</a><span class="cd"><span class="i">db</span> <span class="o">$2c</span></span><span class="ce">; [19]:</span></span>
<span class="l"><a class="anc" name="9f7f" href="#9f7f">[9f7f]</a><span class="cd"><span class="i">db</span> <span class="o">$37</span></span><span class="ce">; [20]:</span></span>
<span class="l"><a class="anc" name="9f80" href="#9f80">[9f80]</a><span class="cd"><span class="i">db</span> <span class="o">$a2</span></span><span class="ce">; [21]:</span></span>
<span class="l"><a class="anc" name="9f81" href="#9f81">[9f81]</a><span class="cd"><span class="i">db</span> <span class="o">$3b</span></span><span class="ce">; [22]:</span></span>
<span class="l"><a class="anc" name="9f82" href="#9f82">[9f82]</a><span class="cd"><span class="i">db</span> <span class="o">$46</span></span><span class="ce">; [23]:</span></span>
<span class="l"><a class="anc" name="9f83" href="#9f83">[9f83]</a><span class="cd"><span class="i">db</span> <span class="o">$51</span></span><span class="ce">; [24]:</span></span>
<span class="l"><a class="anc" name="9f84" href="#9f84">[9f84]</a><span class="cd"><span class="i">db</span> <span class="o">$8c</span></span><span class="ce">; [25]:</span></span>
<span class="l"><a class="anc" name="9f85" href="#9f85">[9f85]</a><span class="cd"><span class="i">db</span> <span class="o">$0e</span></span><span class="ce">; [26]:</span></span>
<span class="l"><a class="anc" name="9f86" href="#9f86">[9f86]</a><span class="cd"><span class="i">db</span> <span class="o">$55</span></span><span class="ce">; [27]:</span></span>
<span class="l"><a class="anc" name="9f87" href="#9f87">[9f87]</a><span class="cd"><span class="i">db</span> <span class="o">$03</span></span><span class="ce">; [28]:</span></span>
<span class="l"><a class="anc" name="9f88" href="#9f88">[9f88]</a><span class="cd"><span class="i">db</span> <span class="o">$9e</span></span><span class="ce">; [29]:</span></span>
<span class="l"><a class="anc" name="9f89" href="#9f89">[9f89]</a><span class="cd"><span class="i">db</span> <span class="o">$9f</span></span><span class="ce">; [30]:</span></span>
<span class="l"></span>
<a name="ISCRIPT_ADDRS_L_31_"></a><div class="c">;
; XREFS:
;     <a href="#IScripts_Begin">IScripts_Begin</a>
;
</div><span class="l"><a class="anc" name="9f8a" href="#9f8a">[9f8a]</a><a href="#ISCRIPT_ADDRS_L_31_" class="la">ISCRIPT_ADDRS_L_31_:</a><span class="ce">; [$9f8a]</span></span>
<span class="l"><a class="anc" name="9f8a" href="#9f8a">[9f8a]</a><span class="cd"><span class="i">db</span> <span class="o">$9b</span></span><span class="ce">; [31]:</span></span>
<span class="l"><a class="anc" name="9f8b" href="#9f8b">[9f8b]</a><span class="cd"><span class="i">db</span> <span class="o">$57</span></span><span class="ce">; [32]:</span></span>
<span class="l"><a class="anc" name="9f8c" href="#9f8c">[9f8c]</a><span class="cd"><span class="i">db</span> <span class="o">$62</span></span><span class="ce">; [33]:</span></span>
<span class="l"><a class="anc" name="9f8d" href="#9f8d">[9f8d]</a><span class="cd"><span class="i">db</span> <span class="o">$6d</span></span><span class="ce">; [34]:</span></span>
<span class="l"><a class="anc" name="9f8e" href="#9f8e">[9f8e]</a><span class="cd"><span class="i">db</span> <span class="o">$78</span></span><span class="ce">; [35]:</span></span>
<span class="l"><a class="anc" name="9f8f" href="#9f8f">[9f8f]</a><span class="cd"><span class="i">db</span> <span class="o">$8a</span></span><span class="ce">; [36]:</span></span>
<span class="l"><a class="anc" name="9f90" href="#9f90">[9f90]</a><span class="cd"><span class="i">db</span> <span class="o">$9e</span></span><span class="ce">; [37]:</span></span>
<span class="l"><a class="anc" name="9f91" href="#9f91">[9f91]</a><span class="cd"><span class="i">db</span> <span class="o">$ab</span></span><span class="ce">; [38]:</span></span>
<span class="l"><a class="anc" name="9f92" href="#9f92">[9f92]</a><span class="cd"><span class="i">db</span> <span class="o">$c3</span></span><span class="ce">; [39]:</span></span>
<span class="l"><a class="anc" name="9f93" href="#9f93">[9f93]</a><span class="cd"><span class="i">db</span> <span class="o">$b0</span></span><span class="ce">; [40]:</span></span>
<span class="l"><a class="anc" name="9f94" href="#9f94">[9f94]</a><span class="cd"><span class="i">db</span> <span class="o">$0c</span></span><span class="ce">; [41]:</span></span>
<span class="l"><a class="anc" name="9f95" href="#9f95">[9f95]</a><span class="cd"><span class="i">db</span> <span class="o">$b1</span></span><span class="ce">; [42]:</span></span>
<span class="l"><a class="anc" name="9f96" href="#9f96">[9f96]</a><span class="cd"><span class="i">db</span> <span class="o">$20</span></span><span class="ce">; [43]:</span></span>
<span class="l"><a class="anc" name="9f97" href="#9f97">[9f97]</a><span class="cd"><span class="i">db</span> <span class="o">$ae</span></span><span class="ce">; [44]:</span></span>
<span class="l"><a class="anc" name="9f98" href="#9f98">[9f98]</a><span class="cd"><span class="i">db</span> <span class="o">$9f</span></span><span class="ce">; [45]:</span></span>
<span class="l"><a class="anc" name="9f99" href="#9f99">[9f99]</a><span class="cd"><span class="i">db</span> <span class="o">$9f</span></span><span class="ce">; [46]:</span></span>
<span class="l"><a class="anc" name="9f9a" href="#9f9a">[9f9a]</a><span class="cd"><span class="i">db</span> <span class="o">$9f</span></span><span class="ce">; [47]:</span></span>
<span class="l"><a class="anc" name="9f9b" href="#9f9b">[9f9b]</a><span class="cd"><span class="i">db</span> <span class="o">$d9</span></span><span class="ce">; [48]:</span></span>
<span class="l"><a class="anc" name="9f9c" href="#9f9c">[9f9c]</a><span class="cd"><span class="i">db</span> <span class="o">$e4</span></span><span class="ce">; [49]:</span></span>
<span class="l"><a class="anc" name="9f9d" href="#9f9d">[9f9d]</a><span class="cd"><span class="i">db</span> <span class="o">$ef</span></span><span class="ce">; [50]:</span></span>
<span class="l"><a class="anc" name="9f9e" href="#9f9e">[9f9e]</a><span class="cd"><span class="i">db</span> <span class="o">$fa</span></span><span class="ce">; [51]:</span></span>
<span class="l"><a class="anc" name="9f9f" href="#9f9f">[9f9f]</a><span class="cd"><span class="i">db</span> <span class="o">$05</span></span><span class="ce">; [52]:</span></span>
<span class="l"><a class="anc" name="9fa0" href="#9fa0">[9fa0]</a><span class="cd"><span class="i">db</span> <span class="o">$10</span></span><span class="ce">; [53]:</span></span>
<span class="l"><a class="anc" name="9fa1" href="#9fa1">[9fa1]</a><span class="cd"><span class="i">db</span> <span class="o">$1b</span></span><span class="ce">; [54]:</span></span>
<span class="l"><a class="anc" name="9fa2" href="#9fa2">[9fa2]</a><span class="cd"><span class="i">db</span> <span class="o">$26</span></span><span class="ce">; [55]:</span></span>
<span class="l"><a class="anc" name="9fa3" href="#9fa3">[9fa3]</a><span class="cd"><span class="i">db</span> <span class="o">$c0</span></span><span class="ce">; [56]:</span></span>
<span class="l"><a class="anc" name="9fa4" href="#9fa4">[9fa4]</a><span class="cd"><span class="i">db</span> <span class="o">$c2</span></span><span class="ce">; [57]:</span></span>
<span class="l"><a class="anc" name="9fa5" href="#9fa5">[9fa5]</a><span class="cd"><span class="i">db</span> <span class="o">$bb</span></span><span class="ce">; [58]:</span></span>
<span class="l"><a class="anc" name="9fa6" href="#9fa6">[9fa6]</a><span class="cd"><span class="i">db</span> <span class="o">$32</span></span><span class="ce">; [59]:</span></span>
<span class="l"><a class="anc" name="9fa7" href="#9fa7">[9fa7]</a><span class="cd"><span class="i">db</span> <span class="o">$d4</span></span><span class="ce">; [60]:</span></span>
<span class="l"><a class="anc" name="9fa8" href="#9fa8">[9fa8]</a><span class="cd"><span class="i">db</span> <span class="o">$15</span></span><span class="ce">; [61]:</span></span>
<span class="l"><a class="anc" name="9fa9" href="#9fa9">[9fa9]</a><span class="cd"><span class="i">db</span> <span class="o">$9f</span></span><span class="ce">; [62]:</span></span>
<span class="l"><a class="anc" name="9faa" href="#9faa">[9faa]</a><span class="cd"><span class="i">db</span> <span class="o">$9f</span></span><span class="ce">; [63]:</span></span>
<span class="l"><a class="anc" name="9fab" href="#9fab">[9fab]</a><span class="cd"><span class="i">db</span> <span class="o">$31</span></span><span class="ce">; [64]:</span></span>
<span class="l"><a class="anc" name="9fac" href="#9fac">[9fac]</a><span class="cd"><span class="i">db</span> <span class="o">$3c</span></span><span class="ce">; [65]:</span></span>
<span class="l"><a class="anc" name="9fad" href="#9fad">[9fad]</a><span class="cd"><span class="i">db</span> <span class="o">$47</span></span><span class="ce">; [66]:</span></span>
<span class="l"><a class="anc" name="9fae" href="#9fae">[9fae]</a><span class="cd"><span class="i">db</span> <span class="o">$52</span></span><span class="ce">; [67]:</span></span>
<span class="l"><a class="anc" name="9faf" href="#9faf">[9faf]</a><span class="cd"><span class="i">db</span> <span class="o">$66</span></span><span class="ce">; [68]:</span></span>
<span class="l"><a class="anc" name="9fb0" href="#9fb0">[9fb0]</a><span class="cd"><span class="i">db</span> <span class="o">$71</span></span><span class="ce">; [69]:</span></span>
<span class="l"><a class="anc" name="9fb1" href="#9fb1">[9fb1]</a><span class="cd"><span class="i">db</span> <span class="o">$7c</span></span><span class="ce">; [70]:</span></span>
<span class="l"><a class="anc" name="9fb2" href="#9fb2">[9fb2]</a><span class="cd"><span class="i">db</span> <span class="o">$cf</span></span><span class="ce">; [71]:</span></span>
<span class="l"><a class="anc" name="9fb3" href="#9fb3">[9fb3]</a><span class="cd"><span class="i">db</span> <span class="o">$e6</span></span><span class="ce">; [72]:</span></span>
<span class="l"><a class="anc" name="9fb4" href="#9fb4">[9fb4]</a><span class="cd"><span class="i">db</span> <span class="o">$c8</span></span><span class="ce">; [73]:</span></span>
<span class="l"><a class="anc" name="9fb5" href="#9fb5">[9fb5]</a><span class="cd"><span class="i">db</span> <span class="o">$44</span></span><span class="ce">; [74]:</span></span>
<span class="l"><a class="anc" name="9fb6" href="#9fb6">[9fb6]</a><span class="cd"><span class="i">db</span> <span class="o">$68</span></span><span class="ce">; [75]:</span></span>
<span class="l"><a class="anc" name="9fb7" href="#9fb7">[9fb7]</a><span class="cd"><span class="i">db</span> <span class="o">$1e</span></span><span class="ce">; [76]:</span></span>
<span class="l"><a class="anc" name="9fb8" href="#9fb8">[9fb8]</a><span class="cd"><span class="i">db</span> <span class="o">$9f</span></span><span class="ce">; [77]:</span></span>
<span class="l"><a class="anc" name="9fb9" href="#9fb9">[9fb9]</a><span class="cd"><span class="i">db</span> <span class="o">$9f</span></span><span class="ce">; [78]:</span></span>
<span class="l"><a class="anc" name="9fba" href="#9fba">[9fba]</a><span class="cd"><span class="i">db</span> <span class="o">$9f</span></span><span class="ce">; [79]:</span></span>
<span class="l"><a class="anc" name="9fbb" href="#9fbb">[9fbb]</a><span class="cd"><span class="i">db</span> <span class="o">$90</span></span><span class="ce">; [80]:</span></span>
<span class="l"><a class="anc" name="9fbc" href="#9fbc">[9fbc]</a><span class="cd"><span class="i">db</span> <span class="o">$9b</span></span><span class="ce">; [81]:</span></span>
<span class="l"><a class="anc" name="9fbd" href="#9fbd">[9fbd]</a><span class="cd"><span class="i">db</span> <span class="o">$a6</span></span><span class="ce">; [82]:</span></span>
<span class="l"><a class="anc" name="9fbe" href="#9fbe">[9fbe]</a><span class="cd"><span class="i">db</span> <span class="o">$b8</span></span><span class="ce">; [83]:</span></span>
<span class="l"><a class="anc" name="9fbf" href="#9fbf">[9fbf]</a><span class="cd"><span class="i">db</span> <span class="o">$c3</span></span><span class="ce">; [84]:</span></span>
<span class="l"><a class="anc" name="9fc0" href="#9fc0">[9fc0]</a><span class="cd"><span class="i">db</span> <span class="o">$27</span></span><span class="ce">; [85]:</span></span>
<span class="l"><a class="anc" name="9fc1" href="#9fc1">[9fc1]</a><span class="cd"><span class="i">db</span> <span class="o">$de</span></span><span class="ce">; [86]:</span></span>
<span class="l"><a class="anc" name="9fc2" href="#9fc2">[9fc2]</a><span class="cd"><span class="i">db</span> <span class="o">$f8</span></span><span class="ce">; [87]:</span></span>
<span class="l"><a class="anc" name="9fc3" href="#9fc3">[9fc3]</a><span class="cd"><span class="i">db</span> <span class="o">$d5</span></span><span class="ce">; [88]:</span></span>
<span class="l"><a class="anc" name="9fc4" href="#9fc4">[9fc4]</a><span class="cd"><span class="i">db</span> <span class="o">$9f</span></span><span class="ce">; [89]:</span></span>
<span class="l"><a class="anc" name="9fc5" href="#9fc5">[9fc5]</a><span class="cd"><span class="i">db</span> <span class="o">$9f</span></span><span class="ce">; [90]:</span></span>
<span class="l"><a class="anc" name="9fc6" href="#9fc6">[9fc6]</a><span class="cd"><span class="i">db</span> <span class="o">$9f</span></span><span class="ce">; [91]:</span></span>
<span class="l"><a class="anc" name="9fc7" href="#9fc7">[9fc7]</a><span class="cd"><span class="i">db</span> <span class="o">$9f</span></span><span class="ce">; [92]:</span></span>
<span class="l"><a class="anc" name="9fc8" href="#9fc8">[9fc8]</a><span class="cd"><span class="i">db</span> <span class="o">$9f</span></span><span class="ce">; [93]:</span></span>
<span class="l"><a class="anc" name="9fc9" href="#9fc9">[9fc9]</a><span class="cd"><span class="i">db</span> <span class="o">$9f</span></span><span class="ce">; [94]:</span></span>
<span class="l"><a class="anc" name="9fca" href="#9fca">[9fca]</a><span class="cd"><span class="i">db</span> <span class="o">$9f</span></span><span class="ce">; [95]:</span></span>
<span class="l"><a class="anc" name="9fcb" href="#9fcb">[9fcb]</a><span class="cd"><span class="i">db</span> <span class="o">$ce</span></span><span class="ce">; [96]:</span></span>
<span class="l"><a class="anc" name="9fcc" href="#9fcc">[9fcc]</a><span class="cd"><span class="i">db</span> <span class="o">$d9</span></span><span class="ce">; [97]:</span></span>
<span class="l"><a class="anc" name="9fcd" href="#9fcd">[9fcd]</a><span class="cd"><span class="i">db</span> <span class="o">$e4</span></span><span class="ce">; [98]:</span></span>
<span class="l"><a class="anc" name="9fce" href="#9fce">[9fce]</a><span class="cd"><span class="i">db</span> <span class="o">$ef</span></span><span class="ce">; [99]:</span></span>
<span class="l"><a class="anc" name="9fcf" href="#9fcf">[9fcf]</a><span class="cd"><span class="i">db</span> <span class="o">$fa</span></span><span class="ce">; [100]:</span></span>
<span class="l"><a class="anc" name="9fd0" href="#9fd0">[9fd0]</a><span class="cd"><span class="i">db</span> <span class="o">$05</span></span><span class="ce">; [101]:</span></span>
<span class="l"><a class="anc" name="9fd1" href="#9fd1">[9fd1]</a><span class="cd"><span class="i">db</span> <span class="o">$0a</span></span><span class="ce">; [102]:</span></span>
<span class="l"><a class="anc" name="9fd2" href="#9fd2">[9fd2]</a><span class="cd"><span class="i">db</span> <span class="o">$e2</span></span><span class="ce">; [103]:</span></span>
<span class="l"><a class="anc" name="9fd3" href="#9fd3">[9fd3]</a><span class="cd"><span class="i">db</span> <span class="o">$56</span></span><span class="ce">; [104]:</span></span>
<span class="l"><a class="anc" name="9fd4" href="#9fd4">[9fd4]</a><span class="cd"><span class="i">db</span> <span class="o">$3d</span></span><span class="ce">; [105]:</span></span>
<span class="l"><a class="anc" name="9fd5" href="#9fd5">[9fd5]</a><span class="cd"><span class="i">db</span> <span class="o">$9f</span></span><span class="ce">; [106]:</span></span>
<span class="l"><a class="anc" name="9fd6" href="#9fd6">[9fd6]</a><span class="cd"><span class="i">db</span> <span class="o">$9f</span></span><span class="ce">; [107]:</span></span>
<span class="l"><a class="anc" name="9fd7" href="#9fd7">[9fd7]</a><span class="cd"><span class="i">db</span> <span class="o">$9f</span></span><span class="ce">; [108]:</span></span>
<span class="l"><a class="anc" name="9fd8" href="#9fd8">[9fd8]</a><span class="cd"><span class="i">db</span> <span class="o">$9f</span></span><span class="ce">; [109]:</span></span>
<span class="l"><a class="anc" name="9fd9" href="#9fd9">[9fd9]</a><span class="cd"><span class="i">db</span> <span class="o">$9f</span></span><span class="ce">; [110]:</span></span>
<span class="l"><a class="anc" name="9fda" href="#9fda">[9fda]</a><span class="cd"><span class="i">db</span> <span class="o">$9f</span></span><span class="ce">; [111]:</span></span>
<span class="l"><a class="anc" name="9fdb" href="#9fdb">[9fdb]</a><span class="cd"><span class="i">db</span> <span class="o">$10</span></span><span class="ce">; [112]:</span></span>
<span class="l"><a class="anc" name="9fdc" href="#9fdc">[9fdc]</a><span class="cd"><span class="i">db</span> <span class="o">$1b</span></span><span class="ce">; [113]:</span></span>
<span class="l"><a class="anc" name="9fdd" href="#9fdd">[9fdd]</a><span class="cd"><span class="i">db</span> <span class="o">$26</span></span><span class="ce">; [114]:</span></span>
<span class="l"><a class="anc" name="9fde" href="#9fde">[9fde]</a><span class="cd"><span class="i">db</span> <span class="o">$31</span></span><span class="ce">; [115]:</span></span>
<span class="l"><a class="anc" name="9fdf" href="#9fdf">[9fdf]</a><span class="cd"><span class="i">db</span> <span class="o">$3c</span></span><span class="ce">; [116]:</span></span>
<span class="l"><a class="anc" name="9fe0" href="#9fe0">[9fe0]</a><span class="cd"><span class="i">db</span> <span class="o">$1c</span></span><span class="ce">; [117]:</span></span>
<span class="l"><a class="anc" name="9fe1" href="#9fe1">[9fe1]</a><span class="cd"><span class="i">db</span> <span class="o">$ef</span></span><span class="ce">; [118]:</span></span>
<span class="l"><a class="anc" name="9fe2" href="#9fe2">[9fe2]</a><span class="cd"><span class="i">db</span> <span class="o">$68</span></span><span class="ce">; [119]:</span></span>
<span class="l"><a class="anc" name="9fe3" href="#9fe3">[9fe3]</a><span class="cd"><span class="i">db</span> <span class="o">$46</span></span><span class="ce">; [120]:</span></span>
<span class="l"><a class="anc" name="9fe4" href="#9fe4">[9fe4]</a><span class="cd"><span class="i">db</span> <span class="o">$4f</span></span><span class="ce">; [121]:</span></span>
<span class="l"><a class="anc" name="9fe5" href="#9fe5">[9fe5]</a><span class="cd"><span class="i">db</span> <span class="o">$ed</span></span><span class="ce">; [122]:</span></span>
<span class="l"><a class="anc" name="9fe6" href="#9fe6">[9fe6]</a><span class="cd"><span class="i">db</span> <span class="o">$54</span></span><span class="ce">; [123]:</span></span>
<span class="l"><a class="anc" name="9fe7" href="#9fe7">[9fe7]</a><span class="cd"><span class="i">db</span> <span class="o">$58</span></span><span class="ce">; [124]:</span></span>
<span class="l"><a class="anc" name="9fe8" href="#9fe8">[9fe8]</a><span class="cd"><span class="i">db</span> <span class="o">$5c</span></span><span class="ce">; [125]:</span></span>
<span class="l"><a class="anc" name="9fe9" href="#9fe9">[9fe9]</a><span class="cd"><span class="i">db</span> <span class="o">$60</span></span><span class="ce">; [126]:</span></span>
<span class="l"><a class="anc" name="9fea" href="#9fea">[9fea]</a><span class="cd"><span class="i">db</span> <span class="o">$64</span></span><span class="ce">; [127]:</span></span>
<span class="l"><a class="anc" name="9feb" href="#9feb">[9feb]</a><span class="cd"><span class="i">db</span> <span class="o">$68</span></span><span class="ce">; [128]:</span></span>
<span class="l"><a class="anc" name="9fec" href="#9fec">[9fec]</a><span class="cd"><span class="i">db</span> <span class="o">$6c</span></span><span class="ce">; [129]:</span></span>
<span class="l"><a class="anc" name="9fed" href="#9fed">[9fed]</a><span class="cd"><span class="i">db</span> <span class="o">$70</span></span><span class="ce">; [130]:</span></span>
<span class="l"><a class="anc" name="9fee" href="#9fee">[9fee]</a><span class="cd"><span class="i">db</span> <span class="o">$74</span></span><span class="ce">; [131]:</span></span>
<span class="l"><a class="anc" name="9fef" href="#9fef">[9fef]</a><span class="cd"><span class="i">db</span> <span class="o">$78</span></span><span class="ce">; [132]:</span></span>
<span class="l"><a class="anc" name="9ff0" href="#9ff0">[9ff0]</a><span class="cd"><span class="i">db</span> <span class="o">$7c</span></span><span class="ce">; [133]:</span></span>
<span class="l"><a class="anc" name="9ff1" href="#9ff1">[9ff1]</a><span class="cd"><span class="i">db</span> <span class="o">$80</span></span><span class="ce">; [134]:</span></span>
<span class="l"><a class="anc" name="9ff2" href="#9ff2">[9ff2]</a><span class="cd"><span class="i">db</span> <span class="o">$84</span></span><span class="ce">; [135]:</span></span>
<span class="l"><a class="anc" name="9ff3" href="#9ff3">[9ff3]</a><span class="cd"><span class="i">db</span> <span class="o">$88</span></span><span class="ce">; [136]:</span></span>
<span class="l"><a class="anc" name="9ff4" href="#9ff4">[9ff4]</a><span class="cd"><span class="i">db</span> <span class="o">$8c</span></span><span class="ce">; [137]:</span></span>
<span class="l"><a class="anc" name="9ff5" href="#9ff5">[9ff5]</a><span class="cd"><span class="i">db</span> <span class="o">$90</span></span><span class="ce">; [138]:</span></span>
<span class="l"><a class="anc" name="9ff6" href="#9ff6">[9ff6]</a><span class="cd"><span class="i">db</span> <span class="o">$94</span></span><span class="ce">; [139]:</span></span>
<span class="l"><a class="anc" name="9ff7" href="#9ff7">[9ff7]</a><span class="cd"><span class="i">db</span> <span class="o">$98</span></span><span class="ce">; [140]:</span></span>
<span class="l"><a class="anc" name="9ff8" href="#9ff8">[9ff8]</a><span class="cd"><span class="i">db</span> <span class="o">$9c</span></span><span class="ce">; [141]:</span></span>
<span class="l"><a class="anc" name="9ff9" href="#9ff9">[9ff9]</a><span class="cd"><span class="i">db</span> <span class="o">$a0</span></span><span class="ce">; [142]:</span></span>
<span class="l"><a class="anc" name="9ffa" href="#9ffa">[9ffa]</a><span class="cd"><span class="i">db</span> <span class="o">$a4</span></span><span class="ce">; [143]:</span></span>
<span class="l"><a class="anc" name="9ffb" href="#9ffb">[9ffb]</a><span class="cd"><span class="i">db</span> <span class="o">$a8</span></span><span class="ce">; [144]:</span></span>
<span class="l"><a class="anc" name="9ffc" href="#9ffc">[9ffc]</a><span class="cd"><span class="i">db</span> <span class="o">$ac</span></span><span class="ce">; [145]:</span></span>
<span class="l"><a class="anc" name="9ffd" href="#9ffd">[9ffd]</a><span class="cd"><span class="i">db</span> <span class="o">$b0</span></span><span class="ce">; [146]:</span></span>
<span class="l"><a class="anc" name="9ffe" href="#9ffe">[9ffe]</a><span class="cd"><span class="i">db</span> <span class="o">$b4</span></span><span class="ce">; [147]:</span></span>
<span class="l"><a class="anc" name="9fff" href="#9fff">[9fff]</a><span class="cd"><span class="i">db</span> <span class="o">$b8</span></span><span class="ce">; [148]:</span></span>
<span class="l"><a class="anc" name="a000" href="#a000">[a000]</a><span class="cd"><span class="i">db</span> <span class="o">$bc</span></span><span class="ce">; [149]:</span></span>
<span class="l"><a class="anc" name="a001" href="#a001">[a001]</a><span class="cd"><span class="i">db</span> <span class="o">$c0</span></span><span class="ce">; [150]:</span></span>
<span class="l"><a class="anc" name="a002" href="#a002">[a002]</a><span class="cd"><span class="i">db</span> <span class="o">$c4</span></span><span class="ce">; [151]:</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_ADDRS_U"></a><div class="cp">;============================================================================
; Upper bytes of IScript addresses by entrypoint index.
;============================================================================
</div><span class="l"><a class="anc" name="a003" href="#a003">[a003]</a><a href="#ISCRIPT_ADDRS_U" class="la">ISCRIPT_ADDRS_U:</a><span class="ce">; [$a003]</span></span>
<span class="l"><a class="anc" name="a003" href="#a003">[a003]</a><span class="cd"><span class="i">db</span> <span class="o">$a0</span></span><span class="ce">; [0]:</span></span>
<span class="l"><a class="anc" name="a004" href="#a004">[a004]</a><span class="cd"><span class="i">db</span> <span class="o">$a0</span></span><span class="ce">; [1]:</span></span>
<span class="l"><a class="anc" name="a005" href="#a005">[a005]</a><span class="cd"><span class="i">db</span> <span class="o">$a0</span></span><span class="ce">; [2]:</span></span>
<span class="l"><a class="anc" name="a006" href="#a006">[a006]</a><span class="cd"><span class="i">db</span> <span class="o">$a0</span></span><span class="ce">; [3]:</span></span>
<span class="l"><a class="anc" name="a007" href="#a007">[a007]</a><span class="cd"><span class="i">db</span> <span class="o">$a0</span></span><span class="ce">; [4]:</span></span>
<span class="l"><a class="anc" name="a008" href="#a008">[a008]</a><span class="cd"><span class="i">db</span> <span class="o">$a0</span></span><span class="ce">; [5]:</span></span>
<span class="l"><a class="anc" name="a009" href="#a009">[a009]</a><span class="cd"><span class="i">db</span> <span class="o">$a0</span></span><span class="ce">; [6]:</span></span>
<span class="l"><a class="anc" name="a00a" href="#a00a">[a00a]</a><span class="cd"><span class="i">db</span> <span class="o">$a0</span></span><span class="ce">; [7]:</span></span>
<span class="l"><a class="anc" name="a00b" href="#a00b">[a00b]</a><span class="cd"><span class="i">db</span> <span class="o">$a3</span></span><span class="ce">; [8]:</span></span>
<span class="l"><a class="anc" name="a00c" href="#a00c">[a00c]</a><span class="cd"><span class="i">db</span> <span class="o">$a0</span></span><span class="ce">; [9]:</span></span>
<span class="l"><a class="anc" name="a00d" href="#a00d">[a00d]</a><span class="cd"><span class="i">db</span> <span class="o">$a0</span></span><span class="ce">; [10]:</span></span>
<span class="l"><a class="anc" name="a00e" href="#a00e">[a00e]</a><span class="cd"><span class="i">db</span> <span class="o">$a4</span></span><span class="ce">; [11]:</span></span>
<span class="l"><a class="anc" name="a00f" href="#a00f">[a00f]</a><span class="cd"><span class="i">db</span> <span class="o">$a4</span></span><span class="ce">; [12]:</span></span>
<span class="l"><a class="anc" name="a010" href="#a010">[a010]</a><span class="cd"><span class="i">db</span> <span class="o">$a3</span></span><span class="ce">; [13]:</span></span>
<span class="l"><a class="anc" name="a011" href="#a011">[a011]</a><span class="cd"><span class="i">db</span> <span class="o">$a3</span></span><span class="ce">; [14]:</span></span>
<span class="l"><a class="anc" name="a012" href="#a012">[a012]</a><span class="cd"><span class="i">db</span> <span class="o">$a1</span></span><span class="ce">; [15]:</span></span>
<span class="l"><a class="anc" name="a013" href="#a013">[a013]</a><span class="cd"><span class="i">db</span> <span class="o">$a1</span></span><span class="ce">; [16]:</span></span>
<span class="l"><a class="anc" name="a014" href="#a014">[a014]</a><span class="cd"><span class="i">db</span> <span class="o">$a1</span></span><span class="ce">; [17]:</span></span>
<span class="l"><a class="anc" name="a015" href="#a015">[a015]</a><span class="cd"><span class="i">db</span> <span class="o">$a1</span></span><span class="ce">; [18]:</span></span>
<span class="l"><a class="anc" name="a016" href="#a016">[a016]</a><span class="cd"><span class="i">db</span> <span class="o">$a1</span></span><span class="ce">; [19]:</span></span>
<span class="l"><a class="anc" name="a017" href="#a017">[a017]</a><span class="cd"><span class="i">db</span> <span class="o">$a1</span></span><span class="ce">; [20]:</span></span>
<span class="l"><a class="anc" name="a018" href="#a018">[a018]</a><span class="cd"><span class="i">db</span> <span class="o">$a5</span></span><span class="ce">; [21]:</span></span>
<span class="l"><a class="anc" name="a019" href="#a019">[a019]</a><span class="cd"><span class="i">db</span> <span class="o">$a1</span></span><span class="ce">; [22]:</span></span>
<span class="l"><a class="anc" name="a01a" href="#a01a">[a01a]</a><span class="cd"><span class="i">db</span> <span class="o">$a1</span></span><span class="ce">; [23]:</span></span>
<span class="l"><a class="anc" name="a01b" href="#a01b">[a01b]</a><span class="cd"><span class="i">db</span> <span class="o">$a1</span></span><span class="ce">; [24]:</span></span>
<span class="l"><a class="anc" name="a01c" href="#a01c">[a01c]</a><span class="cd"><span class="i">db</span> <span class="o">$a3</span></span><span class="ce">; [25]:</span></span>
<span class="l"><a class="anc" name="a01d" href="#a01d">[a01d]</a><span class="cd"><span class="i">db</span> <span class="o">$a5</span></span><span class="ce">; [26]:</span></span>
<span class="l"><a class="anc" name="a01e" href="#a01e">[a01e]</a><span class="cd"><span class="i">db</span> <span class="o">$a1</span></span><span class="ce">; [27]:</span></span>
<span class="l"><a class="anc" name="a01f" href="#a01f">[a01f]</a><span class="cd"><span class="i">db</span> <span class="o">$a6</span></span><span class="ce">; [28]:</span></span>
<span class="l"><a class="anc" name="a020" href="#a020">[a020]</a><span class="cd"><span class="i">db</span> <span class="o">$a3</span></span><span class="ce">; [29]:</span></span>
<span class="l"><a class="anc" name="a021" href="#a021">[a021]</a><span class="cd"><span class="i">db</span> <span class="o">$a0</span></span><span class="ce">; [30]:</span></span>
<span class="l"></span>
<a name="ISCRIPT_ADDRS_U_31_"></a><div class="c">;
; XREFS:
;     <a href="#IScripts_Begin">IScripts_Begin</a>
;
</div><span class="l"><a class="anc" name="a022" href="#a022">[a022]</a><a href="#ISCRIPT_ADDRS_U_31_" class="la">ISCRIPT_ADDRS_U_31_:</a><span class="ce">; [$a022]</span></span>
<span class="l"><a class="anc" name="a022" href="#a022">[a022]</a><span class="cd"><span class="i">db</span> <span class="o">$a0</span></span><span class="ce">; [31]:</span></span>
<span class="l"><a class="anc" name="a023" href="#a023">[a023]</a><span class="cd"><span class="i">db</span> <span class="o">$a1</span></span><span class="ce">; [32]:</span></span>
<span class="l"><a class="anc" name="a024" href="#a024">[a024]</a><span class="cd"><span class="i">db</span> <span class="o">$a1</span></span><span class="ce">; [33]:</span></span>
<span class="l"><a class="anc" name="a025" href="#a025">[a025]</a><span class="cd"><span class="i">db</span> <span class="o">$a1</span></span><span class="ce">; [34]:</span></span>
<span class="l"><a class="anc" name="a026" href="#a026">[a026]</a><span class="cd"><span class="i">db</span> <span class="o">$a1</span></span><span class="ce">; [35]:</span></span>
<span class="l"><a class="anc" name="a027" href="#a027">[a027]</a><span class="cd"><span class="i">db</span> <span class="o">$a1</span></span><span class="ce">; [36]:</span></span>
<span class="l"><a class="anc" name="a028" href="#a028">[a028]</a><span class="cd"><span class="i">db</span> <span class="o">$a1</span></span><span class="ce">; [37]:</span></span>
<span class="l"><a class="anc" name="a029" href="#a029">[a029]</a><span class="cd"><span class="i">db</span> <span class="o">$a1</span></span><span class="ce">; [38]:</span></span>
<span class="l"><a class="anc" name="a02a" href="#a02a">[a02a]</a><span class="cd"><span class="i">db</span> <span class="o">$a1</span></span><span class="ce">; [39]:</span></span>
<span class="l"><a class="anc" name="a02b" href="#a02b">[a02b]</a><span class="cd"><span class="i">db</span> <span class="o">$a3</span></span><span class="ce">; [40]:</span></span>
<span class="l"><a class="anc" name="a02c" href="#a02c">[a02c]</a><span class="cd"><span class="i">db</span> <span class="o">$a6</span></span><span class="ce">; [41]:</span></span>
<span class="l"><a class="anc" name="a02d" href="#a02d">[a02d]</a><span class="cd"><span class="i">db</span> <span class="o">$a5</span></span><span class="ce">; [42]:</span></span>
<span class="l"><a class="anc" name="a02e" href="#a02e">[a02e]</a><span class="cd"><span class="i">db</span> <span class="o">$a5</span></span><span class="ce">; [43]:</span></span>
<span class="l"><a class="anc" name="a02f" href="#a02f">[a02f]</a><span class="cd"><span class="i">db</span> <span class="o">$a4</span></span><span class="ce">; [44]:</span></span>
<span class="l"><a class="anc" name="a030" href="#a030">[a030]</a><span class="cd"><span class="i">db</span> <span class="o">$a0</span></span><span class="ce">; [45]:</span></span>
<span class="l"><a class="anc" name="a031" href="#a031">[a031]</a><span class="cd"><span class="i">db</span> <span class="o">$a0</span></span><span class="ce">; [46]:</span></span>
<span class="l"><a class="anc" name="a032" href="#a032">[a032]</a><span class="cd"><span class="i">db</span> <span class="o">$a0</span></span><span class="ce">; [47]:</span></span>
<span class="l"><a class="anc" name="a033" href="#a033">[a033]</a><span class="cd"><span class="i">db</span> <span class="o">$a1</span></span><span class="ce">; [48]:</span></span>
<span class="l"><a class="anc" name="a034" href="#a034">[a034]</a><span class="cd"><span class="i">db</span> <span class="o">$a1</span></span><span class="ce">; [49]:</span></span>
<span class="l"><a class="anc" name="a035" href="#a035">[a035]</a><span class="cd"><span class="i">db</span> <span class="o">$a1</span></span><span class="ce">; [50]:</span></span>
<span class="l"><a class="anc" name="a036" href="#a036">[a036]</a><span class="cd"><span class="i">db</span> <span class="o">$a1</span></span><span class="ce">; [51]:</span></span>
<span class="l"><a class="anc" name="a037" href="#a037">[a037]</a><span class="cd"><span class="i">db</span> <span class="o">$a2</span></span><span class="ce">; [52]:</span></span>
<span class="l"><a class="anc" name="a038" href="#a038">[a038]</a><span class="cd"><span class="i">db</span> <span class="o">$a2</span></span><span class="ce">; [53]:</span></span>
<span class="l"><a class="anc" name="a039" href="#a039">[a039]</a><span class="cd"><span class="i">db</span> <span class="o">$a2</span></span><span class="ce">; [54]:</span></span>
<span class="l"><a class="anc" name="a03a" href="#a03a">[a03a]</a><span class="cd"><span class="i">db</span> <span class="o">$a2</span></span><span class="ce">; [55]:</span></span>
<span class="l"><a class="anc" name="a03b" href="#a03b">[a03b]</a><span class="cd"><span class="i">db</span> <span class="o">$a5</span></span><span class="ce">; [56]:</span></span>
<span class="l"><a class="anc" name="a03c" href="#a03c">[a03c]</a><span class="cd"><span class="i">db</span> <span class="o">$a3</span></span><span class="ce">; [57]:</span></span>
<span class="l"><a class="anc" name="a03d" href="#a03d">[a03d]</a><span class="cd"><span class="i">db</span> <span class="o">$a4</span></span><span class="ce">; [58]:</span></span>
<span class="l"><a class="anc" name="a03e" href="#a03e">[a03e]</a><span class="cd"><span class="i">db</span> <span class="o">$a5</span></span><span class="ce">; [59]:</span></span>
<span class="l"><a class="anc" name="a03f" href="#a03f">[a03f]</a><span class="cd"><span class="i">db</span> <span class="o">$a3</span></span><span class="ce">; [60]:</span></span>
<span class="l"><a class="anc" name="a040" href="#a040">[a040]</a><span class="cd"><span class="i">db</span> <span class="o">$a6</span></span><span class="ce">; [61]:</span></span>
<span class="l"><a class="anc" name="a041" href="#a041">[a041]</a><span class="cd"><span class="i">db</span> <span class="o">$a0</span></span><span class="ce">; [62]:</span></span>
<span class="l"><a class="anc" name="a042" href="#a042">[a042]</a><span class="cd"><span class="i">db</span> <span class="o">$a0</span></span><span class="ce">; [63]:</span></span>
<span class="l"><a class="anc" name="a043" href="#a043">[a043]</a><span class="cd"><span class="i">db</span> <span class="o">$a2</span></span><span class="ce">; [64]:</span></span>
<span class="l"><a class="anc" name="a044" href="#a044">[a044]</a><span class="cd"><span class="i">db</span> <span class="o">$a2</span></span><span class="ce">; [65]:</span></span>
<span class="l"><a class="anc" name="a045" href="#a045">[a045]</a><span class="cd"><span class="i">db</span> <span class="o">$a2</span></span><span class="ce">; [66]:</span></span>
<span class="l"><a class="anc" name="a046" href="#a046">[a046]</a><span class="cd"><span class="i">db</span> <span class="o">$a2</span></span><span class="ce">; [67]:</span></span>
<span class="l"><a class="anc" name="a047" href="#a047">[a047]</a><span class="cd"><span class="i">db</span> <span class="o">$a2</span></span><span class="ce">; [68]:</span></span>
<span class="l"><a class="anc" name="a048" href="#a048">[a048]</a><span class="cd"><span class="i">db</span> <span class="o">$a2</span></span><span class="ce">; [69]:</span></span>
<span class="l"><a class="anc" name="a049" href="#a049">[a049]</a><span class="cd"><span class="i">db</span> <span class="o">$a2</span></span><span class="ce">; [70]:</span></span>
<span class="l"><a class="anc" name="a04a" href="#a04a">[a04a]</a><span class="cd"><span class="i">db</span> <span class="o">$a5</span></span><span class="ce">; [71]:</span></span>
<span class="l"><a class="anc" name="a04b" href="#a04b">[a04b]</a><span class="cd"><span class="i">db</span> <span class="o">$a3</span></span><span class="ce">; [72]:</span></span>
<span class="l"><a class="anc" name="a04c" href="#a04c">[a04c]</a><span class="cd"><span class="i">db</span> <span class="o">$a4</span></span><span class="ce">; [73]:</span></span>
<span class="l"><a class="anc" name="a04d" href="#a04d">[a04d]</a><span class="cd"><span class="i">db</span> <span class="o">$a5</span></span><span class="ce">; [74]:</span></span>
<span class="l"><a class="anc" name="a04e" href="#a04e">[a04e]</a><span class="cd"><span class="i">db</span> <span class="o">$a3</span></span><span class="ce">; [75]:</span></span>
<span class="l"><a class="anc" name="a04f" href="#a04f">[a04f]</a><span class="cd"><span class="i">db</span> <span class="o">$a6</span></span><span class="ce">; [76]:</span></span>
<span class="l"><a class="anc" name="a050" href="#a050">[a050]</a><span class="cd"><span class="i">db</span> <span class="o">$a0</span></span><span class="ce">; [77]:</span></span>
<span class="l"><a class="anc" name="a051" href="#a051">[a051]</a><span class="cd"><span class="i">db</span> <span class="o">$a0</span></span><span class="ce">; [78]:</span></span>
<span class="l"><a class="anc" name="a052" href="#a052">[a052]</a><span class="cd"><span class="i">db</span> <span class="o">$a0</span></span><span class="ce">; [79]:</span></span>
<span class="l"><a class="anc" name="a053" href="#a053">[a053]</a><span class="cd"><span class="i">db</span> <span class="o">$a2</span></span><span class="ce">; [80]:</span></span>
<span class="l"><a class="anc" name="a054" href="#a054">[a054]</a><span class="cd"><span class="i">db</span> <span class="o">$a2</span></span><span class="ce">; [81]:</span></span>
<span class="l"><a class="anc" name="a055" href="#a055">[a055]</a><span class="cd"><span class="i">db</span> <span class="o">$a2</span></span><span class="ce">; [82]:</span></span>
<span class="l"><a class="anc" name="a056" href="#a056">[a056]</a><span class="cd"><span class="i">db</span> <span class="o">$a2</span></span><span class="ce">; [83]:</span></span>
<span class="l"><a class="anc" name="a057" href="#a057">[a057]</a><span class="cd"><span class="i">db</span> <span class="o">$a2</span></span><span class="ce">; [84]:</span></span>
<span class="l"><a class="anc" name="a058" href="#a058">[a058]</a><span class="cd"><span class="i">db</span> <span class="o">$a6</span></span><span class="ce">; [85]:</span></span>
<span class="l"><a class="anc" name="a059" href="#a059">[a059]</a><span class="cd"><span class="i">db</span> <span class="o">$a5</span></span><span class="ce">; [86]:</span></span>
<span class="l"><a class="anc" name="a05a" href="#a05a">[a05a]</a><span class="cd"><span class="i">db</span> <span class="o">$a3</span></span><span class="ce">; [87]:</span></span>
<span class="l"><a class="anc" name="a05b" href="#a05b">[a05b]</a><span class="cd"><span class="i">db</span> <span class="o">$a4</span></span><span class="ce">; [88]:</span></span>
<span class="l"><a class="anc" name="a05c" href="#a05c">[a05c]</a><span class="cd"><span class="i">db</span> <span class="o">$a0</span></span><span class="ce">; [89]:</span></span>
<span class="l"><a class="anc" name="a05d" href="#a05d">[a05d]</a><span class="cd"><span class="i">db</span> <span class="o">$a0</span></span><span class="ce">; [90]:</span></span>
<span class="l"><a class="anc" name="a05e" href="#a05e">[a05e]</a><span class="cd"><span class="i">db</span> <span class="o">$a0</span></span><span class="ce">; [91]:</span></span>
<span class="l"><a class="anc" name="a05f" href="#a05f">[a05f]</a><span class="cd"><span class="i">db</span> <span class="o">$a0</span></span><span class="ce">; [92]:</span></span>
<span class="l"><a class="anc" name="a060" href="#a060">[a060]</a><span class="cd"><span class="i">db</span> <span class="o">$a0</span></span><span class="ce">; [93]:</span></span>
<span class="l"><a class="anc" name="a061" href="#a061">[a061]</a><span class="cd"><span class="i">db</span> <span class="o">$a0</span></span><span class="ce">; [94]:</span></span>
<span class="l"><a class="anc" name="a062" href="#a062">[a062]</a><span class="cd"><span class="i">db</span> <span class="o">$a0</span></span><span class="ce">; [95]:</span></span>
<span class="l"><a class="anc" name="a063" href="#a063">[a063]</a><span class="cd"><span class="i">db</span> <span class="o">$a2</span></span><span class="ce">; [96]:</span></span>
<span class="l"><a class="anc" name="a064" href="#a064">[a064]</a><span class="cd"><span class="i">db</span> <span class="o">$a2</span></span><span class="ce">; [97]:</span></span>
<span class="l"><a class="anc" name="a065" href="#a065">[a065]</a><span class="cd"><span class="i">db</span> <span class="o">$a2</span></span><span class="ce">; [98]:</span></span>
<span class="l"><a class="anc" name="a066" href="#a066">[a066]</a><span class="cd"><span class="i">db</span> <span class="o">$a2</span></span><span class="ce">; [99]:</span></span>
<span class="l"><a class="anc" name="a067" href="#a067">[a067]</a><span class="cd"><span class="i">db</span> <span class="o">$a2</span></span><span class="ce">; [100]:</span></span>
<span class="l"><a class="anc" name="a068" href="#a068">[a068]</a><span class="cd"><span class="i">db</span> <span class="o">$a3</span></span><span class="ce">; [101]:</span></span>
<span class="l"><a class="anc" name="a069" href="#a069">[a069]</a><span class="cd"><span class="i">db</span> <span class="o">$a4</span></span><span class="ce">; [102]:</span></span>
<span class="l"><a class="anc" name="a06a" href="#a06a">[a06a]</a><span class="cd"><span class="i">db</span> <span class="o">$a4</span></span><span class="ce">; [103]:</span></span>
<span class="l"><a class="anc" name="a06b" href="#a06b">[a06b]</a><span class="cd"><span class="i">db</span> <span class="o">$a5</span></span><span class="ce">; [104]:</span></span>
<span class="l"><a class="anc" name="a06c" href="#a06c">[a06c]</a><span class="cd"><span class="i">db</span> <span class="o">$a6</span></span><span class="ce">; [105]:</span></span>
<span class="l"><a class="anc" name="a06d" href="#a06d">[a06d]</a><span class="cd"><span class="i">db</span> <span class="o">$a0</span></span><span class="ce">; [106]:</span></span>
<span class="l"><a class="anc" name="a06e" href="#a06e">[a06e]</a><span class="cd"><span class="i">db</span> <span class="o">$a0</span></span><span class="ce">; [107]:</span></span>
<span class="l"><a class="anc" name="a06f" href="#a06f">[a06f]</a><span class="cd"><span class="i">db</span> <span class="o">$a0</span></span><span class="ce">; [108]:</span></span>
<span class="l"><a class="anc" name="a070" href="#a070">[a070]</a><span class="cd"><span class="i">db</span> <span class="o">$a0</span></span><span class="ce">; [109]:</span></span>
<span class="l"><a class="anc" name="a071" href="#a071">[a071]</a><span class="cd"><span class="i">db</span> <span class="o">$a0</span></span><span class="ce">; [110]:</span></span>
<span class="l"><a class="anc" name="a072" href="#a072">[a072]</a><span class="cd"><span class="i">db</span> <span class="o">$a0</span></span><span class="ce">; [111]:</span></span>
<span class="l"><a class="anc" name="a073" href="#a073">[a073]</a><span class="cd"><span class="i">db</span> <span class="o">$a3</span></span><span class="ce">; [112]:</span></span>
<span class="l"><a class="anc" name="a074" href="#a074">[a074]</a><span class="cd"><span class="i">db</span> <span class="o">$a3</span></span><span class="ce">; [113]:</span></span>
<span class="l"><a class="anc" name="a075" href="#a075">[a075]</a><span class="cd"><span class="i">db</span> <span class="o">$a3</span></span><span class="ce">; [114]:</span></span>
<span class="l"><a class="anc" name="a076" href="#a076">[a076]</a><span class="cd"><span class="i">db</span> <span class="o">$a3</span></span><span class="ce">; [115]:</span></span>
<span class="l"><a class="anc" name="a077" href="#a077">[a077]</a><span class="cd"><span class="i">db</span> <span class="o">$a3</span></span><span class="ce">; [116]:</span></span>
<span class="l"><a class="anc" name="a078" href="#a078">[a078]</a><span class="cd"><span class="i">db</span> <span class="o">$a4</span></span><span class="ce">; [117]:</span></span>
<span class="l"><a class="anc" name="a079" href="#a079">[a079]</a><span class="cd"><span class="i">db</span> <span class="o">$a4</span></span><span class="ce">; [118]:</span></span>
<span class="l"><a class="anc" name="a07a" href="#a07a">[a07a]</a><span class="cd"><span class="i">db</span> <span class="o">$a5</span></span><span class="ce">; [119]:</span></span>
<span class="l"><a class="anc" name="a07b" href="#a07b">[a07b]</a><span class="cd"><span class="i">db</span> <span class="o">$a6</span></span><span class="ce">; [120]:</span></span>
<span class="l"><a class="anc" name="a07c" href="#a07c">[a07c]</a><span class="cd"><span class="i">db</span> <span class="o">$a6</span></span><span class="ce">; [121]:</span></span>
<span class="l"><a class="anc" name="a07d" href="#a07d">[a07d]</a><span class="cd"><span class="i">db</span> <span class="o">$a5</span></span><span class="ce">; [122]:</span></span>
<span class="l"><a class="anc" name="a07e" href="#a07e">[a07e]</a><span class="cd"><span class="i">db</span> <span class="o">$a6</span></span><span class="ce">; [123]:</span></span>
<span class="l"><a class="anc" name="a07f" href="#a07f">[a07f]</a><span class="cd"><span class="i">db</span> <span class="o">$a6</span></span><span class="ce">; [124]:</span></span>
<span class="l"><a class="anc" name="a080" href="#a080">[a080]</a><span class="cd"><span class="i">db</span> <span class="o">$a6</span></span><span class="ce">; [125]:</span></span>
<span class="l"><a class="anc" name="a081" href="#a081">[a081]</a><span class="cd"><span class="i">db</span> <span class="o">$a6</span></span><span class="ce">; [126]:</span></span>
<span class="l"><a class="anc" name="a082" href="#a082">[a082]</a><span class="cd"><span class="i">db</span> <span class="o">$a6</span></span><span class="ce">; [127]:</span></span>
<span class="l"><a class="anc" name="a083" href="#a083">[a083]</a><span class="cd"><span class="i">db</span> <span class="o">$a6</span></span><span class="ce">; [128]:</span></span>
<span class="l"><a class="anc" name="a084" href="#a084">[a084]</a><span class="cd"><span class="i">db</span> <span class="o">$a6</span></span><span class="ce">; [129]:</span></span>
<span class="l"><a class="anc" name="a085" href="#a085">[a085]</a><span class="cd"><span class="i">db</span> <span class="o">$a6</span></span><span class="ce">; [130]:</span></span>
<span class="l"><a class="anc" name="a086" href="#a086">[a086]</a><span class="cd"><span class="i">db</span> <span class="o">$a6</span></span><span class="ce">; [131]:</span></span>
<span class="l"><a class="anc" name="a087" href="#a087">[a087]</a><span class="cd"><span class="i">db</span> <span class="o">$a6</span></span><span class="ce">; [132]:</span></span>
<span class="l"><a class="anc" name="a088" href="#a088">[a088]</a><span class="cd"><span class="i">db</span> <span class="o">$a6</span></span><span class="ce">; [133]:</span></span>
<span class="l"><a class="anc" name="a089" href="#a089">[a089]</a><span class="cd"><span class="i">db</span> <span class="o">$a6</span></span><span class="ce">; [134]:</span></span>
<span class="l"><a class="anc" name="a08a" href="#a08a">[a08a]</a><span class="cd"><span class="i">db</span> <span class="o">$a6</span></span><span class="ce">; [135]:</span></span>
<span class="l"><a class="anc" name="a08b" href="#a08b">[a08b]</a><span class="cd"><span class="i">db</span> <span class="o">$a6</span></span><span class="ce">; [136]:</span></span>
<span class="l"><a class="anc" name="a08c" href="#a08c">[a08c]</a><span class="cd"><span class="i">db</span> <span class="o">$a6</span></span><span class="ce">; [137]:</span></span>
<span class="l"><a class="anc" name="a08d" href="#a08d">[a08d]</a><span class="cd"><span class="i">db</span> <span class="o">$a6</span></span><span class="ce">; [138]:</span></span>
<span class="l"><a class="anc" name="a08e" href="#a08e">[a08e]</a><span class="cd"><span class="i">db</span> <span class="o">$a6</span></span><span class="ce">; [139]:</span></span>
<span class="l"><a class="anc" name="a08f" href="#a08f">[a08f]</a><span class="cd"><span class="i">db</span> <span class="o">$a6</span></span><span class="ce">; [140]:</span></span>
<span class="l"><a class="anc" name="a090" href="#a090">[a090]</a><span class="cd"><span class="i">db</span> <span class="o">$a6</span></span><span class="ce">; [141]:</span></span>
<span class="l"><a class="anc" name="a091" href="#a091">[a091]</a><span class="cd"><span class="i">db</span> <span class="o">$a6</span></span><span class="ce">; [142]:</span></span>
<span class="l"><a class="anc" name="a092" href="#a092">[a092]</a><span class="cd"><span class="i">db</span> <span class="o">$a6</span></span><span class="ce">; [143]:</span></span>
<span class="l"><a class="anc" name="a093" href="#a093">[a093]</a><span class="cd"><span class="i">db</span> <span class="o">$a6</span></span><span class="ce">; [144]:</span></span>
<span class="l"><a class="anc" name="a094" href="#a094">[a094]</a><span class="cd"><span class="i">db</span> <span class="o">$a6</span></span><span class="ce">; [145]:</span></span>
<span class="l"><a class="anc" name="a095" href="#a095">[a095]</a><span class="cd"><span class="i">db</span> <span class="o">$a6</span></span><span class="ce">; [146]:</span></span>
<span class="l"><a class="anc" name="a096" href="#a096">[a096]</a><span class="cd"><span class="i">db</span> <span class="o">$a6</span></span><span class="ce">; [147]:</span></span>
<span class="l"><a class="anc" name="a097" href="#a097">[a097]</a><span class="cd"><span class="i">db</span> <span class="o">$a6</span></span><span class="ce">; [148]:</span></span>
<span class="l"><a class="anc" name="a098" href="#a098">[a098]</a><span class="cd"><span class="i">db</span> <span class="o">$a6</span></span><span class="ce">; [149]:</span></span>
<span class="l"><a class="anc" name="a099" href="#a099">[a099]</a><span class="cd"><span class="i">db</span> <span class="o">$a6</span></span><span class="ce">; [150]:</span></span>
<span class="l"><a class="anc" name="a09a" href="#a09a">[a09a]</a><span class="cd"><span class="i">db</span> <span class="o">$a6</span></span><span class="ce">; [151]:</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_REMEMBER_YOUR_MANTRA"></a><div class="cp">;============================================================================
; Death screen.
;
; "Don't have negative thoughts. Remember your mantra."
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9f8a]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9f8a]
;
</div><span class="l"><a class="anc" name="a09b" href="#a09b">[a09b]</a><a href="#ISCRIPT_REMEMBER_YOUR_MANTRA" class="la">ISCRIPT_REMEMBER_YOUR_MANTRA:</a><span class="ce">; [$a09b]</span></span>
<span class="l"><a class="anc" name="a09b" href="#a09b">[a09b]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_GENERIC</span></span><span class="ce">; Show a generic text box.</span></span>
<span class="l"><a class="anc" name="a09c" href="#a09c">[a09c]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_UNSKIPPABLE_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_REMEMBER_YOUR_MANTRA">MESSAGE_REMEMBER_YOUR_MANTRA</a>.</span></span>
<span class="l"><a class="anc" name="a09d" href="#a09d">[a09d]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_REMEMBER_YOUR_MANTRA</span></span><span class="ce">; [$a09d] Message</span></span>
<span class="l"><a class="anc" name="a09e" href="#a09e">[a09e]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_INTRO"></a><div class="cp">;============================================================================
; The intro message at the start of the game.
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9f6b]
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9f89]
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9f98]
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9f99]
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9f9a]
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fa9]
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9faa]
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fb8]
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fb9]
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fba]
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fc4]
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fc5]
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fc6]
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fc7]
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fc8]
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fc9]
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fca]
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fd5]
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fd6]
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fd7]
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fd8]
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fd9]
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fda]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9f6b]
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9f89]
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9f98]
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9f99]
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9f9a]
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fa9]
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9faa]
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fb8]
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fb9]
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fba]
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fc4]
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fc5]
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fc6]
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fc7]
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fc8]
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fc9]
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fca]
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fd5]
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fd6]
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fd7]
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fd8]
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fd9]
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fda]
;
</div><span class="l"><a class="anc" name="a09f" href="#a09f">[a09f]</a><a href="#ISCRIPT_INTRO" class="la">ISCRIPT_INTRO:</a><span class="ce">; [$a09f]</span></span>
<span class="l"><a class="anc" name="a09f" href="#a09f">[a09f]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_GENERIC</span></span><span class="ce">; Show a generic textbox.</span></span>
<span class="l"><a class="anc" name="a0a0" href="#a0a0">[a0a0]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_UNSKIPPABLE_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_INTRO">MESSAGE_INTRO</a>.</span></span>
<span class="l"><a class="anc" name="a0a1" href="#a0a1">[a0a1]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_INTRO</span></span><span class="ce">; [$a0a1] Message</span></span>
<span class="l"><a class="anc" name="a0a2" href="#a0a2">[a0a2]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_EOLIS_WALKING_MAN_1"></a><div class="cp">;============================================================================
; Walking man shown when you enter the first town.
;
; If the player has no gold, they'll be told to see
; the king. Otherwise, they're given directions to
; Apolune.
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9f6c]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9f6c]
;
</div><span class="l"><a class="anc" name="a0a3" href="#a0a3">[a0a3]</a><a href="#ISCRIPT_EOLIS_WALKING_MAN_1" class="la">ISCRIPT_EOLIS_WALKING_MAN_1:</a><span class="ce">; [$a0a3]</span></span>
<span class="l"><a class="anc" name="a0a3" href="#a0a3">[a0a3]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_GENERIC</span></span><span class="ce">; Show a generic textbox.</span></span>
<span class="l"><a class="anc" name="a0a4" href="#a0a4">[a0a4]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_CHECK_GOLD</span></span><span class="ce">; Check if the player has any gold.</span></span>
<span class="l"><a class="anc" name="a0a5" href="#a0a5">[a0a5]</a><span class="cd"><span class="i">dw</span> <span class="o">$a0aa</span></span><span class="ce">; If yes, then jump.</span></span>
<span class="l"><a class="anc" name="a0a7" href="#a0a7">[a0a7]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Else, show <a href="PRG13.html#MESSAGE_GO_SEE_KING">MESSAGE_GO_SEE_KING</a>.</span></span>
<span class="l"><a class="anc" name="a0a8" href="#a0a8">[a0a8]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_GO_SEE_KING</span></span><span class="ce">; [$a0a8] Message</span></span>
<span class="l"><a class="anc" name="a0a9" href="#a0a9">[a0a9]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<a name=":a0aa:@_ISCRIPT_NPC_FIRST_WALKING_MAN_GO_TO_APOLUNE"></a><span class="l"><a class="anc" name="a0aa" href="#a0aa">[a0aa]</a><a href="#:a0aa:@_ISCRIPT_NPC_FIRST_WALKING_MAN_GO_TO_APOLUNE" class="lla">@_ISCRIPT_NPC_FIRST_WALKING_MAN_GO_TO_APOLUNE:</a><span class="ce">; [$a0aa]</span></span>
<span class="l"><a class="anc" name="a0aa" href="#a0aa">[a0aa]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show MESSAGE_DIRECTIONS_APOLUNE.</span></span>
<span class="l"><a class="anc" name="a0ab" href="#a0ab">[a0ab]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_DIRECTIONS_APOLUNE</span></span><span class="ce">; [$a0ab] Message</span></span>
<span class="l"><a class="anc" name="a0ac" href="#a0ac">[a0ac]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_MARK_OF_JACK"></a><div class="cp">;============================================================================
; "There is a mark of Jack by the key hole."
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9f6d]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9f6d]
;
</div><span class="l"><a class="anc" name="a0ad" href="#a0ad">[a0ad]</a><a href="#ISCRIPT_MARK_OF_JACK" class="la">ISCRIPT_MARK_OF_JACK:</a><span class="ce">; [$a0ad]</span></span>
<span class="l"><a class="anc" name="a0ad" href="#a0ad">[a0ad]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_GENERIC</span></span><span class="ce">; Show a generic textbox.</span></span>
<span class="l"><a class="anc" name="a0ae" href="#a0ae">[a0ae]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_MARK_OF_JACK">MESSAGE_MARK_OF_JACK</a>.</span></span>
<span class="l"><a class="anc" name="a0af" href="#a0af">[a0af]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_MARK_OF_JACK</span></span><span class="ce">; [$a0af] Message</span></span>
<span class="l"><a class="anc" name="a0b0" href="#a0b0">[a0b0]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_EOLIS_WALKING_WOMAN_1"></a><div class="cp">;============================================================================
; TODO
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9f6e]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9f6e]
;
</div><span class="l"><a class="anc" name="a0b1" href="#a0b1">[a0b1]</a><a href="#ISCRIPT_EOLIS_WALKING_WOMAN_1" class="la">ISCRIPT_EOLIS_WALKING_WOMAN_1:</a><span class="ce">; [$a0b1]</span></span>
<span class="l"><a class="anc" name="a0b1" href="#a0b1">[a0b1]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_GENERIC</span></span><span class="ce">; Show a generic textbox.</span></span>
<span class="l"><a class="anc" name="a0b2" href="#a0b2">[a0b2]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_CHECK_FOR_ITEM</span></span><span class="ce">; Check if the player has the Ring of Elf.</span></span>
<span class="l"><a class="anc" name="a0b3" href="#a0b3">[a0b3]</a><span class="cd"><span class="i">db</span> <span class="o">SPECIAL_RING_OF_ELF</span></span><span class="ce">; [$a0b3] InventoryItem</span></span>
<span class="l"><a class="anc" name="a0b4" href="#a0b4">[a0b4]</a><span class="cd"><span class="i">dw</span> <span class="o">$a0b9</span></span><span class="ce">; If yes, jump.</span></span>
<span class="l"><a class="anc" name="a0b6" href="#a0b6">[a0b6]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_THIS_IS_EOLIS">MESSAGE_THIS_IS_EOLIS</a>.</span></span>
<span class="l"><a class="anc" name="a0b7" href="#a0b7">[a0b7]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_THIS_IS_EOLIS</span></span><span class="ce">; [$a0b7] Message</span></span>
<span class="l"><a class="anc" name="a0b8" href="#a0b8">[a0b8]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<a name=":a0b9:@_ISCRIPT_A081_HAS_RING"></a><span class="l"><a class="anc" name="a0b9" href="#a0b9">[a0b9]</a><a href="#:a0b9:@_ISCRIPT_A081_HAS_RING" class="lla">@_ISCRIPT_A081_HAS_RING:</a><span class="ce">; [$a0b9]</span></span>
<span class="l"><a class="anc" name="a0b9" href="#a0b9">[a0b9]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_LOOK_FOR_RINGS">MESSAGE_LOOK_FOR_RINGS</a>.</span></span>
<span class="l"><a class="anc" name="a0ba" href="#a0ba">[a0ba]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_LOOK_FOR_RINGS</span></span><span class="ce">; [$a0ba] Message</span></span>
<span class="l"><a class="anc" name="a0bb" href="#a0bb">[a0bb]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_EOLIS_GURU"></a><div class="cp">;============================================================================
; Interaction with the guru in Eolis.
;
; If the player does not have the Ring of Elf, they will
; be given the ring and told to talk to the King.
;
; If they do have it, they will be told to talk to gurus
; to get a title.
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9f6f]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9f6f]
;
</div><span class="l"><a class="anc" name="a0bc" href="#a0bc">[a0bc]</a><a href="#ISCRIPT_EOLIS_GURU" class="la">ISCRIPT_EOLIS_GURU:</a><span class="ce">; [$a0bc]</span></span>
<span class="l"><a class="anc" name="a0bc" href="#a0bc">[a0bc]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_GURU</span></span><span class="ce">; Show the Guru portrait text box.</span></span>
<span class="l"><a class="anc" name="a0bd" href="#a0bd">[a0bd]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_CHECK_FOR_ITEM</span></span><span class="ce">; Check if the player has the Ring of Elf.</span></span>
<span class="l"><a class="anc" name="a0be" href="#a0be">[a0be]</a><span class="cd"><span class="i">db</span> <span class="o">SPECIAL_RING_OF_ELF</span></span><span class="ce">; [$a0be] InventoryItem</span></span>
<span class="l"><a class="anc" name="a0bf" href="#a0bf">[a0bf]</a><span class="cd"><span class="i">dw</span> <span class="o">$a0c6</span></span><span class="ce">; If yes, then jump.</span></span>
<span class="l"><a class="anc" name="a0c1" href="#a0c1">[a0c1]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_UNSKIPPABLE_MESSAGE</span></span><span class="ce">; Else, show <a href="PRG13.html#MESSAGE_TAKE_RING_TO_KING">MESSAGE_TAKE_RING_TO_KING</a>.</span></span>
<span class="l"><a class="anc" name="a0c2" href="#a0c2">[a0c2]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_TAKE_RING_TO_KING</span></span><span class="ce">; [$a0c2] Message</span></span>
<span class="l"><a class="anc" name="a0c3" href="#a0c3">[a0c3]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_ADD_ITEM</span></span><span class="ce">; Add the Ring of Elf to the inventory.</span></span>
<span class="l"><a class="anc" name="a0c4" href="#a0c4">[a0c4]</a><span class="cd"><span class="i">db</span> <span class="o">SPECIAL_RING_OF_ELF</span></span><span class="ce">; [$a0c4] InventoryItem</span></span>
<span class="l"><a class="anc" name="a0c5" href="#a0c5">[a0c5]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<a name=":a0c6:@_ISCRIPT_GURU_EOLIS_HAS_RING"></a><span class="l"><a class="anc" name="a0c6" href="#a0c6">[a0c6]</a><a href="#:a0c6:@_ISCRIPT_GURU_EOLIS_HAS_RING" class="lla">@_ISCRIPT_GURU_EOLIS_HAS_RING:</a><span class="ce">; [$a0c6]</span></span>
<span class="l"><a class="anc" name="a0c6" href="#a0c6">[a0c6]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_VISIT_GURUS_GET_TITLE">MESSAGE_VISIT_GURUS_GET_TITLE</a>.</span></span>
<span class="l"><a class="anc" name="a0c7" href="#a0c7">[a0c7]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_VISIT_GURUS_GET_TITLE</span></span><span class="ce">; [$a0c7] Message</span></span>
<span class="l"><a class="anc" name="a0c8" href="#a0c8">[a0c8]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_EOLIS_WALKING_WOMAN_2"></a><div class="cp">;============================================================================
; TODO
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9f70]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9f70]
;
</div><span class="l"><a class="anc" name="a0c9" href="#a0c9">[a0c9]</a><a href="#ISCRIPT_EOLIS_WALKING_WOMAN_2" class="la">ISCRIPT_EOLIS_WALKING_WOMAN_2:</a><span class="ce">; [$a0c9]</span></span>
<span class="l"><a class="anc" name="a0c9" href="#a0c9">[a0c9]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_GENERIC</span></span><span class="ce">; Show a generic text box.</span></span>
<span class="l"><a class="anc" name="a0ca" href="#a0ca">[a0ca]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_CHECK_GOLD</span></span><span class="ce">; Check if the player has any gold.</span></span>
<span class="l"><a class="anc" name="a0cb" href="#a0cb">[a0cb]</a><span class="cd"><span class="i">dw</span> <span class="o">$a0d0</span></span><span class="ce">; If yes, jump.</span></span>
<span class="l"><a class="anc" name="a0cd" href="#a0cd">[a0cd]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Else, show <a href="PRG13.html#MESSAGE_LAST_WELL_ALMOST_DRY">MESSAGE_LAST_WELL_ALMOST_DRY</a>.</span></span>
<span class="l"><a class="anc" name="a0ce" href="#a0ce">[a0ce]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_LAST_WELL_ALMOST_DRY</span></span><span class="ce">; [$a0ce] Message</span></span>
<span class="l"><a class="anc" name="a0cf" href="#a0cf">[a0cf]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<a name=":a0d0:@_ISCRIPT_A0C9_HAS_GOLD"></a><span class="l"><a class="anc" name="a0d0" href="#a0d0">[a0d0]</a><a href="#:a0d0:@_ISCRIPT_A0C9_HAS_GOLD" class="lla">@_ISCRIPT_A0C9_HAS_GOLD:</a><span class="ce">; [$a0d0]</span></span>
<span class="l"><a class="anc" name="a0d0" href="#a0d0">[a0d0]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_THIS_IS_FOREPAW">MESSAGE_THIS_IS_FOREPAW</a>.</span></span>
<span class="l"><a class="anc" name="a0d1" href="#a0d1">[a0d1]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_THIS_IS_FOREPAW</span></span><span class="ce">; [$a0d1] Message</span></span>
<span class="l"><a class="anc" name="a0d2" href="#a0d2">[a0d2]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_EOLIS_SMOKING_MAN"></a><div class="cp">;============================================================================
; Interaction with the smoking man in Eolis.
;
; If the player has any gold, they'll be asked if they
; have a weapon.
;
; If they don't have gold, they'll be told that there
; are dwarves here in town.
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9f71]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9f71]
;
</div><span class="l"><a class="anc" name="a0d3" href="#a0d3">[a0d3]</a><a href="#ISCRIPT_EOLIS_SMOKING_MAN" class="la">ISCRIPT_EOLIS_SMOKING_MAN:</a><span class="ce">; [$a0d3]</span></span>
<span class="l"><a class="anc" name="a0d3" href="#a0d3">[a0d3]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_GENERIC</span></span><span class="ce">; Show a generic text box.</span></span>
<span class="l"><a class="anc" name="a0d4" href="#a0d4">[a0d4]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_CHECK_GOLD</span></span><span class="ce">; Check if the player has any gold.</span></span>
<span class="l"><a class="anc" name="a0d5" href="#a0d5">[a0d5]</a><span class="cd"><span class="i">dw</span> <span class="o">$a0da</span></span><span class="ce">; If yes, jump.</span></span>
<span class="l"><a class="anc" name="a0d7" href="#a0d7">[a0d7]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Else, show <a href="PRG13.html#MESSAGE_DWARVES_ARE_HERE">MESSAGE_DWARVES_ARE_HERE</a>.</span></span>
<span class="l"><a class="anc" name="a0d8" href="#a0d8">[a0d8]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_DWARVES_ARE_HERE</span></span><span class="ce">; [$a0d8] Message</span></span>
<span class="l"><a class="anc" name="a0d9" href="#a0d9">[a0d9]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<a name=":a0da:@_ISCRIPT_NPC_SMOKING_MAN_HAS_GOLD"></a><span class="l"><a class="anc" name="a0da" href="#a0da">[a0da]</a><a href="#:a0da:@_ISCRIPT_NPC_SMOKING_MAN_HAS_GOLD" class="lla">@_ISCRIPT_NPC_SMOKING_MAN_HAS_GOLD:</a><span class="ce">; [$a0da]</span></span>
<span class="l"><a class="anc" name="a0da" href="#a0da">[a0da]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_DO_YOU_HAVE_WEAPON">MESSAGE_DO_YOU_HAVE_WEAPON</a>.</span></span>
<span class="l"><a class="anc" name="a0db" href="#a0db">[a0db]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_DO_YOU_HAVE_WEAPON</span></span><span class="ce">; [$a0db] Message</span></span>
<span class="l"><a class="anc" name="a0dc" href="#a0dc">[a0dc]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_EOLIS_KINGS_GUARD"></a><div class="cp">;============================================================================
; Interaction with the King's guard.
;
; If the player does not have the Ring of Elf, he'll
; say the player can't go in.
;
; If the player does have it, but no gold, he'll say the
; King is waiting.
;
; If they have the ring and gold, he'll wish the player
; luck.
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9f72]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9f72]
;
</div><span class="l"><a class="anc" name="a0dd" href="#a0dd">[a0dd]</a><a href="#ISCRIPT_EOLIS_KINGS_GUARD" class="la">ISCRIPT_EOLIS_KINGS_GUARD:</a><span class="ce">; [$a0dd]</span></span>
<span class="l"><a class="anc" name="a0dd" href="#a0dd">[a0dd]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_GENERIC</span></span><span class="ce">; Show a generic text box.</span></span>
<span class="l"><a class="anc" name="a0de" href="#a0de">[a0de]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_CHECK_FOR_ITEM</span></span><span class="ce">; Check if the player has the Ring of Elf.</span></span>
<span class="l"><a class="anc" name="a0df" href="#a0df">[a0df]</a><span class="cd"><span class="i">db</span> <span class="o">SPECIAL_RING_OF_ELF</span></span><span class="ce">; [$a0df] InventoryItem</span></span>
<span class="l"><a class="anc" name="a0e0" href="#a0e0">[a0e0]</a><span class="cd"><span class="i">dw</span> <span class="o">$a0e5</span></span><span class="ce">; If yes, jump.</span></span>
<span class="l"><a class="anc" name="a0e2" href="#a0e2">[a0e2]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Else, show <a href="PRG13.html#MESSAGE_CANT_LET_YOU_GO">MESSAGE_CANT_LET_YOU_GO</a>.</span></span>
<span class="l"><a class="anc" name="a0e3" href="#a0e3">[a0e3]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_CANT_LET_YOU_GO</span></span><span class="ce">; [$a0e3] Message</span></span>
<span class="l"><a class="anc" name="a0e4" href="#a0e4">[a0e4]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<a name=":a0e5:@_ISCRIPT_KINGS_GUARD_HAS_RING"></a><span class="l"><a class="anc" name="a0e5" href="#a0e5">[a0e5]</a><a href="#:a0e5:@_ISCRIPT_KINGS_GUARD_HAS_RING" class="lla">@_ISCRIPT_KINGS_GUARD_HAS_RING:</a><span class="ce">; [$a0e5]</span></span>
<span class="l"><a class="anc" name="a0e5" href="#a0e5">[a0e5]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_CHECK_GOLD</span></span><span class="ce">; Check if the player has any gold.</span></span>
<span class="l"><a class="anc" name="a0e6" href="#a0e6">[a0e6]</a><span class="cd"><span class="i">dw</span> <span class="o">$a0eb</span></span><span class="ce">; If yes, then jump.</span></span>
<span class="l"><a class="anc" name="a0e8" href="#a0e8">[a0e8]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Else, show <a href="PRG13.html#MESSAGE_KING_IS_WAITING">MESSAGE_KING_IS_WAITING</a>.</span></span>
<span class="l"><a class="anc" name="a0e9" href="#a0e9">[a0e9]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_KING_IS_WAITING</span></span><span class="ce">; [$a0e9] Message</span></span>
<span class="l"><a class="anc" name="a0ea" href="#a0ea">[a0ea]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<a name=":a0eb:@_ISCRIPT_KINGS_GUARD_HAS_GOLD"></a><span class="l"><a class="anc" name="a0eb" href="#a0eb">[a0eb]</a><a href="#:a0eb:@_ISCRIPT_KINGS_GUARD_HAS_GOLD" class="lla">@_ISCRIPT_KINGS_GUARD_HAS_GOLD:</a><span class="ce">; [$a0eb]</span></span>
<span class="l"><a class="anc" name="a0eb" href="#a0eb">[a0eb]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_GOOD_LUCK">MESSAGE_GOOD_LUCK</a>.</span></span>
<span class="l"><a class="anc" name="a0ec" href="#a0ec">[a0ec]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_GOOD_LUCK</span></span><span class="ce">; [$a0ec] Message</span></span>
<span class="l"><a class="anc" name="a0ed" href="#a0ed">[a0ed]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_A0EE"></a><div class="cp">;============================================================================
; TODO
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9f74]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9f74]
;
</div><span class="l"><a class="anc" name="a0ee" href="#a0ee">[a0ee]</a><a href="#ISCRIPT_A0EE" class="la">ISCRIPT_A0EE:</a><span class="ce">; [$a0ee]</span></span>
<span class="l"><a class="anc" name="a0ee" href="#a0ee">[a0ee]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_GENERIC</span></span><span class="ce">; Show a generic text box.</span></span>
<span class="l"><a class="anc" name="a0ef" href="#a0ef">[a0ef]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_CHECK_GOLD</span></span><span class="ce">; Check if the player has any gold.</span></span>
<span class="l"><a class="anc" name="a0f0" href="#a0f0">[a0f0]</a><span class="cd"><span class="i">dw</span> <span class="o">$a0f5</span></span><span class="ce">; If yes, jump.</span></span>
<span class="l"><a class="anc" name="a0f2" href="#a0f2">[a0f2]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Else, show <a href="PRG13.html#MESSAGE_DWARVES_ROBBING_ELVES">MESSAGE_DWARVES_ROBBING_ELVES</a>.</span></span>
<span class="l"><a class="anc" name="a0f3" href="#a0f3">[a0f3]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_DWARVES_ROBBING_ELVES</span></span><span class="ce">; [$a0f3] Message</span></span>
<span class="l"><a class="anc" name="a0f4" href="#a0f4">[a0f4]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<a name=":a0f5:@_ISCRIPT_A0EE_HAS_GOLD"></a><span class="l"><a class="anc" name="a0f5" href="#a0f5">[a0f5]</a><a href="#:a0f5:@_ISCRIPT_A0EE_HAS_GOLD" class="lla">@_ISCRIPT_A0EE_HAS_GOLD:</a><span class="ce">; [$a0f5]</span></span>
<span class="l"><a class="anc" name="a0f5" href="#a0f5">[a0f5]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_METEORITE_EXPOSITION">MESSAGE_METEORITE_EXPOSITION</a>.</span></span>
<span class="l"><a class="anc" name="a0f6" href="#a0f6">[a0f6]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_METEORITE_EXPOSITION</span></span><span class="ce">; [$a0f6] Message</span></span>
<span class="l"><a class="anc" name="a0f7" href="#a0f7">[a0f7]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_A0F8"></a><div class="cp">;============================================================================
; TODO
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9f75]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9f75]
;
</div><span class="l"><a class="anc" name="a0f8" href="#a0f8">[a0f8]</a><a href="#ISCRIPT_A0F8" class="la">ISCRIPT_A0F8:</a><span class="ce">; [$a0f8]</span></span>
<span class="l"><a class="anc" name="a0f8" href="#a0f8">[a0f8]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_GENERIC</span></span><span class="ce">; Show a generic text box.</span></span>
<span class="l"><a class="anc" name="a0f9" href="#a0f9">[a0f9]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_CHECK_GOLD</span></span><span class="ce">; Check if the player has any gold.</span></span>
<span class="l"><a class="anc" name="a0fa" href="#a0fa">[a0fa]</a><span class="cd"><span class="i">dw</span> <span class="o">$a0ff</span></span><span class="ce">; If yes, jump.</span></span>
<span class="l"><a class="anc" name="a0fc" href="#a0fc">[a0fc]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Else, show <a href="PRG13.html#MESSAGE_LISTEN_TO_PEOPLE">MESSAGE_LISTEN_TO_PEOPLE</a>.</span></span>
<span class="l"><a class="anc" name="a0fd" href="#a0fd">[a0fd]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_LISTEN_TO_PEOPLE</span></span><span class="ce">; [$a0fd] Message</span></span>
<span class="l"><a class="anc" name="a0fe" href="#a0fe">[a0fe]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<a name=":a0ff:@_ISCRIPT_A0F8_HAS_GOLD"></a><span class="l"><a class="anc" name="a0ff" href="#a0ff">[a0ff]</a><a href="#:a0ff:@_ISCRIPT_A0F8_HAS_GOLD" class="lla">@_ISCRIPT_A0F8_HAS_GOLD:</a><span class="ce">; [$a0ff]</span></span>
<span class="l"><a class="anc" name="a0ff" href="#a0ff">[a0ff]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_DONT_TRY_TOO_HARD_2">MESSAGE_DONT_TRY_TOO_HARD_2</a>.</span></span>
<span class="l"><a class="anc" name="a100" href="#a100">[a100]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_DONT_TRY_TOO_HARD_2</span></span><span class="ce">; [$a100] Message</span></span>
<span class="l"><a class="anc" name="a101" href="#a101">[a101]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_EOLIS_MARTIAL_ARTIST"></a><div class="cp">;============================================================================
; Interaction with the Eolis Martial Artist.
;
; The player will be offered 40HP for 200G.
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9f7a]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9f7a]
;
</div><span class="l"><a class="anc" name="a102" href="#a102">[a102]</a><a href="#ISCRIPT_EOLIS_MARTIAL_ARTIST" class="la">ISCRIPT_EOLIS_MARTIAL_ARTIST:</a><span class="ce">; [$a102]</span></span>
<span class="l"><a class="anc" name="a102" href="#a102">[a102]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_MARTIAL_ARTIST</span></span><span class="ce">; Show a Martial Artist portrait text box.</span></span>
<span class="l"><a class="anc" name="a103" href="#a103">[a103]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_QUESTION_MESSAGE</span></span><span class="ce">; Show a dismissible <a href="PRG13.html#MESSAGE_MARTIAL_ARTS_200G">MESSAGE_MARTIAL_ARTS_200G</a>.</span></span>
<span class="l"><a class="anc" name="a104" href="#a104">[a104]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_MARTIAL_ARTS_200G</span></span><span class="ce">; [$a104] Message</span></span>
<span class="l"><a class="anc" name="a105" href="#a105">[a105]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_PAY_GOLD</span></span><span class="ce">; If not dismissed, pay 200G.</span></span>
<span class="l"><a class="anc" name="a106" href="#a106">[a106]</a><span class="cd"><span class="i">dw</span> <span class="o">$00c8</span></span><span class="ce">; [$a106] ushort</span></span>
<span class="l"></span>
<span class="l"><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_ADD_HP</span></span><span class="ce">; Add 40HP.</span></span>
<span class="l"><a class="anc" name="a109" href="#a109">[a109]</a><span class="cd"><span class="i">db</span> <span class="o">$28</span></span><span class="ce">; [$a109] byte</span></span>
<span class="l"></span>
<span class="l"><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_A10B"></a><div class="cp">;============================================================================
; TODO
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9f7b]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9f7b]
;
</div><span class="l"><a class="anc" name="a10b" href="#a10b">[a10b]</a><a href="#ISCRIPT_A10B" class="la">ISCRIPT_A10B:</a><span class="ce">; [$a10b]</span></span>
<span class="l"><a class="anc" name="a10b" href="#a10b">[a10b]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_GENERIC</span></span><span class="ce">; Show a generic text box.</span></span>
<span class="l"><a class="anc" name="a10c" href="#a10c">[a10c]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_CHECK_FOR_ITEM</span></span><span class="ce">; Check if the player has the Small Shield.</span></span>
<span class="l"><a class="anc" name="a10d" href="#a10d">[a10d]</a><span class="cd"><span class="i">db</span> <span class="o">SHIELD_SMALL</span></span><span class="ce">; [$a10d] InventoryItem</span></span>
<span class="l"><a class="anc" name="a10e" href="#a10e">[a10e]</a><span class="cd"><span class="i">dw</span> <span class="o">$a113</span></span><span class="ce">; If yes, jump.</span></span>
<span class="l"><a class="anc" name="a110" href="#a110">[a110]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Else, show <a href="PRG13.html#MESSAGE_WELCOME_TO_APOLUNE">MESSAGE_WELCOME_TO_APOLUNE</a>.</span></span>
<span class="l"><a class="anc" name="a111" href="#a111">[a111]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_WELCOME_TO_APOLUNE</span></span><span class="ce">; [$a111] Message</span></span>
<span class="l"><a class="anc" name="a112" href="#a112">[a112]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<a name=":a113:@_ISCRIPT_A10B_HAS_SMALL_SHIELD"></a><span class="l"><a class="anc" name="a113" href="#a113">[a113]</a><a href="#:a113:@_ISCRIPT_A10B_HAS_SMALL_SHIELD" class="lla">@_ISCRIPT_A10B_HAS_SMALL_SHIELD:</a><span class="ce">; [$a113]</span></span>
<span class="l"><a class="anc" name="a113" href="#a113">[a113]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_DIRECTIONS_FOREPAW">MESSAGE_DIRECTIONS_FOREPAW</a>.</span></span>
<span class="l"><a class="anc" name="a114" href="#a114">[a114]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_DIRECTIONS_FOREPAW</span></span><span class="ce">; [$a114] Message</span></span>
<span class="l"><a class="anc" name="a115" href="#a115">[a115]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_A116"></a><div class="cp">;============================================================================
; TODO
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9f7c]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9f7c]
;
</div><span class="l"><a class="anc" name="a116" href="#a116">[a116]</a><a href="#ISCRIPT_A116" class="la">ISCRIPT_A116:</a><span class="ce">; [$a116]</span></span>
<span class="l"><a class="anc" name="a116" href="#a116">[a116]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_GENERIC</span></span><span class="ce">; Show a generic text box.</span></span>
<span class="l"><a class="anc" name="a117" href="#a117">[a117]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_CHECK_FOR_ITEM</span></span><span class="ce">; Check if the player has the Small Shield.</span></span>
<span class="l"><a class="anc" name="a118" href="#a118">[a118]</a><span class="cd"><span class="i">db</span> <span class="o">SHIELD_SMALL</span></span><span class="ce">; [$a118] InventoryItem</span></span>
<span class="l"><a class="anc" name="a119" href="#a119">[a119]</a><span class="cd"><span class="i">dw</span> <span class="o">$a11e</span></span><span class="ce">; If yes, jump.</span></span>
<span class="l"><a class="anc" name="a11b" href="#a11b">[a11b]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Else, show <a href="PRG13.html#MESSAGE_DIRECTIONS_TO_TRUNK">MESSAGE_DIRECTIONS_TO_TRUNK</a>.</span></span>
<span class="l"><a class="anc" name="a11c" href="#a11c">[a11c]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_DIRECTIONS_TO_TRUNK</span></span><span class="ce">; [$a11c] Message</span></span>
<span class="l"><a class="anc" name="a11d" href="#a11d">[a11d]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<a name=":a11e:@_ISCRIPT_A116_HAS_SMALL_SHIELD"></a><span class="l"><a class="anc" name="a11e" href="#a11e">[a11e]</a><a href="#:a11e:@_ISCRIPT_A116_HAS_SMALL_SHIELD" class="lla">@_ISCRIPT_A116_HAS_SMALL_SHIELD:</a><span class="ce">; [$a11e]</span></span>
<span class="l"><a class="anc" name="a11e" href="#a11e">[a11e]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_GOOD_LUCK_2">MESSAGE_GOOD_LUCK_2</a>.</span></span>
<span class="l"><a class="anc" name="a11f" href="#a11f">[a11f]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_GOOD_LUCK_2</span></span><span class="ce">; [$a11f] Message</span></span>
<span class="l"><a class="anc" name="a120" href="#a120">[a120]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_A121"></a><div class="cp">;============================================================================
; TODO
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9f7d]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9f7d]
;
</div><span class="l"><a class="anc" name="a121" href="#a121">[a121]</a><a href="#ISCRIPT_A121" class="la">ISCRIPT_A121:</a><span class="ce">; [$a121]</span></span>
<span class="l"><a class="anc" name="a121" href="#a121">[a121]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_GENERIC</span></span><span class="ce">; Show a generic text box.</span></span>
<span class="l"><a class="anc" name="a122" href="#a122">[a122]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_CHECK_FOR_ITEM</span></span><span class="ce">; Check if the player has the Small Shield.</span></span>
<span class="l"><a class="anc" name="a123" href="#a123">[a123]</a><span class="cd"><span class="i">db</span> <span class="o">SHIELD_SMALL</span></span><span class="ce">; [$a123] InventoryItem</span></span>
<span class="l"><a class="anc" name="a124" href="#a124">[a124]</a><span class="cd"><span class="i">dw</span> <span class="o">$a129</span></span><span class="ce">; If yes, jump.</span></span>
<span class="l"><a class="anc" name="a126" href="#a126">[a126]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Else, show <a href="PRG13.html#MESSAGE_SHOULD_HAVE_SHIELD">MESSAGE_SHOULD_HAVE_SHIELD</a>.</span></span>
<span class="l"><a class="anc" name="a127" href="#a127">[a127]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_SHOULD_HAVE_SHIELD</span></span><span class="ce">; [$a127] Message</span></span>
<span class="l"><a class="anc" name="a128" href="#a128">[a128]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<a name=":a129:@_ISCRIPT_A121_HAS_SMALL_SHIELD"></a><span class="l"><a class="anc" name="a129" href="#a129">[a129]</a><a href="#:a129:@_ISCRIPT_A121_HAS_SMALL_SHIELD" class="lla">@_ISCRIPT_A121_HAS_SMALL_SHIELD:</a><span class="ce">; [$a129]</span></span>
<span class="l"><a class="anc" name="a129" href="#a129">[a129]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_MATTOCK_IN_TOWER">MESSAGE_MATTOCK_IN_TOWER</a>.</span></span>
<span class="l"><a class="anc" name="a12a" href="#a12a">[a12a]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_MATTOCK_IN_TOWER</span></span><span class="ce">; [$a12a] Message</span></span>
<span class="l"><a class="anc" name="a12b" href="#a12b">[a12b]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_A12C"></a><div class="cp">;============================================================================
; TODO
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9f7e]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9f7e]
;
</div><span class="l"><a class="anc" name="a12c" href="#a12c">[a12c]</a><a href="#ISCRIPT_A12C" class="la">ISCRIPT_A12C:</a><span class="ce">; [$a12c]</span></span>
<span class="l"><a class="anc" name="a12c" href="#a12c">[a12c]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_GENERIC</span></span><span class="ce">; Show a generic text box.</span></span>
<span class="l"><a class="anc" name="a12d" href="#a12d">[a12d]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_CHECK_FOR_ITEM</span></span><span class="ce">; Check if the player has the Small Shield.</span></span>
<span class="l"><a class="anc" name="a12e" href="#a12e">[a12e]</a><span class="cd"><span class="i">db</span> <span class="o">SHIELD_SMALL</span></span><span class="ce">; [$a12e] InventoryItem</span></span>
<span class="l"><a class="anc" name="a12f" href="#a12f">[a12f]</a><span class="cd"><span class="i">dw</span> <span class="o">$a134</span></span><span class="ce">; If yes, jump.</span></span>
<span class="l"><a class="anc" name="a131" href="#a131">[a131]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Else, show <a href="PRG13.html#MESSAGE_BLOCKED_PASSAGE">MESSAGE_BLOCKED_PASSAGE</a>.</span></span>
<span class="l"><a class="anc" name="a132" href="#a132">[a132]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_BLOCKED_PASSAGE</span></span><span class="ce">; [$a132] Message</span></span>
<span class="l"><a class="anc" name="a133" href="#a133">[a133]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<a name=":a134:@_ISCRIPT_A12C_HAS_SMALL_SHIELD"></a><span class="l"><a class="anc" name="a134" href="#a134">[a134]</a><a href="#:a134:@_ISCRIPT_A12C_HAS_SMALL_SHIELD" class="lla">@_ISCRIPT_A12C_HAS_SMALL_SHIELD:</a><span class="ce">; [$a134]</span></span>
<span class="l"><a class="anc" name="a134" href="#a134">[a134]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_MATTOCK_BREAKS_WALL">MESSAGE_MATTOCK_BREAKS_WALL</a>.</span></span>
<span class="l"><a class="anc" name="a135" href="#a135">[a135]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_MATTOCK_BREAKS_WALL</span></span><span class="ce">; [$a135] Message</span></span>
<span class="l"><a class="anc" name="a136" href="#a136">[a136]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_A137"></a><div class="cp">;============================================================================
; TODO
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9f7f]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9f7f]
;
</div><span class="l"><a class="anc" name="a137" href="#a137">[a137]</a><a href="#ISCRIPT_A137" class="la">ISCRIPT_A137:</a><span class="ce">; [$a137]</span></span>
<span class="l"><a class="anc" name="a137" href="#a137">[a137]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_GENERIC</span></span><span class="ce">; Show a generic text box.</span></span>
<span class="l"><a class="anc" name="a138" href="#a138">[a138]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_YOU_NEED_KEY">MESSAGE_YOU_NEED_KEY</a>.</span></span>
<span class="l"><a class="anc" name="a139" href="#a139">[a139]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_YOU_NEED_KEY</span></span><span class="ce">; [$a139] Message</span></span>
<span class="l"><a class="anc" name="a13a" href="#a13a">[a13a]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_A13B"></a><div class="cp">;============================================================================
; TODO
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9f81]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9f81]
;
</div><span class="l"><a class="anc" name="a13b" href="#a13b">[a13b]</a><a href="#ISCRIPT_A13B" class="la">ISCRIPT_A13B:</a><span class="ce">; [$a13b]</span></span>
<span class="l"><a class="anc" name="a13b" href="#a13b">[a13b]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_NURSE</span></span><span class="ce">; [$a13b] IScriptEntity</span></span>
<span class="l"><a class="anc" name="a13c" href="#a13c">[a13c]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_CHECK_FOR_ITEM</span></span><span class="ce">; Check if the player has the Small Shield.</span></span>
<span class="l"><a class="anc" name="a13d" href="#a13d">[a13d]</a><span class="cd"><span class="i">db</span> <span class="o">SHIELD_SMALL</span></span><span class="ce">; [$a13d] InventoryItem</span></span>
<span class="l"><a class="anc" name="a13e" href="#a13e">[a13e]</a><span class="cd"><span class="i">dw</span> <span class="o">$a143</span></span><span class="ce">; If yes, jump.</span></span>
<span class="l"><a class="anc" name="a140" href="#a140">[a140]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_DOCTOR_CAN_HELP">MESSAGE_DOCTOR_CAN_HELP</a>.</span></span>
<span class="l"><a class="anc" name="a141" href="#a141">[a141]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_DOCTOR_CAN_HELP</span></span><span class="ce">; [$a141] Message</span></span>
<span class="l"><a class="anc" name="a142" href="#a142">[a142]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<a name=":a143:@_ISCRIPT_A13B_HAS_SMALL_SHIELD"></a><span class="l"><a class="anc" name="a143" href="#a143">[a143]</a><a href="#:a143:@_ISCRIPT_A13B_HAS_SMALL_SHIELD" class="lla">@_ISCRIPT_A13B_HAS_SMALL_SHIELD:</a><span class="ce">; [$a143]</span></span>
<span class="l"><a class="anc" name="a143" href="#a143">[a143]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_POISON_IS_BAD">MESSAGE_POISON_IS_BAD</a>.</span></span>
<span class="l"><a class="anc" name="a144" href="#a144">[a144]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_POISON_IS_BAD</span></span><span class="ce">; [$a144] Message</span></span>
<span class="l"><a class="anc" name="a145" href="#a145">[a145]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_A146"></a><div class="cp">;============================================================================
; TODO
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9f82]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9f82]
;
</div><span class="l"><a class="anc" name="a146" href="#a146">[a146]</a><a href="#ISCRIPT_A146" class="la">ISCRIPT_A146:</a><span class="ce">; [$a146]</span></span>
<span class="l"><a class="anc" name="a146" href="#a146">[a146]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_GENERIC</span></span><span class="ce">; Show a generic text box.</span></span>
<span class="l"><a class="anc" name="a147" href="#a147">[a147]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_CHECK_PLAYER_RANK</span></span><span class="ce">; Check if the player has reached Aspirant yet.</span></span>
<span class="l"><a class="anc" name="a148" href="#a148">[a148]</a><span class="cd"><span class="i">db</span> <span class="o">RANK_ASPIRANT</span></span><span class="ce">; [$a148] PlayerTitle</span></span>
<span class="l"><a class="anc" name="a149" href="#a149">[a149]</a><span class="cd"><span class="i">dw</span> <span class="o">$a14e</span></span><span class="ce">; If yes, jump.</span></span>
<span class="l"><a class="anc" name="a14b" href="#a14b">[a14b]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Else, show <a href="PRG13.html#MESSAGE_LEARN_MANTRAS">MESSAGE_LEARN_MANTRAS</a>.</span></span>
<span class="l"><a class="anc" name="a14c" href="#a14c">[a14c]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_LEARN_MANTRAS</span></span><span class="ce">; [$a14c] Message</span></span>
<span class="l"><a class="anc" name="a14d" href="#a14d">[a14d]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<a name=":a14e:@_ISCRIPT_A146_HAS_ASPIRANT"></a><span class="l"><a class="anc" name="a14e" href="#a14e">[a14e]</a><a href="#:a14e:@_ISCRIPT_A146_HAS_ASPIRANT" class="lla">@_ISCRIPT_A146_HAS_ASPIRANT:</a><span class="ce">; [$a14e]</span></span>
<span class="l"><a class="anc" name="a14e" href="#a14e">[a14e]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_SECRET_GURU_IN_TOWER">MESSAGE_SECRET_GURU_IN_TOWER</a>.</span></span>
<span class="l"><a class="anc" name="a14f" href="#a14f">[a14f]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_SECRET_GURU_IN_TOWER</span></span><span class="ce">; [$a14f] Message</span></span>
<span class="l"><a class="anc" name="a150" href="#a150">[a150]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_A151"></a><div class="cp">;============================================================================
; TODO
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9f83]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9f83]
;
</div><span class="l"><a class="anc" name="a151" href="#a151">[a151]</a><a href="#ISCRIPT_A151" class="la">ISCRIPT_A151:</a><span class="ce">; [$a151]</span></span>
<span class="l"><a class="anc" name="a151" href="#a151">[a151]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_GENERIC</span></span><span class="ce">; Show a generic text box.</span></span>
<span class="l"><a class="anc" name="a152" href="#a152">[a152]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_CARRY_ITEMS">MESSAGE_CARRY_ITEMS</a>.</span></span>
<span class="l"><a class="anc" name="a153" href="#a153">[a153]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_CARRY_ITEMS</span></span><span class="ce">; [$a153] Message</span></span>
<span class="l"><a class="anc" name="a154" href="#a154">[a154]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_A155"></a><div class="cp">;============================================================================
; An empty interaction.
;
; This immediately terminates.
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9f86]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9f86]
;
</div><span class="l"><a class="anc" name="a155" href="#a155">[a155]</a><a href="#ISCRIPT_A155" class="la">ISCRIPT_A155:</a><span class="ce">; [$a155]</span></span>
<span class="l"><a class="anc" name="a155" href="#a155">[a155]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_GENERIC</span></span><span class="ce">; Show a generic text box.</span></span>
<span class="l"><a class="anc" name="a156" href="#a156">[a156]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_FOREPAW_GREETER"></a><div class="cp">;============================================================================
; TODO
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9f8b]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9f8b]
;
</div><span class="l"><a class="anc" name="a157" href="#a157">[a157]</a><a href="#ISCRIPT_FOREPAW_GREETER" class="la">ISCRIPT_FOREPAW_GREETER:</a><span class="ce">; [$a157]</span></span>
<span class="l"><a class="anc" name="a157" href="#a157">[a157]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_GENERIC</span></span><span class="ce">; Show a generic text box.</span></span>
<span class="l"><a class="anc" name="a158" href="#a158">[a158]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_CHECK_QUEST</span></span><span class="ce">; Check if the player has completed the Spring of Trunk quest.</span></span>
<span class="l"><a class="anc" name="a159" href="#a159">[a159]</a><span class="cd"><span class="i">db</span> <span class="o">QUEST_SPRING_OF_TRUNK</span></span><span class="ce">; [$a159] Quests</span></span>
<span class="l"><a class="anc" name="a15a" href="#a15a">[a15a]</a><span class="cd"><span class="i">dw</span> <span class="o">$a15f</span></span><span class="ce">; If yes, jump.</span></span>
<span class="l"><a class="anc" name="a15c" href="#a15c">[a15c]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Else, show <a href="PRG13.html#MESSAGE_WELCOME_TO_FOREPAW">MESSAGE_WELCOME_TO_FOREPAW</a>.</span></span>
<span class="l"><a class="anc" name="a15d" href="#a15d">[a15d]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_WELCOME_TO_FOREPAW</span></span><span class="ce">; [$a15d] Message</span></span>
<span class="l"><a class="anc" name="a15e" href="#a15e">[a15e]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<a name=":a15f:@_ISCRIPT_FOREPAW_GREETER_SPRING_OF_TRUNK_COMPLETE"></a><span class="l"><a class="anc" name="a15f" href="#a15f">[a15f]</a><a href="#:a15f:@_ISCRIPT_FOREPAW_GREETER_SPRING_OF_TRUNK_COMPLETE" class="lla">@_ISCRIPT_FOREPAW_GREETER_SPRING_OF_TRUNK_COMPLETE:</a><span class="ce">; [$a15f]</span></span>
<span class="l"><a class="anc" name="a15f" href="#a15f">[a15f]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_FOUNTAIN_WILL_FLOW_TO_TOWN">MESSAGE_FOUNTAIN_WILL_FLOW_TO_TOWN</a>.</span></span>
<span class="l"><a class="anc" name="a160" href="#a160">[a160]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_FOUNTAIN_WILL_FLOW_TO_TOWN</span></span><span class="ce">; [$a160] Message</span></span>
<span class="l"><a class="anc" name="a161" href="#a161">[a161]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_A162"></a><div class="cp">;============================================================================
; TODO
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9f8c]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9f8c]
;
</div><span class="l"><a class="anc" name="a162" href="#a162">[a162]</a><a href="#ISCRIPT_A162" class="la">ISCRIPT_A162:</a><span class="ce">; [$a162]</span></span>
<span class="l"><a class="anc" name="a162" href="#a162">[a162]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_GENERIC</span></span><span class="ce">; Show a generic text box.</span></span>
<span class="l"><a class="anc" name="a163" href="#a163">[a163]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_CHECK_FOR_ITEM</span></span><span class="ce">; Check if the player has the Ring of Ruby.</span></span>
<span class="l"><a class="anc" name="a164" href="#a164">[a164]</a><span class="cd"><span class="i">db</span> <span class="o">SPECIAL_RING_OF_RUBY</span></span><span class="ce">; [$a164] InventoryItem</span></span>
<span class="l"><a class="anc" name="a165" href="#a165">[a165]</a><span class="cd"><span class="i">dw</span> <span class="o">$a16a</span></span><span class="ce">; If yes, jump.</span></span>
<span class="l"><a class="anc" name="a167" href="#a167">[a167]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Else, show <a href="PRG13.html#MESSAGE_FIND_3_SPRINGS">MESSAGE_FIND_3_SPRINGS</a>.</span></span>
<span class="l"><a class="anc" name="a168" href="#a168">[a168]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_FIND_3_SPRINGS</span></span><span class="ce">; [$a168] Message</span></span>
<span class="l"><a class="anc" name="a169" href="#a169">[a169]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<a name=":a16a:@_ISCRIPT_A162_HAS_RING_OF_RUBY"></a><span class="l"><a class="anc" name="a16a" href="#a16a">[a16a]</a><a href="#:a16a:@_ISCRIPT_A162_HAS_RING_OF_RUBY" class="lla">@_ISCRIPT_A162_HAS_RING_OF_RUBY:</a><span class="ce">; [$a16a]</span></span>
<span class="l"><a class="anc" name="a16a" href="#a16a">[a16a]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_WATER_IS_FLOWING">MESSAGE_WATER_IS_FLOWING</a>.</span></span>
<span class="l"><a class="anc" name="a16b" href="#a16b">[a16b]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_WATER_IS_FLOWING</span></span><span class="ce">; [$a16b] Message</span></span>
<span class="l"><a class="anc" name="a16c" href="#a16c">[a16c]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_A16D"></a><div class="cp">;============================================================================
; TODO
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9f8d]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9f8d]
;
</div><span class="l"><a class="anc" name="a16d" href="#a16d">[a16d]</a><a href="#ISCRIPT_A16D" class="la">ISCRIPT_A16D:</a><span class="ce">; [$a16d]</span></span>
<span class="l"><a class="anc" name="a16d" href="#a16d">[a16d]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_GENERIC</span></span><span class="ce">; Show a generic text box.</span></span>
<span class="l"><a class="anc" name="a16e" href="#a16e">[a16e]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_CHECK_QUEST</span></span><span class="ce">; Check if the player has completed the Spring of Trunk quest.</span></span>
<span class="l"><a class="anc" name="a16f" href="#a16f">[a16f]</a><span class="cd"><span class="i">db</span> <span class="o">QUEST_SPRING_OF_TRUNK</span></span><span class="ce">; [$a16f] Quests</span></span>
<span class="l"><a class="anc" name="a170" href="#a170">[a170]</a><span class="cd"><span class="i">dw</span> <span class="o">$a175</span></span><span class="ce">; If yes, jump.</span></span>
<span class="l"><a class="anc" name="a172" href="#a172">[a172]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Else, show <a href="PRG13.html#MESSAGE_FOUNTAIN_IN_SKY">MESSAGE_FOUNTAIN_IN_SKY</a>.</span></span>
<span class="l"><a class="anc" name="a173" href="#a173">[a173]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_FOUNTAIN_IN_SKY</span></span><span class="ce">; [$a173] Message</span></span>
<span class="l"><a class="anc" name="a174" href="#a174">[a174]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<a name=":a175:@_ISCRIPT_A175"></a><span class="l"><a class="anc" name="a175" href="#a175">[a175]</a><a href="#:a175:@_ISCRIPT_A175" class="lla">@_ISCRIPT_A175:</a><span class="ce">; [$a175]</span></span>
<span class="l"><a class="anc" name="a175" href="#a175">[a175]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_PUSH_FOUNTAIN_ROCK">MESSAGE_PUSH_FOUNTAIN_ROCK</a>.</span></span>
<span class="l"><a class="anc" name="a176" href="#a176">[a176]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_PUSH_FOUNTAIN_ROCK</span></span><span class="ce">; [$a176] Message</span></span>
<span class="l"><a class="anc" name="a177" href="#a177">[a177]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_A178"></a><div class="cp">;============================================================================
; TODO
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9f8e]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9f8e]
;
</div><span class="l"><a class="anc" name="a178" href="#a178">[a178]</a><a href="#ISCRIPT_A178" class="la">ISCRIPT_A178:</a><span class="ce">; [$a178]</span></span>
<span class="l"><a class="anc" name="a178" href="#a178">[a178]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_NURSE</span></span><span class="ce">; [$a178] IScriptEntity</span></span>
<span class="l"><a class="anc" name="a179" href="#a179">[a179]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_CHECK_QUEST</span></span><span class="ce">; Check if the player has completed the Spring of Trunk quest.</span></span>
<span class="l"><a class="anc" name="a17a" href="#a17a">[a17a]</a><span class="cd"><span class="i">db</span> <span class="o">QUEST_SPRING_OF_TRUNK</span></span><span class="ce">; [$a17a] Quests</span></span>
<span class="l"><a class="anc" name="a17b" href="#a17b">[a17b]</a><span class="cd"><span class="i">dw</span> <span class="o">$a180</span></span><span class="ce">; If yes, jump.</span></span>
<span class="l"><a class="anc" name="a17d" href="#a17d">[a17d]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Else, show <a href="PRG13.html#MESSAGE_SPRING_IN_TOWER">MESSAGE_SPRING_IN_TOWER</a>.</span></span>
<span class="l"><a class="anc" name="a17e" href="#a17e">[a17e]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_SPRING_IN_TOWER</span></span><span class="ce">; [$a17e] Message</span></span>
<span class="l"><a class="anc" name="a17f" href="#a17f">[a17f]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<a name=":a180:@_ISCRIPT_A178_SPRING_OF_TRUNK_COMPLETED"></a><span class="l"><a class="anc" name="a180" href="#a180">[a180]</a><a href="#:a180:@_ISCRIPT_A178_SPRING_OF_TRUNK_COMPLETED" class="lla">@_ISCRIPT_A178_SPRING_OF_TRUNK_COMPLETED:</a><span class="ce">; [$a180]</span></span>
<span class="l"><a class="anc" name="a180" href="#a180">[a180]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_CHECK_QUEST</span></span><span class="ce">; Check if the player has completed the Spring of Sky quest.</span></span>
<span class="l"><a class="anc" name="a181" href="#a181">[a181]</a><span class="cd"><span class="i">db</span> <span class="o">QUEST_SPRING_OF_SKY</span></span><span class="ce">; [$a181] Quests</span></span>
<span class="l"><a class="anc" name="a182" href="#a182">[a182]</a><span class="cd"><span class="i">dw</span> <span class="o">$a187</span></span><span class="ce">; If yes, jump.</span></span>
<span class="l"><a class="anc" name="a184" href="#a184">[a184]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Else, show <a href="PRG13.html#MESSAGE_WINGBOOTS_IN_TOWER">MESSAGE_WINGBOOTS_IN_TOWER</a>.</span></span>
<span class="l"><a class="anc" name="a185" href="#a185">[a185]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_WINGBOOTS_IN_TOWER</span></span><span class="ce">; [$a185] Message</span></span>
<span class="l"><a class="anc" name="a186" href="#a186">[a186]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<a name=":a187:@_ISCRIPT_A178_SPRING_OF_SKY_COMPLETED"></a><span class="l"><a class="anc" name="a187" href="#a187">[a187]</a><a href="#:a187:@_ISCRIPT_A178_SPRING_OF_SKY_COMPLETED" class="lla">@_ISCRIPT_A178_SPRING_OF_SKY_COMPLETED:</a><span class="ce">; [$a187]</span></span>
<span class="l"><a class="anc" name="a187" href="#a187">[a187]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_DIRECTIONS_TO_MASCON">MESSAGE_DIRECTIONS_TO_MASCON</a>.</span></span>
<span class="l"><a class="anc" name="a188" href="#a188">[a188]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_DIRECTIONS_TO_MASCON</span></span><span class="ce">; [$a188] Message</span></span>
<span class="l"><a class="anc" name="a189" href="#a189">[a189]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_A18A"></a><div class="cp">;============================================================================
; TODO
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9f8f]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9f8f]
;
</div><span class="l"><a class="anc" name="a18a" href="#a18a">[a18a]</a><a href="#ISCRIPT_A18A" class="la">ISCRIPT_A18A:</a><span class="ce">; [$a18a]</span></span>
<span class="l"><a class="anc" name="a18a" href="#a18a">[a18a]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_GENERIC</span></span><span class="ce">; Show a generic text box.</span></span>
<span class="l"><a class="anc" name="a18b" href="#a18b">[a18b]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_CHECK_QUEST</span></span><span class="ce">; Check if the Spring of Sky quest is complete.</span></span>
<span class="l"><a class="anc" name="a18c" href="#a18c">[a18c]</a><span class="cd"><span class="i">db</span> <span class="o">QUEST_SPRING_OF_SKY</span></span><span class="ce">; [$a18c] Quests</span></span>
<span class="l"><a class="anc" name="a18d" href="#a18d">[a18d]</a><span class="cd"><span class="i">dw</span> <span class="o">$a192</span></span><span class="ce">; If yes, jump.</span></span>
<span class="l"><a class="anc" name="a18f" href="#a18f">[a18f]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Else, show <a href="PRG13.html#MESSAGE_FOUNTAIN_IN_SKY_HINT">MESSAGE_FOUNTAIN_IN_SKY_HINT</a>.</span></span>
<span class="l"><a class="anc" name="a190" href="#a190">[a190]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_FOUNTAIN_IN_SKY_HINT</span></span><span class="ce">; [$a190] Message</span></span>
<span class="l"><a class="anc" name="a191" href="#a191">[a191]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<a name=":a192:@_ISCRIPT_A18A_IS_COMPLETE"></a><span class="l"><a class="anc" name="a192" href="#a192">[a192]</a><a href="#:a192:@_ISCRIPT_A18A_IS_COMPLETE" class="lla">@_ISCRIPT_A18A_IS_COMPLETE:</a><span class="ce">; [$a192]</span></span>
<span class="l"><a class="anc" name="a192" href="#a192">[a192]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_CHECK_FOR_ITEM</span></span><span class="ce">; Check if the player has the Joker key.</span></span>
<span class="l"><a class="anc" name="a193" href="#a193">[a193]</a><span class="cd"><span class="i">db</span> <span class="o">KEY_JO</span></span><span class="ce">; [$a193] InventoryItem</span></span>
<span class="l"><a class="anc" name="a194" href="#a194">[a194]</a><span class="cd"><span class="i">dw</span> <span class="o">$a19b</span></span><span class="ce">; If yes, jump.</span></span>
<span class="l"><a class="anc" name="a196" href="#a196">[a196]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_UNSKIPPABLE_MESSAGE</span></span><span class="ce">; Else, show <a href="PRG13.html#MESSAGE_USE_THIS_KEY_FOR_FIRST_SPRING">MESSAGE_USE_THIS_KEY_FOR_FIRST_SPRING</a>.</span></span>
<span class="l"><a class="anc" name="a197" href="#a197">[a197]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_USE_THIS_KEY_FOR_FIRST_SPRING</span></span><span class="ce">; [$a197] Message</span></span>
<span class="l"><a class="anc" name="a198" href="#a198">[a198]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_ADD_ITEM</span></span><span class="ce">; Add the Joker key to the inventory.</span></span>
<span class="l"><a class="anc" name="a199" href="#a199">[a199]</a><span class="cd"><span class="i">db</span> <span class="o">KEY_JO</span></span><span class="ce">; [$a199] InventoryItem</span></span>
<span class="l"><a class="anc" name="a19a" href="#a19a">[a19a]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<a name=":a19b:@_ISCRIPT_A192_HAS_JOKER"></a><span class="l"><a class="anc" name="a19b" href="#a19b">[a19b]</a><a href="#:a19b:@_ISCRIPT_A192_HAS_JOKER" class="lla">@_ISCRIPT_A192_HAS_JOKER:</a><span class="ce">; [$a19b]</span></span>
<span class="l"><a class="anc" name="a19b" href="#a19b">[a19b]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_UNSKIPPABLE_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_GET_JOKER_OR_COME_BACK">MESSAGE_GET_JOKER_OR_COME_BACK</a>.</span></span>
<span class="l"><a class="anc" name="a19c" href="#a19c">[a19c]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_GET_JOKER_OR_COME_BACK</span></span><span class="ce">; [$a19c] Message</span></span>
<span class="l"><a class="anc" name="a19d" href="#a19d">[a19d]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_SPRING_OF_SKY"></a><div class="cp">;============================================================================
; Interaction with the Spring of Sky man.
;
; He's asleep. Must talk to him twice to wake him up, which
; completes that quest.
;
; With a second interaction, he'll tell you to find a key
; and reach the fountain.
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9f90]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9f90]
;
</div><span class="l"><a class="anc" name="a19e" href="#a19e">[a19e]</a><a href="#ISCRIPT_SPRING_OF_SKY" class="la">ISCRIPT_SPRING_OF_SKY:</a><span class="ce">; [$a19e]</span></span>
<span class="l"><a class="anc" name="a19e" href="#a19e">[a19e]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_GENERIC</span></span><span class="ce">; Show a generic text box.</span></span>
<span class="l"><a class="anc" name="a19f" href="#a19f">[a19f]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_CHECK_QUEST</span></span><span class="ce">; Check if the Spring of Sky quest is complete.</span></span>
<span class="l"><a class="anc" name="a1a0" href="#a1a0">[a1a0]</a><span class="cd"><span class="i">db</span> <span class="o">QUEST_SPRING_OF_SKY</span></span><span class="ce">; [$a1a0] Quests</span></span>
<span class="l"><a class="anc" name="a1a1" href="#a1a1">[a1a1]</a><span class="cd"><span class="i">dw</span> <span class="o">$a1a8</span></span><span class="ce">; If it has, jump.</span></span>
<span class="l"><a class="anc" name="a1a3" href="#a1a3">[a1a3]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_UNSKIPPABLE_MESSAGE</span></span><span class="ce">; Else, show <a href="PRG13.html#MESSAGE_HO_HO_HO_ZZZ">MESSAGE_HO_HO_HO_ZZZ</a>.</span></span>
<span class="l"><a class="anc" name="a1a4" href="#a1a4">[a1a4]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_HO_HO_HO_ZZZ</span></span><span class="ce">; [$a1a4] Message</span></span>
<span class="l"><a class="anc" name="a1a5" href="#a1a5">[a1a5]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SET_QUEST_COMPLETE</span></span><span class="ce">; Mark the Springs man as woken up.</span></span>
<span class="l"><a class="anc" name="a1a6" href="#a1a6">[a1a6]</a><span class="cd"><span class="i">db</span> <span class="o">QUEST_SPRING_OF_SKY</span></span><span class="ce">; [$a1a6] Quests</span></span>
<span class="l"><a class="anc" name="a1a7" href="#a1a7">[a1a7]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End</span></span>
<span class="l"></span>
<a name=":a1a8:@_ISCRIPT_SPRING_OF_SKY_IS_COMPLETE"></a><span class="l"><a class="anc" name="a1a8" href="#a1a8">[a1a8]</a><a href="#:a1a8:@_ISCRIPT_SPRING_OF_SKY_IS_COMPLETE" class="lla">@_ISCRIPT_SPRING_OF_SKY_IS_COMPLETE:</a><span class="ce">; [$a1a8]</span></span>
<span class="l"><a class="anc" name="a1a8" href="#a1a8">[a1a8]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_GET_KEY_FIND_FOUNTAIN">MESSAGE_GET_KEY_FIND_FOUNTAIN</a>.</span></span>
<span class="l"><a class="anc" name="a1a9" href="#a1a9">[a1a9]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_GET_KEY_FIND_FOUNTAIN</span></span><span class="ce">; [$a1a9] Message</span></span>
<span class="l"><a class="anc" name="a1aa" href="#a1aa">[a1aa]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_SPRING_OF_TRUNK"></a><div class="cp">;============================================================================
; Interaction with the Spring of Trunk man.
;
; If the quest was not complete, he'll explain that you
; need the Elixir. If the player already has it, it will
; get consumed and the quest will be complete. Otherwise,
; he'll say to come back with the medicine.
;
; If the quest was already complete, he'll say to find the
; poison in Mascon.
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9f91]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9f91]
;
</div><span class="l"><a class="anc" name="a1ab" href="#a1ab">[a1ab]</a><a href="#ISCRIPT_SPRING_OF_TRUNK" class="la">ISCRIPT_SPRING_OF_TRUNK:</a><span class="ce">; [$a1ab]</span></span>
<span class="l"><a class="anc" name="a1ab" href="#a1ab">[a1ab]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_GENERIC</span></span><span class="ce">; Show a generic text box.</span></span>
<span class="l"><a class="anc" name="a1ac" href="#a1ac">[a1ac]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_CHECK_QUEST</span></span><span class="ce">; Check if the Spring of Trunk quest is complete.</span></span>
<span class="l"><a class="anc" name="a1ad" href="#a1ad">[a1ad]</a><span class="cd"><span class="i">db</span> <span class="o">QUEST_SPRING_OF_TRUNK</span></span><span class="ce">; [$a1ad] Quests</span></span>
<span class="l"><a class="anc" name="a1ae" href="#a1ae">[a1ae]</a><span class="cd"><span class="i">dw</span> <span class="o">$a1c0</span></span><span class="ce">; If yes, jump.</span></span>
<span class="l"><a class="anc" name="a1b0" href="#a1b0">[a1b0]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_QUESTION_MESSAGE</span></span><span class="ce">; Else, show <a href="PRG13.html#MESSAGE_THIS_IS_SPRING_OF_TRUNK_GET_ELIXIR">MESSAGE_THIS_IS_SPRING_OF_TRUNK_GET_ELIXIR</a>.</span></span>
<span class="l"><a class="anc" name="a1b1" href="#a1b1">[a1b1]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_THIS_IS_SPRING_OF_TRUNK_GET_ELIXIR</span></span><span class="ce">; [$a1b1] Message</span></span>
<span class="l"><a class="anc" name="a1b2" href="#a1b2">[a1b2]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_CHECK_FOR_ITEM</span></span><span class="ce">; Check if the player has the Elixir.</span></span>
<span class="l"><a class="anc" name="a1b3" href="#a1b3">[a1b3]</a><span class="cd"><span class="i">db</span> <span class="o">SPECIAL_ELIXIR</span></span><span class="ce">; [$a1b3] InventoryItem</span></span>
<span class="l"><a class="anc" name="a1b4" href="#a1b4">[a1b4]</a><span class="cd"><span class="i">dw</span> <span class="o">$a1b9</span></span><span class="ce">; If yes, jump.</span></span>
<span class="l"><a class="anc" name="a1b6" href="#a1b6">[a1b6]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Else, show <a href="PRG13.html#MESSAGE_COME_BACK_WITH_MEDICINE">MESSAGE_COME_BACK_WITH_MEDICINE</a>.</span></span>
<span class="l"><a class="anc" name="a1b7" href="#a1b7">[a1b7]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_COME_BACK_WITH_MEDICINE</span></span><span class="ce">; [$a1b7] Message</span></span>
<span class="l"><a class="anc" name="a1b8" href="#a1b8">[a1b8]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<a name=":a1b9:@_ISCRIPT_SPRING_OF_TRUNK_HAS_ELIXIR"></a><span class="l"><a class="anc" name="a1b9" href="#a1b9">[a1b9]</a><a href="#:a1b9:@_ISCRIPT_SPRING_OF_TRUNK_HAS_ELIXIR" class="lla">@_ISCRIPT_SPRING_OF_TRUNK_HAS_ELIXIR:</a><span class="ce">; [$a1b9]</span></span>
<span class="l"><a class="anc" name="a1b9" href="#a1b9">[a1b9]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_UNSKIPPABLE_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_2_MORE_SPRINGS">MESSAGE_2_MORE_SPRINGS</a>.</span></span>
<span class="l"><a class="anc" name="a1ba" href="#a1ba">[a1ba]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_2_MORE_SPRINGS</span></span><span class="ce">; [$a1ba] Message</span></span>
<span class="l"><a class="anc" name="a1bb" href="#a1bb">[a1bb]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_CONSUME_ITEM</span></span><span class="ce">; Consume the player's Elixir.</span></span>
<span class="l"><a class="anc" name="a1bc" href="#a1bc">[a1bc]</a><span class="cd"><span class="i">db</span> <span class="o">SPECIAL_ELIXIR</span></span><span class="ce">; [$a1bc] InventoryItem</span></span>
<span class="l"><a class="anc" name="a1bd" href="#a1bd">[a1bd]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SET_QUEST_COMPLETE</span></span><span class="ce">; Mark the Spring of Trunk as complete.</span></span>
<span class="l"><a class="anc" name="a1be" href="#a1be">[a1be]</a><span class="cd"><span class="i">db</span> <span class="o">QUEST_SPRING_OF_TRUNK</span></span><span class="ce">; [$a1be] Quests</span></span>
<span class="l"><a class="anc" name="a1bf" href="#a1bf">[a1bf]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<a name=":a1c0:@_ISCRIPT_SPRING_OF_TRUNK_IS_COMPLETE"></a><span class="l"><a class="anc" name="a1c0" href="#a1c0">[a1c0]</a><a href="#:a1c0:@_ISCRIPT_SPRING_OF_TRUNK_IS_COMPLETE" class="lla">@_ISCRIPT_SPRING_OF_TRUNK_IS_COMPLETE:</a><span class="ce">; [$a1c0]</span></span>
<span class="l"><a class="anc" name="a1c0" href="#a1c0">[a1c0]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_FIND_POISON_IN_MASCON">MESSAGE_FIND_POISON_IN_MASCON</a>.</span></span>
<span class="l"><a class="anc" name="a1c1" href="#a1c1">[a1c1]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_FIND_POISON_IN_MASCON</span></span><span class="ce">; [$a1c1] Message</span></span>
<span class="l"><a class="anc" name="a1c2" href="#a1c2">[a1c2]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_A1C3"></a><div class="cp">;============================================================================
; TODO
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9f92]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9f92]
;
</div><span class="l"><a class="anc" name="a1c3" href="#a1c3">[a1c3]</a><a href="#ISCRIPT_A1C3" class="la">ISCRIPT_A1C3:</a><span class="ce">; [$a1c3]</span></span>
<span class="l"><a class="anc" name="a1c3" href="#a1c3">[a1c3]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_GENERIC</span></span><span class="ce">; Show a generic text box</span></span>
<span class="l"><a class="anc" name="a1c4" href="#a1c4">[a1c4]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_CHECK_QUEST</span></span><span class="ce">; Check if all spring quests are complete.</span></span>
<span class="l"><a class="anc" name="a1c5" href="#a1c5">[a1c5]</a><span class="cd"><span class="i">db</span> <span class="o">$03</span></span><span class="ce">; [$a1c5] Quests</span></span>
<span class="l"><a class="anc" name="a1c6" href="#a1c6">[a1c6]</a><span class="cd"><span class="i">dw</span> <span class="o">$a1cd</span></span><span class="ce">; If so, jump.</span></span>
<span class="l"><a class="anc" name="a1c8" href="#a1c8">[a1c8]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_UNSKIPPABLE_MESSAGE</span></span><span class="ce">; Else, show <a href="PRG13.html#MESSAGE_WILL_REVIVE_SPRING">MESSAGE_WILL_REVIVE_SPRING</a></span></span>
<span class="l"><a class="anc" name="a1c9" href="#a1c9">[a1c9]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_WILL_REVIVE_SPRING</span></span><span class="ce">; [$a1c9] Message</span></span>
<span class="l"><a class="anc" name="a1ca" href="#a1ca">[a1ca]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SET_QUEST_COMPLETE</span></span><span class="ce">; Mark all spring quests as complete.</span></span>
<span class="l"><a class="anc" name="a1cb" href="#a1cb">[a1cb]</a><span class="cd"><span class="i">db</span> <span class="o">$03</span></span><span class="ce">; [$a1cb] Quests</span></span>
<span class="l"><a class="anc" name="a1cc" href="#a1cc">[a1cc]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<a name=":a1cd:@_ISCRIPT_A1C3_COMPLETED_SPRINGS"></a><span class="l"><a class="anc" name="a1cd" href="#a1cd">[a1cd]</a><a href="#:a1cd:@_ISCRIPT_A1C3_COMPLETED_SPRINGS" class="lla">@_ISCRIPT_A1C3_COMPLETED_SPRINGS:</a><span class="ce">; [$a1cd]</span></span>
<span class="l"><a class="anc" name="a1cd" href="#a1cd">[a1cd]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_CHECK_FOR_ITEM</span></span><span class="ce">; Check if the player has the Ring of Ruby.</span></span>
<span class="l"><a class="anc" name="a1ce" href="#a1ce">[a1ce]</a><span class="cd"><span class="i">db</span> <span class="o">SPECIAL_RING_OF_RUBY</span></span><span class="ce">; [$a1ce] InventoryItem</span></span>
<span class="l"><a class="anc" name="a1cf" href="#a1cf">[a1cf]</a><span class="cd"><span class="i">dw</span> <span class="o">$a1d6</span></span><span class="ce">; If so, jump.</span></span>
<span class="l"><a class="anc" name="a1d1" href="#a1d1">[a1d1]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_UNSKIPPABLE_MESSAGE</span></span><span class="ce">; Else, show <a href="PRG13.html#MESSAGE_GIVING_RING_OF_RUBY">MESSAGE_GIVING_RING_OF_RUBY</a></span></span>
<span class="l"><a class="anc" name="a1d2" href="#a1d2">[a1d2]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_GIVING_RING_OF_RUBY</span></span><span class="ce">; [$a1d2] Message</span></span>
<span class="l"><a class="anc" name="a1d3" href="#a1d3">[a1d3]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_ADD_ITEM</span></span><span class="ce">; Give the player the Ring of Ruby.</span></span>
<span class="l"><a class="anc" name="a1d4" href="#a1d4">[a1d4]</a><span class="cd"><span class="i">db</span> <span class="o">SPECIAL_RING_OF_RUBY</span></span><span class="ce">; [$a1d4] InventoryItem</span></span>
<span class="l"><a class="anc" name="a1d5" href="#a1d5">[a1d5]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<a name=":a1d6:@_ISCRIPT_A1CD_HAS_RING_OF_RUBY"></a><span class="l"><a class="anc" name="a1d6" href="#a1d6">[a1d6]</a><a href="#:a1d6:@_ISCRIPT_A1CD_HAS_RING_OF_RUBY" class="lla">@_ISCRIPT_A1CD_HAS_RING_OF_RUBY:</a><span class="ce">; [$a1d6]</span></span>
<span class="l"><a class="anc" name="a1d6" href="#a1d6">[a1d6]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_TRUST_YOUR_POWER">MESSAGE_TRUST_YOUR_POWER</a></span></span>
<span class="l"><a class="anc" name="a1d7" href="#a1d7">[a1d7]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_TRUST_YOUR_POWER</span></span><span class="ce">; [$a1d7] Message</span></span>
<span class="l"><a class="anc" name="a1d8" href="#a1d8">[a1d8]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_A1D9"></a><div class="cp">;============================================================================
; TODO
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9f9b]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9f9b]
;
</div><span class="l"><a class="anc" name="a1d9" href="#a1d9">[a1d9]</a><a href="#ISCRIPT_A1D9" class="la">ISCRIPT_A1D9:</a><span class="ce">; [$a1d9]</span></span>
<span class="l"><a class="anc" name="a1d9" href="#a1d9">[a1d9]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_GENERIC</span></span><span class="ce">; Show a generic text box.</span></span>
<span class="l"><a class="anc" name="a1da" href="#a1da">[a1da]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_CHECK_FOR_ITEM</span></span><span class="ce">; Check if the player has the Large Shield.</span></span>
<span class="l"><a class="anc" name="a1db" href="#a1db">[a1db]</a><span class="cd"><span class="i">db</span> <span class="o">SHIELD_LARGE</span></span><span class="ce">; [$a1db] InventoryItem</span></span>
<span class="l"><a class="anc" name="a1dc" href="#a1dc">[a1dc]</a><span class="cd"><span class="i">dw</span> <span class="o">$a1e1</span></span><span class="ce">; If so, jump.</span></span>
<span class="l"><a class="anc" name="a1de" href="#a1de">[a1de]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Else, show <a href="PRG13.html#MESSAGE_WELCOME_TO_MASCON">MESSAGE_WELCOME_TO_MASCON</a></span></span>
<span class="l"><a class="anc" name="a1df" href="#a1df">[a1df]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_WELCOME_TO_MASCON</span></span><span class="ce">; [$a1df] Message</span></span>
<span class="l"><a class="anc" name="a1e0" href="#a1e0">[a1e0]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<a name=":a1e1:@_ISCRIPT_A1D9_HAS_LARGE_SHIELD"></a><span class="l"><a class="anc" name="a1e1" href="#a1e1">[a1e1]</a><a href="#:a1e1:@_ISCRIPT_A1D9_HAS_LARGE_SHIELD" class="lla">@_ISCRIPT_A1D9_HAS_LARGE_SHIELD:</a><span class="ce">; [$a1e1]</span></span>
<span class="l"><a class="anc" name="a1e1" href="#a1e1">[a1e1]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_PREPARE_BEFORE_FOREPAW">MESSAGE_PREPARE_BEFORE_FOREPAW</a>.</span></span>
<span class="l"><a class="anc" name="a1e2" href="#a1e2">[a1e2]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_PREPARE_BEFORE_FOREPAW</span></span><span class="ce">; [$a1e2] Message</span></span>
<span class="l"><a class="anc" name="a1e3" href="#a1e3">[a1e3]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_A1E4"></a><div class="cp">;============================================================================
; TODO
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9f9c]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9f9c]
;
</div><span class="l"><a class="anc" name="a1e4" href="#a1e4">[a1e4]</a><a href="#ISCRIPT_A1E4" class="la">ISCRIPT_A1E4:</a><span class="ce">; [$a1e4]</span></span>
<span class="l"><a class="anc" name="a1e4" href="#a1e4">[a1e4]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_GENERIC</span></span><span class="ce">; Show a generic text box.</span></span>
<span class="l"><a class="anc" name="a1e5" href="#a1e5">[a1e5]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_CHECK_FOR_ITEM</span></span><span class="ce">; Check if the player has the Pendant.</span></span>
<span class="l"><a class="anc" name="a1e6" href="#a1e6">[a1e6]</a><span class="cd"><span class="i">db</span> <span class="o">SPECIAL_PENDANT</span></span><span class="ce">; [$a1e6] InventoryItem</span></span>
<span class="l"><a class="anc" name="a1e7" href="#a1e7">[a1e7]</a><span class="cd"><span class="i">dw</span> <span class="o">$a1ec</span></span><span class="ce">; If so, jump.</span></span>
<span class="l"><a class="anc" name="a1e9" href="#a1e9">[a1e9]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Else, show <a href="PRG13.html#MESSAGE_METEORITE_BECOMES_POISON">MESSAGE_METEORITE_BECOMES_POISON</a></span></span>
<span class="l"><a class="anc" name="a1ea" href="#a1ea">[a1ea]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_METEORITE_BECOMES_POISON</span></span><span class="ce">; [$a1ea] Message</span></span>
<span class="l"><a class="anc" name="a1eb" href="#a1eb">[a1eb]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<a name=":a1ec:@_ISCRIPT_A1E4_HAS_PENDANT"></a><span class="l"><a class="anc" name="a1ec" href="#a1ec">[a1ec]</a><a href="#:a1ec:@_ISCRIPT_A1E4_HAS_PENDANT" class="lla">@_ISCRIPT_A1E4_HAS_PENDANT:</a><span class="ce">; [$a1ec]</span></span>
<span class="l"><a class="anc" name="a1ec" href="#a1ec">[a1ec]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_DID_YOU_GET_PENDANT">MESSAGE_DID_YOU_GET_PENDANT</a>.</span></span>
<span class="l"><a class="anc" name="a1ed" href="#a1ed">[a1ed]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_DID_YOU_GET_PENDANT</span></span><span class="ce">; [$a1ed] Message</span></span>
<span class="l"><a class="anc" name="a1ee" href="#a1ee">[a1ee]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_A1EF"></a><div class="cp">;============================================================================
; TODO
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9f9d]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9f9d]
;
</div><span class="l"><a class="anc" name="a1ef" href="#a1ef">[a1ef]</a><a href="#ISCRIPT_A1EF" class="la">ISCRIPT_A1EF:</a><span class="ce">; [$a1ef]</span></span>
<span class="l"><a class="anc" name="a1ef" href="#a1ef">[a1ef]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_GENERIC</span></span><span class="ce">; Show a generic text box.</span></span>
<span class="l"><a class="anc" name="a1f0" href="#a1f0">[a1f0]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_CHECK_FOR_ITEM</span></span><span class="ce">; Check if the player has the Large Shield.</span></span>
<span class="l"><a class="anc" name="a1f1" href="#a1f1">[a1f1]</a><span class="cd"><span class="i">db</span> <span class="o">SHIELD_LARGE</span></span><span class="ce">; [$a1f1] InventoryItem</span></span>
<span class="l"><a class="anc" name="a1f2" href="#a1f2">[a1f2]</a><span class="cd"><span class="i">dw</span> <span class="o">$a1f7</span></span><span class="ce">; If so, branch.</span></span>
<span class="l"><a class="anc" name="a1f4" href="#a1f4">[a1f4]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Else, show <a href="PRG13.html#MESSAGE_STORES_OUTSIDE_TOWN">MESSAGE_STORES_OUTSIDE_TOWN</a></span></span>
<span class="l"><a class="anc" name="a1f5" href="#a1f5">[a1f5]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_STORES_OUTSIDE_TOWN</span></span><span class="ce">; [$a1f5] Message</span></span>
<span class="l"><a class="anc" name="a1f6" href="#a1f6">[a1f6]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<a name=":a1f7:@_ISCRIPT_A1EF_HAS_SHIELD"></a><span class="l"><a class="anc" name="a1f7" href="#a1f7">[a1f7]</a><a href="#:a1f7:@_ISCRIPT_A1EF_HAS_SHIELD" class="lla">@_ISCRIPT_A1EF_HAS_SHIELD:</a><span class="ce">; [$a1f7]</span></span>
<span class="l"><a class="anc" name="a1f7" href="#a1f7">[a1f7]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_THIS_IS_LARGE_SHIELD">MESSAGE_THIS_IS_LARGE_SHIELD</a>.</span></span>
<span class="l"><a class="anc" name="a1f8" href="#a1f8">[a1f8]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_THIS_IS_LARGE_SHIELD</span></span><span class="ce">; [$a1f8] Message</span></span>
<span class="l"><a class="anc" name="a1f9" href="#a1f9">[a1f9]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_A1FA"></a><div class="cp">;============================================================================
; TODO
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9f9e]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9f9e]
;
</div><span class="l"><a class="anc" name="a1fa" href="#a1fa">[a1fa]</a><a href="#ISCRIPT_A1FA" class="la">ISCRIPT_A1FA:</a><span class="ce">; [$a1fa]</span></span>
<span class="l"><a class="anc" name="a1fa" href="#a1fa">[a1fa]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_GENERIC</span></span><span class="ce">; Show a generic text box.</span></span>
<span class="l"><a class="anc" name="a1fb" href="#a1fb">[a1fb]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_CHECK_FOR_ITEM</span></span><span class="ce">; Check if the player has the Fire magic.</span></span>
<span class="l"><a class="anc" name="a1fc" href="#a1fc">[a1fc]</a><span class="cd"><span class="i">db</span> <span class="o">MAGIC_FIRE</span></span><span class="ce">; [$a1fc] InventoryItem</span></span>
<span class="l"><a class="anc" name="a1fd" href="#a1fd">[a1fd]</a><span class="cd"><span class="i">dw</span> <span class="o">$a202</span></span><span class="ce">; If so, jump.</span></span>
<span class="l"><a class="anc" name="a1ff" href="#a1ff">[a1ff]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Else, show <a href="PRG13.html#MESSAGE_DIRECTIONS_TO_SUFFER">MESSAGE_DIRECTIONS_TO_SUFFER</a>.</span></span>
<span class="l"><a class="anc" name="a200" href="#a200">[a200]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_DIRECTIONS_TO_SUFFER</span></span><span class="ce">; [$a200] Message</span></span>
<span class="l"><a class="anc" name="a201" href="#a201">[a201]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<a name=":a202:@_ISCRIPT_A1FA_HAS_FIRE"></a><span class="l"><a class="anc" name="a202" href="#a202">[a202]</a><a href="#:a202:@_ISCRIPT_A1FA_HAS_FIRE" class="lla">@_ISCRIPT_A1FA_HAS_FIRE:</a><span class="ce">; [$a202]</span></span>
<span class="l"><a class="anc" name="a202" href="#a202">[a202]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_NEED_WING_BOOTS_FOR_MIST">MESSAGE_NEED_WING_BOOTS_FOR_MIST</a>.</span></span>
<span class="l"><a class="anc" name="a203" href="#a203">[a203]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_NEED_WING_BOOTS_FOR_MIST</span></span><span class="ce">; [$a203] Message</span></span>
<span class="l"><a class="anc" name="a204" href="#a204">[a204]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_A205"></a><div class="cp">;============================================================================
; TODO
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9f9f]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9f9f]
;
</div><span class="l"><a class="anc" name="a205" href="#a205">[a205]</a><a href="#ISCRIPT_A205" class="la">ISCRIPT_A205:</a><span class="ce">; [$a205]</span></span>
<span class="l"><a class="anc" name="a205" href="#a205">[a205]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_GENERIC</span></span><span class="ce">; Show a generic text box.</span></span>
<span class="l"><a class="anc" name="a206" href="#a206">[a206]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_CHECK_FOR_ITEM</span></span><span class="ce">; Check if the player has the Fire magic.</span></span>
<span class="l"><a class="anc" name="a207" href="#a207">[a207]</a><span class="cd"><span class="i">db</span> <span class="o">MAGIC_FIRE</span></span><span class="ce">; [$a207] InventoryItem</span></span>
<span class="l"><a class="anc" name="a208" href="#a208">[a208]</a><span class="cd"><span class="i">dw</span> <span class="o">$a20d</span></span><span class="ce">; If so, jump.</span></span>
<span class="l"><a class="anc" name="a20a" href="#a20a">[a20a]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Else, show <a href="PRG13.html#MESSAGE_WELCOME_TO_MIST">MESSAGE_WELCOME_TO_MIST</a></span></span>
<span class="l"><a class="anc" name="a20b" href="#a20b">[a20b]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_WELCOME_TO_MIST</span></span><span class="ce">; [$a20b] Message</span></span>
<span class="l"><a class="anc" name="a20c" href="#a20c">[a20c]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<a name=":a20d:@_ISCRIPT_A205_HAS_FIRE"></a><span class="l"><a class="anc" name="a20d" href="#a20d">[a20d]</a><a href="#:a20d:@_ISCRIPT_A205_HAS_FIRE" class="lla">@_ISCRIPT_A205_HAS_FIRE:</a><span class="ce">; [$a20d]</span></span>
<span class="l"><a class="anc" name="a20d" href="#a20d">[a20d]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_HOUSE_OUTSIDE_ABANDONED">MESSAGE_HOUSE_OUTSIDE_ABANDONED</a>.</span></span>
<span class="l"><a class="anc" name="a20e" href="#a20e">[a20e]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_HOUSE_OUTSIDE_ABANDONED</span></span><span class="ce">; [$a20e] Message</span></span>
<span class="l"><a class="anc" name="a20f" href="#a20f">[a20f]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_OVERWORLD_MIST_HOUSE_MAN"></a><div class="cp">;============================================================================
; Interaction with a man sitting in a house in the Mist part of the
; Overworld.
;
; This house is nested in the bottom-right of the
; overworld part of the Mist area.
;
; If the player has the Fire magic, he'll say that it's
; best you keep the pendant. Otherwise, he'll say you'll
; reach the town of Suffer soon.
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fa0]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fa0]
;
</div><span class="l"><a class="anc" name="a210" href="#a210">[a210]</a><a href="#ISCRIPT_OVERWORLD_MIST_HOUSE_MAN" class="la">ISCRIPT_OVERWORLD_MIST_HOUSE_MAN:</a><span class="ce">; [$a210]</span></span>
<span class="l"><a class="anc" name="a210" href="#a210">[a210]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_GENERIC</span></span><span class="ce">; Show a generic text box.</span></span>
<span class="l"><a class="anc" name="a211" href="#a211">[a211]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_CHECK_FOR_ITEM</span></span><span class="ce">; Check if the player has the Pendant.</span></span>
<span class="l"><a class="anc" name="a212" href="#a212">[a212]</a><span class="cd"><span class="i">db</span> <span class="o">SPECIAL_PENDANT</span></span><span class="ce">; [$a212] InventoryItem</span></span>
<span class="l"><a class="anc" name="a213" href="#a213">[a213]</a><span class="cd"><span class="i">dw</span> <span class="o">$a218</span></span><span class="ce">; If so, jump.</span></span>
<span class="l"><a class="anc" name="a215" href="#a215">[a215]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Else, show <a href="PRG13.html#MESSAGE_TOWER_OF_SUFFER_SOON">MESSAGE_TOWER_OF_SUFFER_SOON</a>.</span></span>
<span class="l"><a class="anc" name="a216" href="#a216">[a216]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_TOWER_OF_SUFFER_SOON</span></span><span class="ce">; [$a216] Message</span></span>
<span class="l"><a class="anc" name="a217" href="#a217">[a217]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<a name=":a218:@_ISCRIPT_OVERWORLD_MIST_HOUSE_MAN_HAS_PENDANT"></a><span class="l"><a class="anc" name="a218" href="#a218">[a218]</a><a href="#:a218:@_ISCRIPT_OVERWORLD_MIST_HOUSE_MAN_HAS_PENDANT" class="lla">@_ISCRIPT_OVERWORLD_MIST_HOUSE_MAN_HAS_PENDANT:</a><span class="ce">; [$a218]</span></span>
<span class="l"><a class="anc" name="a218" href="#a218">[a218]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_KEEP_PENDANT">MESSAGE_KEEP_PENDANT</a>.</span></span>
<span class="l"><a class="anc" name="a219" href="#a219">[a219]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_KEEP_PENDANT</span></span><span class="ce">; [$a219] Message</span></span>
<span class="l"><a class="anc" name="a21a" href="#a21a">[a21a]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_OVERWORLD_MIST_HOUSE_WOMAN"></a><div class="cp">;============================================================================
; Interaction with a woman walking in a house in the Mist part of the
; Overworld.
;
; This house is nested in the bottom-right of the
; overworld part of the Mist area.
;
; If the player has the Pendant, she'll say that the
; Meteorite has moved. Otherwise, she'll say that the
; dwarves are chanting to the meteorite.
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fa1]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fa1]
;
</div><span class="l"><a class="anc" name="a21b" href="#a21b">[a21b]</a><a href="#ISCRIPT_OVERWORLD_MIST_HOUSE_WOMAN" class="la">ISCRIPT_OVERWORLD_MIST_HOUSE_WOMAN:</a><span class="ce">; [$a21b]</span></span>
<span class="l"><a class="anc" name="a21b" href="#a21b">[a21b]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_GENERIC</span></span><span class="ce">; Show a generic text box.</span></span>
<span class="l"><a class="anc" name="a21c" href="#a21c">[a21c]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_CHECK_FOR_ITEM</span></span><span class="ce">; Check if the player has the Pendant.</span></span>
<span class="l"><a class="anc" name="a21d" href="#a21d">[a21d]</a><span class="cd"><span class="i">db</span> <span class="o">SPECIAL_PENDANT</span></span><span class="ce">; [$a21d] InventoryItem</span></span>
<span class="l"><a class="anc" name="a21e" href="#a21e">[a21e]</a><span class="cd"><span class="i">dw</span> <span class="o">$a223</span></span><span class="ce">; If so, jump.</span></span>
<span class="l"><a class="anc" name="a220" href="#a220">[a220]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Else, show <a href="PRG13.html#MESSAGE_DWARVES_CHANTING">MESSAGE_DWARVES_CHANTING</a>.</span></span>
<span class="l"><a class="anc" name="a221" href="#a221">[a221]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_DWARVES_CHANTING</span></span><span class="ce">; [$a221] Message</span></span>
<span class="l"><a class="anc" name="a222" href="#a222">[a222]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<a name=":a223:@_ISCRIPT_OVERWORLD_MIST_HOUSE_WOMAN_HAS_PENDANT"></a><span class="l"><a class="anc" name="a223" href="#a223">[a223]</a><a href="#:a223:@_ISCRIPT_OVERWORLD_MIST_HOUSE_WOMAN_HAS_PENDANT" class="lla">@_ISCRIPT_OVERWORLD_MIST_HOUSE_WOMAN_HAS_PENDANT:</a><span class="ce">; [$a223]</span></span>
<span class="l"><a class="anc" name="a223" href="#a223">[a223]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_METEORITE_WAS_MOVED">MESSAGE_METEORITE_WAS_MOVED</a>.</span></span>
<span class="l"><a class="anc" name="a224" href="#a224">[a224]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_METEORITE_WAS_MOVED</span></span><span class="ce">; [$a224] Message</span></span>
<span class="l"><a class="anc" name="a225" href="#a225">[a225]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_A226"></a><div class="cp">;============================================================================
; TODO
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fa2]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fa2]
;
</div><span class="l"><a class="anc" name="a226" href="#a226">[a226]</a><a href="#ISCRIPT_A226" class="la">ISCRIPT_A226:</a><span class="ce">; [$a226]</span></span>
<span class="l"><a class="anc" name="a226" href="#a226">[a226]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_NURSE</span></span><span class="ce">; XXX Show a portrait box</span></span>
<span class="l"><a class="anc" name="a227" href="#a227">[a227]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_CHECK_FOR_ITEM</span></span><span class="ce">; Check if the player has the Hour Glass.</span></span>
<span class="l"><a class="anc" name="a228" href="#a228">[a228]</a><span class="cd"><span class="i">db</span> <span class="o">ITEM_HOUR_GLASS</span></span><span class="ce">; [$a228] InventoryItem</span></span>
<span class="l"><a class="anc" name="a229" href="#a229">[a229]</a><span class="cd"><span class="i">dw</span> <span class="o">$a22e</span></span><span class="ce">; If so, jump.</span></span>
<span class="l"><a class="anc" name="a22b" href="#a22b">[a22b]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Else, show <a href="PRG13.html#MESSAGE_HOUR_GLASS">MESSAGE_HOUR_GLASS</a>.</span></span>
<span class="l"><a class="anc" name="a22c" href="#a22c">[a22c]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_HOUR_GLASS</span></span><span class="ce">; [$a22c] Message</span></span>
<span class="l"><a class="anc" name="a22d" href="#a22d">[a22d]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<a name=":a22e:@_ISCRIPT_A226_HAS_HOURGLASS"></a><span class="l"><a class="anc" name="a22e" href="#a22e">[a22e]</a><a href="#:a22e:@_ISCRIPT_A226_HAS_HOURGLASS" class="lla">@_ISCRIPT_A226_HAS_HOURGLASS:</a><span class="ce">; [$a22e]</span></span>
<span class="l"><a class="anc" name="a22e" href="#a22e">[a22e]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_HOUR_GLASS_USES_ENERGY">MESSAGE_HOUR_GLASS_USES_ENERGY</a>.</span></span>
<span class="l"><a class="anc" name="a22f" href="#a22f">[a22f]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_HOUR_GLASS_USES_ENERGY</span></span><span class="ce">; [$a22f] Message</span></span>
<span class="l"><a class="anc" name="a230" href="#a230">[a230]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_A231"></a><div class="cp">;============================================================================
; TODO
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fab]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fab]
;
</div><span class="l"><a class="anc" name="a231" href="#a231">[a231]</a><a href="#ISCRIPT_A231" class="la">ISCRIPT_A231:</a><span class="ce">; [$a231]</span></span>
<span class="l"><a class="anc" name="a231" href="#a231">[a231]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_GENERIC</span></span><span class="ce">; Show a generic text box.</span></span>
<span class="l"><a class="anc" name="a232" href="#a232">[a232]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_CHECK_FOR_ITEM</span></span><span class="ce">; Check if the player has the Thunder magic.</span></span>
<span class="l"><a class="anc" name="a233" href="#a233">[a233]</a><span class="cd"><span class="i">db</span> <span class="o">MAGIC_THUNDER</span></span><span class="ce">; [$a233] InventoryItem</span></span>
<span class="l"><a class="anc" name="a234" href="#a234">[a234]</a><span class="cd"><span class="i">dw</span> <span class="o">$a239</span></span><span class="ce">; If so, jump.</span></span>
<span class="l"><a class="anc" name="a236" href="#a236">[a236]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Else, show <a href="PRG13.html#MESSAGE_WELCOME_TO_VICTIM">MESSAGE_WELCOME_TO_VICTIM</a>.</span></span>
<span class="l"><a class="anc" name="a237" href="#a237">[a237]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_WELCOME_TO_VICTIM</span></span><span class="ce">; [$a237] Message</span></span>
<span class="l"><a class="anc" name="a238" href="#a238">[a238]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<a name=":a239:@_ISCRIPT_A231_HAS_THUNDER"></a><span class="l"><a class="anc" name="a239" href="#a239">[a239]</a><a href="#:a239:@_ISCRIPT_A231_HAS_THUNDER" class="lla">@_ISCRIPT_A231_HAS_THUNDER:</a><span class="ce">; [$a239]</span></span>
<span class="l"><a class="anc" name="a239" href="#a239">[a239]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_DANGEROUS_WITHOUT_MAGIC">MESSAGE_DANGEROUS_WITHOUT_MAGIC</a>.</span></span>
<span class="l"><a class="anc" name="a23a" href="#a23a">[a23a]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_DANGEROUS_WITHOUT_MAGIC</span></span><span class="ce">; [$a23a] Message</span></span>
<span class="l"><a class="anc" name="a23b" href="#a23b">[a23b]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_A23C"></a><div class="cp">;============================================================================
; TODO
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fac]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fac]
;
</div><span class="l"><a class="anc" name="a23c" href="#a23c">[a23c]</a><a href="#ISCRIPT_A23C" class="la">ISCRIPT_A23C:</a><span class="ce">; [$a23c]</span></span>
<span class="l"><a class="anc" name="a23c" href="#a23c">[a23c]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_GENERIC</span></span><span class="ce">; Show a generic text box.</span></span>
<span class="l"><a class="anc" name="a23d" href="#a23d">[a23d]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_CHECK_FOR_ITEM</span></span><span class="ce">; Check if the player has the Thunder magic.</span></span>
<span class="l"><a class="anc" name="a23e" href="#a23e">[a23e]</a><span class="cd"><span class="i">db</span> <span class="o">MAGIC_THUNDER</span></span><span class="ce">; [$a23e] InventoryItem</span></span>
<span class="l"><a class="anc" name="a23f" href="#a23f">[a23f]</a><span class="cd"><span class="i">dw</span> <span class="o">$a244</span></span><span class="ce">; If so, jump.</span></span>
<span class="l"><a class="anc" name="a241" href="#a241">[a241]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Else, show <a href="PRG13.html#MESSAGE_MAGIC_CONSUMES_POWER">MESSAGE_MAGIC_CONSUMES_POWER</a>.</span></span>
<span class="l"><a class="anc" name="a242" href="#a242">[a242]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_MAGIC_CONSUMES_POWER</span></span><span class="ce">; [$a242] Message</span></span>
<span class="l"><a class="anc" name="a243" href="#a243">[a243]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<a name=":a244:@_ISCRIPT_A23C_HAS_THUNDER"></a><span class="l"><a class="anc" name="a244" href="#a244">[a244]</a><a href="#:a244:@_ISCRIPT_A23C_HAS_THUNDER" class="lla">@_ISCRIPT_A23C_HAS_THUNDER:</a><span class="ce">; [$a244]</span></span>
<span class="l"><a class="anc" name="a244" href="#a244">[a244]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_METEORITE_BECOMES_BLACK_ONYX">MESSAGE_METEORITE_BECOMES_BLACK_ONYX</a>.</span></span>
<span class="l"><a class="anc" name="a245" href="#a245">[a245]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_METEORITE_BECOMES_BLACK_ONYX</span></span><span class="ce">; [$a245] Message</span></span>
<span class="l"><a class="anc" name="a246" href="#a246">[a246]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_A247"></a><div class="cp">;============================================================================
; TODO
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fad]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fad]
;
</div><span class="l"><a class="anc" name="a247" href="#a247">[a247]</a><a href="#ISCRIPT_A247" class="la">ISCRIPT_A247:</a><span class="ce">; [$a247]</span></span>
<span class="l"><a class="anc" name="a247" href="#a247">[a247]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_GENERIC</span></span><span class="ce">; Show a generic text box.</span></span>
<span class="l"><a class="anc" name="a248" href="#a248">[a248]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_CHECK_FOR_ITEM</span></span><span class="ce">; Check if the player has the Thunder magic.</span></span>
<span class="l"><a class="anc" name="a249" href="#a249">[a249]</a><span class="cd"><span class="i">db</span> <span class="o">MAGIC_THUNDER</span></span><span class="ce">; [$a249] InventoryItem</span></span>
<span class="l"><a class="anc" name="a24a" href="#a24a">[a24a]</a><span class="cd"><span class="i">dw</span> <span class="o">$a24f</span></span><span class="ce">; If so, jump.</span></span>
<span class="l"><a class="anc" name="a24c" href="#a24c">[a24c]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Else, show <a href="PRG13.html#MESSAGE_MAGIC_HALL_OUTSIDE_TOWN">MESSAGE_MAGIC_HALL_OUTSIDE_TOWN</a>.</span></span>
<span class="l"><a class="anc" name="a24d" href="#a24d">[a24d]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_MAGIC_HALL_OUTSIDE_TOWN</span></span><span class="ce">; [$a24d] Message</span></span>
<span class="l"><a class="anc" name="a24e" href="#a24e">[a24e]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<a name=":a24f:@_ISCRIPT_A247_HAS_THUNDER"></a><span class="l"><a class="anc" name="a24f" href="#a24f">[a24f]</a><a href="#:a24f:@_ISCRIPT_A247_HAS_THUNDER" class="lla">@_ISCRIPT_A247_HAS_THUNDER:</a><span class="ce">; [$a24f]</span></span>
<span class="l"><a class="anc" name="a24f" href="#a24f">[a24f]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_MAGIC_CANE">MESSAGE_MAGIC_CANE</a>.</span></span>
<span class="l"><a class="anc" name="a250" href="#a250">[a250]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_MAGIC_CANE</span></span><span class="ce">; [$a250] Message</span></span>
<span class="l"><a class="anc" name="a251" href="#a251">[a251]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_A252"></a><div class="cp">;============================================================================
; TODO
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fae]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fae]
;
</div><span class="l"><a class="anc" name="a252" href="#a252">[a252]</a><a href="#ISCRIPT_A252" class="la">ISCRIPT_A252:</a><span class="ce">; [$a252]</span></span>
<span class="l"><a class="anc" name="a252" href="#a252">[a252]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_GENERIC</span></span><span class="ce">; Show a generic text box.</span></span>
<span class="l"><a class="anc" name="a253" href="#a253">[a253]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_CHECK_PLAYER_RANK</span></span><span class="ce">; Check if the Player has at least the Soldier rank.</span></span>
<span class="l"><a class="anc" name="a254" href="#a254">[a254]</a><span class="cd"><span class="i">db</span> <span class="o">RANK_SOLDIER</span></span><span class="ce">; [$a254] PlayerTitle</span></span>
<span class="l"><a class="anc" name="a255" href="#a255">[a255]</a><span class="cd"><span class="i">dw</span> <span class="o">$a25a</span></span><span class="ce">; If so, jump.</span></span>
<span class="l"><a class="anc" name="a257" href="#a257">[a257]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Else, show <a href="PRG13.html#MESSAGE_GO_TO_CAPITAL">MESSAGE_GO_TO_CAPITAL</a>.</span></span>
<span class="l"><a class="anc" name="a258" href="#a258">[a258]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_GO_TO_CAPITAL</span></span><span class="ce">; [$a258] Message</span></span>
<span class="l"><a class="anc" name="a259" href="#a259">[a259]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<a name=":a25a:@_ISCRIPT_A252_HAS_RANK"></a><span class="l"><a class="anc" name="a25a" href="#a25a">[a25a]</a><a href="#:a25a:@_ISCRIPT_A252_HAS_RANK" class="lla">@_ISCRIPT_A252_HAS_RANK:</a><span class="ce">; [$a25a]</span></span>
<span class="l"><a class="anc" name="a25a" href="#a25a">[a25a]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_CHECK_FOR_ITEM</span></span><span class="ce">; Check if the player has the Full Plate armor.</span></span>
<span class="l"><a class="anc" name="a25b" href="#a25b">[a25b]</a><span class="cd"><span class="i">db</span> <span class="o">ARMOR_FULL_PLATE</span></span><span class="ce">; [$a25b] InventoryItem</span></span>
<span class="l"><a class="anc" name="a25c" href="#a25c">[a25c]</a><span class="cd"><span class="i">dw</span> <span class="o">$a263</span></span><span class="ce">; If so, jump.</span></span>
<span class="l"><a class="anc" name="a25e" href="#a25e">[a25e]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_UNSKIPPABLE_MESSAGE</span></span><span class="ce">; Else, show <a href="PRG13.html#MESSAGE_GOT_ARMOR_FOR_BOTTLE">MESSAGE_GOT_ARMOR_FOR_BOTTLE</a>.</span></span>
<span class="l"><a class="anc" name="a25f" href="#a25f">[a25f]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_GOT_ARMOR_FOR_BOTTLE</span></span><span class="ce">; [$a25f] Message</span></span>
<span class="l"><a class="anc" name="a260" href="#a260">[a260]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_ADD_ITEM</span></span><span class="ce">; Add the full plate to the inventory.</span></span>
<span class="l"><a class="anc" name="a261" href="#a261">[a261]</a><span class="cd"><span class="i">db</span> <span class="o">ARMOR_FULL_PLATE</span></span><span class="ce">; [$a261] InventoryItem</span></span>
<span class="l"><a class="anc" name="a262" href="#a262">[a262]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<a name=":a263:@_ISCRIPT_A252_HAS_ARMOR"></a><span class="l"><a class="anc" name="a263" href="#a263">[a263]</a><a href="#:a263:@_ISCRIPT_A252_HAS_ARMOR" class="lla">@_ISCRIPT_A252_HAS_ARMOR:</a><span class="ce">; [$a263]</span></span>
<span class="l"><a class="anc" name="a263" href="#a263">[a263]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_ILL_HAVE_DRINK">MESSAGE_ILL_HAVE_DRINK</a>.</span></span>
<span class="l"><a class="anc" name="a264" href="#a264">[a264]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_ILL_HAVE_DRINK</span></span><span class="ce">; [$a264] Message</span></span>
<span class="l"><a class="anc" name="a265" href="#a265">[a265]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_A266"></a><div class="cp">;============================================================================
; TODO
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9faf]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9faf]
;
</div><span class="l"><a class="anc" name="a266" href="#a266">[a266]</a><a href="#ISCRIPT_A266" class="la">ISCRIPT_A266:</a><span class="ce">; [$a266]</span></span>
<span class="l"><a class="anc" name="a266" href="#a266">[a266]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_GENERIC</span></span><span class="ce">; Show a generic text box.</span></span>
<span class="l"><a class="anc" name="a267" href="#a267">[a267]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_CHECK_FOR_ITEM</span></span><span class="ce">; Check if the player has the Thunder magic.</span></span>
<span class="l"><a class="anc" name="a268" href="#a268">[a268]</a><span class="cd"><span class="i">db</span> <span class="o">MAGIC_THUNDER</span></span><span class="ce">; [$a268] InventoryItem</span></span>
<span class="l"><a class="anc" name="a269" href="#a269">[a269]</a><span class="cd"><span class="i">dw</span> <span class="o">$a26e</span></span><span class="ce">; If so, jump.</span></span>
<span class="l"><a class="anc" name="a26b" href="#a26b">[a26b]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Else, show <a href="PRG13.html#MESSAGE_IM_LOST">MESSAGE_IM_LOST</a>.</span></span>
<span class="l"><a class="anc" name="a26c" href="#a26c">[a26c]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_IM_LOST</span></span><span class="ce">; [$a26c] Message</span></span>
<span class="l"><a class="anc" name="a26d" href="#a26d">[a26d]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<a name=":a26e:@_ISCRIPT_A266_HAS_THUNDER"></a><span class="l"><a class="anc" name="a26e" href="#a26e">[a26e]</a><a href="#:a26e:@_ISCRIPT_A266_HAS_THUNDER" class="lla">@_ISCRIPT_A266_HAS_THUNDER:</a><span class="ce">; [$a26e]</span></span>
<span class="l"><a class="anc" name="a26e" href="#a26e">[a26e]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_IM_LOST_MAGIC_DOES_NOT_WORK">MESSAGE_IM_LOST_MAGIC_DOES_NOT_WORK</a>.</span></span>
<span class="l"><a class="anc" name="a26f" href="#a26f">[a26f]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_IM_LOST_MAGIC_DOES_NOT_WORK</span></span><span class="ce">; [$a26f] Message</span></span>
<span class="l"><a class="anc" name="a270" href="#a270">[a270]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_A271"></a><div class="cp">;============================================================================
; TODO
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fb0]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fb0]
;
</div><span class="l"><a class="anc" name="a271" href="#a271">[a271]</a><a href="#ISCRIPT_A271" class="la">ISCRIPT_A271:</a><span class="ce">; [$a271]</span></span>
<span class="l"><a class="anc" name="a271" href="#a271">[a271]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_GENERIC</span></span><span class="ce">; Show a generic text box.</span></span>
<span class="l"><a class="anc" name="a272" href="#a272">[a272]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_CHECK_FOR_ITEM</span></span><span class="ce">; Check if the player has the Thunder magic.</span></span>
<span class="l"><a class="anc" name="a273" href="#a273">[a273]</a><span class="cd"><span class="i">db</span> <span class="o">MAGIC_THUNDER</span></span><span class="ce">; [$a273] InventoryItem</span></span>
<span class="l"><a class="anc" name="a274" href="#a274">[a274]</a><span class="cd"><span class="i">dw</span> <span class="o">$a279</span></span><span class="ce">; If so, branch.</span></span>
<span class="l"><a class="anc" name="a276" href="#a276">[a276]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Else, show <a href="PRG13.html#MESSAGE_MAGIC_OF_JUSTICE_OR_DESTRUCTION">MESSAGE_MAGIC_OF_JUSTICE_OR_DESTRUCTION</a>.</span></span>
<span class="l"><a class="anc" name="a277" href="#a277">[a277]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_MAGIC_OF_JUSTICE_OR_DESTRUCTION</span></span><span class="ce">; [$a277] Message</span></span>
<span class="l"><a class="anc" name="a278" href="#a278">[a278]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<a name=":a279:@_ISCRIPT_A271_HAS_THUNDER"></a><span class="l"><a class="anc" name="a279" href="#a279">[a279]</a><a href="#:a279:@_ISCRIPT_A271_HAS_THUNDER" class="lla">@_ISCRIPT_A271_HAS_THUNDER:</a><span class="ce">; [$a279]</span></span>
<span class="l"><a class="anc" name="a279" href="#a279">[a279]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_MAGIC_INDIVIDUAL_POWERS">MESSAGE_MAGIC_INDIVIDUAL_POWERS</a>.</span></span>
<span class="l"><a class="anc" name="a27a" href="#a27a">[a27a]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_MAGIC_INDIVIDUAL_POWERS</span></span><span class="ce">; [$a27a] Message</span></span>
<span class="l"><a class="anc" name="a27b" href="#a27b">[a27b]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_A27C"></a><div class="cp">;============================================================================
; TODO
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fb1]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fb1]
;
</div><span class="l"><a class="anc" name="a27c" href="#a27c">[a27c]</a><a href="#ISCRIPT_A27C" class="la">ISCRIPT_A27C:</a><span class="ce">; [$a27c]</span></span>
<span class="l"><a class="anc" name="a27c" href="#a27c">[a27c]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_GENERIC</span></span><span class="ce">; Show a generic text box.</span></span>
<span class="l"><a class="anc" name="a27d" href="#a27d">[a27d]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_CHECK_FOR_ITEM</span></span><span class="ce">; Check if the player has the Black Onyx.</span></span>
<span class="l"><a class="anc" name="a27e" href="#a27e">[a27e]</a><span class="cd"><span class="i">db</span> <span class="o">SPECIAL_BLACK_ONYX</span></span><span class="ce">; [$a27e] InventoryItem</span></span>
<span class="l"><a class="anc" name="a27f" href="#a27f">[a27f]</a><span class="cd"><span class="i">dw</span> <span class="o">$a284</span></span><span class="ce">; If so, jump.</span></span>
<span class="l"><a class="anc" name="a281" href="#a281">[a281]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Else, show <a href="PRG13.html#MESSAGE_DIRECTIONS_TO_TOWER_OF_MIST">MESSAGE_DIRECTIONS_TO_TOWER_OF_MIST</a>.</span></span>
<span class="l"><a class="anc" name="a282" href="#a282">[a282]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_DIRECTIONS_TO_TOWER_OF_MIST</span></span><span class="ce">; [$a282] Message</span></span>
<span class="l"><a class="anc" name="a283" href="#a283">[a283]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<a name=":a284:@_ISCRIPT_A27C_HAS_BLACK_ONYX"></a><span class="l"><a class="anc" name="a284" href="#a284">[a284]</a><a href="#:a284:@_ISCRIPT_A27C_HAS_BLACK_ONYX" class="lla">@_ISCRIPT_A27C_HAS_BLACK_ONYX:</a><span class="ce">; [$a284]</span></span>
<span class="l"><a class="anc" name="a284" href="#a284">[a284]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_CHECK_FOR_ITEM</span></span><span class="ce">; Check if the player has the "A" key.</span></span>
<span class="l"><a class="anc" name="a285" href="#a285">[a285]</a><span class="cd"><span class="i">db</span> <span class="o">KEY_A</span></span><span class="ce">; [$a285] InventoryItem</span></span>
<span class="l"><a class="anc" name="a286" href="#a286">[a286]</a><span class="cd"><span class="i">dw</span> <span class="o">$a28d</span></span><span class="ce">; If so, jump.</span></span>
<span class="l"><a class="anc" name="a288" href="#a288">[a288]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_UNSKIPPABLE_MESSAGE</span></span><span class="ce">; Else, show <a href="PRG13.html#MESSAGE_USE_KEY_FOR_CONFLATE">MESSAGE_USE_KEY_FOR_CONFLATE</a>.</span></span>
<span class="l"><a class="anc" name="a289" href="#a289">[a289]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_USE_KEY_FOR_CONFLATE</span></span><span class="ce">; [$a289] Message</span></span>
<span class="l"><a class="anc" name="a28a" href="#a28a">[a28a]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_ADD_ITEM</span></span><span class="ce">; Add the "A" key to the inventory.</span></span>
<span class="l"><a class="anc" name="a28b" href="#a28b">[a28b]</a><span class="cd"><span class="i">db</span> <span class="o">KEY_A</span></span><span class="ce">; [$a28b] InventoryItem</span></span>
<span class="l"><a class="anc" name="a28c" href="#a28c">[a28c]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<a name=":a28d:@_ISCRIPT_A27C_HAS_KEY"></a><span class="l"><a class="anc" name="a28d" href="#a28d">[a28d]</a><a href="#:a28d:@_ISCRIPT_A27C_HAS_KEY" class="lla">@_ISCRIPT_A27C_HAS_KEY:</a><span class="ce">; [$a28d]</span></span>
<span class="l"><a class="anc" name="a28d" href="#a28d">[a28d]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_YOU_NEED_KEY_ACE">MESSAGE_YOU_NEED_KEY_ACE</a>.</span></span>
<span class="l"><a class="anc" name="a28e" href="#a28e">[a28e]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_YOU_NEED_KEY_ACE</span></span><span class="ce">; [$a28e] Message</span></span>
<span class="l"><a class="anc" name="a28f" href="#a28f">[a28f]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_A290"></a><div class="cp">;============================================================================
; TODO
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fbb]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fbb]
;
</div><span class="l"><a class="anc" name="a290" href="#a290">[a290]</a><a href="#ISCRIPT_A290" class="la">ISCRIPT_A290:</a><span class="ce">; [$a290]</span></span>
<span class="l"><a class="anc" name="a290" href="#a290">[a290]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_GENERIC</span></span><span class="ce">; Show a generic textbox.</span></span>
<span class="l"><a class="anc" name="a291" href="#a291">[a291]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_CHECK_FOR_ITEM</span></span><span class="ce">; Check if the player has the Giant Blade.</span></span>
<span class="l"><a class="anc" name="a292" href="#a292">[a292]</a><span class="cd"><span class="i">db</span> <span class="o">WEAPON_GIANT_BLADE</span></span><span class="ce">; [$a292] InventoryItem</span></span>
<span class="l"><a class="anc" name="a293" href="#a293">[a293]</a><span class="cd"><span class="i">dw</span> <span class="o">$a298</span></span><span class="ce">; If so, jump.</span></span>
<span class="l"><a class="anc" name="a295" href="#a295">[a295]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Else, show  <a href="PRG13.html#MESSAGE_WELCOME_TO_CONFLATE">MESSAGE_WELCOME_TO_CONFLATE</a>.</span></span>
<span class="l"><a class="anc" name="a296" href="#a296">[a296]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_WELCOME_TO_CONFLATE</span></span><span class="ce">; [$a296] Message</span></span>
<span class="l"><a class="anc" name="a297" href="#a297">[a297]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<a name=":a298:@_ISCRIPT_A290_HAS_GIANT_BLADE"></a><span class="l"><a class="anc" name="a298" href="#a298">[a298]</a><a href="#:a298:@_ISCRIPT_A290_HAS_GIANT_BLADE" class="lla">@_ISCRIPT_A290_HAS_GIANT_BLADE:</a><span class="ce">; [$a298]</span></span>
<span class="l"><a class="anc" name="a298" href="#a298">[a298]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_LEGENDARY_SHIELD_HELMET">MESSAGE_LEGENDARY_SHIELD_HELMET</a>.</span></span>
<span class="l"><a class="anc" name="a299" href="#a299">[a299]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_LEGENDARY_SHIELD_HELMET</span></span><span class="ce">; [$a299] Message</span></span>
<span class="l"><a class="anc" name="a29a" href="#a29a">[a29a]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_A29B"></a><div class="cp">;============================================================================
; TODO
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fbc]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fbc]
;
</div><span class="l"><a class="anc" name="a29b" href="#a29b">[a29b]</a><a href="#ISCRIPT_A29B" class="la">ISCRIPT_A29B:</a><span class="ce">; [$a29b]</span></span>
<span class="l"><a class="anc" name="a29b" href="#a29b">[a29b]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_GENERIC</span></span><span class="ce">; Show a generic text box.</span></span>
<span class="l"><a class="anc" name="a29c" href="#a29c">[a29c]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_CHECK_FOR_ITEM</span></span><span class="ce">; Check if the player has the Giant Blade.</span></span>
<span class="l"><a class="anc" name="a29d" href="#a29d">[a29d]</a><span class="cd"><span class="i">db</span> <span class="o">WEAPON_GIANT_BLADE</span></span><span class="ce">; [$a29d] InventoryItem</span></span>
<span class="l"><a class="anc" name="a29e" href="#a29e">[a29e]</a><span class="cd"><span class="i">dw</span> <span class="o">$a2a3</span></span><span class="ce">; If so, jump.</span></span>
<span class="l"><a class="anc" name="a2a0" href="#a2a0">[a2a0]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Else, show <a href="PRG13.html#MESSAGE_TOWN_SURROUNDED_BY_DOORS">MESSAGE_TOWN_SURROUNDED_BY_DOORS</a>.</span></span>
<span class="l"><a class="anc" name="a2a1" href="#a2a1">[a2a1]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_TOWN_SURROUNDED_BY_DOORS</span></span><span class="ce">; [$a2a1] Message</span></span>
<span class="l"><a class="anc" name="a2a2" href="#a2a2">[a2a2]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<a name=":a2a3:@_ISCRIPT_A29B_HAS_GIANT_BLADE"></a><span class="l"><a class="anc" name="a2a3" href="#a2a3">[a2a3]</a><a href="#:a2a3:@_ISCRIPT_A29B_HAS_GIANT_BLADE" class="lla">@_ISCRIPT_A29B_HAS_GIANT_BLADE:</a><span class="ce">; [$a2a3]</span></span>
<span class="l"><a class="anc" name="a2a3" href="#a2a3">[a2a3]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_SEE_GURU_AFTER_SHIELD_HELMET">MESSAGE_SEE_GURU_AFTER_SHIELD_HELMET</a>.</span></span>
<span class="l"><a class="anc" name="a2a4" href="#a2a4">[a2a4]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_SEE_GURU_AFTER_SHIELD_HELMET</span></span><span class="ce">; [$a2a4] Message</span></span>
<span class="l"><a class="anc" name="a2a5" href="#a2a5">[a2a5]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_A2A6"></a><div class="cp">;============================================================================
; TODO
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fbd]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fbd]
;
</div><span class="l"><a class="anc" name="a2a6" href="#a2a6">[a2a6]</a><a href="#ISCRIPT_A2A6" class="la">ISCRIPT_A2A6:</a><span class="ce">; [$a2a6]</span></span>
<span class="l"><a class="anc" name="a2a6" href="#a2a6">[a2a6]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_GENERIC</span></span><span class="ce">; Show a generic text box.</span></span>
<span class="l"><a class="anc" name="a2a7" href="#a2a7">[a2a7]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_CHECK_FOR_ITEM</span></span><span class="ce">; Check if the player has the Ring of Dworf.</span></span>
<span class="l"><a class="anc" name="a2a8" href="#a2a8">[a2a8]</a><span class="cd"><span class="i">db</span> <span class="o">SPECIAL_RING_OF_DWORF</span></span><span class="ce">; [$a2a8] InventoryItem</span></span>
<span class="l"><a class="anc" name="a2a9" href="#a2a9">[a2a9]</a><span class="cd"><span class="i">dw</span> <span class="o">$a2ae</span></span><span class="ce">; If so, jump.</span></span>
<span class="l"><a class="anc" name="a2ab" href="#a2ab">[a2ab]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Else, show <a href="PRG13.html#MESSAGE_GUARDIAN_OF_GURU">MESSAGE_GUARDIAN_OF_GURU</a>.</span></span>
<span class="l"><a class="anc" name="a2ac" href="#a2ac">[a2ac]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_GUARDIAN_OF_GURU</span></span><span class="ce">; [$a2ac] Message</span></span>
<span class="l"><a class="anc" name="a2ad" href="#a2ad">[a2ad]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<a name=":a2ae:@_ISCRIPT_A2A6_HAS_RING_OF_DWORF"></a><span class="l"><a class="anc" name="a2ae" href="#a2ae">[a2ae]</a><a href="#:a2ae:@_ISCRIPT_A2A6_HAS_RING_OF_DWORF" class="lla">@_ISCRIPT_A2A6_HAS_RING_OF_DWORF:</a><span class="ce">; [$a2ae]</span></span>
<span class="l"><a class="anc" name="a2ae" href="#a2ae">[a2ae]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_CHECK_FOR_ITEM</span></span><span class="ce">; Check if the player has the Magical Rod.</span></span>
<span class="l"><a class="anc" name="a2af" href="#a2af">[a2af]</a><span class="cd"><span class="i">db</span> <span class="o">SPECIAL_MAGICAL_ROD</span></span><span class="ce">; [$a2af] InventoryItem</span></span>
<span class="l"><a class="anc" name="a2b0" href="#a2b0">[a2b0]</a><span class="cd"><span class="i">dw</span> <span class="o">$a2b5</span></span><span class="ce">; If so, jump.</span></span>
<span class="l"><a class="anc" name="a2b2" href="#a2b2">[a2b2]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Else, show <a href="PRG13.html#MESSAGE_SOMETHING_YOU_CAN_GET">MESSAGE_SOMETHING_YOU_CAN_GET</a>.</span></span>
<span class="l"><a class="anc" name="a2b3" href="#a2b3">[a2b3]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_SOMETHING_YOU_CAN_GET</span></span><span class="ce">; [$a2b3] Message</span></span>
<span class="l"><a class="anc" name="a2b4" href="#a2b4">[a2b4]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<a name=":a2b5:@_ISCRIPT_A2A6_HAS_MAGICAL_ROD"></a><span class="l"><a class="anc" name="a2b5" href="#a2b5">[a2b5]</a><a href="#:a2b5:@_ISCRIPT_A2A6_HAS_MAGICAL_ROD" class="lla">@_ISCRIPT_A2A6_HAS_MAGICAL_ROD:</a><span class="ce">; [$a2b5]</span></span>
<span class="l"><a class="anc" name="a2b5" href="#a2b5">[a2b5]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_DONT_RELY_ON_MAGIC_FINAL_BATTLE">MESSAGE_DONT_RELY_ON_MAGIC_FINAL_BATTLE</a>.</span></span>
<span class="l"><a class="anc" name="a2b6" href="#a2b6">[a2b6]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_DONT_RELY_ON_MAGIC_FINAL_BATTLE</span></span><span class="ce">; [$a2b6] Message</span></span>
<span class="l"><a class="anc" name="a2b7" href="#a2b7">[a2b7]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_A2B8"></a><div class="cp">;============================================================================
; TODO
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fbe]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fbe]
;
</div><span class="l"><a class="anc" name="a2b8" href="#a2b8">[a2b8]</a><a href="#ISCRIPT_A2B8" class="la">ISCRIPT_A2B8:</a><span class="ce">; [$a2b8]</span></span>
<span class="l"><a class="anc" name="a2b8" href="#a2b8">[a2b8]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_GENERIC</span></span><span class="ce">; Show a generic text box.</span></span>
<span class="l"><a class="anc" name="a2b9" href="#a2b9">[a2b9]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_CHECK_FOR_ITEM</span></span><span class="ce">; Check if the player has the Battle Helmet.</span></span>
<span class="l"><a class="anc" name="a2ba" href="#a2ba">[a2ba]</a><span class="cd"><span class="i">db</span> <span class="o">SHIELD_BATTLE_HELMET</span></span><span class="ce">; [$a2ba] InventoryItem</span></span>
<span class="l"><a class="anc" name="a2bb" href="#a2bb">[a2bb]</a><span class="cd"><span class="i">dw</span> <span class="o">$a2c0</span></span><span class="ce">; If so, jump.</span></span>
<span class="l"><a class="anc" name="a2bd" href="#a2bd">[a2bd]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Else, show <a href="PRG13.html#MESSAGE_USED_TO_TRADE_WITH_DWARVES">MESSAGE_USED_TO_TRADE_WITH_DWARVES</a>.</span></span>
<span class="l"><a class="anc" name="a2be" href="#a2be">[a2be]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_USED_TO_TRADE_WITH_DWARVES</span></span><span class="ce">; [$a2be] Message</span></span>
<span class="l"><a class="anc" name="a2bf" href="#a2bf">[a2bf]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<a name=":a2c0:@_ISCRIPT_A2B8_HAS_BATTLE_HELMET"></a><span class="l"><a class="anc" name="a2c0" href="#a2c0">[a2c0]</a><a href="#:a2c0:@_ISCRIPT_A2B8_HAS_BATTLE_HELMET" class="lla">@_ISCRIPT_A2B8_HAS_BATTLE_HELMET:</a><span class="ce">; [$a2c0]</span></span>
<span class="l"><a class="anc" name="a2c0" href="#a2c0">[a2c0]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_USED_TO_BE_SKILLED">MESSAGE_USED_TO_BE_SKILLED</a>.</span></span>
<span class="l"><a class="anc" name="a2c1" href="#a2c1">[a2c1]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_USED_TO_BE_SKILLED</span></span><span class="ce">; [$a2c1] Message</span></span>
<span class="l"><a class="anc" name="a2c2" href="#a2c2">[a2c2]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_A2C3"></a><div class="cp">;============================================================================
; TODO
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fbf]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fbf]
;
</div><span class="l"><a class="anc" name="a2c3" href="#a2c3">[a2c3]</a><a href="#ISCRIPT_A2C3" class="la">ISCRIPT_A2C3:</a><span class="ce">; [$a2c3]</span></span>
<span class="l"><a class="anc" name="a2c3" href="#a2c3">[a2c3]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_GENERIC</span></span><span class="ce">; Show a generic text box.</span></span>
<span class="l"><a class="anc" name="a2c4" href="#a2c4">[a2c4]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_CHECK_FOR_ITEM</span></span><span class="ce">; Check if the player has the Battle Helmet.</span></span>
<span class="l"><a class="anc" name="a2c5" href="#a2c5">[a2c5]</a><span class="cd"><span class="i">db</span> <span class="o">SHIELD_BATTLE_HELMET</span></span><span class="ce">; [$a2c5] InventoryItem</span></span>
<span class="l"><a class="anc" name="a2c6" href="#a2c6">[a2c6]</a><span class="cd"><span class="i">dw</span> <span class="o">$a2cb</span></span><span class="ce">; If so, jump.</span></span>
<span class="l"><a class="anc" name="a2c8" href="#a2c8">[a2c8]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Else, show <a href="PRG13.html#MESSAGE_USED_TO_VISIT_DWARVES">MESSAGE_USED_TO_VISIT_DWARVES</a>.</span></span>
<span class="l"><a class="anc" name="a2c9" href="#a2c9">[a2c9]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_USED_TO_VISIT_DWARVES</span></span><span class="ce">; [$a2c9] Message</span></span>
<span class="l"><a class="anc" name="a2ca" href="#a2ca">[a2ca]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<a name=":a2cb:@_ISCRIPT_A2C3_HAS_BATTLE_HELMET"></a><span class="l"><a class="anc" name="a2cb" href="#a2cb">[a2cb]</a><a href="#:a2cb:@_ISCRIPT_A2C3_HAS_BATTLE_HELMET" class="lla">@_ISCRIPT_A2C3_HAS_BATTLE_HELMET:</a><span class="ce">; [$a2cb]</span></span>
<span class="l"><a class="anc" name="a2cb" href="#a2cb">[a2cb]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_I_AM_PICKPOCKET">MESSAGE_I_AM_PICKPOCKET</a>.</span></span>
<span class="l"><a class="anc" name="a2cc" href="#a2cc">[a2cc]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_I_AM_PICKPOCKET</span></span><span class="ce">; [$a2cc] Message</span></span>
<span class="l"><a class="anc" name="a2cd" href="#a2cd">[a2cd]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_A2CE"></a><div class="cp">;============================================================================
; TODO
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fcb]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fcb]
;
</div><span class="l"><a class="anc" name="a2ce" href="#a2ce">[a2ce]</a><a href="#ISCRIPT_A2CE" class="la">ISCRIPT_A2CE:</a><span class="ce">; [$a2ce]</span></span>
<span class="l"><a class="anc" name="a2ce" href="#a2ce">[a2ce]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_GENERIC</span></span><span class="ce">; Show a generic text box.</span></span>
<span class="l"><a class="anc" name="a2cf" href="#a2cf">[a2cf]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_CHECK_FOR_ITEM</span></span><span class="ce">; Check if the player has the Tilte magic.</span></span>
<span class="l"><a class="anc" name="a2d0" href="#a2d0">[a2d0]</a><span class="cd"><span class="i">db</span> <span class="o">MAGIC_TILTE</span></span><span class="ce">; [$a2d0] InventoryItem</span></span>
<span class="l"><a class="anc" name="a2d1" href="#a2d1">[a2d1]</a><span class="cd"><span class="i">dw</span> <span class="o">$a2d6</span></span><span class="ce">; If so, jump.</span></span>
<span class="l"><a class="anc" name="a2d3" href="#a2d3">[a2d3]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Else, show <a href="PRG13.html#MESSAGE_DIRECTIONS_DAYBREAK">MESSAGE_DIRECTIONS_DAYBREAK</a>.</span></span>
<span class="l"><a class="anc" name="a2d4" href="#a2d4">[a2d4]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_DIRECTIONS_DAYBREAK</span></span><span class="ce">; [$a2d4] Message</span></span>
<span class="l"><a class="anc" name="a2d5" href="#a2d5">[a2d5]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<a name=":a2d6:@_ISCRIPT_A2CE_HAS_TILTE"></a><span class="l"><a class="anc" name="a2d6" href="#a2d6">[a2d6]</a><a href="#:a2d6:@_ISCRIPT_A2CE_HAS_TILTE" class="lla">@_ISCRIPT_A2CE_HAS_TILTE:</a><span class="ce">; [$a2d6]</span></span>
<span class="l"><a class="anc" name="a2d6" href="#a2d6">[a2d6]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_FRIENDS_IN_DARTMOOR">MESSAGE_FRIENDS_IN_DARTMOOR</a>.</span></span>
<span class="l"><a class="anc" name="a2d7" href="#a2d7">[a2d7]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_FRIENDS_IN_DARTMOOR</span></span><span class="ce">; [$a2d7] Message</span></span>
<span class="l"><a class="anc" name="a2d8" href="#a2d8">[a2d8]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_A2D9"></a><div class="cp">;============================================================================
; TODO
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fcc]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fcc]
;
</div><span class="l"><a class="anc" name="a2d9" href="#a2d9">[a2d9]</a><a href="#ISCRIPT_A2D9" class="la">ISCRIPT_A2D9:</a><span class="ce">; [$a2d9]</span></span>
<span class="l"><a class="anc" name="a2d9" href="#a2d9">[a2d9]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_GENERIC</span></span><span class="ce">; Show a generic text box.</span></span>
<span class="l"><a class="anc" name="a2da" href="#a2da">[a2da]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_CHECK_FOR_ITEM</span></span><span class="ce">; Check if the player has the Battle Suit.</span></span>
<span class="l"><a class="anc" name="a2db" href="#a2db">[a2db]</a><span class="cd"><span class="i">db</span> <span class="o">ARMOR_BATTLE_SUIT</span></span><span class="ce">; [$a2db] InventoryItem</span></span>
<span class="l"><a class="anc" name="a2dc" href="#a2dc">[a2dc]</a><span class="cd"><span class="i">dw</span> <span class="o">$a2e1</span></span><span class="ce">; If so, jump.</span></span>
<span class="l"><a class="anc" name="a2de" href="#a2de">[a2de]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Else, show <a href="PRG13.html#MESSAGE_LOOK_FOR_BATTLE_SUIT">MESSAGE_LOOK_FOR_BATTLE_SUIT</a>.</span></span>
<span class="l"><a class="anc" name="a2df" href="#a2df">[a2df]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_LOOK_FOR_BATTLE_SUIT</span></span><span class="ce">; [$a2df] Message</span></span>
<span class="l"><a class="anc" name="a2e0" href="#a2e0">[a2e0]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<a name=":a2e1:@_ISCRIPT_A2D9_HAS_BATTLE_SUIT"></a><span class="l"><a class="anc" name="a2e1" href="#a2e1">[a2e1]</a><a href="#:a2e1:@_ISCRIPT_A2D9_HAS_BATTLE_SUIT" class="lla">@_ISCRIPT_A2D9_HAS_BATTLE_SUIT:</a><span class="ce">; [$a2e1]</span></span>
<span class="l"><a class="anc" name="a2e1" href="#a2e1">[a2e1]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_FIND_MAGIC_CANE">MESSAGE_FIND_MAGIC_CANE</a>.</span></span>
<span class="l"><a class="anc" name="a2e2" href="#a2e2">[a2e2]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_FIND_MAGIC_CANE</span></span><span class="ce">; [$a2e2] Message</span></span>
<span class="l"><a class="anc" name="a2e3" href="#a2e3">[a2e3]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_A2E4"></a><div class="cp">;============================================================================
; TODO
;
; XXX Check if easter egg?
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fcd]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fcd]
;
</div><span class="l"><a class="anc" name="a2e4" href="#a2e4">[a2e4]</a><a href="#ISCRIPT_A2E4" class="la">ISCRIPT_A2E4:</a><span class="ce">; [$a2e4]</span></span>
<span class="l"><a class="anc" name="a2e4" href="#a2e4">[a2e4]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_GENERIC</span></span><span class="ce">; Show a generic text box.</span></span>
<span class="l"><a class="anc" name="a2e5" href="#a2e5">[a2e5]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_CHECK_FOR_ITEM</span></span><span class="ce">; Check if the player has the Ring of Dworf.</span></span>
<span class="l"><a class="anc" name="a2e6" href="#a2e6">[a2e6]</a><span class="cd"><span class="i">db</span> <span class="o">SPECIAL_RING_OF_DWORF</span></span><span class="ce">; [$a2e6] InventoryItem</span></span>
<span class="l"><a class="anc" name="a2e7" href="#a2e7">[a2e7]</a><span class="cd"><span class="i">dw</span> <span class="o">$a2ec</span></span><span class="ce">; If so, jump.</span></span>
<span class="l"><a class="anc" name="a2e9" href="#a2e9">[a2e9]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Else, show <a href="PRG13.html#MESSAGE_YOU_ARE_FAMOUS_GOOD_LOOKING">MESSAGE_YOU_ARE_FAMOUS_GOOD_LOOKING</a>.</span></span>
<span class="l"><a class="anc" name="a2ea" href="#a2ea">[a2ea]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_YOU_ARE_FAMOUS_GOOD_LOOKING</span></span><span class="ce">; [$a2ea] Message</span></span>
<span class="l"><a class="anc" name="a2eb" href="#a2eb">[a2eb]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<a name=":a2ec:@_ISCRIPT_A2E4_HAS_RING_OF_DWORF"></a><span class="l"><a class="anc" name="a2ec" href="#a2ec">[a2ec]</a><a href="#:a2ec:@_ISCRIPT_A2E4_HAS_RING_OF_DWORF" class="lla">@_ISCRIPT_A2E4_HAS_RING_OF_DWORF:</a><span class="ce">; [$a2ec]</span></span>
<span class="l"><a class="anc" name="a2ec" href="#a2ec">[a2ec]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_AUTOGRAPH">MESSAGE_AUTOGRAPH</a>.</span></span>
<span class="l"><a class="anc" name="a2ed" href="#a2ed">[a2ed]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_AUTOGRAPH</span></span><span class="ce">; [$a2ed] Message</span></span>
<span class="l"><a class="anc" name="a2ee" href="#a2ee">[a2ee]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_A2EF"></a><div class="cp">;============================================================================
; TODO
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fce]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fce]
;
</div><span class="l"><a class="anc" name="a2ef" href="#a2ef">[a2ef]</a><a href="#ISCRIPT_A2EF" class="la">ISCRIPT_A2EF:</a><span class="ce">; [$a2ef]</span></span>
<span class="l"><a class="anc" name="a2ef" href="#a2ef">[a2ef]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_NURSE</span></span><span class="ce">; XXX Show a portrait text box</span></span>
<span class="l"><a class="anc" name="a2f0" href="#a2f0">[a2f0]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_CHECK_FOR_ITEM</span></span><span class="ce">; Check if the player has the Battle Suit.</span></span>
<span class="l"><a class="anc" name="a2f1" href="#a2f1">[a2f1]</a><span class="cd"><span class="i">db</span> <span class="o">ARMOR_BATTLE_SUIT</span></span><span class="ce">; [$a2f1] InventoryItem</span></span>
<span class="l"><a class="anc" name="a2f2" href="#a2f2">[a2f2]</a><span class="cd"><span class="i">dw</span> <span class="o">$a2f7</span></span><span class="ce">; If so, jump.</span></span>
<span class="l"><a class="anc" name="a2f4" href="#a2f4">[a2f4]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Else, show <a href="PRG13.html#MESSAGE_WHEN_TAKE_BATH">MESSAGE_WHEN_TAKE_BATH</a>.</span></span>
<span class="l"><a class="anc" name="a2f5" href="#a2f5">[a2f5]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_WHEN_TAKE_BATH</span></span><span class="ce">; [$a2f5] Message</span></span>
<span class="l"><a class="anc" name="a2f6" href="#a2f6">[a2f6]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<a name=":a2f7:@_ISCRIPT_A2EF_HAS_BATTLE_SUIT"></a><span class="l"><a class="anc" name="a2f7" href="#a2f7">[a2f7]</a><a href="#:a2f7:@_ISCRIPT_A2EF_HAS_BATTLE_SUIT" class="lla">@_ISCRIPT_A2EF_HAS_BATTLE_SUIT:</a><span class="ce">; [$a2f7]</span></span>
<span class="l"><a class="anc" name="a2f7" href="#a2f7">[a2f7]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_GURU_CONFLATE_HAS_RING_DWARVES">MESSAGE_GURU_CONFLATE_HAS_RING_DWARVES</a>.</span></span>
<span class="l"><a class="anc" name="a2f8" href="#a2f8">[a2f8]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_GURU_CONFLATE_HAS_RING_DWARVES</span></span><span class="ce">; [$a2f8] Message</span></span>
<span class="l"><a class="anc" name="a2f9" href="#a2f9">[a2f9]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_A2FA"></a><div class="cp">;============================================================================
; TODO
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fcf]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fcf]
;
</div><span class="l"><a class="anc" name="a2fa" href="#a2fa">[a2fa]</a><a href="#ISCRIPT_A2FA" class="la">ISCRIPT_A2FA:</a><span class="ce">; [$a2fa]</span></span>
<span class="l"><a class="anc" name="a2fa" href="#a2fa">[a2fa]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_GENERIC</span></span><span class="ce">; Show a generic text box.</span></span>
<span class="l"><a class="anc" name="a2fb" href="#a2fb">[a2fb]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_CHECK_FOR_ITEM</span></span><span class="ce">; Check if the player has the Battle Suit.</span></span>
<span class="l"><a class="anc" name="a2fc" href="#a2fc">[a2fc]</a><span class="cd"><span class="i">db</span> <span class="o">ARMOR_BATTLE_SUIT</span></span><span class="ce">; [$a2fc] InventoryItem</span></span>
<span class="l"><a class="anc" name="a2fd" href="#a2fd">[a2fd]</a><span class="cd"><span class="i">dw</span> <span class="o">$a302</span></span><span class="ce">; If so, jump.</span></span>
<span class="l"><a class="anc" name="a2ff" href="#a2ff">[a2ff]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Else, show <a href="PRG13.html#MESSAGE_DID_YOU_GET_BATTLE_SUIT">MESSAGE_DID_YOU_GET_BATTLE_SUIT</a>.</span></span>
<span class="l"><a class="anc" name="a300" href="#a300">[a300]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_DID_YOU_GET_BATTLE_SUIT</span></span><span class="ce">; [$a300] Message</span></span>
<span class="l"><a class="anc" name="a301" href="#a301">[a301]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<a name=":a302:@_ISCRIPT_A2FA_HAS_BATTLE_SUIT"></a><span class="l"><a class="anc" name="a302" href="#a302">[a302]</a><a href="#:a302:@_ISCRIPT_A2FA_HAS_BATTLE_SUIT" class="lla">@_ISCRIPT_A2FA_HAS_BATTLE_SUIT:</a><span class="ce">; [$a302]</span></span>
<span class="l"><a class="anc" name="a302" href="#a302">[a302]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show, <a href="PRG13.html#MESSAGE_DARTMORE_IS_MAZE">MESSAGE_DARTMORE_IS_MAZE</a>.</span></span>
<span class="l"><a class="anc" name="a303" href="#a303">[a303]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_DARTMORE_IS_MAZE</span></span><span class="ce">; [$a303] Message</span></span>
<span class="l"><a class="anc" name="a304" href="#a304">[a304]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_A305"></a><div class="cp">;============================================================================
; TODO
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fd0]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fd0]
;
</div><span class="l"><a class="anc" name="a305" href="#a305">[a305]</a><a href="#ISCRIPT_A305" class="la">ISCRIPT_A305:</a><span class="ce">; [$a305]</span></span>
<span class="l"><a class="anc" name="a305" href="#a305">[a305]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_GENERIC</span></span><span class="ce">; Show a generic text box.</span></span>
<span class="l"><a class="anc" name="a306" href="#a306">[a306]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_CHECK_FOR_ITEM</span></span><span class="ce">; Check if the player has the Battle Suit.</span></span>
<span class="l"><a class="anc" name="a307" href="#a307">[a307]</a><span class="cd"><span class="i">db</span> <span class="o">ARMOR_BATTLE_SUIT</span></span><span class="ce">; [$a307] InventoryItem</span></span>
<span class="l"><a class="anc" name="a308" href="#a308">[a308]</a><span class="cd"><span class="i">dw</span> <span class="o">$a30d</span></span><span class="ce">; If so, jump.</span></span>
<span class="l"><a class="anc" name="a30a" href="#a30a">[a30a]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Else, show <a href="PRG13.html#MESSAGE_IS_FIRST_VISIT_TO_STORE">MESSAGE_IS_FIRST_VISIT_TO_STORE</a>.</span></span>
<span class="l"><a class="anc" name="a30b" href="#a30b">[a30b]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_IS_FIRST_VISIT_TO_STORE</span></span><span class="ce">; [$a30b] Message</span></span>
<span class="l"><a class="anc" name="a30c" href="#a30c">[a30c]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<a name=":a30d:@_ISCRIPT_A305_HAS_BATTLE_SUIT"></a><span class="l"><a class="anc" name="a30d" href="#a30d">[a30d]</a><a href="#:a30d:@_ISCRIPT_A305_HAS_BATTLE_SUIT" class="lla">@_ISCRIPT_A305_HAS_BATTLE_SUIT:</a><span class="ce">; [$a30d]</span></span>
<span class="l"><a class="anc" name="a30d" href="#a30d">[a30d]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_MAGIC_CANE_ABOVE_TOWER">MESSAGE_MAGIC_CANE_ABOVE_TOWER</a>.</span></span>
<span class="l"><a class="anc" name="a30e" href="#a30e">[a30e]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_MAGIC_CANE_ABOVE_TOWER</span></span><span class="ce">; [$a30e] Message</span></span>
<span class="l"><a class="anc" name="a30f" href="#a30f">[a30f]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_A310"></a><div class="cp">;============================================================================
; TODO
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fdb]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fdb]
;
</div><span class="l"><a class="anc" name="a310" href="#a310">[a310]</a><a href="#ISCRIPT_A310" class="la">ISCRIPT_A310:</a><span class="ce">; [$a310]</span></span>
<span class="l"><a class="anc" name="a310" href="#a310">[a310]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_GENERIC</span></span><span class="ce">; Show a generic text box.</span></span>
<span class="l"><a class="anc" name="a311" href="#a311">[a311]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_CHECK_FOR_ITEM</span></span><span class="ce">; Check if the player has the Dragon Slayer.</span></span>
<span class="l"><a class="anc" name="a312" href="#a312">[a312]</a><span class="cd"><span class="i">db</span> <span class="o">WEAPON_DRAGON_SLAYER</span></span><span class="ce">; [$a312] InventoryItem</span></span>
<span class="l"><a class="anc" name="a313" href="#a313">[a313]</a><span class="cd"><span class="i">dw</span> <span class="o">$a318</span></span><span class="ce">; If so, jump.</span></span>
<span class="l"><a class="anc" name="a315" href="#a315">[a315]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Else, show <a href="PRG13.html#MESSAGE_DIRECTIONS_TO_FRATERNAL">MESSAGE_DIRECTIONS_TO_FRATERNAL</a>.</span></span>
<span class="l"><a class="anc" name="a316" href="#a316">[a316]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_DIRECTIONS_TO_FRATERNAL</span></span><span class="ce">; [$a316] Message</span></span>
<span class="l"><a class="anc" name="a317" href="#a317">[a317]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<a name=":a318:@_ISCRIPT_A310_HAS_DRAGON_SLAYER"></a><span class="l"><a class="anc" name="a318" href="#a318">[a318]</a><a href="#:a318:@_ISCRIPT_A310_HAS_DRAGON_SLAYER" class="lla">@_ISCRIPT_A310_HAS_DRAGON_SLAYER:</a><span class="ce">; [$a318]</span></span>
<span class="l"><a class="anc" name="a318" href="#a318">[a318]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_YOU_NEED_DEMONS_RING">MESSAGE_YOU_NEED_DEMONS_RING</a>.</span></span>
<span class="l"><a class="anc" name="a319" href="#a319">[a319]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_YOU_NEED_DEMONS_RING</span></span><span class="ce">; [$a319] Message</span></span>
<span class="l"><a class="anc" name="a31a" href="#a31a">[a31a]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_OVERWORLD_HOUSE_MAN"></a><div class="cp">;============================================================================
; Interaction with a man sitting in a house in the overworld.
;
; This is in the bottom-left of an area otherwise full of
; enemy houses, 4 screens to the left of the Evil Fortress
; entrance. Exterior looks like a castle.
;
; If the player has the Dragon Slayer, he'll say to defeat
; evil with it. If not, he'll say that King Grieve has it.
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fdc]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fdc]
;
</div><span class="l"><a class="anc" name="a31b" href="#a31b">[a31b]</a><a href="#ISCRIPT_OVERWORLD_HOUSE_MAN" class="la">ISCRIPT_OVERWORLD_HOUSE_MAN:</a><span class="ce">; [$a31b]</span></span>
<span class="l"><a class="anc" name="a31b" href="#a31b">[a31b]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_GENERIC</span></span><span class="ce">; Show a generic text box.</span></span>
<span class="l"><a class="anc" name="a31c" href="#a31c">[a31c]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_CHECK_FOR_ITEM</span></span><span class="ce">; Check if the player has the Dragon Slayer.</span></span>
<span class="l"><a class="anc" name="a31d" href="#a31d">[a31d]</a><span class="cd"><span class="i">db</span> <span class="o">WEAPON_DRAGON_SLAYER</span></span><span class="ce">; [$a31d] InventoryItem</span></span>
<span class="l"><a class="anc" name="a31e" href="#a31e">[a31e]</a><span class="cd"><span class="i">dw</span> <span class="o">$a323</span></span><span class="ce">; If so, jump.</span></span>
<span class="l"><a class="anc" name="a320" href="#a320">[a320]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Else, show <a href="PRG13.html#MESSAGE_KING_GRIEVE_HAS_DRAGON_SLAYER">MESSAGE_KING_GRIEVE_HAS_DRAGON_SLAYER</a>.</span></span>
<span class="l"><a class="anc" name="a321" href="#a321">[a321]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_KING_GRIEVE_HAS_DRAGON_SLAYER</span></span><span class="ce">; [$a321] Message</span></span>
<span class="l"><a class="anc" name="a322" href="#a322">[a322]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<a name=":a323:@_ISCRIPT_OVERWORLD_HOUSE_MAN_HAS_DRAGON_SLAYER"></a><span class="l"><a class="anc" name="a323" href="#a323">[a323]</a><a href="#:a323:@_ISCRIPT_OVERWORLD_HOUSE_MAN_HAS_DRAGON_SLAYER" class="lla">@_ISCRIPT_OVERWORLD_HOUSE_MAN_HAS_DRAGON_SLAYER:</a><span class="ce">; [$a323]</span></span>
<span class="l"><a class="anc" name="a323" href="#a323">[a323]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_DEFEAT_EVIL_WITH_DRAGON_SLAYER">MESSAGE_DEFEAT_EVIL_WITH_DRAGON_SLAYER</a>.</span></span>
<span class="l"><a class="anc" name="a324" href="#a324">[a324]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_DEFEAT_EVIL_WITH_DRAGON_SLAYER</span></span><span class="ce">; [$a324] Message</span></span>
<span class="l"><a class="anc" name="a325" href="#a325">[a325]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_OVERWORLD_HOUSE_WOMAN"></a><div class="cp">;============================================================================
; Interaction with a woman walking in a house in the overworld.
;
; This is in the bottom-left of an area otherwise full of
; enemy houses, 4 screens to the left of the Evil Fortress
; entrance. Exterior looks like a castle.
;
; If the player has the Dragon Slayer, she'll say that the
; Guru has the Demon's Ring. Otherwise, she'll say to find
; the Guru in Castle Fraternal.
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fdd]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fdd]
;
</div><span class="l"><a class="anc" name="a326" href="#a326">[a326]</a><a href="#ISCRIPT_OVERWORLD_HOUSE_WOMAN" class="la">ISCRIPT_OVERWORLD_HOUSE_WOMAN:</a><span class="ce">; [$a326]</span></span>
<span class="l"><a class="anc" name="a326" href="#a326">[a326]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_GENERIC</span></span><span class="ce">; Show a generic text box.</span></span>
<span class="l"><a class="anc" name="a327" href="#a327">[a327]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_CHECK_FOR_ITEM</span></span><span class="ce">; Check if the player has the Dragon Slayer.</span></span>
<span class="l"><a class="anc" name="a328" href="#a328">[a328]</a><span class="cd"><span class="i">db</span> <span class="o">WEAPON_DRAGON_SLAYER</span></span><span class="ce">; [$a328] InventoryItem</span></span>
<span class="l"><a class="anc" name="a329" href="#a329">[a329]</a><span class="cd"><span class="i">dw</span> <span class="o">$a32e</span></span><span class="ce">; If so, jump.</span></span>
<span class="l"><a class="anc" name="a32b" href="#a32b">[a32b]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Else, show <a href="PRG13.html#MESSAGE_GO_TO_FRATERNAL_GURU">MESSAGE_GO_TO_FRATERNAL_GURU</a>.</span></span>
<span class="l"><a class="anc" name="a32c" href="#a32c">[a32c]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_GO_TO_FRATERNAL_GURU</span></span><span class="ce">; [$a32c] Message</span></span>
<span class="l"><a class="anc" name="a32d" href="#a32d">[a32d]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<a name=":a32e:@_ISCRIPT_OVERWORLD_HOUSE_WOMAN_HAS_DRAGON_SLAYER"></a><span class="l"><a class="anc" name="a32e" href="#a32e">[a32e]</a><a href="#:a32e:@_ISCRIPT_OVERWORLD_HOUSE_WOMAN_HAS_DRAGON_SLAYER" class="lla">@_ISCRIPT_OVERWORLD_HOUSE_WOMAN_HAS_DRAGON_SLAYER:</a><span class="ce">; [$a32e]</span></span>
<span class="l"><a class="anc" name="a32e" href="#a32e">[a32e]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_GURU_HAS_DEMONS_RING">MESSAGE_GURU_HAS_DEMONS_RING</a>.</span></span>
<span class="l"><a class="anc" name="a32f" href="#a32f">[a32f]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_GURU_HAS_DEMONS_RING</span></span><span class="ce">; [$a32f] Message</span></span>
<span class="l"><a class="anc" name="a330" href="#a330">[a330]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_A331"></a><div class="cp">;============================================================================
; TODO
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fde]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fde]
;
</div><span class="l"><a class="anc" name="a331" href="#a331">[a331]</a><a href="#ISCRIPT_A331" class="la">ISCRIPT_A331:</a><span class="ce">; [$a331]</span></span>
<span class="l"><a class="anc" name="a331" href="#a331">[a331]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_GENERIC</span></span><span class="ce">; Show a generic text box.</span></span>
<span class="l"><a class="anc" name="a332" href="#a332">[a332]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_CHECK_FOR_ITEM</span></span><span class="ce">; Check if the player has the Dragon Slayer.</span></span>
<span class="l"><a class="anc" name="a333" href="#a333">[a333]</a><span class="cd"><span class="i">db</span> <span class="o">WEAPON_DRAGON_SLAYER</span></span><span class="ce">; [$a333] InventoryItem</span></span>
<span class="l"><a class="anc" name="a334" href="#a334">[a334]</a><span class="cd"><span class="i">dw</span> <span class="o">$a339</span></span><span class="ce">; If so, jump.</span></span>
<span class="l"><a class="anc" name="a336" href="#a336">[a336]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Else, show <a href="PRG13.html#MESSAGE_SEARCH_CASTLE_FOR_GURU">MESSAGE_SEARCH_CASTLE_FOR_GURU</a>.</span></span>
<span class="l"><a class="anc" name="a337" href="#a337">[a337]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_SEARCH_CASTLE_FOR_GURU</span></span><span class="ce">; [$a337] Message</span></span>
<span class="l"><a class="anc" name="a338" href="#a338">[a338]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<a name=":a339:@_ISCRIPT_A331_HAS_DRAGON_SLAYER"></a><span class="l"><a class="anc" name="a339" href="#a339">[a339]</a><a href="#:a339:@_ISCRIPT_A331_HAS_DRAGON_SLAYER" class="lla">@_ISCRIPT_A331_HAS_DRAGON_SLAYER:</a><span class="ce">; [$a339]</span></span>
<span class="l"><a class="anc" name="a339" href="#a339">[a339]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_EVIL_IMMUNE_TO_MAGIC">MESSAGE_EVIL_IMMUNE_TO_MAGIC</a>.</span></span>
<span class="l"><a class="anc" name="a33a" href="#a33a">[a33a]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_EVIL_IMMUNE_TO_MAGIC</span></span><span class="ce">; [$a33a] Message</span></span>
<span class="l"><a class="anc" name="a33b" href="#a33b">[a33b]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_FRATERNAL_GURU"></a><div class="cp">;============================================================================
; Interaction with the Guru of Castle Fraternal.
;
; If the player has both the Dragon Slayer sword
; and the Demon's Ring, the Guru will say he'll
; meditate for you.
;
; If the player has the Dragon Slayer but not the
; Demon's Ring, the player will receive the Demon's Ring
; and tell you King Grieve has been defeated and to use
; the ring to reach the final boss.
;
; If the player doesn't have the Dragon Slayer, the
; Guru will give exposition on the meteorite.
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fdf]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fdf]
;
</div><span class="l"><a class="anc" name="a33c" href="#a33c">[a33c]</a><a href="#ISCRIPT_FRATERNAL_GURU" class="la">ISCRIPT_FRATERNAL_GURU:</a><span class="ce">; [$a33c]</span></span>
<span class="l"><a class="anc" name="a33c" href="#a33c">[a33c]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_GURU</span></span><span class="ce">; Show the Guru portrait text box.</span></span>
<span class="l"><a class="anc" name="a33d" href="#a33d">[a33d]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_CHECK_FOR_ITEM</span></span><span class="ce">; Check if the player has the Dragon Slayer.</span></span>
<span class="l"><a class="anc" name="a33e" href="#a33e">[a33e]</a><span class="cd"><span class="i">db</span> <span class="o">WEAPON_DRAGON_SLAYER</span></span><span class="ce">; [$a33e] InventoryItem</span></span>
<span class="l"><a class="anc" name="a33f" href="#a33f">[a33f]</a><span class="cd"><span class="i">dw</span> <span class="o">$a344</span></span><span class="ce">; If so, jump.</span></span>
<span class="l"><a class="anc" name="a341" href="#a341">[a341]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Else, show <a href="PRG13.html#MESSAGE_METEORITE_EXPOSITION_2">MESSAGE_METEORITE_EXPOSITION_2</a>.</span></span>
<span class="l"><a class="anc" name="a342" href="#a342">[a342]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_METEORITE_EXPOSITION_2</span></span><span class="ce">; [$a342] Message</span></span>
<span class="l"><a class="anc" name="a343" href="#a343">[a343]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<a name=":a344:@_ISCRIPT_A33C_HAS_DRAGON_SLAYER"></a><span class="l"><a class="anc" name="a344" href="#a344">[a344]</a><a href="#:a344:@_ISCRIPT_A33C_HAS_DRAGON_SLAYER" class="lla">@_ISCRIPT_A33C_HAS_DRAGON_SLAYER:</a><span class="ce">; [$a344]</span></span>
<span class="l"><a class="anc" name="a344" href="#a344">[a344]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_CHECK_FOR_ITEM</span></span><span class="ce">; Check if the player has the Demon's Ring.</span></span>
<span class="l"><a class="anc" name="a345" href="#a345">[a345]</a><span class="cd"><span class="i">db</span> <span class="o">SPECIAL_DEMONS_RING</span></span><span class="ce">; [$a345] InventoryItem</span></span>
<span class="l"><a class="anc" name="a346" href="#a346">[a346]</a><span class="cd"><span class="i">dw</span> <span class="o">$a34d</span></span><span class="ce">; If so, jump.</span></span>
<span class="l"><a class="anc" name="a348" href="#a348">[a348]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_UNSKIPPABLE_MESSAGE</span></span><span class="ce">; Else, show <a href="PRG13.html#MESSAGE_DEFEATED_KING_GRIEVE">MESSAGE_DEFEATED_KING_GRIEVE</a>.</span></span>
<span class="l"><a class="anc" name="a349" href="#a349">[a349]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_DEFEATED_KING_GRIEVE</span></span><span class="ce">; [$a349] Message</span></span>
<span class="l"><a class="anc" name="a34a" href="#a34a">[a34a]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_ADD_ITEM</span></span><span class="ce">; Add the Demon's Ring to the inventory.</span></span>
<span class="l"><a class="anc" name="a34b" href="#a34b">[a34b]</a><span class="cd"><span class="i">db</span> <span class="o">SPECIAL_DEMONS_RING</span></span><span class="ce">; [$a34b] InventoryItem</span></span>
<span class="l"><a class="anc" name="a34c" href="#a34c">[a34c]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<a name=":a34d:@_ISCRIPT_A33C_HAS_DEMONS_RING"></a><span class="l"><a class="anc" name="a34d" href="#a34d">[a34d]</a><a href="#:a34d:@_ISCRIPT_A33C_HAS_DEMONS_RING" class="lla">@_ISCRIPT_A33C_HAS_DEMONS_RING:</a><span class="ce">; [$a34d]</span></span>
<span class="l"><a class="anc" name="a34d" href="#a34d">[a34d]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_ILL_MEDITATE_FOR_YOU">MESSAGE_ILL_MEDITATE_FOR_YOU</a>.</span></span>
<span class="l"><a class="anc" name="a34e" href="#a34e">[a34e]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_ILL_MEDITATE_FOR_YOU</span></span><span class="ce">; [$a34e] Message</span></span>
<span class="l"><a class="anc" name="a34f" href="#a34f">[a34f]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_EOLIS_KING"></a><div class="cp">;============================================================================
; Interaction with the King.
;
; If the player has no gold, the King will say some
; exposition and give 1500G.
;
; If the player already has gold, the King will say there's
; nothing more he can do to help.
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9f73]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9f73]
;
</div><span class="l"><a class="anc" name="a350" href="#a350">[a350]</a><a href="#ISCRIPT_EOLIS_KING" class="la">ISCRIPT_EOLIS_KING:</a><span class="ce">; [$a350]</span></span>
<span class="l"><a class="anc" name="a350" href="#a350">[a350]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_KING</span></span><span class="ce">; Show the King portrait text box.</span></span>
<span class="l"><a class="anc" name="a351" href="#a351">[a351]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_CHECK_GOLD</span></span><span class="ce">; Check if the player has gold.</span></span>
<span class="l"><a class="anc" name="a352" href="#a352">[a352]</a><span class="cd"><span class="i">dw</span> <span class="o">$a35a</span></span><span class="ce">; If so, jump.</span></span>
<span class="l"><a class="anc" name="a354" href="#a354">[a354]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_UNSKIPPABLE_MESSAGE</span></span><span class="ce">; Else, show <a href="PRG13.html#MESSAGE_KING_EXPOSITION">MESSAGE_KING_EXPOSITION</a>.</span></span>
<span class="l"><a class="anc" name="a355" href="#a355">[a355]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_KING_EXPOSITION</span></span><span class="ce">; [$a355] Message</span></span>
<span class="l"><a class="anc" name="a356" href="#a356">[a356]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_ADD_GOLD</span></span><span class="ce">; Add 1500 gold.</span></span>
<span class="l"><a class="anc" name="a357" href="#a357">[a357]</a><span class="cd"><span class="i">dw</span> <span class="o">$05dc</span></span><span class="ce">; [$a357] ushort</span></span>
<span class="l"></span>
<span class="l"><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<a name=":a35a:@_ISCRIPT_NPC_KING_FOLLOW_UP_HAS_GOLD"></a><span class="l"><a class="anc" name="a35a" href="#a35a">[a35a]</a><a href="#:a35a:@_ISCRIPT_NPC_KING_FOLLOW_UP_HAS_GOLD" class="lla">@_ISCRIPT_NPC_KING_FOLLOW_UP_HAS_GOLD:</a><span class="ce">; [$a35a]</span></span>
<span class="l"><a class="anc" name="a35a" href="#a35a">[a35a]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_NOTHING_MORE_TO_HELP">MESSAGE_NOTHING_MORE_TO_HELP</a>.</span></span>
<span class="l"><a class="anc" name="a35b" href="#a35b">[a35b]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_NOTHING_MORE_TO_HELP</span></span><span class="ce">; [$a35b] Message</span></span>
<span class="l"><a class="anc" name="a35c" href="#a35c">[a35c]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_EOLIS_MARTIAL_ARTS_MAGIC_SHOP"></a><div class="cp">;============================================================================
; Interaction for Eolis Martial Arts / Magic Shop.
;
; The Martial Artist/Magician will give 40MP for 200G.
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9f79]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9f79]
;
</div><span class="l"><a class="anc" name="a35d" href="#a35d">[a35d]</a><a href="#ISCRIPT_EOLIS_MARTIAL_ARTS_MAGIC_SHOP" class="la">ISCRIPT_EOLIS_MARTIAL_ARTS_MAGIC_SHOP:</a><span class="ce">; [$a35d]</span></span>
<span class="l"><a class="anc" name="a35d" href="#a35d">[a35d]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_MAGICIAN</span></span><span class="ce">; Show the Magician portrait text box.</span></span>
<span class="l"><a class="anc" name="a35e" href="#a35e">[a35e]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_QUESTION_MESSAGE</span></span><span class="ce">; Show a dismissible <a href="PRG13.html#MESSAGE_MAGIC_200G">MESSAGE_MAGIC_200G</a>.</span></span>
<span class="l"><a class="anc" name="a35f" href="#a35f">[a35f]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_MAGIC_200G</span></span><span class="ce">; [$a35f] Message</span></span>
<span class="l"><a class="anc" name="a360" href="#a360">[a360]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_PAY_GOLD</span></span><span class="ce">; If not dismissed, pay 200G.</span></span>
<span class="l"><a class="anc" name="a361" href="#a361">[a361]</a><span class="cd"><span class="i">dw</span> <span class="o">$00c8</span></span><span class="ce">; [$a361] ushort</span></span>
<span class="l"></span>
<span class="l"><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_ADD_MP</span></span><span class="ce">; Add 40MP.</span></span>
<span class="l"><a class="anc" name="a364" href="#a364">[a364]</a><span class="cd"><span class="i">db</span> <span class="o">$28</span></span><span class="ce">; [$a364] byte</span></span>
<span class="l"></span>
<span class="l"><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_UNSKIPPABLE_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_WATCH_POWER_LEVEL">MESSAGE_WATCH_POWER_LEVEL</a>.</span></span>
<span class="l"><a class="anc" name="a366" href="#a366">[a366]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_WATCH_POWER_LEVEL</span></span><span class="ce">; [$a366] Message</span></span>
<span class="l"><a class="anc" name="a367" href="#a367">[a367]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_AFTER_VICTIM_MAGIC_SHOP"></a><div class="cp">;============================================================================
; Interaction for the after-Victim Magic Shop.
;
; The Magician will sell Fire magic for 3000G.
;
; If the player already has Fire, he will say magic
; can be used for justice or destruction depending on
; who uses it.
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fb6]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fb6]
;
</div><span class="l"><a class="anc" name="a368" href="#a368">[a368]</a><a href="#ISCRIPT_AFTER_VICTIM_MAGIC_SHOP" class="la">ISCRIPT_AFTER_VICTIM_MAGIC_SHOP:</a><span class="ce">; [$a368]</span></span>
<span class="l"><a class="anc" name="a368" href="#a368">[a368]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_MAGICIAN</span></span><span class="ce">; Show the Magician portrait text box.</span></span>
<span class="l"><a class="anc" name="a369" href="#a369">[a369]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_CHECK_FOR_ITEM</span></span><span class="ce">; Check if the player has the Fire magic.</span></span>
<span class="l"><a class="anc" name="a36a" href="#a36a">[a36a]</a><span class="cd"><span class="i">db</span> <span class="o">MAGIC_FIRE</span></span><span class="ce">; [$a36a] InventoryItem</span></span>
<span class="l"><a class="anc" name="a36b" href="#a36b">[a36b]</a><span class="cd"><span class="i">dw</span> <span class="o">$a377</span></span><span class="ce">; If so, jump.</span></span>
<span class="l"><a class="anc" name="a36d" href="#a36d">[a36d]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_QUESTION_MESSAGE</span></span><span class="ce">; Else, show a dismissible <a href="PRG13.html#MESSAGE_MAGIC_FIRE_3000G">MESSAGE_MAGIC_FIRE_3000G</a>.</span></span>
<span class="l"><a class="anc" name="a36e" href="#a36e">[a36e]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_MAGIC_FIRE_3000G</span></span><span class="ce">; [$a36e] Message</span></span>
<span class="l"><a class="anc" name="a36f" href="#a36f">[a36f]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_PAY_GOLD</span></span><span class="ce">; If not dismissed, pay 3000G.</span></span>
<span class="l"><a class="anc" name="a370" href="#a370">[a370]</a><span class="cd"><span class="i">dw</span> <span class="o">$0bb8</span></span><span class="ce">; [$a370] ushort</span></span>
<span class="l"></span>
<span class="l"><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_ADD_ITEM</span></span><span class="ce">; Add the Fire magic to the inventory.</span></span>
<span class="l"><a class="anc" name="a373" href="#a373">[a373]</a><span class="cd"><span class="i">db</span> <span class="o">MAGIC_FIRE</span></span><span class="ce">; [$a373] InventoryItem</span></span>
<span class="l"><a class="anc" name="a374" href="#a374">[a374]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_UNSKIPPABLE_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_MAGIC_OF_JUSTICE_OR_DESTRUCTION">MESSAGE_MAGIC_OF_JUSTICE_OR_DESTRUCTION</a>.</span></span>
<span class="l"><a class="anc" name="a375" href="#a375">[a375]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_MAGIC_OF_JUSTICE_OR_DESTRUCTION</span></span><span class="ce">; [$a375] Message</span></span>
<span class="l"><a class="anc" name="a376" href="#a376">[a376]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<a name=":a377:@_ISCRIPT_AFTER_VICTIM_MAGIC_SHOP_HAS_FIRE"></a><span class="l"><a class="anc" name="a377" href="#a377">[a377]</a><a href="#:a377:@_ISCRIPT_AFTER_VICTIM_MAGIC_SHOP_HAS_FIRE" class="lla">@_ISCRIPT_AFTER_VICTIM_MAGIC_SHOP_HAS_FIRE:</a><span class="ce">; [$a377]</span></span>
<span class="l"><a class="anc" name="a377" href="#a377">[a377]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_DONT_RELY_ON_MAGIC">MESSAGE_DONT_RELY_ON_MAGIC</a>.</span></span>
<span class="l"><a class="anc" name="a378" href="#a378">[a378]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_DONT_RELY_ON_MAGIC</span></span><span class="ce">; [$a378] Message</span></span>
<span class="l"><a class="anc" name="a379" href="#a379">[a379]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_EOLIS_TOOL_SHOP"></a><div class="cp">;============================================================================
; Interaction with the Eolis Tool Shop.
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9f78]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9f78]
;
</div><span class="l"><a class="anc" name="a37a" href="#a37a">[a37a]</a><a href="#ISCRIPT_EOLIS_TOOL_SHOP" class="la">ISCRIPT_EOLIS_TOOL_SHOP:</a><span class="ce">; [$a37a]</span></span>
<span class="l"><a class="anc" name="a37a" href="#a37a">[a37a]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_TOOLS_SALESMAN</span></span><span class="ce">; Show the tools salesman portrait text box.</span></span>
<span class="l"><a class="anc" name="a37b" href="#a37b">[a37b]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_I_SELL_TOOLS">MESSAGE_I_SELL_TOOLS</a>.</span></span>
<span class="l"><a class="anc" name="a37c" href="#a37c">[a37c]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_I_SELL_TOOLS</span></span><span class="ce">; [$a37c] Message</span></span>
<span class="l"><a class="anc" name="a37d" href="#a37d">[a37d]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_BUY_SELL_MENU</span></span><span class="ce">; Show the Buy/Sell menu.</span></span>
<span class="l"><a class="anc" name="a37e" href="#a37e">[a37e]</a><span class="cd"><span class="i">dw</span> <span class="o">$a386</span></span><span class="ce">; If Buy, jump.</span></span>
<span class="l"><a class="anc" name="a380" href="#a380">[a380]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_SELL_MENU</span></span><span class="ce">; If Sell, show the sell menu.</span></span>
<span class="l"><a class="anc" name="a381" href="#a381">[a381]</a><span class="cd"><span class="i">dw</span> <span class="o">$a42e</span></span><span class="ce">; <a href="#EOLIS_TOOL_SHOP_ITEMS">EOLIS_TOOL_SHOP_ITEMS</a> [$PRG12::a381]</span></span>
<span class="l"><a class="anc" name="a383" href="#a383">[a383]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_THANK_YOU_FOR_SHOPPING">MESSAGE_THANK_YOU_FOR_SHOPPING</a>.</span></span>
<span class="l"><a class="anc" name="a384" href="#a384">[a384]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_THANK_YOU_FOR_SHOPPING</span></span><span class="ce">; [$a384] Message</span></span>
<span class="l"><a class="anc" name="a385" href="#a385">[a385]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<a name=":a386:@_ISCRIPT_EOLIS_TOOL_SHOP_BUY"></a><span class="l"><a class="anc" name="a386" href="#a386">[a386]</a><a href="#:a386:@_ISCRIPT_EOLIS_TOOL_SHOP_BUY" class="lla">@_ISCRIPT_EOLIS_TOOL_SHOP_BUY:</a><span class="ce">; [$a386]</span></span>
<span class="l"><a class="anc" name="a386" href="#a386">[a386]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_OPEN_SHOP</span></span><span class="ce">; Open the Buy shop menu.</span></span>
<span class="l"><a class="anc" name="a387" href="#a387">[a387]</a><span class="cd"><span class="i">dw</span> <span class="o">$a42e</span></span><span class="ce">; <a href="#EOLIS_TOOL_SHOP_ITEMS">EOLIS_TOOL_SHOP_ITEMS</a> [$PRG12::a387]</span></span>
<span class="l"><a class="anc" name="a389" href="#a389">[a389]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_THANK_YOU_FOR_SHOPPING">MESSAGE_THANK_YOU_FOR_SHOPPING</a>.</span></span>
<span class="l"><a class="anc" name="a38a" href="#a38a">[a38a]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_THANK_YOU_FOR_SHOPPING</span></span><span class="ce">; [$a38a] Message</span></span>
<span class="l"><a class="anc" name="a38b" href="#a38b">[a38b]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_APOLUNE_TOOL_SHOP"></a><div class="cp">;============================================================================
; Interaction with the Apolune Tool Shop.
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9f84]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9f84]
;
</div><span class="l"><a class="anc" name="a38c" href="#a38c">[a38c]</a><a href="#ISCRIPT_APOLUNE_TOOL_SHOP" class="la">ISCRIPT_APOLUNE_TOOL_SHOP:</a><span class="ce">; [$a38c]</span></span>
<span class="l"><a class="anc" name="a38c" href="#a38c">[a38c]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_TOOLS_SALESMAN</span></span><span class="ce">; Show the tools salesman portrait text box.</span></span>
<span class="l"><a class="anc" name="a38d" href="#a38d">[a38d]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_I_SELL_TOOLS">MESSAGE_I_SELL_TOOLS</a>.</span></span>
<span class="l"><a class="anc" name="a38e" href="#a38e">[a38e]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_I_SELL_TOOLS</span></span><span class="ce">; [$a38e] Message</span></span>
<span class="l"><a class="anc" name="a38f" href="#a38f">[a38f]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_BUY_SELL_MENU</span></span><span class="ce">; Show the Buy/Sell menu.</span></span>
<span class="l"><a class="anc" name="a390" href="#a390">[a390]</a><span class="cd"><span class="i">dw</span> <span class="o">$a398</span></span><span class="ce">; If Buy, jump.</span></span>
<span class="l"><a class="anc" name="a392" href="#a392">[a392]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_SELL_MENU</span></span><span class="ce">; If Sell, show the sell menu.</span></span>
<span class="l"><a class="anc" name="a393" href="#a393">[a393]</a><span class="cd"><span class="i">dw</span> <span class="o">$a43b</span></span><span class="ce">; <a href="#APOLUNE_TOOL_SHOP_ITEMS">APOLUNE_TOOL_SHOP_ITEMS</a> [$PRG12::a393]</span></span>
<span class="l"><a class="anc" name="a395" href="#a395">[a395]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_THANK_YOU_FOR_SHOPPING">MESSAGE_THANK_YOU_FOR_SHOPPING</a>.</span></span>
<span class="l"><a class="anc" name="a396" href="#a396">[a396]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_THANK_YOU_FOR_SHOPPING</span></span><span class="ce">; [$a396] Message</span></span>
<span class="l"><a class="anc" name="a397" href="#a397">[a397]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<a name=":a398:@_ISCRIPT_APOLUNE_TOOL_SHOP_BUY"></a><span class="l"><a class="anc" name="a398" href="#a398">[a398]</a><a href="#:a398:@_ISCRIPT_APOLUNE_TOOL_SHOP_BUY" class="lla">@_ISCRIPT_APOLUNE_TOOL_SHOP_BUY:</a><span class="ce">; [$a398]</span></span>
<span class="l"><a class="anc" name="a398" href="#a398">[a398]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_OPEN_SHOP</span></span><span class="ce">; Open the Buy shop menu.</span></span>
<span class="l"><a class="anc" name="a399" href="#a399">[a399]</a><span class="cd"><span class="i">dw</span> <span class="o">$a43b</span></span><span class="ce">; Choose Buy</span></span>
<span class="l"><a class="anc" name="a39b" href="#a39b">[a39b]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_THANK_YOU_FOR_SHOPPING">MESSAGE_THANK_YOU_FOR_SHOPPING</a>.</span></span>
<span class="l"><a class="anc" name="a39c" href="#a39c">[a39c]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_THANK_YOU_FOR_SHOPPING</span></span><span class="ce">; [$a39c] Message</span></span>
<span class="l"><a class="anc" name="a39d" href="#a39d">[a39d]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_BEFORE_APOLUNE_TOOL_SHOP"></a><div class="cp">;============================================================================
; Interaction with the Before-Apolune Tool Shop.
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9f88]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9f88]
;
</div><span class="l"><a class="anc" name="a39e" href="#a39e">[a39e]</a><a href="#ISCRIPT_BEFORE_APOLUNE_TOOL_SHOP" class="la">ISCRIPT_BEFORE_APOLUNE_TOOL_SHOP:</a><span class="ce">; [$a39e]</span></span>
<span class="l"><a class="anc" name="a39e" href="#a39e">[a39e]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_TOOLS_SALESMAN</span></span><span class="ce">; Show the tools salesman portrait text box.</span></span>
<span class="l"><a class="anc" name="a39f" href="#a39f">[a39f]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_I_SELL_TOOLS">MESSAGE_I_SELL_TOOLS</a>.</span></span>
<span class="l"><a class="anc" name="a3a0" href="#a3a0">[a3a0]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_I_SELL_TOOLS</span></span><span class="ce">; [$a3a0] Message</span></span>
<span class="l"><a class="anc" name="a3a1" href="#a3a1">[a3a1]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_BUY_SELL_MENU</span></span><span class="ce">; Show the Buy/Sell menu.</span></span>
<span class="l"><a class="anc" name="a3a2" href="#a3a2">[a3a2]</a><span class="cd"><span class="i">dw</span> <span class="o">$a3aa</span></span><span class="ce">; If Buy, jump.</span></span>
<span class="l"><a class="anc" name="a3a4" href="#a3a4">[a3a4]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_SELL_MENU</span></span><span class="ce">; If Sell, show the sell menu.</span></span>
<span class="l"><a class="anc" name="a3a5" href="#a3a5">[a3a5]</a><span class="cd"><span class="i">dw</span> <span class="o">$a448</span></span><span class="ce">; <a href="#BEFORE_APOLUNE_TOOL_SHOP_ITEMS">BEFORE_APOLUNE_TOOL_SHOP_ITEMS</a> [$PRG12::a3a5]</span></span>
<span class="l"><a class="anc" name="a3a7" href="#a3a7">[a3a7]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_THANK_YOU_FOR_SHOPPING">MESSAGE_THANK_YOU_FOR_SHOPPING</a>.</span></span>
<span class="l"><a class="anc" name="a3a8" href="#a3a8">[a3a8]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_THANK_YOU_FOR_SHOPPING</span></span><span class="ce">; [$a3a8] Message</span></span>
<span class="l"><a class="anc" name="a3a9" href="#a3a9">[a3a9]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<a name=":a3aa:@_ISCRIPT_BEFORE_APOLUNE_TOOL_SHOP_BUY"></a><span class="l"><a class="anc" name="a3aa" href="#a3aa">[a3aa]</a><a href="#:a3aa:@_ISCRIPT_BEFORE_APOLUNE_TOOL_SHOP_BUY" class="lla">@_ISCRIPT_BEFORE_APOLUNE_TOOL_SHOP_BUY:</a><span class="ce">; [$a3aa]</span></span>
<span class="l"><a class="anc" name="a3aa" href="#a3aa">[a3aa]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_OPEN_SHOP</span></span><span class="ce">; Open the Buy shop menu.</span></span>
<span class="l"><a class="anc" name="a3ab" href="#a3ab">[a3ab]</a><span class="cd"><span class="i">dw</span> <span class="o">$a448</span></span><span class="ce">; <a href="#BEFORE_APOLUNE_TOOL_SHOP_ITEMS">BEFORE_APOLUNE_TOOL_SHOP_ITEMS</a> [$PRG12::a3ab]</span></span>
<span class="l"><a class="anc" name="a3ad" href="#a3ad">[a3ad]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_THANK_YOU_FOR_SHOPPING">MESSAGE_THANK_YOU_FOR_SHOPPING</a>.</span></span>
<span class="l"><a class="anc" name="a3ae" href="#a3ae">[a3ae]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_THANK_YOU_FOR_SHOPPING</span></span><span class="ce">; [$a3ae] Message</span></span>
<span class="l"><a class="anc" name="a3af" href="#a3af">[a3af]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_FOREPAW_TOOL_SHOP"></a><div class="cp">;============================================================================
; Interaction with the Forepaw Tool Shop.
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9f93]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9f93]
;
</div><span class="l"><a class="anc" name="a3b0" href="#a3b0">[a3b0]</a><a href="#ISCRIPT_FOREPAW_TOOL_SHOP" class="la">ISCRIPT_FOREPAW_TOOL_SHOP:</a><span class="ce">; [$a3b0]</span></span>
<span class="l"><a class="anc" name="a3b0" href="#a3b0">[a3b0]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_TOOLS_SALESMAN</span></span><span class="ce">; Show the tools salesman portrait text box.</span></span>
<span class="l"><a class="anc" name="a3b1" href="#a3b1">[a3b1]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_I_SELL_TOOLS">MESSAGE_I_SELL_TOOLS</a>.</span></span>
<span class="l"><a class="anc" name="a3b2" href="#a3b2">[a3b2]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_I_SELL_TOOLS</span></span><span class="ce">; [$a3b2] Message</span></span>
<span class="l"><a class="anc" name="a3b3" href="#a3b3">[a3b3]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_BUY_SELL_MENU</span></span><span class="ce">; Show the Buy/Sell menu.</span></span>
<span class="l"><a class="anc" name="a3b4" href="#a3b4">[a3b4]</a><span class="cd"><span class="i">dw</span> <span class="o">$a3bc</span></span><span class="ce">; If Buy, jump.</span></span>
<span class="l"><a class="anc" name="a3b6" href="#a3b6">[a3b6]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_SELL_MENU</span></span><span class="ce">; If Sell, show the sell menu.</span></span>
<span class="l"><a class="anc" name="a3b7" href="#a3b7">[a3b7]</a><span class="cd"><span class="i">dw</span> <span class="o">$a44f</span></span><span class="ce">; <a href="#FOREPAW_TOOL_SHOP_ITEMS">FOREPAW_TOOL_SHOP_ITEMS</a> [$PRG12::a3b7]</span></span>
<span class="l"><a class="anc" name="a3b9" href="#a3b9">[a3b9]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_THANK_YOU_FOR_SHOPPING">MESSAGE_THANK_YOU_FOR_SHOPPING</a>.</span></span>
<span class="l"><a class="anc" name="a3ba" href="#a3ba">[a3ba]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_THANK_YOU_FOR_SHOPPING</span></span><span class="ce">; [$a3ba] Message</span></span>
<span class="l"><a class="anc" name="a3bb" href="#a3bb">[a3bb]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<a name=":a3bc:@_ISCRIPT_FOREPAW_TOOL_SHOP_BUY"></a><span class="l"><a class="anc" name="a3bc" href="#a3bc">[a3bc]</a><a href="#:a3bc:@_ISCRIPT_FOREPAW_TOOL_SHOP_BUY" class="lla">@_ISCRIPT_FOREPAW_TOOL_SHOP_BUY:</a><span class="ce">; [$a3bc]</span></span>
<span class="l"><a class="anc" name="a3bc" href="#a3bc">[a3bc]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_OPEN_SHOP</span></span><span class="ce">; Open the Buy shop menu.</span></span>
<span class="l"><a class="anc" name="a3bd" href="#a3bd">[a3bd]</a><span class="cd"><span class="i">dw</span> <span class="o">$a44f</span></span><span class="ce">; <a href="#FOREPAW_TOOL_SHOP_ITEMS">FOREPAW_TOOL_SHOP_ITEMS</a> [$PRG12::a3bd]</span></span>
<span class="l"><a class="anc" name="a3bf" href="#a3bf">[a3bf]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_THANK_YOU_FOR_SHOPPING">MESSAGE_THANK_YOU_FOR_SHOPPING</a>.</span></span>
<span class="l"><a class="anc" name="a3c0" href="#a3c0">[a3c0]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_THANK_YOU_FOR_SHOPPING</span></span><span class="ce">; [$a3c0] Message</span></span>
<span class="l"><a class="anc" name="a3c1" href="#a3c1">[a3c1]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_MASCON_TOOL_SHOP"></a><div class="cp">;============================================================================
; Interaction with the Mascon Tool Shop.
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fa4]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fa4]
;
</div><span class="l"><a class="anc" name="a3c2" href="#a3c2">[a3c2]</a><a href="#ISCRIPT_MASCON_TOOL_SHOP" class="la">ISCRIPT_MASCON_TOOL_SHOP:</a><span class="ce">; [$a3c2]</span></span>
<span class="l"><a class="anc" name="a3c2" href="#a3c2">[a3c2]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_TOOLS_SALESMAN</span></span><span class="ce">; Show the tools salesman portrait text box.</span></span>
<span class="l"><a class="anc" name="a3c3" href="#a3c3">[a3c3]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_I_SELL_TOOLS">MESSAGE_I_SELL_TOOLS</a>.</span></span>
<span class="l"><a class="anc" name="a3c4" href="#a3c4">[a3c4]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_I_SELL_TOOLS</span></span><span class="ce">; [$a3c4] Message</span></span>
<span class="l"><a class="anc" name="a3c5" href="#a3c5">[a3c5]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_BUY_SELL_MENU</span></span><span class="ce">; Show the Buy/Sell menu.</span></span>
<span class="l"><a class="anc" name="a3c6" href="#a3c6">[a3c6]</a><span class="cd"><span class="i">dw</span> <span class="o">$a3ce</span></span><span class="ce">; If Buy, jump.</span></span>
<span class="l"><a class="anc" name="a3c8" href="#a3c8">[a3c8]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_SELL_MENU</span></span><span class="ce">; If Sell, show the sell menu.</span></span>
<span class="l"><a class="anc" name="a3c9" href="#a3c9">[a3c9]</a><span class="cd"><span class="i">dw</span> <span class="o">$a45f</span></span><span class="ce">; <a href="#MASCON_TOOL_SHOP_ITEMS">MASCON_TOOL_SHOP_ITEMS</a> [$PRG12::a3c9]</span></span>
<span class="l"><a class="anc" name="a3cb" href="#a3cb">[a3cb]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_THANK_YOU_FOR_SHOPPING">MESSAGE_THANK_YOU_FOR_SHOPPING</a>.</span></span>
<span class="l"><a class="anc" name="a3cc" href="#a3cc">[a3cc]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_THANK_YOU_FOR_SHOPPING</span></span><span class="ce">; [$a3cc] Message</span></span>
<span class="l"><a class="anc" name="a3cd" href="#a3cd">[a3cd]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<a name=":a3ce:@_ISCRIPT_MASCON_TOOL_SHOP_BUY"></a><span class="l"><a class="anc" name="a3ce" href="#a3ce">[a3ce]</a><a href="#:a3ce:@_ISCRIPT_MASCON_TOOL_SHOP_BUY" class="lla">@_ISCRIPT_MASCON_TOOL_SHOP_BUY:</a><span class="ce">; [$a3ce]</span></span>
<span class="l"><a class="anc" name="a3ce" href="#a3ce">[a3ce]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_OPEN_SHOP</span></span><span class="ce">; Open the Buy shop menu.</span></span>
<span class="l"><a class="anc" name="a3cf" href="#a3cf">[a3cf]</a><span class="cd"><span class="i">dw</span> <span class="o">$a45f</span></span><span class="ce">; <a href="#MASCON_TOOL_SHOP_ITEMS">MASCON_TOOL_SHOP_ITEMS</a> [$PRG12::a3cf]</span></span>
<span class="l"><a class="anc" name="a3d1" href="#a3d1">[a3d1]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_THANK_YOU_FOR_SHOPPING">MESSAGE_THANK_YOU_FOR_SHOPPING</a>.</span></span>
<span class="l"><a class="anc" name="a3d2" href="#a3d2">[a3d2]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_THANK_YOU_FOR_SHOPPING</span></span><span class="ce">; [$a3d2] Message</span></span>
<span class="l"><a class="anc" name="a3d3" href="#a3d3">[a3d3]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_AFTER_MASCON_TOOL_SHOP"></a><div class="cp">;============================================================================
; Interaction with the After-Mascon Tool Shop.
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fa7]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fa7]
;
</div><span class="l"><a class="anc" name="a3d4" href="#a3d4">[a3d4]</a><a href="#ISCRIPT_AFTER_MASCON_TOOL_SHOP" class="la">ISCRIPT_AFTER_MASCON_TOOL_SHOP:</a><span class="ce">; [$a3d4]</span></span>
<span class="l"><a class="anc" name="a3d4" href="#a3d4">[a3d4]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_TOOLS_SALESMAN</span></span><span class="ce">; Show the tools salesman portrait text box.</span></span>
<span class="l"><a class="anc" name="a3d5" href="#a3d5">[a3d5]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_I_SELL_TOOLS">MESSAGE_I_SELL_TOOLS</a>.</span></span>
<span class="l"><a class="anc" name="a3d6" href="#a3d6">[a3d6]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_I_SELL_TOOLS</span></span><span class="ce">; [$a3d6] Message</span></span>
<span class="l"><a class="anc" name="a3d7" href="#a3d7">[a3d7]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_BUY_SELL_MENU</span></span><span class="ce">; Show the Buy/Sell menu.</span></span>
<span class="l"><a class="anc" name="a3d8" href="#a3d8">[a3d8]</a><span class="cd"><span class="i">dw</span> <span class="o">$a3e0</span></span><span class="ce">; If Buy, jump.</span></span>
<span class="l"><a class="anc" name="a3da" href="#a3da">[a3da]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_SELL_MENU</span></span><span class="ce">; If Sell, show the sell menu.</span></span>
<span class="l"><a class="anc" name="a3db" href="#a3db">[a3db]</a><span class="cd"><span class="i">dw</span> <span class="o">$a46c</span></span><span class="ce">; <a href="#AFTER_MASCON_TOOL_SHOP_ITEMS">AFTER_MASCON_TOOL_SHOP_ITEMS</a> [$PRG12::a3db]</span></span>
<span class="l"><a class="anc" name="a3dd" href="#a3dd">[a3dd]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_THANK_YOU_FOR_SHOPPING">MESSAGE_THANK_YOU_FOR_SHOPPING</a>.</span></span>
<span class="l"><a class="anc" name="a3de" href="#a3de">[a3de]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_THANK_YOU_FOR_SHOPPING</span></span><span class="ce">; [$a3de] Message</span></span>
<span class="l"><a class="anc" name="a3df" href="#a3df">[a3df]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<a name=":a3e0:@_ISCRIPT_AFTER_MASCON_TOOL_SHOP_BUY"></a><span class="l"><a class="anc" name="a3e0" href="#a3e0">[a3e0]</a><a href="#:a3e0:@_ISCRIPT_AFTER_MASCON_TOOL_SHOP_BUY" class="lla">@_ISCRIPT_AFTER_MASCON_TOOL_SHOP_BUY:</a><span class="ce">; [$a3e0]</span></span>
<span class="l"><a class="anc" name="a3e0" href="#a3e0">[a3e0]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_OPEN_SHOP</span></span><span class="ce">; Open the Buy shop menu.</span></span>
<span class="l"><a class="anc" name="a3e1" href="#a3e1">[a3e1]</a><span class="cd"><span class="i">dw</span> <span class="o">$a46c</span></span><span class="ce">; <a href="#AFTER_MASCON_TOOL_SHOP_ITEMS">AFTER_MASCON_TOOL_SHOP_ITEMS</a> [$PRG12::a3e1]</span></span>
<span class="l"><a class="anc" name="a3e3" href="#a3e3">[a3e3]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_THANK_YOU_FOR_SHOPPING">MESSAGE_THANK_YOU_FOR_SHOPPING</a>.</span></span>
<span class="l"><a class="anc" name="a3e4" href="#a3e4">[a3e4]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_THANK_YOU_FOR_SHOPPING</span></span><span class="ce">; [$a3e4] Message</span></span>
<span class="l"><a class="anc" name="a3e5" href="#a3e5">[a3e5]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_VICTIM_TOOL_SHOP"></a><div class="cp">;============================================================================
; Interaction with the Victim Tool Shop.
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fb3]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fb3]
;
</div><span class="l"><a class="anc" name="a3e6" href="#a3e6">[a3e6]</a><a href="#ISCRIPT_VICTIM_TOOL_SHOP" class="la">ISCRIPT_VICTIM_TOOL_SHOP:</a><span class="ce">; [$a3e6]</span></span>
<span class="l"><a class="anc" name="a3e6" href="#a3e6">[a3e6]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_TOOLS_SALESMAN</span></span><span class="ce">; Show the tools salesman portrait text box.</span></span>
<span class="l"><a class="anc" name="a3e7" href="#a3e7">[a3e7]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_I_SELL_TOOLS">MESSAGE_I_SELL_TOOLS</a>.</span></span>
<span class="l"><a class="anc" name="a3e8" href="#a3e8">[a3e8]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_I_SELL_TOOLS</span></span><span class="ce">; [$a3e8] Message</span></span>
<span class="l"><a class="anc" name="a3e9" href="#a3e9">[a3e9]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_BUY_SELL_MENU</span></span><span class="ce">; Show the Buy/Sell menu.</span></span>
<span class="l"><a class="anc" name="a3ea" href="#a3ea">[a3ea]</a><span class="cd"><span class="i">dw</span> <span class="o">$a3f2</span></span><span class="ce">; If Buy, jump.</span></span>
<span class="l"><a class="anc" name="a3ec" href="#a3ec">[a3ec]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_SELL_MENU</span></span><span class="ce">; If Sell, show the sell menu.</span></span>
<span class="l"><a class="anc" name="a3ed" href="#a3ed">[a3ed]</a><span class="cd"><span class="i">dw</span> <span class="o">$a479</span></span><span class="ce">; <a href="#VICTIM_TOOL_SHOP_ITEMS">VICTIM_TOOL_SHOP_ITEMS</a> [$PRG12::a3ed]</span></span>
<span class="l"><a class="anc" name="a3ef" href="#a3ef">[a3ef]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_THANK_YOU_FOR_SHOPPING">MESSAGE_THANK_YOU_FOR_SHOPPING</a>.</span></span>
<span class="l"><a class="anc" name="a3f0" href="#a3f0">[a3f0]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_THANK_YOU_FOR_SHOPPING</span></span><span class="ce">; [$a3f0] Message</span></span>
<span class="l"><a class="anc" name="a3f1" href="#a3f1">[a3f1]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<a name=":a3f2:@_ISCRIPT_VICTIM_TOOL_SHOP_BUY"></a><span class="l"><a class="anc" name="a3f2" href="#a3f2">[a3f2]</a><a href="#:a3f2:@_ISCRIPT_VICTIM_TOOL_SHOP_BUY" class="lla">@_ISCRIPT_VICTIM_TOOL_SHOP_BUY:</a><span class="ce">; [$a3f2]</span></span>
<span class="l"><a class="anc" name="a3f2" href="#a3f2">[a3f2]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_OPEN_SHOP</span></span><span class="ce">; Open the Buy shop menu.</span></span>
<span class="l"><a class="anc" name="a3f3" href="#a3f3">[a3f3]</a><span class="cd"><span class="i">dw</span> <span class="o">$a479</span></span><span class="ce">; <a href="#VICTIM_TOOL_SHOP_ITEMS">VICTIM_TOOL_SHOP_ITEMS</a> [$PRG12::a3f3]</span></span>
<span class="l"><a class="anc" name="a3f5" href="#a3f5">[a3f5]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_THANK_YOU_FOR_SHOPPING">MESSAGE_THANK_YOU_FOR_SHOPPING</a>.</span></span>
<span class="l"><a class="anc" name="a3f6" href="#a3f6">[a3f6]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_THANK_YOU_FOR_SHOPPING</span></span><span class="ce">; [$a3f6] Message</span></span>
<span class="l"><a class="anc" name="a3f7" href="#a3f7">[a3f7]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_CONFLATE_TOOL_SHOP"></a><div class="cp">;============================================================================
; Interaction with the Conflate Tool Shop.
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fc2]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fc2]
;
</div><span class="l"><a class="anc" name="a3f8" href="#a3f8">[a3f8]</a><a href="#ISCRIPT_CONFLATE_TOOL_SHOP" class="la">ISCRIPT_CONFLATE_TOOL_SHOP:</a><span class="ce">; [$a3f8]</span></span>
<span class="l"><a class="anc" name="a3f8" href="#a3f8">[a3f8]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_TOOLS_SALESMAN</span></span><span class="ce">; Show the tools salesman portrait text box.</span></span>
<span class="l"><a class="anc" name="a3f9" href="#a3f9">[a3f9]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_I_SELL_TOOLS">MESSAGE_I_SELL_TOOLS</a>.</span></span>
<span class="l"><a class="anc" name="a3fa" href="#a3fa">[a3fa]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_I_SELL_TOOLS</span></span><span class="ce">; [$a3fa] Message</span></span>
<span class="l"><a class="anc" name="a3fb" href="#a3fb">[a3fb]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_BUY_SELL_MENU</span></span><span class="ce">; Show the Buy/Sell menu.</span></span>
<span class="l"><a class="anc" name="a3fc" href="#a3fc">[a3fc]</a><span class="cd"><span class="i">dw</span> <span class="o">$a404</span></span><span class="ce">; If Buy, jump.</span></span>
<span class="l"><a class="anc" name="a3fe" href="#a3fe">[a3fe]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_SELL_MENU</span></span><span class="ce">; If Sell, show the sell menu.</span></span>
<span class="l"><a class="anc" name="a3ff" href="#a3ff">[a3ff]</a><span class="cd"><span class="i">dw</span> <span class="o">$a483</span></span><span class="ce">; <a href="#CONFLATE_TOOL_SHOP_ITEMS">CONFLATE_TOOL_SHOP_ITEMS</a> [$PRG12::a3ff]</span></span>
<span class="l"><a class="anc" name="a401" href="#a401">[a401]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_THANK_YOU_FOR_SHOPPING">MESSAGE_THANK_YOU_FOR_SHOPPING</a>.</span></span>
<span class="l"><a class="anc" name="a402" href="#a402">[a402]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_THANK_YOU_FOR_SHOPPING</span></span><span class="ce">; [$a402] Message</span></span>
<span class="l"><a class="anc" name="a403" href="#a403">[a403]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<a name=":a404:@_ISCRIPT_CONFLATE_TOOL_SHOP_BUY"></a><span class="l"><a class="anc" name="a404" href="#a404">[a404]</a><a href="#:a404:@_ISCRIPT_CONFLATE_TOOL_SHOP_BUY" class="lla">@_ISCRIPT_CONFLATE_TOOL_SHOP_BUY:</a><span class="ce">; [$a404]</span></span>
<span class="l"><a class="anc" name="a404" href="#a404">[a404]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_OPEN_SHOP</span></span><span class="ce">; Open the Buy shop menu.</span></span>
<span class="l"><a class="anc" name="a405" href="#a405">[a405]</a><span class="cd"><span class="i">dw</span> <span class="o">$a483</span></span><span class="ce">; <a href="#CONFLATE_TOOL_SHOP_ITEMS">CONFLATE_TOOL_SHOP_ITEMS</a> [$PRG12::a405]</span></span>
<span class="l"><a class="anc" name="a407" href="#a407">[a407]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_THANK_YOU_FOR_SHOPPING">MESSAGE_THANK_YOU_FOR_SHOPPING</a>.</span></span>
<span class="l"><a class="anc" name="a408" href="#a408">[a408]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_THANK_YOU_FOR_SHOPPING</span></span><span class="ce">; [$a408] Message</span></span>
<span class="l"><a class="anc" name="a409" href="#a409">[a409]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_DAYBREAK_TOOL_SHOP"></a><div class="cp">;============================================================================
; Interaction with the Daybreak Tool Shop.
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fd1]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fd1]
;
</div><span class="l"><a class="anc" name="a40a" href="#a40a">[a40a]</a><a href="#ISCRIPT_DAYBREAK_TOOL_SHOP" class="la">ISCRIPT_DAYBREAK_TOOL_SHOP:</a><span class="ce">; [$a40a]</span></span>
<span class="l"><a class="anc" name="a40a" href="#a40a">[a40a]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_TOOLS_SALESMAN</span></span><span class="ce">; Show the tools salesman portrait text box.</span></span>
<span class="l"><a class="anc" name="a40b" href="#a40b">[a40b]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_I_SELL_TOOLS">MESSAGE_I_SELL_TOOLS</a>.</span></span>
<span class="l"><a class="anc" name="a40c" href="#a40c">[a40c]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_I_SELL_TOOLS</span></span><span class="ce">; [$a40c] Message</span></span>
<span class="l"><a class="anc" name="a40d" href="#a40d">[a40d]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_BUY_SELL_MENU</span></span><span class="ce">; Show the Buy/Sell menu.</span></span>
<span class="l"><a class="anc" name="a40e" href="#a40e">[a40e]</a><span class="cd"><span class="i">dw</span> <span class="o">$a416</span></span><span class="ce">; If Buy, jump.</span></span>
<span class="l"><a class="anc" name="a410" href="#a410">[a410]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_SELL_MENU</span></span><span class="ce">; If Sell, show the sell menu.</span></span>
<span class="l"><a class="anc" name="a411" href="#a411">[a411]</a><span class="cd"><span class="i">dw</span> <span class="o">$a490</span></span><span class="ce">; <a href="#DAYBREAK_TOOL_SHOP_ITEMS">DAYBREAK_TOOL_SHOP_ITEMS</a> [$PRG12::a411]</span></span>
<span class="l"><a class="anc" name="a413" href="#a413">[a413]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_THANK_YOU_FOR_SHOPPING">MESSAGE_THANK_YOU_FOR_SHOPPING</a>.</span></span>
<span class="l"><a class="anc" name="a414" href="#a414">[a414]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_THANK_YOU_FOR_SHOPPING</span></span><span class="ce">; [$a414] Message</span></span>
<span class="l"><a class="anc" name="a415" href="#a415">[a415]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<a name=":a416:@_ISCRIPT_DAYBREAK_TOOL_SHOP_BUY"></a><span class="l"><a class="anc" name="a416" href="#a416">[a416]</a><a href="#:a416:@_ISCRIPT_DAYBREAK_TOOL_SHOP_BUY" class="lla">@_ISCRIPT_DAYBREAK_TOOL_SHOP_BUY:</a><span class="ce">; [$a416]</span></span>
<span class="l"><a class="anc" name="a416" href="#a416">[a416]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_OPEN_SHOP</span></span><span class="ce">; Open the Buy shop menu.</span></span>
<span class="l"><a class="anc" name="a417" href="#a417">[a417]</a><span class="cd"><span class="i">dw</span> <span class="o">$a490</span></span><span class="ce">; <a href="#DAYBREAK_TOOL_SHOP_ITEMS">DAYBREAK_TOOL_SHOP_ITEMS</a> [$PRG12::a417]</span></span>
<span class="l"><a class="anc" name="a419" href="#a419">[a419]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_THANK_YOU_FOR_SHOPPING">MESSAGE_THANK_YOU_FOR_SHOPPING</a>.</span></span>
<span class="l"><a class="anc" name="a41a" href="#a41a">[a41a]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_THANK_YOU_FOR_SHOPPING</span></span><span class="ce">; [$a41a] Message</span></span>
<span class="l"><a class="anc" name="a41b" href="#a41b">[a41b]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_DARTMOOR_TOOL_SHOP"></a><div class="cp">;============================================================================
; Interaction with the Dartmoor Tool Shop.
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fe0]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fe0]
;
</div><span class="l"><a class="anc" name="a41c" href="#a41c">[a41c]</a><a href="#ISCRIPT_DARTMOOR_TOOL_SHOP" class="la">ISCRIPT_DARTMOOR_TOOL_SHOP:</a><span class="ce">; [$a41c]</span></span>
<span class="l"><a class="anc" name="a41c" href="#a41c">[a41c]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_TOOLS_SALESMAN</span></span><span class="ce">; Show the tools salesman portrait text box.</span></span>
<span class="l"><a class="anc" name="a41d" href="#a41d">[a41d]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_I_SELL_TOOLS">MESSAGE_I_SELL_TOOLS</a>.</span></span>
<span class="l"><a class="anc" name="a41e" href="#a41e">[a41e]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_I_SELL_TOOLS</span></span><span class="ce">; [$a41e] Message</span></span>
<span class="l"><a class="anc" name="a41f" href="#a41f">[a41f]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_BUY_SELL_MENU</span></span><span class="ce">; Show the Buy/Sell menu.</span></span>
<span class="l"><a class="anc" name="a420" href="#a420">[a420]</a><span class="cd"><span class="i">dw</span> <span class="o">$a428</span></span><span class="ce">; If Buy, jump.</span></span>
<span class="l"><a class="anc" name="a422" href="#a422">[a422]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_SELL_MENU</span></span><span class="ce">; If Sell, show the sell menu.</span></span>
<span class="l"><a class="anc" name="a423" href="#a423">[a423]</a><span class="cd"><span class="i">dw</span> <span class="o">$a49a</span></span><span class="ce">; <a href="#DARTMOOR_TOOL_SHOP_ITEMS">DARTMOOR_TOOL_SHOP_ITEMS</a> [$PRG12::a423]</span></span>
<span class="l"><a class="anc" name="a425" href="#a425">[a425]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_THANK_YOU_FOR_SHOPPING">MESSAGE_THANK_YOU_FOR_SHOPPING</a>.</span></span>
<span class="l"><a class="anc" name="a426" href="#a426">[a426]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_THANK_YOU_FOR_SHOPPING</span></span><span class="ce">; [$a426] Message</span></span>
<span class="l"><a class="anc" name="a427" href="#a427">[a427]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<a name=":a428:@_ISCRIPT_DARTMOOR_TOOL_SHOP_BUY"></a><span class="l"><a class="anc" name="a428" href="#a428">[a428]</a><a href="#:a428:@_ISCRIPT_DARTMOOR_TOOL_SHOP_BUY" class="lla">@_ISCRIPT_DARTMOOR_TOOL_SHOP_BUY:</a><span class="ce">; [$a428]</span></span>
<span class="l"><a class="anc" name="a428" href="#a428">[a428]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_OPEN_SHOP</span></span><span class="ce">; Open the Buy shop menu.</span></span>
<span class="l"><a class="anc" name="a429" href="#a429">[a429]</a><span class="cd"><span class="i">dw</span> <span class="o">$a49a</span></span><span class="ce">; <a href="#DARTMOOR_TOOL_SHOP_ITEMS">DARTMOOR_TOOL_SHOP_ITEMS</a> [$PRG12::a429]</span></span>
<span class="l"><a class="anc" name="a42b" href="#a42b">[a42b]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_THANK_YOU_FOR_SHOPPING">MESSAGE_THANK_YOU_FOR_SHOPPING</a>.</span></span>
<span class="l"><a class="anc" name="a42c" href="#a42c">[a42c]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_THANK_YOU_FOR_SHOPPING</span></span><span class="ce">; [$a42c] Message</span></span>
<span class="l"><a class="anc" name="a42d" href="#a42d">[a42d]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="EOLIS_TOOL_SHOP_ITEMS"></a><div class="cp">;============================================================================
; Eolis Tool Shop Items.
;
; * Hand Dagger: 400G
; * Red Potion:  160G
; * Elixir:      320G
; * Deluge:      400G
;============================================================================
</div><span class="l"><a class="anc" name="a42e" href="#a42e">[a42e]</a><a href="#EOLIS_TOOL_SHOP_ITEMS" class="la">EOLIS_TOOL_SHOP_ITEMS:</a><span class="ce">; [$a42e]</span></span>
<span class="l"><a class="anc" name="a42e" href="#a42e">[a42e]</a><span class="cd"><span class="i">db</span> <span class="o">WEAPON_HAND_DAGGER</span></span><span class="ce">; [$a42e] InventoryItem</span></span>
<span class="l"><a class="anc" name="a42f" href="#a42f">[a42f]</a><span class="cd"><span class="i">dw</span> <span class="o">$0190</span></span><span class="ce">; [$a42f] ushort</span></span>
<span class="l"></span>
<span class="l"><span class="cd"><span class="i">db</span> <span class="o">ITEM_RED_POTION</span></span></span>
<span class="l"><a class="anc" name="a432" href="#a432">[a432]</a><span class="cd"><span class="i">dw</span> <span class="o">$00a0</span></span><span class="ce">; [$a432] ushort</span></span>
<span class="l"></span>
<span class="l"><span class="cd"><span class="i">db</span> <span class="o">SPECIAL_ELIXIR</span></span></span>
<span class="l"><a class="anc" name="a435" href="#a435">[a435]</a><span class="cd"><span class="i">dw</span> <span class="o">$0140</span></span><span class="ce">; [$a435] ushort</span></span>
<span class="l"></span>
<span class="l"><span class="cd"><span class="i">db</span> <span class="o">MAGIC_DELUGE</span></span></span>
<span class="l"><a class="anc" name="a438" href="#a438">[a438]</a><span class="cd"><span class="i">dw</span> <span class="o">$0190</span></span><span class="ce">; [$a438] ushort</span></span>
<span class="l"></span>
<span class="l"><span class="cd"><span class="i">db</span> <span class="o">$ff</span></span></span>
<span class="l"></span>
<span class="l"></span>
<a name="APOLUNE_TOOL_SHOP_ITEMS"></a><div class="cp">;============================================================================
; Apolune Tool Shop Items.
;
; * Small Shield: 800G
; * Hand Dagger:  500G
; * Deluge:       500G
; * Red Potion:   300G
;============================================================================
</div><span class="l"><a class="anc" name="a43b" href="#a43b">[a43b]</a><a href="#APOLUNE_TOOL_SHOP_ITEMS" class="la">APOLUNE_TOOL_SHOP_ITEMS:</a><span class="ce">; [$a43b]</span></span>
<span class="l"><a class="anc" name="a43b" href="#a43b">[a43b]</a><span class="cd"><span class="i">db</span> <span class="o">SHIELD_SMALL</span></span><span class="ce">; [$a43b] InventoryItem</span></span>
<span class="l"><a class="anc" name="a43c" href="#a43c">[a43c]</a><span class="cd"><span class="i">dw</span> <span class="o">$0320</span></span><span class="ce">; [$a43c] ushort</span></span>
<span class="l"></span>
<span class="l"><span class="cd"><span class="i">db</span> <span class="o">WEAPON_HAND_DAGGER</span></span></span>
<span class="l"><a class="anc" name="a43f" href="#a43f">[a43f]</a><span class="cd"><span class="i">dw</span> <span class="o">$01f4</span></span><span class="ce">; [$a43f] ushort</span></span>
<span class="l"></span>
<span class="l"><span class="cd"><span class="i">db</span> <span class="o">MAGIC_DELUGE</span></span></span>
<span class="l"><a class="anc" name="a442" href="#a442">[a442]</a><span class="cd"><span class="i">dw</span> <span class="o">$01f4</span></span><span class="ce">; [$a442] ushort</span></span>
<span class="l"></span>
<span class="l"><span class="cd"><span class="i">db</span> <span class="o">ITEM_RED_POTION</span></span></span>
<span class="l"><a class="anc" name="a445" href="#a445">[a445]</a><span class="cd"><span class="i">dw</span> <span class="o">$012c</span></span><span class="ce">; [$a445] ushort</span></span>
<span class="l"></span>
<span class="l"><span class="cd"><span class="i">db</span> <span class="o">$ff</span></span></span>
<span class="l"></span>
<span class="l"></span>
<a name="BEFORE_APOLUNE_TOOL_SHOP_ITEMS"></a><div class="cp">;============================================================================
; Before Apolune Tool Shop Items.
;
; * Magic Shield:  7600G
; * Death:        12500G
;============================================================================
</div><span class="l"><a class="anc" name="a448" href="#a448">[a448]</a><a href="#BEFORE_APOLUNE_TOOL_SHOP_ITEMS" class="la">BEFORE_APOLUNE_TOOL_SHOP_ITEMS:</a><span class="ce">; [$a448]</span></span>
<span class="l"><a class="anc" name="a448" href="#a448">[a448]</a><span class="cd"><span class="i">db</span> <span class="o">SHIELD_MAGIC</span></span><span class="ce">; [$a448] InventoryItem</span></span>
<span class="l"><a class="anc" name="a449" href="#a449">[a449]</a><span class="cd"><span class="i">dw</span> <span class="o">$1db0</span></span><span class="ce">; [$a449] ushort</span></span>
<span class="l"></span>
<span class="l"><span class="cd"><span class="i">db</span> <span class="o">MAGIC_DEATH</span></span></span>
<span class="l"><a class="anc" name="a44c" href="#a44c">[a44c]</a><span class="cd"><span class="i">dw</span> <span class="o">$30d4</span></span><span class="ce">; [$a44c] ushort</span></span>
<span class="l"></span>
<span class="l"><span class="cd"><span class="i">db</span> <span class="o">$ff</span></span></span>
<span class="l"></span>
<span class="l"></span>
<a name="FOREPAW_TOOL_SHOP_ITEMS"></a><div class="cp">;============================================================================
; Forepaw Tool Shop Items.
;
; * Long Sword:   1600G
; * Studded Mail: 2500G
; * Small Shield: 1100G
; * Red Potion:    400G
; * Wing Boots:   2800G
;============================================================================
</div><span class="l"><a class="anc" name="a44f" href="#a44f">[a44f]</a><a href="#FOREPAW_TOOL_SHOP_ITEMS" class="la">FOREPAW_TOOL_SHOP_ITEMS:</a><span class="ce">; [$a44f]</span></span>
<span class="l"><a class="anc" name="a44f" href="#a44f">[a44f]</a><span class="cd"><span class="i">db</span> <span class="o">WEAPON_LONG_SWORD</span></span><span class="ce">; [$a44f] InventoryItem</span></span>
<span class="l"><a class="anc" name="a450" href="#a450">[a450]</a><span class="cd"><span class="i">dw</span> <span class="o">$0640</span></span><span class="ce">; [$a450] ushort</span></span>
<span class="l"></span>
<span class="l"><span class="cd"><span class="i">db</span> <span class="o">ARMOR_STUDDED_MAIL</span></span></span>
<span class="l"><a class="anc" name="a453" href="#a453">[a453]</a><span class="cd"><span class="i">dw</span> <span class="o">$09c4</span></span><span class="ce">; [$a453] ushort</span></span>
<span class="l"></span>
<span class="l"><span class="cd"><span class="i">db</span> <span class="o">SHIELD_SMALL</span></span></span>
<span class="l"><a class="anc" name="a456" href="#a456">[a456]</a><span class="cd"><span class="i">dw</span> <span class="o">$044c</span></span><span class="ce">; [$a456] ushort</span></span>
<span class="l"></span>
<span class="l"><span class="cd"><span class="i">db</span> <span class="o">ITEM_RED_POTION</span></span></span>
<span class="l"><a class="anc" name="a459" href="#a459">[a459]</a><span class="cd"><span class="i">dw</span> <span class="o">$0190</span></span><span class="ce">; [$a459] ushort</span></span>
<span class="l"></span>
<span class="l"><span class="cd"><span class="i">db</span> <span class="o">ITEM_WING_BOOTS</span></span></span>
<span class="l"><a class="anc" name="a45c" href="#a45c">[a45c]</a><span class="cd"><span class="i">dw</span> <span class="o">$0af0</span></span><span class="ce">; [$a45c] ushort</span></span>
<span class="l"></span>
<span class="l"><span class="cd"><span class="i">db</span> <span class="o">$ff</span></span></span>
<span class="l"></span>
<span class="l"></span>
<a name="MASCON_TOOL_SHOP_ITEMS"></a><div class="cp">;============================================================================
; Mascon Tool Shop Items:
;
; * Large Shield: 3500G
; * Thunder:      1200G
; * Mattock:       800G
; * Red Potion:    600G
;============================================================================
</div><span class="l"><a class="anc" name="a45f" href="#a45f">[a45f]</a><a href="#MASCON_TOOL_SHOP_ITEMS" class="la">MASCON_TOOL_SHOP_ITEMS:</a><span class="ce">; [$a45f]</span></span>
<span class="l"><a class="anc" name="a45f" href="#a45f">[a45f]</a><span class="cd"><span class="i">db</span> <span class="o">SHIELD_LARGE</span></span><span class="ce">; [$a45f] InventoryItem</span></span>
<span class="l"><a class="anc" name="a460" href="#a460">[a460]</a><span class="cd"><span class="i">dw</span> <span class="o">$0dac</span></span><span class="ce">; [$a460] ushort</span></span>
<span class="l"></span>
<span class="l"><span class="cd"><span class="i">db</span> <span class="o">MAGIC_THUNDER</span></span></span>
<span class="l"><a class="anc" name="a463" href="#a463">[a463]</a><span class="cd"><span class="i">dw</span> <span class="o">$04b0</span></span><span class="ce">; [$a463] ushort</span></span>
<span class="l"></span>
<span class="l"><span class="cd"><span class="i">db</span> <span class="o">MATTOCK</span></span></span>
<span class="l"><a class="anc" name="a466" href="#a466">[a466]</a><span class="cd"><span class="i">dw</span> <span class="o">$0320</span></span><span class="ce">; [$a466] ushort</span></span>
<span class="l"></span>
<span class="l"><span class="cd"><span class="i">db</span> <span class="o">ITEM_RED_POTION</span></span></span>
<span class="l"><a class="anc" name="a469" href="#a469">[a469]</a><span class="cd"><span class="i">dw</span> <span class="o">$0258</span></span><span class="ce">; [$a469] ushort</span></span>
<span class="l"></span>
<span class="l"><span class="cd"><span class="i">db</span> <span class="o">$ff</span></span></span>
<span class="l"></span>
<span class="l"></span>
<a name="AFTER_MASCON_TOOL_SHOP_ITEMS"></a><div class="cp">;============================================================================
; After Mascon Tool Shop Items.
;
; * Death:      9800G
; * Hour Glass: 5600G
; * Elixir:     4300G
; * Red Potion:  300G
;============================================================================
</div><span class="l"><a class="anc" name="a46c" href="#a46c">[a46c]</a><a href="#AFTER_MASCON_TOOL_SHOP_ITEMS" class="la">AFTER_MASCON_TOOL_SHOP_ITEMS:</a><span class="ce">; [$a46c]</span></span>
<span class="l"><a class="anc" name="a46c" href="#a46c">[a46c]</a><span class="cd"><span class="i">db</span> <span class="o">MAGIC_DEATH</span></span><span class="ce">; [$a46c] InventoryItem</span></span>
<span class="l"><a class="anc" name="a46d" href="#a46d">[a46d]</a><span class="cd"><span class="i">dw</span> <span class="o">$2648</span></span><span class="ce">; [$a46d] ushort</span></span>
<span class="l"></span>
<span class="l"><span class="cd"><span class="i">db</span> <span class="o">ITEM_HOUR_GLASS</span></span></span>
<span class="l"><a class="anc" name="a470" href="#a470">[a470]</a><span class="cd"><span class="i">dw</span> <span class="o">$15e0</span></span><span class="ce">; [$a470] ushort</span></span>
<span class="l"></span>
<span class="l"><span class="cd"><span class="i">db</span> <span class="o">SPECIAL_ELIXIR</span></span></span>
<span class="l"><a class="anc" name="a473" href="#a473">[a473]</a><span class="cd"><span class="i">dw</span> <span class="o">$10cc</span></span><span class="ce">; [$a473] ushort</span></span>
<span class="l"></span>
<span class="l"><span class="cd"><span class="i">db</span> <span class="o">ITEM_RED_POTION</span></span></span>
<span class="l"><a class="anc" name="a476" href="#a476">[a476]</a><span class="cd"><span class="i">dw</span> <span class="o">$012c</span></span><span class="ce">; [$a476] ushort</span></span>
<span class="l"></span>
<span class="l"><span class="cd"><span class="i">db</span> <span class="o">$ff</span></span></span>
<span class="l"></span>
<span class="l"></span>
<a name="VICTIM_TOOL_SHOP_ITEMS"></a><div class="cp">;============================================================================
; Victim Tool Shop Items.
;
; * Full Plate: 5200G
; * Mattock:    1200G
; * Red Potion:  800G
;============================================================================
</div><span class="l"><a class="anc" name="a479" href="#a479">[a479]</a><a href="#VICTIM_TOOL_SHOP_ITEMS" class="la">VICTIM_TOOL_SHOP_ITEMS:</a><span class="ce">; [$a479]</span></span>
<span class="l"><a class="anc" name="a479" href="#a479">[a479]</a><span class="cd"><span class="i">db</span> <span class="o">ARMOR_FULL_PLATE</span></span><span class="ce">; [$a479] InventoryItem</span></span>
<span class="l"><a class="anc" name="a47a" href="#a47a">[a47a]</a><span class="cd"><span class="i">dw</span> <span class="o">$1450</span></span><span class="ce">; [$a47a] ushort</span></span>
<span class="l"></span>
<span class="l"><span class="cd"><span class="i">db</span> <span class="o">MATTOCK</span></span></span>
<span class="l"><a class="anc" name="a47d" href="#a47d">[a47d]</a><span class="cd"><span class="i">dw</span> <span class="o">$04b0</span></span><span class="ce">; [$a47d] ushort</span></span>
<span class="l"></span>
<span class="l"><span class="cd"><span class="i">db</span> <span class="o">ITEM_RED_POTION</span></span></span>
<span class="l"><a class="anc" name="a480" href="#a480">[a480]</a><span class="cd"><span class="i">dw</span> <span class="o">$0320</span></span><span class="ce">; [$a480] ushort</span></span>
<span class="l"></span>
<span class="l"><span class="cd"><span class="i">db</span> <span class="o">$ff</span></span></span>
<span class="l"></span>
<span class="l"></span>
<a name="CONFLATE_TOOL_SHOP_ITEMS"></a><div class="cp">;============================================================================
; Conflate Tool Shop Items:
;
; * Giant Blade:  8500G
; * Magic Shield: 9800G
; * Wing Boots:   5500G
; * Red Potion:   1000G
;============================================================================
</div><span class="l"><a class="anc" name="a483" href="#a483">[a483]</a><a href="#CONFLATE_TOOL_SHOP_ITEMS" class="la">CONFLATE_TOOL_SHOP_ITEMS:</a><span class="ce">; [$a483]</span></span>
<span class="l"><a class="anc" name="a483" href="#a483">[a483]</a><span class="cd"><span class="i">db</span> <span class="o">WEAPON_GIANT_BLADE</span></span><span class="ce">; [$a483] InventoryItem</span></span>
<span class="l"><a class="anc" name="a484" href="#a484">[a484]</a><span class="cd"><span class="i">dw</span> <span class="o">$2134</span></span><span class="ce">; [$a484] ushort</span></span>
<span class="l"></span>
<span class="l"><span class="cd"><span class="i">db</span> <span class="o">SHIELD_MAGIC</span></span></span>
<span class="l"><a class="anc" name="a487" href="#a487">[a487]</a><span class="cd"><span class="i">dw</span> <span class="o">$2648</span></span><span class="ce">; [$a487] ushort</span></span>
<span class="l"></span>
<span class="l"><span class="cd"><span class="i">db</span> <span class="o">ITEM_WING_BOOTS</span></span></span>
<span class="l"><a class="anc" name="a48a" href="#a48a">[a48a]</a><span class="cd"><span class="i">dw</span> <span class="o">$157c</span></span><span class="ce">; [$a48a] ushort</span></span>
<span class="l"></span>
<span class="l"><span class="cd"><span class="i">db</span> <span class="o">ITEM_RED_POTION</span></span></span>
<span class="l"><a class="anc" name="a48d" href="#a48d">[a48d]</a><span class="cd"><span class="i">dw</span> <span class="o">$03e8</span></span><span class="ce">; [$a48d] ushort</span></span>
<span class="l"></span>
<span class="l"><span class="cd"><span class="i">db</span> <span class="o">$ff</span></span></span>
<span class="l"></span>
<span class="l"></span>
<a name="DAYBREAK_TOOL_SHOP_ITEMS"></a><div class="cp">;============================================================================
; Daybreak Tool Shop Items.
;
; * Tilte:       15000G
; * Giant Blade: 11500G
; * Red Potion:   1200G
;============================================================================
</div><span class="l"><a class="anc" name="a490" href="#a490">[a490]</a><a href="#DAYBREAK_TOOL_SHOP_ITEMS" class="la">DAYBREAK_TOOL_SHOP_ITEMS:</a><span class="ce">; [$a490]</span></span>
<span class="l"><a class="anc" name="a490" href="#a490">[a490]</a><span class="cd"><span class="i">db</span> <span class="o">MAGIC_TILTE</span></span><span class="ce">; [$a490] InventoryItem</span></span>
<span class="l"><a class="anc" name="a491" href="#a491">[a491]</a><span class="cd"><span class="i">dw</span> <span class="o">$3a98</span></span><span class="ce">; [$a491] ushort</span></span>
<span class="l"></span>
<span class="l"><span class="cd"><span class="i">db</span> <span class="o">WEAPON_GIANT_BLADE</span></span></span>
<span class="l"><a class="anc" name="a494" href="#a494">[a494]</a><span class="cd"><span class="i">dw</span> <span class="o">$2cec</span></span><span class="ce">; [$a494] ushort</span></span>
<span class="l"></span>
<span class="l"><span class="cd"><span class="i">db</span> <span class="o">ITEM_RED_POTION</span></span></span>
<span class="l"><a class="anc" name="a497" href="#a497">[a497]</a><span class="cd"><span class="i">dw</span> <span class="o">$04b0</span></span><span class="ce">; [$a497] ushort</span></span>
<span class="l"></span>
<span class="l"><span class="cd"><span class="i">db</span> <span class="o">$ff</span></span></span>
<span class="l"></span>
<span class="l"></span>
<a name="DARTMOOR_TOOL_SHOP_ITEMS"></a><div class="cp">;============================================================================
; Dartmoor Tool Shop Items.
;
; * Giant Blade: 13000G
; * Red Potion:   2000G
;============================================================================
</div><span class="l"><a class="anc" name="a49a" href="#a49a">[a49a]</a><a href="#DARTMOOR_TOOL_SHOP_ITEMS" class="la">DARTMOOR_TOOL_SHOP_ITEMS:</a><span class="ce">; [$a49a]</span></span>
<span class="l"><a class="anc" name="a49a" href="#a49a">[a49a]</a><span class="cd"><span class="i">db</span> <span class="o">WEAPON_GIANT_BLADE</span></span><span class="ce">; [$a49a] InventoryItem</span></span>
<span class="l"><a class="anc" name="a49b" href="#a49b">[a49b]</a><span class="cd"><span class="i">dw</span> <span class="o">$32c8</span></span><span class="ce">; [$a49b] ushort</span></span>
<span class="l"></span>
<span class="l"><span class="cd"><span class="i">db</span> <span class="o">ITEM_RED_POTION</span></span></span>
<span class="l"><a class="anc" name="a49e" href="#a49e">[a49e]</a><span class="cd"><span class="i">dw</span> <span class="o">$07d0</span></span><span class="ce">; [$a49e] ushort</span></span>
<span class="l"></span>
<span class="l"><span class="cd"><span class="i">db</span> <span class="o">$ff</span></span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_EOLIS_MEAT_SHOP"></a><div class="cp">;============================================================================
; Interaction with the Eolis Meat Shop.
;
; The shop keeper will offer 30HP and 30MP for 50G.
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9f76]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9f76]
;
</div><span class="l"><a class="anc" name="a4a1" href="#a4a1">[a4a1]</a><a href="#ISCRIPT_EOLIS_MEAT_SHOP" class="la">ISCRIPT_EOLIS_MEAT_SHOP:</a><span class="ce">; [$a4a1]</span></span>
<span class="l"><a class="anc" name="a4a1" href="#a4a1">[a4a1]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_MEAT_SALESMAN</span></span><span class="ce">; Show the meat shop salesman portrait text box.</span></span>
<span class="l"><a class="anc" name="a4a2" href="#a4a2">[a4a2]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_QUESTION_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_DRIED_MEAT_50G">MESSAGE_DRIED_MEAT_50G</a>.</span></span>
<span class="l"><a class="anc" name="a4a3" href="#a4a3">[a4a3]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_DRIED_MEAT_50G</span></span><span class="ce">; [$a4a3] Message</span></span>
<span class="l"><a class="anc" name="a4a4" href="#a4a4">[a4a4]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_PAY_GOLD</span></span><span class="ce">; If not dismissed, pay 50G.</span></span>
<span class="l"><a class="anc" name="a4a5" href="#a4a5">[a4a5]</a><span class="cd"><span class="i">dw</span> <span class="o">$0032</span></span><span class="ce">; [$a4a5] ushort</span></span>
<span class="l"></span>
<span class="l"><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_ADD_HP</span></span><span class="ce">; Add 30HP.</span></span>
<span class="l"><a class="anc" name="a4a8" href="#a4a8">[a4a8]</a><span class="cd"><span class="i">db</span> <span class="o">$1e</span></span><span class="ce">; [$a4a8] byte</span></span>
<span class="l"></span>
<span class="l"><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_ADD_MP</span></span><span class="ce">; Add 30MP.</span></span>
<span class="l"><a class="anc" name="a4aa" href="#a4aa">[a4aa]</a><span class="cd"><span class="i">db</span> <span class="o">$1e</span></span><span class="ce">; [$a4aa] byte</span></span>
<span class="l"></span>
<span class="l"><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_THANK_YOU_FOR_SHOPPING">MESSAGE_THANK_YOU_FOR_SHOPPING</a>.</span></span>
<span class="l"><a class="anc" name="a4ac" href="#a4ac">[a4ac]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_THANK_YOU_FOR_SHOPPING</span></span><span class="ce">; [$a4ac] Message</span></span>
<span class="l"><a class="anc" name="a4ad" href="#a4ad">[a4ad]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_FOREPAW_MEAT_SHOP"></a><div class="cp">;============================================================================
; Interaction with the Forepaw Meat Shop.
;
; The shop keeper will offer 30HP and 30MP for 150G.
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9f97]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9f97]
;
</div><span class="l"><a class="anc" name="a4ae" href="#a4ae">[a4ae]</a><a href="#ISCRIPT_FOREPAW_MEAT_SHOP" class="la">ISCRIPT_FOREPAW_MEAT_SHOP:</a><span class="ce">; [$a4ae]</span></span>
<span class="l"><a class="anc" name="a4ae" href="#a4ae">[a4ae]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_MEAT_SALESMAN</span></span><span class="ce">; Show the meat shop salesman portrait text box.</span></span>
<span class="l"><a class="anc" name="a4af" href="#a4af">[a4af]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_QUESTION_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_DRIED_MEAT_150G">MESSAGE_DRIED_MEAT_150G</a>.</span></span>
<span class="l"><a class="anc" name="a4b0" href="#a4b0">[a4b0]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_DRIED_MEAT_150G</span></span><span class="ce">; [$a4b0] Message</span></span>
<span class="l"><a class="anc" name="a4b1" href="#a4b1">[a4b1]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_PAY_GOLD</span></span><span class="ce">; If not dismissed, pay 150G.</span></span>
<span class="l"><a class="anc" name="a4b2" href="#a4b2">[a4b2]</a><span class="cd"><span class="i">dw</span> <span class="o">$0096</span></span><span class="ce">; [$a4b2] ushort</span></span>
<span class="l"></span>
<span class="l"><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_ADD_HP</span></span><span class="ce">; Add 30HP.</span></span>
<span class="l"><a class="anc" name="a4b5" href="#a4b5">[a4b5]</a><span class="cd"><span class="i">db</span> <span class="o">$1e</span></span><span class="ce">; [$a4b5] byte</span></span>
<span class="l"></span>
<span class="l"><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_ADD_MP</span></span><span class="ce">; Add 30MP.</span></span>
<span class="l"><a class="anc" name="a4b7" href="#a4b7">[a4b7]</a><span class="cd"><span class="i">db</span> <span class="o">$1e</span></span><span class="ce">; [$a4b7] byte</span></span>
<span class="l"></span>
<span class="l"><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_THANK_YOU_FOR_SHOPPING">MESSAGE_THANK_YOU_FOR_SHOPPING</a>.</span></span>
<span class="l"><a class="anc" name="a4b9" href="#a4b9">[a4b9]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_THANK_YOU_FOR_SHOPPING</span></span><span class="ce">; [$a4b9] Message</span></span>
<span class="l"><a class="anc" name="a4ba" href="#a4ba">[a4ba]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_MASCON_MEAT_SHOP"></a><div class="cp">;============================================================================
; Interaction with the Mascon Meat Shop.
;
; The shop keeper will offer 30HP and 30MP for 180G.
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fa5]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fa5]
;
</div><span class="l"><a class="anc" name="a4bb" href="#a4bb">[a4bb]</a><a href="#ISCRIPT_MASCON_MEAT_SHOP" class="la">ISCRIPT_MASCON_MEAT_SHOP:</a><span class="ce">; [$a4bb]</span></span>
<span class="l"><a class="anc" name="a4bb" href="#a4bb">[a4bb]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_MEAT_SALESMAN</span></span><span class="ce">; Show the meat shop salesman portrait text box.</span></span>
<span class="l"><a class="anc" name="a4bc" href="#a4bc">[a4bc]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_QUESTION_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_DRIED_MEAT_180G">MESSAGE_DRIED_MEAT_180G</a>.</span></span>
<span class="l"><a class="anc" name="a4bd" href="#a4bd">[a4bd]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_DRIED_MEAT_180G</span></span><span class="ce">; [$a4bd] Message</span></span>
<span class="l"><a class="anc" name="a4be" href="#a4be">[a4be]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_PAY_GOLD</span></span><span class="ce">; If not dismissed, pay 180G.</span></span>
<span class="l"><a class="anc" name="a4bf" href="#a4bf">[a4bf]</a><span class="cd"><span class="i">dw</span> <span class="o">$00b4</span></span><span class="ce">; [$a4bf] ushort</span></span>
<span class="l"></span>
<span class="l"><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_ADD_HP</span></span><span class="ce">; Add 30HP.</span></span>
<span class="l"><a class="anc" name="a4c2" href="#a4c2">[a4c2]</a><span class="cd"><span class="i">db</span> <span class="o">$1e</span></span><span class="ce">; [$a4c2] byte</span></span>
<span class="l"></span>
<span class="l"><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_ADD_MP</span></span><span class="ce">; Add 30MP.</span></span>
<span class="l"><a class="anc" name="a4c4" href="#a4c4">[a4c4]</a><span class="cd"><span class="i">db</span> <span class="o">$1e</span></span><span class="ce">; [$a4c4] byte</span></span>
<span class="l"></span>
<span class="l"><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_THANK_YOU_FOR_SHOPPING">MESSAGE_THANK_YOU_FOR_SHOPPING</a>.</span></span>
<span class="l"><a class="anc" name="a4c6" href="#a4c6">[a4c6]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_THANK_YOU_FOR_SHOPPING</span></span><span class="ce">; [$a4c6] Message</span></span>
<span class="l"><a class="anc" name="a4c7" href="#a4c7">[a4c7]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_VICTIM_MEAT_SHOP"></a><div class="cp">;============================================================================
; Interaction with the Victim Meat Shop.
;
; The shop keeper will offer 30HP and 30MP for 250G.
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fb4]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fb4]
;
</div><span class="l"><a class="anc" name="a4c8" href="#a4c8">[a4c8]</a><a href="#ISCRIPT_VICTIM_MEAT_SHOP" class="la">ISCRIPT_VICTIM_MEAT_SHOP:</a><span class="ce">; [$a4c8]</span></span>
<span class="l"><a class="anc" name="a4c8" href="#a4c8">[a4c8]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_MEAT_SALESMAN</span></span><span class="ce">; Show the meat shop salesman portrait text box.</span></span>
<span class="l"><a class="anc" name="a4c9" href="#a4c9">[a4c9]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_QUESTION_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_DRIED_MEAT_250G">MESSAGE_DRIED_MEAT_250G</a>.</span></span>
<span class="l"><a class="anc" name="a4ca" href="#a4ca">[a4ca]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_DRIED_MEAT_250G</span></span><span class="ce">; [$a4ca] Message</span></span>
<span class="l"><a class="anc" name="a4cb" href="#a4cb">[a4cb]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_PAY_GOLD</span></span><span class="ce">; If not dismissed, pay 250G.</span></span>
<span class="l"><a class="anc" name="a4cc" href="#a4cc">[a4cc]</a><span class="cd"><span class="i">dw</span> <span class="o">$00fa</span></span><span class="ce">; [$a4cc] ushort</span></span>
<span class="l"></span>
<span class="l"><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_ADD_HP</span></span><span class="ce">; Add 30HP.</span></span>
<span class="l"><a class="anc" name="a4cf" href="#a4cf">[a4cf]</a><span class="cd"><span class="i">db</span> <span class="o">$1e</span></span><span class="ce">; [$a4cf] byte</span></span>
<span class="l"></span>
<span class="l"><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_ADD_MP</span></span><span class="ce">; Add 30MP.</span></span>
<span class="l"><a class="anc" name="a4d1" href="#a4d1">[a4d1]</a><span class="cd"><span class="i">db</span> <span class="o">$1e</span></span><span class="ce">; [$a4d1] byte</span></span>
<span class="l"></span>
<span class="l"><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_THANK_YOU_FOR_SHOPPING">MESSAGE_THANK_YOU_FOR_SHOPPING</a>.</span></span>
<span class="l"><a class="anc" name="a4d3" href="#a4d3">[a4d3]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_THANK_YOU_FOR_SHOPPING</span></span><span class="ce">; [$a4d3] Message</span></span>
<span class="l"><a class="anc" name="a4d4" href="#a4d4">[a4d4]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_CONFLATE_MEAT_SHOP"></a><div class="cp">;============================================================================
; Interaction with the Conflate Meat Shop.
;
; The shop keeper will offer 30HP and 30MP for 350G.
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fc3]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fc3]
;
</div><span class="l"><a class="anc" name="a4d5" href="#a4d5">[a4d5]</a><a href="#ISCRIPT_CONFLATE_MEAT_SHOP" class="la">ISCRIPT_CONFLATE_MEAT_SHOP:</a><span class="ce">; [$a4d5]</span></span>
<span class="l"><a class="anc" name="a4d5" href="#a4d5">[a4d5]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_MEAT_SALESMAN</span></span><span class="ce">; Show the meat shop salesman portrait text box.</span></span>
<span class="l"><a class="anc" name="a4d6" href="#a4d6">[a4d6]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_QUESTION_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_DRIED_MEAT_350G">MESSAGE_DRIED_MEAT_350G</a>.</span></span>
<span class="l"><a class="anc" name="a4d7" href="#a4d7">[a4d7]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_DRIED_MEAT_350G</span></span><span class="ce">; [$a4d7] Message</span></span>
<span class="l"><a class="anc" name="a4d8" href="#a4d8">[a4d8]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_PAY_GOLD</span></span><span class="ce">; If not dismissed, pay 350G.</span></span>
<span class="l"><a class="anc" name="a4d9" href="#a4d9">[a4d9]</a><span class="cd"><span class="i">dw</span> <span class="o">$015e</span></span><span class="ce">; [$a4d9] ushort</span></span>
<span class="l"></span>
<span class="l"><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_ADD_HP</span></span><span class="ce">; Add 30HP.</span></span>
<span class="l"><a class="anc" name="a4dc" href="#a4dc">[a4dc]</a><span class="cd"><span class="i">db</span> <span class="o">$1e</span></span><span class="ce">; [$a4dc] byte</span></span>
<span class="l"></span>
<span class="l"><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_ADD_MP</span></span><span class="ce">; Add 30MP.</span></span>
<span class="l"><a class="anc" name="a4de" href="#a4de">[a4de]</a><span class="cd"><span class="i">db</span> <span class="o">$1e</span></span><span class="ce">; [$a4de] byte</span></span>
<span class="l"></span>
<span class="l"><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_THANK_YOU_FOR_SHOPPING">MESSAGE_THANK_YOU_FOR_SHOPPING</a>.</span></span>
<span class="l"><a class="anc" name="a4e0" href="#a4e0">[a4e0]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_THANK_YOU_FOR_SHOPPING</span></span><span class="ce">; [$a4e0] Message</span></span>
<span class="l"><a class="anc" name="a4e1" href="#a4e1">[a4e1]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_DAYBREAK_MEAT_SHOP"></a><div class="cp">;============================================================================
; Interaction with the Daybreak Meat Shop.
;
; The shop keeper will offer 30HP and 30MP for 500G.
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fd2]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fd2]
;
</div><span class="l"><a class="anc" name="a4e2" href="#a4e2">[a4e2]</a><a href="#ISCRIPT_DAYBREAK_MEAT_SHOP" class="la">ISCRIPT_DAYBREAK_MEAT_SHOP:</a><span class="ce">; [$a4e2]</span></span>
<span class="l"><a class="anc" name="a4e2" href="#a4e2">[a4e2]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_MEAT_SALESMAN</span></span><span class="ce">; Show the meat shop salesman portrait text box.</span></span>
<span class="l"><a class="anc" name="a4e3" href="#a4e3">[a4e3]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_QUESTION_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_DRIED_MEAT_500G">MESSAGE_DRIED_MEAT_500G</a>.</span></span>
<span class="l"><a class="anc" name="a4e4" href="#a4e4">[a4e4]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_DRIED_MEAT_500G</span></span><span class="ce">; [$a4e4] Message</span></span>
<span class="l"><a class="anc" name="a4e5" href="#a4e5">[a4e5]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_PAY_GOLD</span></span><span class="ce">; If not dismissed, pay 500G.</span></span>
<span class="l"><a class="anc" name="a4e6" href="#a4e6">[a4e6]</a><span class="cd"><span class="i">dw</span> <span class="o">$01f4</span></span><span class="ce">; [$a4e6] ushort</span></span>
<span class="l"></span>
<span class="l"><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_ADD_HP</span></span><span class="ce">; Add 30HP.</span></span>
<span class="l"><a class="anc" name="a4e9" href="#a4e9">[a4e9]</a><span class="cd"><span class="i">db</span> <span class="o">$1e</span></span><span class="ce">; [$a4e9] byte</span></span>
<span class="l"></span>
<span class="l"><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_ADD_MP</span></span><span class="ce">; Add 30MP.</span></span>
<span class="l"><a class="anc" name="a4eb" href="#a4eb">[a4eb]</a><span class="cd"><span class="i">db</span> <span class="o">$1e</span></span><span class="ce">; [$a4eb] byte</span></span>
<span class="l"></span>
<span class="l"><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_THANK_YOU_FOR_SHOPPING">MESSAGE_THANK_YOU_FOR_SHOPPING</a>.</span></span>
<span class="l"><a class="anc" name="a4ed" href="#a4ed">[a4ed]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_THANK_YOU_FOR_SHOPPING</span></span><span class="ce">; [$a4ed] Message</span></span>
<span class="l"><a class="anc" name="a4ee" href="#a4ee">[a4ee]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_DARTMOOR_MEAT_SHOP"></a><div class="cp">;============================================================================
; Interaction with the Dartmoor Meat Shop.
;
; The shop keeper will offer 30HP and 30MP for 800G.
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fe1]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fe1]
;
</div><span class="l"><a class="anc" name="a4ef" href="#a4ef">[a4ef]</a><a href="#ISCRIPT_DARTMOOR_MEAT_SHOP" class="la">ISCRIPT_DARTMOOR_MEAT_SHOP:</a><span class="ce">; [$a4ef]</span></span>
<span class="l"><a class="anc" name="a4ef" href="#a4ef">[a4ef]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_MEAT_SALESMAN</span></span><span class="ce">; Show the meat shop salesman portrait text box.</span></span>
<span class="l"><a class="anc" name="a4f0" href="#a4f0">[a4f0]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_QUESTION_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_DRIED_MEAT_800G">MESSAGE_DRIED_MEAT_800G</a>.</span></span>
<span class="l"><a class="anc" name="a4f1" href="#a4f1">[a4f1]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_DRIED_MEAT_800G</span></span><span class="ce">; [$a4f1] Message</span></span>
<span class="l"><a class="anc" name="a4f2" href="#a4f2">[a4f2]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_PAY_GOLD</span></span><span class="ce">; If not dismissed, pay 800G.</span></span>
<span class="l"><a class="anc" name="a4f3" href="#a4f3">[a4f3]</a><span class="cd"><span class="i">dw</span> <span class="o">$0320</span></span><span class="ce">; [$a4f3] ushort</span></span>
<span class="l"></span>
<span class="l"><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_ADD_HP</span></span><span class="ce">; Add 30HP.</span></span>
<span class="l"><a class="anc" name="a4f6" href="#a4f6">[a4f6]</a><span class="cd"><span class="i">db</span> <span class="o">$1e</span></span><span class="ce">; [$a4f6] byte</span></span>
<span class="l"></span>
<span class="l"><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_ADD_MP</span></span><span class="ce">; Add 30MP.</span></span>
<span class="l"><a class="anc" name="a4f8" href="#a4f8">[a4f8]</a><span class="cd"><span class="i">db</span> <span class="o">$1e</span></span><span class="ce">; [$a4f8] byte</span></span>
<span class="l"></span>
<span class="l"><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_THANK_YOU_FOR_SHOPPING">MESSAGE_THANK_YOU_FOR_SHOPPING</a>.</span></span>
<span class="l"><a class="anc" name="a4fa" href="#a4fa">[a4fa]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_THANK_YOU_FOR_SHOPPING</span></span><span class="ce">; [$a4fa] Message</span></span>
<span class="l"><a class="anc" name="a4fb" href="#a4fb">[a4fb]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_EOLIS_KEY_SHOP"></a><div class="cp">;============================================================================
; Interaction with the Eolis Key Shop.
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9f77]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9f77]
;
</div><span class="l"><a class="anc" name="a4fc" href="#a4fc">[a4fc]</a><a href="#ISCRIPT_EOLIS_KEY_SHOP" class="la">ISCRIPT_EOLIS_KEY_SHOP:</a><span class="ce">; [$a4fc]</span></span>
<span class="l"><a class="anc" name="a4fc" href="#a4fc">[a4fc]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_KEY_SALESMAN</span></span><span class="ce">; Show the key salesman portrait text box.</span></span>
<span class="l"><a class="anc" name="a4fd" href="#a4fd">[a4fd]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_I_SELL_KEYS">MESSAGE_I_SELL_KEYS</a>.</span></span>
<span class="l"><a class="anc" name="a4fe" href="#a4fe">[a4fe]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_I_SELL_KEYS</span></span><span class="ce">; [$a4fe] Message</span></span>
<span class="l"><a class="anc" name="a4ff" href="#a4ff">[a4ff]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_BUY_SELL_MENU</span></span><span class="ce">; Show the Buy/Sell menu.</span></span>
<span class="l"><a class="anc" name="a500" href="#a500">[a500]</a><span class="cd"><span class="i">dw</span> <span class="o">$a508</span></span><span class="ce">; If Buy was chosen, jump.</span></span>
<span class="l"><a class="anc" name="a502" href="#a502">[a502]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_SELL_MENU</span></span><span class="ce">; If Sell was chosen, show the sell menu.</span></span>
<span class="l"><a class="anc" name="a503" href="#a503">[a503]</a><span class="cd"><span class="i">dw</span> <span class="o">$a57a</span></span><span class="ce">; <a href="#EOLIS_KEY_SHOP_ITEMS">EOLIS_KEY_SHOP_ITEMS</a> [$PRG12::a503]</span></span>
<span class="l"><a class="anc" name="a505" href="#a505">[a505]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_THANK_YOU_FOR_SHOPPING">MESSAGE_THANK_YOU_FOR_SHOPPING</a>.</span></span>
<span class="l"><a class="anc" name="a506" href="#a506">[a506]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_THANK_YOU_FOR_SHOPPING</span></span><span class="ce">; [$a506] Message</span></span>
<span class="l"><a class="anc" name="a507" href="#a507">[a507]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<a name=":a508:@_ISCRIPT_EOLIS_KEY_SHOP_BUY"></a><span class="l"><a class="anc" name="a508" href="#a508">[a508]</a><a href="#:a508:@_ISCRIPT_EOLIS_KEY_SHOP_BUY" class="lla">@_ISCRIPT_EOLIS_KEY_SHOP_BUY:</a><span class="ce">; [$a508]</span></span>
<span class="l"><a class="anc" name="a508" href="#a508">[a508]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_OPEN_SHOP</span></span><span class="ce">; Open the Buy shop menu.</span></span>
<span class="l"><a class="anc" name="a509" href="#a509">[a509]</a><span class="cd"><span class="i">dw</span> <span class="o">$a57a</span></span><span class="ce">; <a href="#EOLIS_KEY_SHOP_ITEMS">EOLIS_KEY_SHOP_ITEMS</a> [$PRG12::a509]</span></span>
<span class="l"><a class="anc" name="a50b" href="#a50b">[a50b]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_THANK_YOU_FOR_SHOPPING">MESSAGE_THANK_YOU_FOR_SHOPPING</a>.</span></span>
<span class="l"><a class="anc" name="a50c" href="#a50c">[a50c]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_THANK_YOU_FOR_SHOPPING</span></span><span class="ce">; [$a50c] Message</span></span>
<span class="l"><a class="anc" name="a50d" href="#a50d">[a50d]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_APOLUNE_KEY_SHOP"></a><div class="cp">;============================================================================
; Interaction with the Apolune Key Shop.
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9f85]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9f85]
;
</div><span class="l"><a class="anc" name="a50e" href="#a50e">[a50e]</a><a href="#ISCRIPT_APOLUNE_KEY_SHOP" class="la">ISCRIPT_APOLUNE_KEY_SHOP:</a><span class="ce">; [$a50e]</span></span>
<span class="l"><a class="anc" name="a50e" href="#a50e">[a50e]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_KEY_SALESMAN</span></span><span class="ce">; Show the key salesman portrait text box.</span></span>
<span class="l"><a class="anc" name="a50f" href="#a50f">[a50f]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_I_SELL_KEYS">MESSAGE_I_SELL_KEYS</a>.</span></span>
<span class="l"><a class="anc" name="a510" href="#a510">[a510]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_I_SELL_KEYS</span></span><span class="ce">; [$a510] Message</span></span>
<span class="l"><a class="anc" name="a511" href="#a511">[a511]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_BUY_SELL_MENU</span></span><span class="ce">; Show the Buy/Sell menu.</span></span>
<span class="l"><a class="anc" name="a512" href="#a512">[a512]</a><span class="cd"><span class="i">dw</span> <span class="o">$a51a</span></span><span class="ce">; If Buy was chosen, jump.</span></span>
<span class="l"><a class="anc" name="a514" href="#a514">[a514]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_SELL_MENU</span></span><span class="ce">; If Sell was chosen, show the sell menu.</span></span>
<span class="l"><a class="anc" name="a515" href="#a515">[a515]</a><span class="cd"><span class="i">dw</span> <span class="o">$a57e</span></span><span class="ce">; <a href="#APOLUNE_KEY_SHOP_ITEMS">APOLUNE_KEY_SHOP_ITEMS</a> [$PRG12::a515]</span></span>
<span class="l"><a class="anc" name="a517" href="#a517">[a517]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_THANK_YOU_FOR_SHOPPING">MESSAGE_THANK_YOU_FOR_SHOPPING</a>.</span></span>
<span class="l"><a class="anc" name="a518" href="#a518">[a518]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_THANK_YOU_FOR_SHOPPING</span></span><span class="ce">; [$a518] Message</span></span>
<span class="l"><a class="anc" name="a519" href="#a519">[a519]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<a name=":a51a:@_ISCRIPT_APOLUNE_KEY_SHOP_BUY"></a><span class="l"><a class="anc" name="a51a" href="#a51a">[a51a]</a><a href="#:a51a:@_ISCRIPT_APOLUNE_KEY_SHOP_BUY" class="lla">@_ISCRIPT_APOLUNE_KEY_SHOP_BUY:</a><span class="ce">; [$a51a]</span></span>
<span class="l"><a class="anc" name="a51a" href="#a51a">[a51a]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_OPEN_SHOP</span></span><span class="ce">; Open the Buy shop menu.</span></span>
<span class="l"><a class="anc" name="a51b" href="#a51b">[a51b]</a><span class="cd"><span class="i">dw</span> <span class="o">$a57e</span></span><span class="ce">; <a href="#APOLUNE_KEY_SHOP_ITEMS">APOLUNE_KEY_SHOP_ITEMS</a> [$PRG12::a51b]</span></span>
<span class="l"><a class="anc" name="a51d" href="#a51d">[a51d]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_THANK_YOU_FOR_SHOPPING">MESSAGE_THANK_YOU_FOR_SHOPPING</a>.</span></span>
<span class="l"><a class="anc" name="a51e" href="#a51e">[a51e]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_THANK_YOU_FOR_SHOPPING</span></span><span class="ce">; [$a51e] Message</span></span>
<span class="l"><a class="anc" name="a51f" href="#a51f">[a51f]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_FOREPAW_KEY_SHOP"></a><div class="cp">;============================================================================
; Interaction with the Forepaw Key Shop.
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9f96]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9f96]
;
</div><span class="l"><a class="anc" name="a520" href="#a520">[a520]</a><a href="#ISCRIPT_FOREPAW_KEY_SHOP" class="la">ISCRIPT_FOREPAW_KEY_SHOP:</a><span class="ce">; [$a520]</span></span>
<span class="l"><a class="anc" name="a520" href="#a520">[a520]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_KEY_SALESMAN</span></span><span class="ce">; Show the key salesman portrait text box.</span></span>
<span class="l"><a class="anc" name="a521" href="#a521">[a521]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_I_SELL_KEYS">MESSAGE_I_SELL_KEYS</a>.</span></span>
<span class="l"><a class="anc" name="a522" href="#a522">[a522]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_I_SELL_KEYS</span></span><span class="ce">; [$a522] Message</span></span>
<span class="l"><a class="anc" name="a523" href="#a523">[a523]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_BUY_SELL_MENU</span></span><span class="ce">; Show the Buy/Sell menu.</span></span>
<span class="l"><a class="anc" name="a524" href="#a524">[a524]</a><span class="cd"><span class="i">dw</span> <span class="o">$a52c</span></span><span class="ce">; If Buy was chosen, jump.</span></span>
<span class="l"><a class="anc" name="a526" href="#a526">[a526]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_SELL_MENU</span></span><span class="ce">; If Sell was chosen, show the sell menu.</span></span>
<span class="l"><a class="anc" name="a527" href="#a527">[a527]</a><span class="cd"><span class="i">dw</span> <span class="o">$a582</span></span><span class="ce">; <a href="#FOREPAW_KEY_SHOP_ITEMS">FOREPAW_KEY_SHOP_ITEMS</a> [$PRG12::a527]</span></span>
<span class="l"><a class="anc" name="a529" href="#a529">[a529]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_THANK_YOU_FOR_SHOPPING">MESSAGE_THANK_YOU_FOR_SHOPPING</a>.</span></span>
<span class="l"><a class="anc" name="a52a" href="#a52a">[a52a]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_THANK_YOU_FOR_SHOPPING</span></span><span class="ce">; [$a52a] Message</span></span>
<span class="l"><a class="anc" name="a52b" href="#a52b">[a52b]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<a name=":a52c:@_ISCRIPT_FOREPAW_KEY_SHOP_BUY"></a><span class="l"><a class="anc" name="a52c" href="#a52c">[a52c]</a><a href="#:a52c:@_ISCRIPT_FOREPAW_KEY_SHOP_BUY" class="lla">@_ISCRIPT_FOREPAW_KEY_SHOP_BUY:</a><span class="ce">; [$a52c]</span></span>
<span class="l"><a class="anc" name="a52c" href="#a52c">[a52c]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_OPEN_SHOP</span></span><span class="ce">; Open the Buy shop menu.</span></span>
<span class="l"><a class="anc" name="a52d" href="#a52d">[a52d]</a><span class="cd"><span class="i">dw</span> <span class="o">$a582</span></span><span class="ce">; <a href="#FOREPAW_KEY_SHOP_ITEMS">FOREPAW_KEY_SHOP_ITEMS</a> [$PRG12::a52d]</span></span>
<span class="l"><a class="anc" name="a52f" href="#a52f">[a52f]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_THANK_YOU_FOR_SHOPPING">MESSAGE_THANK_YOU_FOR_SHOPPING</a>.</span></span>
<span class="l"><a class="anc" name="a530" href="#a530">[a530]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_THANK_YOU_FOR_SHOPPING</span></span><span class="ce">; [$a530] Message</span></span>
<span class="l"><a class="anc" name="a531" href="#a531">[a531]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_MASCON_KEY_SHOP"></a><div class="cp">;============================================================================
; Interaction with the Mascon Key Shop.
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fa6]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fa6]
;
</div><span class="l"><a class="anc" name="a532" href="#a532">[a532]</a><a href="#ISCRIPT_MASCON_KEY_SHOP" class="la">ISCRIPT_MASCON_KEY_SHOP:</a><span class="ce">; [$a532]</span></span>
<span class="l"><a class="anc" name="a532" href="#a532">[a532]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_KEY_SALESMAN</span></span><span class="ce">; Show the key salesman portrait text box.</span></span>
<span class="l"><a class="anc" name="a533" href="#a533">[a533]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_I_SELL_KEYS">MESSAGE_I_SELL_KEYS</a>.</span></span>
<span class="l"><a class="anc" name="a534" href="#a534">[a534]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_I_SELL_KEYS</span></span><span class="ce">; [$a534] Message</span></span>
<span class="l"><a class="anc" name="a535" href="#a535">[a535]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_BUY_SELL_MENU</span></span><span class="ce">; Show the Buy/Sell menu.</span></span>
<span class="l"><a class="anc" name="a536" href="#a536">[a536]</a><span class="cd"><span class="i">dw</span> <span class="o">$a53e</span></span><span class="ce">; If Buy was chosen, jump.</span></span>
<span class="l"><a class="anc" name="a538" href="#a538">[a538]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_SELL_MENU</span></span><span class="ce">; If Sell was chosen, show the sell menu.</span></span>
<span class="l"><a class="anc" name="a539" href="#a539">[a539]</a><span class="cd"><span class="i">dw</span> <span class="o">$a589</span></span><span class="ce">; <a href="#MACONE_KEY_SHOP_ITEMS">MACONE_KEY_SHOP_ITEMS</a> [$PRG12::a539]</span></span>
<span class="l"><a class="anc" name="a53b" href="#a53b">[a53b]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_THANK_YOU_FOR_SHOPPING">MESSAGE_THANK_YOU_FOR_SHOPPING</a>.</span></span>
<span class="l"><a class="anc" name="a53c" href="#a53c">[a53c]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_THANK_YOU_FOR_SHOPPING</span></span><span class="ce">; [$a53c] Message</span></span>
<span class="l"><a class="anc" name="a53d" href="#a53d">[a53d]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<a name=":a53e:@_ISCRIPT_MASCONE_KEY_SHOP_BUY"></a><span class="l"><a class="anc" name="a53e" href="#a53e">[a53e]</a><a href="#:a53e:@_ISCRIPT_MASCONE_KEY_SHOP_BUY" class="lla">@_ISCRIPT_MASCONE_KEY_SHOP_BUY:</a><span class="ce">; [$a53e]</span></span>
<span class="l"><a class="anc" name="a53e" href="#a53e">[a53e]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_OPEN_SHOP</span></span><span class="ce">; Open the Buy shop menu.</span></span>
<span class="l"><a class="anc" name="a53f" href="#a53f">[a53f]</a><span class="cd"><span class="i">dw</span> <span class="o">$a589</span></span><span class="ce">; <a href="#MACONE_KEY_SHOP_ITEMS">MACONE_KEY_SHOP_ITEMS</a> [$PRG12::a53f]</span></span>
<span class="l"><a class="anc" name="a541" href="#a541">[a541]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_THANK_YOU_FOR_SHOPPING">MESSAGE_THANK_YOU_FOR_SHOPPING</a>.</span></span>
<span class="l"><a class="anc" name="a542" href="#a542">[a542]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_THANK_YOU_FOR_SHOPPING</span></span><span class="ce">; [$a542] Message</span></span>
<span class="l"><a class="anc" name="a543" href="#a543">[a543]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_VICTIM_KEY_SHOP"></a><div class="cp">;============================================================================
; Interaction with the Victim Key Shop.
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fb5]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fb5]
;
</div><span class="l"><a class="anc" name="a544" href="#a544">[a544]</a><a href="#ISCRIPT_VICTIM_KEY_SHOP" class="la">ISCRIPT_VICTIM_KEY_SHOP:</a><span class="ce">; [$a544]</span></span>
<span class="l"><a class="anc" name="a544" href="#a544">[a544]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_KEY_SALESMAN</span></span><span class="ce">; Show the key salesman portrait text box.</span></span>
<span class="l"><a class="anc" name="a545" href="#a545">[a545]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_I_SELL_KEYS">MESSAGE_I_SELL_KEYS</a>.</span></span>
<span class="l"><a class="anc" name="a546" href="#a546">[a546]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_I_SELL_KEYS</span></span><span class="ce">; [$a546] Message</span></span>
<span class="l"><a class="anc" name="a547" href="#a547">[a547]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_BUY_SELL_MENU</span></span><span class="ce">; Show the Buy/Sell menu.</span></span>
<span class="l"><a class="anc" name="a548" href="#a548">[a548]</a><span class="cd"><span class="i">dw</span> <span class="o">$a550</span></span><span class="ce">; If Buy was chosen, jump.</span></span>
<span class="l"><a class="anc" name="a54a" href="#a54a">[a54a]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_SELL_MENU</span></span><span class="ce">; If Sell was chosen, show the sell menu.</span></span>
<span class="l"><a class="anc" name="a54b" href="#a54b">[a54b]</a><span class="cd"><span class="i">dw</span> <span class="o">$a590</span></span><span class="ce">; <a href="#VICTIM_KEY_SHOP_ITEMS">VICTIM_KEY_SHOP_ITEMS</a> [$PRG12::a54b]</span></span>
<span class="l"><a class="anc" name="a54d" href="#a54d">[a54d]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_THANK_YOU_FOR_SHOPPING">MESSAGE_THANK_YOU_FOR_SHOPPING</a>.</span></span>
<span class="l"><a class="anc" name="a54e" href="#a54e">[a54e]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_THANK_YOU_FOR_SHOPPING</span></span><span class="ce">; [$a54e] Message</span></span>
<span class="l"><a class="anc" name="a54f" href="#a54f">[a54f]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<a name=":a550:@_ISCRIPT_VICTIM_KEY_SHOP_BUY"></a><span class="l"><a class="anc" name="a550" href="#a550">[a550]</a><a href="#:a550:@_ISCRIPT_VICTIM_KEY_SHOP_BUY" class="lla">@_ISCRIPT_VICTIM_KEY_SHOP_BUY:</a><span class="ce">; [$a550]</span></span>
<span class="l"><a class="anc" name="a550" href="#a550">[a550]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_OPEN_SHOP</span></span><span class="ce">; Open the Buy shop menu.</span></span>
<span class="l"><a class="anc" name="a551" href="#a551">[a551]</a><span class="cd"><span class="i">dw</span> <span class="o">$a590</span></span><span class="ce">; <a href="#VICTIM_KEY_SHOP_ITEMS">VICTIM_KEY_SHOP_ITEMS</a> [$PRG12::a551]</span></span>
<span class="l"><a class="anc" name="a553" href="#a553">[a553]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_THANK_YOU_FOR_SHOPPING">MESSAGE_THANK_YOU_FOR_SHOPPING</a>.</span></span>
<span class="l"><a class="anc" name="a554" href="#a554">[a554]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_THANK_YOU_FOR_SHOPPING</span></span><span class="ce">; [$a554] Message</span></span>
<span class="l"><a class="anc" name="a555" href="#a555">[a555]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_DAYBREAK_KEY_SHOP"></a><div class="cp">;============================================================================
; Interaction with the Daybreak Key Shop.
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fd3]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fd3]
;
</div><span class="l"><a class="anc" name="a556" href="#a556">[a556]</a><a href="#ISCRIPT_DAYBREAK_KEY_SHOP" class="la">ISCRIPT_DAYBREAK_KEY_SHOP:</a><span class="ce">; [$a556]</span></span>
<span class="l"><a class="anc" name="a556" href="#a556">[a556]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_KEY_SALESMAN</span></span><span class="ce">; Show the key salesman portrait text box.</span></span>
<span class="l"><a class="anc" name="a557" href="#a557">[a557]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_I_SELL_KEYS">MESSAGE_I_SELL_KEYS</a>.</span></span>
<span class="l"><a class="anc" name="a558" href="#a558">[a558]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_I_SELL_KEYS</span></span><span class="ce">; [$a558] Message</span></span>
<span class="l"><a class="anc" name="a559" href="#a559">[a559]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_BUY_SELL_MENU</span></span><span class="ce">; Show the Buy/Sell menu.</span></span>
<span class="l"><a class="anc" name="a55a" href="#a55a">[a55a]</a><span class="cd"><span class="i">dw</span> <span class="o">$a562</span></span><span class="ce">; If Buy was chosen, jump.</span></span>
<span class="l"><a class="anc" name="a55c" href="#a55c">[a55c]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_SELL_MENU</span></span><span class="ce">; If Sell was chosen, show the sell menu.</span></span>
<span class="l"><a class="anc" name="a55d" href="#a55d">[a55d]</a><span class="cd"><span class="i">dw</span> <span class="o">$a597</span></span><span class="ce">; <a href="#DAYBREAK_KEY_SHOP_ITEMS">DAYBREAK_KEY_SHOP_ITEMS</a> [$PRG12::a55d]</span></span>
<span class="l"><a class="anc" name="a55f" href="#a55f">[a55f]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_THANK_YOU_FOR_SHOPPING">MESSAGE_THANK_YOU_FOR_SHOPPING</a>.</span></span>
<span class="l"><a class="anc" name="a560" href="#a560">[a560]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_THANK_YOU_FOR_SHOPPING</span></span><span class="ce">; [$a560] Message</span></span>
<span class="l"><a class="anc" name="a561" href="#a561">[a561]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<a name=":a562:@_ISCRIPT_DAYBREAK_KEY_SHOP_BUY"></a><span class="l"><a class="anc" name="a562" href="#a562">[a562]</a><a href="#:a562:@_ISCRIPT_DAYBREAK_KEY_SHOP_BUY" class="lla">@_ISCRIPT_DAYBREAK_KEY_SHOP_BUY:</a><span class="ce">; [$a562]</span></span>
<span class="l"><a class="anc" name="a562" href="#a562">[a562]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_OPEN_SHOP</span></span><span class="ce">; Open the Buy shop menu.</span></span>
<span class="l"><a class="anc" name="a563" href="#a563">[a563]</a><span class="cd"><span class="i">dw</span> <span class="o">$a597</span></span><span class="ce">; <a href="#DAYBREAK_KEY_SHOP_ITEMS">DAYBREAK_KEY_SHOP_ITEMS</a> [$PRG12::a563]</span></span>
<span class="l"><a class="anc" name="a565" href="#a565">[a565]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_THANK_YOU_FOR_SHOPPING">MESSAGE_THANK_YOU_FOR_SHOPPING</a>.</span></span>
<span class="l"><a class="anc" name="a566" href="#a566">[a566]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_THANK_YOU_FOR_SHOPPING</span></span><span class="ce">; [$a566] Message</span></span>
<span class="l"><a class="anc" name="a567" href="#a567">[a567]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_DARTMOOR_KEY_SHOP"></a><div class="cp">;============================================================================
; Interaction with the Dartmoor Key Shop.
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fe2]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fe2]
;
</div><span class="l"><a class="anc" name="a568" href="#a568">[a568]</a><a href="#ISCRIPT_DARTMOOR_KEY_SHOP" class="la">ISCRIPT_DARTMOOR_KEY_SHOP:</a><span class="ce">; [$a568]</span></span>
<span class="l"><a class="anc" name="a568" href="#a568">[a568]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_KEY_SALESMAN</span></span><span class="ce">; Show the key salesman portrait text box.</span></span>
<span class="l"><a class="anc" name="a569" href="#a569">[a569]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_I_SELL_KEYS">MESSAGE_I_SELL_KEYS</a>.</span></span>
<span class="l"><a class="anc" name="a56a" href="#a56a">[a56a]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_I_SELL_KEYS</span></span><span class="ce">; [$a56a] Message</span></span>
<span class="l"><a class="anc" name="a56b" href="#a56b">[a56b]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_BUY_SELL_MENU</span></span><span class="ce">; Show the Buy/Sell menu.</span></span>
<span class="l"><a class="anc" name="a56c" href="#a56c">[a56c]</a><span class="cd"><span class="i">dw</span> <span class="o">$a574</span></span><span class="ce">; If Buy was chosen, jump.</span></span>
<span class="l"><a class="anc" name="a56e" href="#a56e">[a56e]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_SELL_MENU</span></span><span class="ce">; If Sell was chosen, show the sell menu.</span></span>
<span class="l"><a class="anc" name="a56f" href="#a56f">[a56f]</a><span class="cd"><span class="i">dw</span> <span class="o">$a59e</span></span><span class="ce">; <a href="#DARTMOOR_KEY_SHOP_ITEMS">DARTMOOR_KEY_SHOP_ITEMS</a> [$PRG12::a56f]</span></span>
<span class="l"><a class="anc" name="a571" href="#a571">[a571]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_THANK_YOU_FOR_SHOPPING">MESSAGE_THANK_YOU_FOR_SHOPPING</a>.</span></span>
<span class="l"><a class="anc" name="a572" href="#a572">[a572]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_THANK_YOU_FOR_SHOPPING</span></span><span class="ce">; [$a572] Message</span></span>
<span class="l"><a class="anc" name="a573" href="#a573">[a573]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<a name=":a574:@_ISCRIPT_DARTMOOR_KEY_SHOP_BUY"></a><span class="l"><a class="anc" name="a574" href="#a574">[a574]</a><a href="#:a574:@_ISCRIPT_DARTMOOR_KEY_SHOP_BUY" class="lla">@_ISCRIPT_DARTMOOR_KEY_SHOP_BUY:</a><span class="ce">; [$a574]</span></span>
<span class="l"><a class="anc" name="a574" href="#a574">[a574]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_OPEN_SHOP</span></span><span class="ce">; Open the Buy shop menu.</span></span>
<span class="l"><a class="anc" name="a575" href="#a575">[a575]</a><span class="cd"><span class="i">dw</span> <span class="o">$a59e</span></span><span class="ce">; <a href="#DARTMOOR_KEY_SHOP_ITEMS">DARTMOOR_KEY_SHOP_ITEMS</a> [$PRG12::a575]</span></span>
<span class="l"><a class="anc" name="a577" href="#a577">[a577]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_THANK_YOU_FOR_SHOPPING">MESSAGE_THANK_YOU_FOR_SHOPPING</a>.</span></span>
<span class="l"><a class="anc" name="a578" href="#a578">[a578]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_THANK_YOU_FOR_SHOPPING</span></span><span class="ce">; [$a578] Message</span></span>
<span class="l"><a class="anc" name="a579" href="#a579">[a579]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="EOLIS_KEY_SHOP_ITEMS"></a><div class="cp">;============================================================================
; Eolis Key Shop Items
;
; * "J" Key: 100G
;============================================================================
</div><span class="l"><a class="anc" name="a57a" href="#a57a">[a57a]</a><a href="#EOLIS_KEY_SHOP_ITEMS" class="la">EOLIS_KEY_SHOP_ITEMS:</a><span class="ce">; [$a57a]</span></span>
<span class="l"><a class="anc" name="a57a" href="#a57a">[a57a]</a><span class="cd"><span class="i">db</span> <span class="o">KEY_J</span></span><span class="ce">; [$a57a] InventoryItem</span></span>
<span class="l"><a class="anc" name="a57b" href="#a57b">[a57b]</a><span class="cd"><span class="i">dw</span> <span class="o">$0064</span></span><span class="ce">; [$a57b] ushort</span></span>
<span class="l"></span>
<span class="l"><span class="cd"><span class="i">db</span> <span class="o">$ff</span></span></span>
<span class="l"></span>
<span class="l"></span>
<a name="APOLUNE_KEY_SHOP_ITEMS"></a><div class="cp">;============================================================================
; Apolune Key Shop
;
; * "J" Key: 140G
;============================================================================
</div><span class="l"><a class="anc" name="a57e" href="#a57e">[a57e]</a><a href="#APOLUNE_KEY_SHOP_ITEMS" class="la">APOLUNE_KEY_SHOP_ITEMS:</a><span class="ce">; [$a57e]</span></span>
<span class="l"><a class="anc" name="a57e" href="#a57e">[a57e]</a><span class="cd"><span class="i">db</span> <span class="o">KEY_J</span></span><span class="ce">; [$a57e] InventoryItem</span></span>
<span class="l"><a class="anc" name="a57f" href="#a57f">[a57f]</a><span class="cd"><span class="i">dw</span> <span class="o">$008c</span></span><span class="ce">; [$a57f] ushort</span></span>
<span class="l"></span>
<span class="l"><span class="cd"><span class="i">db</span> <span class="o">$ff</span></span></span>
<span class="l"></span>
<span class="l"></span>
<a name="FOREPAW_KEY_SHOP_ITEMS"></a><div class="cp">;============================================================================
; Forepaw Key Shop Items
;
; * "J" Key: 200G
; * "Q" Key: 500G
;============================================================================
</div><span class="l"><a class="anc" name="a582" href="#a582">[a582]</a><a href="#FOREPAW_KEY_SHOP_ITEMS" class="la">FOREPAW_KEY_SHOP_ITEMS:</a><span class="ce">; [$a582]</span></span>
<span class="l"><a class="anc" name="a582" href="#a582">[a582]</a><span class="cd"><span class="i">db</span> <span class="o">KEY_J</span></span><span class="ce">; [$a582] InventoryItem</span></span>
<span class="l"><a class="anc" name="a583" href="#a583">[a583]</a><span class="cd"><span class="i">dw</span> <span class="o">$00c8</span></span><span class="ce">; [$a583] ushort</span></span>
<span class="l"></span>
<span class="l"><span class="cd"><span class="i">db</span> <span class="o">KEY_Q</span></span></span>
<span class="l"><a class="anc" name="a586" href="#a586">[a586]</a><span class="cd"><span class="i">dw</span> <span class="o">$01f4</span></span><span class="ce">; [$a586] ushort</span></span>
<span class="l"></span>
<span class="l"><span class="cd"><span class="i">db</span> <span class="o">$ff</span></span></span>
<span class="l"></span>
<span class="l"></span>
<a name="MACONE_KEY_SHOP_ITEMS"></a><div class="cp">;============================================================================
; Mascone Key Shop Items
;
; * "J" Key: 500G
; * "Q" Key: 600G
;============================================================================
</div><span class="l"><a class="anc" name="a589" href="#a589">[a589]</a><a href="#MACONE_KEY_SHOP_ITEMS" class="la">MACONE_KEY_SHOP_ITEMS:</a><span class="ce">; [$a589]</span></span>
<span class="l"><a class="anc" name="a589" href="#a589">[a589]</a><span class="cd"><span class="i">db</span> <span class="o">KEY_J</span></span><span class="ce">; [$a589] InventoryItem</span></span>
<span class="l"><a class="anc" name="a58a" href="#a58a">[a58a]</a><span class="cd"><span class="i">dw</span> <span class="o">$01f4</span></span><span class="ce">; [$a58a] ushort</span></span>
<span class="l"></span>
<span class="l"><span class="cd"><span class="i">db</span> <span class="o">KEY_Q</span></span></span>
<span class="l"><a class="anc" name="a58d" href="#a58d">[a58d]</a><span class="cd"><span class="i">dw</span> <span class="o">$0258</span></span><span class="ce">; [$a58d] ushort</span></span>
<span class="l"></span>
<span class="l"><span class="cd"><span class="i">db</span> <span class="o">$ff</span></span></span>
<span class="l"></span>
<span class="l"></span>
<a name="VICTIM_KEY_SHOP_ITEMS"></a><div class="cp">;============================================================================
; Victim Key Shop Items
;
; * "K" Key: 1500G
; * "Q" Key: 1200G
;============================================================================
</div><span class="l"><a class="anc" name="a590" href="#a590">[a590]</a><a href="#VICTIM_KEY_SHOP_ITEMS" class="la">VICTIM_KEY_SHOP_ITEMS:</a><span class="ce">; [$a590]</span></span>
<span class="l"><a class="anc" name="a590" href="#a590">[a590]</a><span class="cd"><span class="i">db</span> <span class="o">KEY_K</span></span><span class="ce">; [$a590] InventoryItem</span></span>
<span class="l"><a class="anc" name="a591" href="#a591">[a591]</a><span class="cd"><span class="i">dw</span> <span class="o">$05dc</span></span><span class="ce">; [$a591] ushort</span></span>
<span class="l"></span>
<span class="l"><span class="cd"><span class="i">db</span> <span class="o">KEY_Q</span></span></span>
<span class="l"><a class="anc" name="a594" href="#a594">[a594]</a><span class="cd"><span class="i">dw</span> <span class="o">$04b0</span></span><span class="ce">; [$a594] ushort</span></span>
<span class="l"></span>
<span class="l"><span class="cd"><span class="i">db</span> <span class="o">$ff</span></span></span>
<span class="l"></span>
<span class="l"></span>
<a name="DAYBREAK_KEY_SHOP_ITEMS"></a><div class="cp">;============================================================================
; Daybreak Key Shop Items
;
; * "K" Key: 1200G
; * "Q" Key: 1000G
;============================================================================
</div><span class="l"><a class="anc" name="a597" href="#a597">[a597]</a><a href="#DAYBREAK_KEY_SHOP_ITEMS" class="la">DAYBREAK_KEY_SHOP_ITEMS:</a><span class="ce">; [$a597]</span></span>
<span class="l"><a class="anc" name="a597" href="#a597">[a597]</a><span class="cd"><span class="i">db</span> <span class="o">KEY_K</span></span><span class="ce">; [$a597] InventoryItem</span></span>
<span class="l"><a class="anc" name="a598" href="#a598">[a598]</a><span class="cd"><span class="i">dw</span> <span class="o">$04b0</span></span><span class="ce">; [$a598] ushort</span></span>
<span class="l"></span>
<span class="l"><span class="cd"><span class="i">db</span> <span class="o">KEY_Q</span></span></span>
<span class="l"><a class="anc" name="a59b" href="#a59b">[a59b]</a><span class="cd"><span class="i">dw</span> <span class="o">$03e8</span></span><span class="ce">; [$a59b] ushort</span></span>
<span class="l"></span>
<span class="l"><span class="cd"><span class="i">db</span> <span class="o">$ff</span></span></span>
<span class="l"></span>
<span class="l"></span>
<a name="DARTMOOR_KEY_SHOP_ITEMS"></a><div class="cp">;============================================================================
; Dartmoor Key Shop Items
;
; * "K" Key - 1300G
;============================================================================
</div><span class="l"><a class="anc" name="a59e" href="#a59e">[a59e]</a><a href="#DARTMOOR_KEY_SHOP_ITEMS" class="la">DARTMOOR_KEY_SHOP_ITEMS:</a><span class="ce">; [$a59e]</span></span>
<span class="l"><a class="anc" name="a59e" href="#a59e">[a59e]</a><span class="cd"><span class="i">db</span> <span class="o">KEY_K</span></span><span class="ce">; [$a59e] InventoryItem</span></span>
<span class="l"><a class="anc" name="a59f" href="#a59f">[a59f]</a><span class="cd"><span class="i">dw</span> <span class="o">$0514</span></span><span class="ce">; [$a59f] ushort</span></span>
<span class="l"></span>
<span class="l"><span class="cd"><span class="i">db</span> <span class="o">$ff</span></span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_APOLUNE_DOCTOR"></a><div class="cp">;============================================================================
; Interaction with the doctor of Apolune.
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9f80]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9f80]
;
</div><span class="l"><a class="anc" name="a5a2" href="#a5a2">[a5a2]</a><a href="#ISCRIPT_APOLUNE_DOCTOR" class="la">ISCRIPT_APOLUNE_DOCTOR:</a><span class="ce">; [$a5a2]</span></span>
<span class="l"><a class="anc" name="a5a2" href="#a5a2">[a5a2]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_DOCTOR</span></span><span class="ce">; Show the Doctor portrait text box.</span></span>
<span class="l"><a class="anc" name="a5a3" href="#a5a3">[a5a3]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_DO_YOU_WANT_TREATMENT">MESSAGE_DO_YOU_WANT_TREATMENT</a>.</span></span>
<span class="l"><a class="anc" name="a5a4" href="#a5a4">[a5a4]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_DO_YOU_WANT_TREATMENT</span></span><span class="ce">; [$a5a4] Message</span></span>
<span class="l"><a class="anc" name="a5a5" href="#a5a5">[a5a5]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_QUESTION_MESSAGE</span></span><span class="ce">; Show a dismissible <a href="PRG13.html#MESSAGE_250G_PLEASE">MESSAGE_250G_PLEASE</a>.</span></span>
<span class="l"><a class="anc" name="a5a6" href="#a5a6">[a5a6]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_250G_PLEASE</span></span><span class="ce">; [$a5a6] Message</span></span>
<span class="l"><a class="anc" name="a5a7" href="#a5a7">[a5a7]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_PAY_GOLD</span></span><span class="ce">; If not dismissed, pay gold.</span></span>
<span class="l"><a class="anc" name="a5a8" href="#a5a8">[a5a8]</a><span class="cd"><span class="i">dw</span> <span class="o">$00fa</span></span><span class="ce">; [$a5a8] ushort</span></span>
<span class="l"></span>
<span class="l"><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_ADD_HP</span></span><span class="ce">; Add 80HP.</span></span>
<span class="l"><a class="anc" name="a5ab" href="#a5ab">[a5ab]</a><span class="cd"><span class="i">db</span> <span class="o">$50</span></span><span class="ce">; [$a5ab] byte</span></span>
<span class="l"></span>
<span class="l"><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_ADD_MP</span></span><span class="ce">; Add 80MP.</span></span>
<span class="l"><a class="anc" name="a5ad" href="#a5ad">[a5ad]</a><span class="cd"><span class="i">db</span> <span class="o">$50</span></span><span class="ce">; [$a5ad] byte</span></span>
<span class="l"></span>
<span class="l"><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_DONT_TRY_TOO_HARD">MESSAGE_DONT_TRY_TOO_HARD</a>.</span></span>
<span class="l"><a class="anc" name="a5af" href="#a5af">[a5af]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_DONT_TRY_TOO_HARD</span></span><span class="ce">; [$a5af] Message</span></span>
<span class="l"><a class="anc" name="a5b0" href="#a5b0">[a5b0]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_FOREPAW_DOCTOR"></a><div class="cp">;============================================================================
; Interaction with the doctor of Forepaw.
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9f95]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9f95]
;
</div><span class="l"><a class="anc" name="a5b1" href="#a5b1">[a5b1]</a><a href="#ISCRIPT_FOREPAW_DOCTOR" class="la">ISCRIPT_FOREPAW_DOCTOR:</a><span class="ce">; [$a5b1]</span></span>
<span class="l"><a class="anc" name="a5b1" href="#a5b1">[a5b1]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_DOCTOR</span></span><span class="ce">; Show the Doctor portrait text box.</span></span>
<span class="l"><a class="anc" name="a5b2" href="#a5b2">[a5b2]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_DO_YOU_WANT_TREATMENT">MESSAGE_DO_YOU_WANT_TREATMENT</a>.</span></span>
<span class="l"><a class="anc" name="a5b3" href="#a5b3">[a5b3]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_DO_YOU_WANT_TREATMENT</span></span><span class="ce">; [$a5b3] Message</span></span>
<span class="l"><a class="anc" name="a5b4" href="#a5b4">[a5b4]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_QUESTION_MESSAGE</span></span><span class="ce">; Show a dismissible <a href="PRG13.html#MESSAGE_500G_PLEASE">MESSAGE_500G_PLEASE</a>.</span></span>
<span class="l"><a class="anc" name="a5b5" href="#a5b5">[a5b5]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_500G_PLEASE</span></span><span class="ce">; [$a5b5] Message</span></span>
<span class="l"><a class="anc" name="a5b6" href="#a5b6">[a5b6]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_PAY_GOLD</span></span><span class="ce">; If not dismissed, pay gold.</span></span>
<span class="l"><a class="anc" name="a5b7" href="#a5b7">[a5b7]</a><span class="cd"><span class="i">dw</span> <span class="o">$01f4</span></span><span class="ce">; [$a5b7] ushort</span></span>
<span class="l"></span>
<span class="l"><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_ADD_HP</span></span><span class="ce">; Add 80HP.</span></span>
<span class="l"><a class="anc" name="a5ba" href="#a5ba">[a5ba]</a><span class="cd"><span class="i">db</span> <span class="o">$50</span></span><span class="ce">; [$a5ba] byte</span></span>
<span class="l"></span>
<span class="l"><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_ADD_MP</span></span><span class="ce">; Add 80MP.</span></span>
<span class="l"><a class="anc" name="a5bc" href="#a5bc">[a5bc]</a><span class="cd"><span class="i">db</span> <span class="o">$50</span></span><span class="ce">; [$a5bc] byte</span></span>
<span class="l"></span>
<span class="l"><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_DONT_TRY_TOO_HARD">MESSAGE_DONT_TRY_TOO_HARD</a>.</span></span>
<span class="l"><a class="anc" name="a5be" href="#a5be">[a5be]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_DONT_TRY_TOO_HARD</span></span><span class="ce">; [$a5be] Message</span></span>
<span class="l"><a class="anc" name="a5bf" href="#a5bf">[a5bf]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_MASCON_DOCTOR"></a><div class="cp">;============================================================================
; Interaction with the doctor of Mascon.
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fa3]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fa3]
;
</div><span class="l"><a class="anc" name="a5c0" href="#a5c0">[a5c0]</a><a href="#ISCRIPT_MASCON_DOCTOR" class="la">ISCRIPT_MASCON_DOCTOR:</a><span class="ce">; [$a5c0]</span></span>
<span class="l"><a class="anc" name="a5c0" href="#a5c0">[a5c0]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_DOCTOR</span></span><span class="ce">; Show the Doctor portrait text box.</span></span>
<span class="l"><a class="anc" name="a5c1" href="#a5c1">[a5c1]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_DO_YOU_WANT_TREATMENT">MESSAGE_DO_YOU_WANT_TREATMENT</a>.</span></span>
<span class="l"><a class="anc" name="a5c2" href="#a5c2">[a5c2]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_DO_YOU_WANT_TREATMENT</span></span><span class="ce">; [$a5c2] Message</span></span>
<span class="l"><a class="anc" name="a5c3" href="#a5c3">[a5c3]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_QUESTION_MESSAGE</span></span><span class="ce">; Show a dismissible <a href="PRG13.html#MESSAGE_1000G_PLEASE">MESSAGE_1000G_PLEASE</a>.</span></span>
<span class="l"><a class="anc" name="a5c4" href="#a5c4">[a5c4]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_1000G_PLEASE</span></span><span class="ce">; [$a5c4] Message</span></span>
<span class="l"><a class="anc" name="a5c5" href="#a5c5">[a5c5]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_PAY_GOLD</span></span><span class="ce">; If not dismissed, pay gold.</span></span>
<span class="l"><a class="anc" name="a5c6" href="#a5c6">[a5c6]</a><span class="cd"><span class="i">dw</span> <span class="o">$03e8</span></span><span class="ce">; [$a5c6] ushort</span></span>
<span class="l"></span>
<span class="l"><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_ADD_HP</span></span><span class="ce">; Add 80HP.</span></span>
<span class="l"><a class="anc" name="a5c9" href="#a5c9">[a5c9]</a><span class="cd"><span class="i">db</span> <span class="o">$50</span></span><span class="ce">; [$a5c9] byte</span></span>
<span class="l"></span>
<span class="l"><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_ADD_MP</span></span><span class="ce">; Add 80MP.</span></span>
<span class="l"><a class="anc" name="a5cb" href="#a5cb">[a5cb]</a><span class="cd"><span class="i">db</span> <span class="o">$50</span></span><span class="ce">; [$a5cb] byte</span></span>
<span class="l"></span>
<span class="l"><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_DONT_TRY_TOO_HARD">MESSAGE_DONT_TRY_TOO_HARD</a>.</span></span>
<span class="l"><a class="anc" name="a5cd" href="#a5cd">[a5cd]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_DONT_TRY_TOO_HARD</span></span><span class="ce">; [$a5cd] Message</span></span>
<span class="l"><a class="anc" name="a5ce" href="#a5ce">[a5ce]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_VICTIM_DOCTOR"></a><div class="cp">;============================================================================
; Interaction with the doctor of Victim.
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fb2]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fb2]
;
</div><span class="l"><a class="anc" name="a5cf" href="#a5cf">[a5cf]</a><a href="#ISCRIPT_VICTIM_DOCTOR" class="la">ISCRIPT_VICTIM_DOCTOR:</a><span class="ce">; [$a5cf]</span></span>
<span class="l"><a class="anc" name="a5cf" href="#a5cf">[a5cf]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_DOCTOR</span></span><span class="ce">; Show the Doctor portrait text box.</span></span>
<span class="l"><a class="anc" name="a5d0" href="#a5d0">[a5d0]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_DO_YOU_WANT_TREATMENT">MESSAGE_DO_YOU_WANT_TREATMENT</a>.</span></span>
<span class="l"><a class="anc" name="a5d1" href="#a5d1">[a5d1]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_DO_YOU_WANT_TREATMENT</span></span><span class="ce">; [$a5d1] Message</span></span>
<span class="l"><a class="anc" name="a5d2" href="#a5d2">[a5d2]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_QUESTION_MESSAGE</span></span><span class="ce">; Show a dismissible <a href="PRG13.html#MESSAGE_2500G_PLEASE">MESSAGE_2500G_PLEASE</a>.</span></span>
<span class="l"><a class="anc" name="a5d3" href="#a5d3">[a5d3]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_2500G_PLEASE</span></span><span class="ce">; [$a5d3] Message</span></span>
<span class="l"><a class="anc" name="a5d4" href="#a5d4">[a5d4]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_PAY_GOLD</span></span><span class="ce">; If not dismissed, pay gold.</span></span>
<span class="l"><a class="anc" name="a5d5" href="#a5d5">[a5d5]</a><span class="cd"><span class="i">dw</span> <span class="o">$09c4</span></span><span class="ce">; [$a5d5] ushort</span></span>
<span class="l"></span>
<span class="l"><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_ADD_HP</span></span><span class="ce">; Add 80HP.</span></span>
<span class="l"><a class="anc" name="a5d8" href="#a5d8">[a5d8]</a><span class="cd"><span class="i">db</span> <span class="o">$50</span></span><span class="ce">; [$a5d8] byte</span></span>
<span class="l"></span>
<span class="l"><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_ADD_MP</span></span><span class="ce">; Add 80MP.</span></span>
<span class="l"><a class="anc" name="a5da" href="#a5da">[a5da]</a><span class="cd"><span class="i">db</span> <span class="o">$50</span></span><span class="ce">; [$a5da] byte</span></span>
<span class="l"></span>
<span class="l"><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_DONT_TRY_TOO_HARD">MESSAGE_DONT_TRY_TOO_HARD</a>.</span></span>
<span class="l"><a class="anc" name="a5dc" href="#a5dc">[a5dc]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_DONT_TRY_TOO_HARD</span></span><span class="ce">; [$a5dc] Message</span></span>
<span class="l"><a class="anc" name="a5dd" href="#a5dd">[a5dd]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_CONFLATE_DOCTOR"></a><div class="cp">;============================================================================
; Interaction with the doctor of Conflate.
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fc1]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fc1]
;
</div><span class="l"><a class="anc" name="a5de" href="#a5de">[a5de]</a><a href="#ISCRIPT_CONFLATE_DOCTOR" class="la">ISCRIPT_CONFLATE_DOCTOR:</a><span class="ce">; [$a5de]</span></span>
<span class="l"><a class="anc" name="a5de" href="#a5de">[a5de]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_DOCTOR</span></span><span class="ce">; Show the Doctor portrait text box.</span></span>
<span class="l"><a class="anc" name="a5df" href="#a5df">[a5df]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_DO_YOU_WANT_TREATMENT">MESSAGE_DO_YOU_WANT_TREATMENT</a>.</span></span>
<span class="l"><a class="anc" name="a5e0" href="#a5e0">[a5e0]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_DO_YOU_WANT_TREATMENT</span></span><span class="ce">; [$a5e0] Message</span></span>
<span class="l"><a class="anc" name="a5e1" href="#a5e1">[a5e1]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_QUESTION_MESSAGE</span></span><span class="ce">; Show a dismissible <a href="PRG13.html#MESSAGE_1800G_PLEASE">MESSAGE_1800G_PLEASE</a>.</span></span>
<span class="l"><a class="anc" name="a5e2" href="#a5e2">[a5e2]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_1800G_PLEASE</span></span><span class="ce">; [$a5e2] Message</span></span>
<span class="l"><a class="anc" name="a5e3" href="#a5e3">[a5e3]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_PAY_GOLD</span></span><span class="ce">; If not dismissed, pay gold.</span></span>
<span class="l"><a class="anc" name="a5e4" href="#a5e4">[a5e4]</a><span class="cd"><span class="i">dw</span> <span class="o">$0708</span></span><span class="ce">; [$a5e4] ushort</span></span>
<span class="l"></span>
<span class="l"><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_ADD_HP</span></span><span class="ce">; Add 80HP.</span></span>
<span class="l"><a class="anc" name="a5e7" href="#a5e7">[a5e7]</a><span class="cd"><span class="i">db</span> <span class="o">$50</span></span><span class="ce">; [$a5e7] byte</span></span>
<span class="l"></span>
<span class="l"><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_ADD_MP</span></span><span class="ce">; Add 80MP.</span></span>
<span class="l"><a class="anc" name="a5e9" href="#a5e9">[a5e9]</a><span class="cd"><span class="i">db</span> <span class="o">$50</span></span><span class="ce">; [$a5e9] byte</span></span>
<span class="l"></span>
<span class="l"><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_DONT_TRY_TOO_HARD">MESSAGE_DONT_TRY_TOO_HARD</a>.</span></span>
<span class="l"><a class="anc" name="a5eb" href="#a5eb">[a5eb]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_DONT_TRY_TOO_HARD</span></span><span class="ce">; [$a5eb] Message</span></span>
<span class="l"><a class="anc" name="a5ec" href="#a5ec">[a5ec]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_DARTMOOR_DOCTOR"></a><div class="cp">;============================================================================
; Interaction with the doctor of Dartmoor.
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fe5]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fe5]
;
</div><span class="l"><a class="anc" name="a5ed" href="#a5ed">[a5ed]</a><a href="#ISCRIPT_DARTMOOR_DOCTOR" class="la">ISCRIPT_DARTMOOR_DOCTOR:</a><span class="ce">; [$a5ed]</span></span>
<span class="l"><a class="anc" name="a5ed" href="#a5ed">[a5ed]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_DOCTOR</span></span><span class="ce">; Show the Doctor portrait text box.</span></span>
<span class="l"><a class="anc" name="a5ee" href="#a5ee">[a5ee]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_DO_YOU_WANT_TREATMENT">MESSAGE_DO_YOU_WANT_TREATMENT</a>.</span></span>
<span class="l"><a class="anc" name="a5ef" href="#a5ef">[a5ef]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_DO_YOU_WANT_TREATMENT</span></span><span class="ce">; [$a5ef] Message</span></span>
<span class="l"><a class="anc" name="a5f0" href="#a5f0">[a5f0]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_QUESTION_MESSAGE</span></span><span class="ce">; Show a dismissible <a href="PRG13.html#MESSAGE_3000G_PLEASE">MESSAGE_3000G_PLEASE</a>.</span></span>
<span class="l"><a class="anc" name="a5f1" href="#a5f1">[a5f1]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_3000G_PLEASE</span></span><span class="ce">; [$a5f1] Message</span></span>
<span class="l"><a class="anc" name="a5f2" href="#a5f2">[a5f2]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_PAY_GOLD</span></span><span class="ce">; If not dismissed, pay gold.</span></span>
<span class="l"><a class="anc" name="a5f3" href="#a5f3">[a5f3]</a><span class="cd"><span class="i">dw</span> <span class="o">$0bb8</span></span><span class="ce">; [$a5f3] ushort</span></span>
<span class="l"></span>
<span class="l"><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_ADD_HP</span></span><span class="ce">; Add 80HP.</span></span>
<span class="l"><a class="anc" name="a5f6" href="#a5f6">[a5f6]</a><span class="cd"><span class="i">db</span> <span class="o">$50</span></span><span class="ce">; [$a5f6] byte</span></span>
<span class="l"></span>
<span class="l"><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_ADD_MP</span></span><span class="ce">; Add 80MP.</span></span>
<span class="l"><a class="anc" name="a5f8" href="#a5f8">[a5f8]</a><span class="cd"><span class="i">db</span> <span class="o">$50</span></span><span class="ce">; [$a5f8] byte</span></span>
<span class="l"></span>
<span class="l"><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_DONT_TRY_TOO_HARD">MESSAGE_DONT_TRY_TOO_HARD</a>.</span></span>
<span class="l"><a class="anc" name="a5fa" href="#a5fa">[a5fa]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_DONT_TRY_TOO_HARD</span></span><span class="ce">; [$a5fa] Message</span></span>
<span class="l"><a class="anc" name="a5fb" href="#a5fb">[a5fb]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_COMMON_GURU_PASSWORD"></a><div class="cp">;============================================================================
; Common script for a player's new password at a temple.
;============================================================================
</div><span class="l"><a class="anc" name="a5fc" href="#a5fc">[a5fc]</a><a href="#ISCRIPT_COMMON_GURU_PASSWORD" class="la">ISCRIPT_COMMON_GURU_PASSWORD:</a><span class="ce">; [$a5fc]</span></span>
<span class="l"><a class="anc" name="a5fc" href="#a5fc">[a5fc]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_MEDITATE_WITH_YOU">MESSAGE_MEDITATE_WITH_YOU</a>.</span></span>
<span class="l"><a class="anc" name="a5fd" href="#a5fd">[a5fd]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_MEDITATE_WITH_YOU</span></span><span class="ce">; [$a5fd] Message</span></span>
<span class="l"><a class="anc" name="a5fe" href="#a5fe">[a5fe]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_PASSWORD</span></span><span class="ce">; Generate and show a new password.</span></span>
<span class="l"><a class="anc" name="a5ff" href="#a5ff">[a5ff]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_COMMON_GURU_NEW_RANK"></a><div class="cp">;============================================================================
; Common script for a player's new rank at a temple.
;============================================================================
</div><span class="l"><a class="anc" name="a600" href="#a600">[a600]</a><a href="#ISCRIPT_COMMON_GURU_NEW_RANK" class="la">ISCRIPT_COMMON_GURU_NEW_RANK:</a><span class="ce">; [$a600]</span></span>
<span class="l"><a class="anc" name="a600" href="#a600">[a600]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_UNSKIPPABLE_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_NEW_TITLE">MESSAGE_NEW_TITLE</a>.</span></span>
<span class="l"><a class="anc" name="a601" href="#a601">[a601]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_NEW_TITLE</span></span><span class="ce">; [$a601] Message</span></span>
<span class="l"><a class="anc" name="a602" href="#a602">[a602]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_APOLUNE_GURU"></a><div class="cp">;============================================================================
; Interaction with the guru of Apolune.
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9f87]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9f87]
;
</div><span class="l"><a class="anc" name="a603" href="#a603">[a603]</a><a href="#ISCRIPT_APOLUNE_GURU" class="la">ISCRIPT_APOLUNE_GURU:</a><span class="ce">; [$a603]</span></span>
<span class="l"><a class="anc" name="a603" href="#a603">[a603]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_GURU</span></span><span class="ce">; Display a Guru portrait text box.</span></span>
<span class="l"><a class="anc" name="a604" href="#a604">[a604]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SET_SPAWN_POINT</span></span><span class="ce">; Set the spawn point to the temple of Apolune.</span></span>
<span class="l"><a class="anc" name="a605" href="#a605">[a605]</a><span class="cd"><span class="i">db</span> <span class="o">TEMPLE_APOLUNE</span></span><span class="ce">; [$a605] Temple</span></span>
<span class="l"><a class="anc" name="a606" href="#a606">[a606]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_CHECK_UPDATE_PLAYER_TITLE</span></span><span class="ce">; Check the player rank and update if needed.</span></span>
<span class="l"><a class="anc" name="a607" href="#a607">[a607]</a><span class="cd"><span class="i">dw</span> <span class="o">$a600</span></span><span class="ce">; If set, jump to show the new rank.</span></span>
<span class="l"><a class="anc" name="a609" href="#a609">[a609]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_JUMP</span></span><span class="ce">; Else, jump to show the new password.</span></span>
<span class="l"><a class="anc" name="a60a" href="#a60a">[a60a]</a><span class="cd"><span class="i">dw</span> <span class="o">$a5fc</span></span><span class="ce">; <a href="#ISCRIPT_COMMON_GURU_PASSWORD">ISCRIPT_COMMON_GURU_PASSWORD</a> [$PRG12::a60a]</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_FOREPAW_GURU"></a><div class="cp">;============================================================================
; Interaction with the guru of Forepaw.
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9f94]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9f94]
;
</div><span class="l"><a class="anc" name="a60c" href="#a60c">[a60c]</a><a href="#ISCRIPT_FOREPAW_GURU" class="la">ISCRIPT_FOREPAW_GURU:</a><span class="ce">; [$a60c]</span></span>
<span class="l"><a class="anc" name="a60c" href="#a60c">[a60c]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_GURU</span></span><span class="ce">; Display a Guru portrait text box.</span></span>
<span class="l"><a class="anc" name="a60d" href="#a60d">[a60d]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SET_SPAWN_POINT</span></span><span class="ce">; Set the spawn point to the temple of Forepaw.</span></span>
<span class="l"><a class="anc" name="a60e" href="#a60e">[a60e]</a><span class="cd"><span class="i">db</span> <span class="o">TEMPLE_FOREPAW</span></span><span class="ce">; [$a60e] Temple</span></span>
<span class="l"><a class="anc" name="a60f" href="#a60f">[a60f]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_CHECK_UPDATE_PLAYER_TITLE</span></span><span class="ce">; Check the player rank and update if needed.</span></span>
<span class="l"><a class="anc" name="a610" href="#a610">[a610]</a><span class="cd"><span class="i">dw</span> <span class="o">$a600</span></span><span class="ce">; If set, jump to show the new rank.</span></span>
<span class="l"><a class="anc" name="a612" href="#a612">[a612]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_JUMP</span></span><span class="ce">; Else, jump to show the new password.</span></span>
<span class="l"><a class="anc" name="a613" href="#a613">[a613]</a><span class="cd"><span class="i">dw</span> <span class="o">$a5fc</span></span><span class="ce">; <a href="#ISCRIPT_COMMON_GURU_PASSWORD">ISCRIPT_COMMON_GURU_PASSWORD</a> [$PRG12::a613]</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_MASCON_GURU"></a><div class="cp">;============================================================================
; Interaction with the guru of Mascon.
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fa8]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fa8]
;
</div><span class="l"><a class="anc" name="a615" href="#a615">[a615]</a><a href="#ISCRIPT_MASCON_GURU" class="la">ISCRIPT_MASCON_GURU:</a><span class="ce">; [$a615]</span></span>
<span class="l"><a class="anc" name="a615" href="#a615">[a615]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_GURU</span></span><span class="ce">; Display a Guru portrait text box.</span></span>
<span class="l"><a class="anc" name="a616" href="#a616">[a616]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SET_SPAWN_POINT</span></span><span class="ce">; Set the spawn point to the temple of Mascon.</span></span>
<span class="l"><a class="anc" name="a617" href="#a617">[a617]</a><span class="cd"><span class="i">db</span> <span class="o">TEMPLE_MASCON</span></span><span class="ce">; [$a617] Temple</span></span>
<span class="l"><a class="anc" name="a618" href="#a618">[a618]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_CHECK_UPDATE_PLAYER_TITLE</span></span><span class="ce">; Check the player rank and update if needed.</span></span>
<span class="l"><a class="anc" name="a619" href="#a619">[a619]</a><span class="cd"><span class="i">dw</span> <span class="o">$a600</span></span><span class="ce">; If set, jump to show the new rank.</span></span>
<span class="l"><a class="anc" name="a61b" href="#a61b">[a61b]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_JUMP</span></span><span class="ce">; Else, jump to show the new password.</span></span>
<span class="l"><a class="anc" name="a61c" href="#a61c">[a61c]</a><span class="cd"><span class="i">dw</span> <span class="o">$a5fc</span></span><span class="ce">; <a href="#ISCRIPT_COMMON_GURU_PASSWORD">ISCRIPT_COMMON_GURU_PASSWORD</a> [$PRG12::a61c]</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_VICTIM_GURU"></a><div class="cp">;============================================================================
; Interaction with the guru of Victim.
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fb7]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fb7]
;
</div><span class="l"><a class="anc" name="a61e" href="#a61e">[a61e]</a><a href="#ISCRIPT_VICTIM_GURU" class="la">ISCRIPT_VICTIM_GURU:</a><span class="ce">; [$a61e]</span></span>
<span class="l"><a class="anc" name="a61e" href="#a61e">[a61e]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_GURU</span></span><span class="ce">; Display a Guru portrait text box.</span></span>
<span class="l"><a class="anc" name="a61f" href="#a61f">[a61f]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SET_SPAWN_POINT</span></span><span class="ce">; Set the spawn point to the temple of Victim.</span></span>
<span class="l"><a class="anc" name="a620" href="#a620">[a620]</a><span class="cd"><span class="i">db</span> <span class="o">TEMPLE_VICTIM</span></span><span class="ce">; [$a620] Temple</span></span>
<span class="l"><a class="anc" name="a621" href="#a621">[a621]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_CHECK_UPDATE_PLAYER_TITLE</span></span><span class="ce">; Check the player rank and update if needed.</span></span>
<span class="l"><a class="anc" name="a622" href="#a622">[a622]</a><span class="cd"><span class="i">dw</span> <span class="o">$a600</span></span><span class="ce">; If set, jump to show the new rank.</span></span>
<span class="l"><a class="anc" name="a624" href="#a624">[a624]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_JUMP</span></span><span class="ce">; Else, jump to show the new password.</span></span>
<span class="l"><a class="anc" name="a625" href="#a625">[a625]</a><span class="cd"><span class="i">dw</span> <span class="o">$a5fc</span></span><span class="ce">; <a href="#ISCRIPT_COMMON_GURU_PASSWORD">ISCRIPT_COMMON_GURU_PASSWORD</a> [$PRG12::a625]</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_CONFLATE_GURU"></a><div class="cp">;============================================================================
; Interaction with the guru of Conflate.
;
; This guru will check if the player has the Battle Suit
; and Ring of Dworf.
;
; If they have the Battle Suit but not Ring of Dworf,
; the player will receive the ring and be given directions
; to Dartmore.
;
; Otherwise, they'll get the normal Guru behavior.
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fc0]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fc0]
;
</div><span class="l"><a class="anc" name="a627" href="#a627">[a627]</a><a href="#ISCRIPT_CONFLATE_GURU" class="la">ISCRIPT_CONFLATE_GURU:</a><span class="ce">; [$a627]</span></span>
<span class="l"><a class="anc" name="a627" href="#a627">[a627]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_GURU</span></span><span class="ce">; Display a Guru portrait text box.</span></span>
<span class="l"><a class="anc" name="a628" href="#a628">[a628]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_CHECK_FOR_ITEM</span></span><span class="ce">; Check if the player has the Battle Suit.</span></span>
<span class="l"><a class="anc" name="a629" href="#a629">[a629]</a><span class="cd"><span class="i">db</span> <span class="o">ARMOR_BATTLE_SUIT</span></span><span class="ce">; [$a629] InventoryItem</span></span>
<span class="l"><a class="anc" name="a62a" href="#a62a">[a62a]</a><span class="cd"><span class="i">dw</span> <span class="o">$a634</span></span><span class="ce">; If so, jump.</span></span>
<span class="l"></span>
<a name=":a62c:@_ISCRIPT_GURU_CONFLATE_DEFAULT"></a><span class="l"><a class="anc" name="a62c" href="#a62c">[a62c]</a><a href="#:a62c:@_ISCRIPT_GURU_CONFLATE_DEFAULT" class="lla">@_ISCRIPT_GURU_CONFLATE_DEFAULT:</a><span class="ce">; [$a62c]</span></span>
<span class="l"><a class="anc" name="a62c" href="#a62c">[a62c]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SET_SPAWN_POINT</span></span><span class="ce">; Set the spawn point to the temple of Conflate.</span></span>
<span class="l"><a class="anc" name="a62d" href="#a62d">[a62d]</a><span class="cd"><span class="i">db</span> <span class="o">TEMPLE_CONFLATE</span></span><span class="ce">; [$a62d] Temple</span></span>
<span class="l"><a class="anc" name="a62e" href="#a62e">[a62e]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_CHECK_UPDATE_PLAYER_TITLE</span></span><span class="ce">; Check the player rank and update if needed.</span></span>
<span class="l"><a class="anc" name="a62f" href="#a62f">[a62f]</a><span class="cd"><span class="i">dw</span> <span class="o">$a600</span></span><span class="ce">; If set, jump to show the new rank.</span></span>
<span class="l"><a class="anc" name="a631" href="#a631">[a631]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_JUMP</span></span><span class="ce">; Else, jump to show the new password.</span></span>
<span class="l"><a class="anc" name="a632" href="#a632">[a632]</a><span class="cd"><span class="i">dw</span> <span class="o">$a5fc</span></span><span class="ce">; <a href="#ISCRIPT_COMMON_GURU_PASSWORD">ISCRIPT_COMMON_GURU_PASSWORD</a> [$PRG12::a632]</span></span>
<span class="l"></span>
<a name=":a634:@_ISCRIPT_GURU_CONFLATE_HAS_BATTLE_SUIT"></a><span class="l"><a class="anc" name="a634" href="#a634">[a634]</a><a href="#:a634:@_ISCRIPT_GURU_CONFLATE_HAS_BATTLE_SUIT" class="lla">@_ISCRIPT_GURU_CONFLATE_HAS_BATTLE_SUIT:</a><span class="ce">; [$a634]</span></span>
<span class="l"><a class="anc" name="a634" href="#a634">[a634]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_CHECK_FOR_ITEM</span></span><span class="ce">; Check if the player has the Ring of Dworf.</span></span>
<span class="l"><a class="anc" name="a635" href="#a635">[a635]</a><span class="cd"><span class="i">db</span> <span class="o">SPECIAL_RING_OF_DWORF</span></span><span class="ce">; [$a635] InventoryItem</span></span>
<span class="l"><a class="anc" name="a636" href="#a636">[a636]</a><span class="cd"><span class="i">dw</span> <span class="o">$a62c</span></span><span class="ce">; If so, jump to normal guru behavior.</span></span>
<span class="l"><a class="anc" name="a638" href="#a638">[a638]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_UNSKIPPABLE_MESSAGE</span></span><span class="ce">; Show <a href="PRG13.html#MESSAGE_DIRECTIONS_DARTMORE">MESSAGE_DIRECTIONS_DARTMORE</a>.</span></span>
<span class="l"><a class="anc" name="a639" href="#a639">[a639]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_DIRECTIONS_DARTMORE</span></span><span class="ce">; [$a639] Message</span></span>
<span class="l"><a class="anc" name="a63a" href="#a63a">[a63a]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_ADD_ITEM</span></span><span class="ce">; Add the Ring of Dworf to the inventory.</span></span>
<span class="l"><a class="anc" name="a63b" href="#a63b">[a63b]</a><span class="cd"><span class="i">db</span> <span class="o">SPECIAL_RING_OF_DWORF</span></span><span class="ce">; [$a63b] InventoryItem</span></span>
<span class="l"><a class="anc" name="a63c" href="#a63c">[a63c]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; End.</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_DAYBREAK_GURU"></a><div class="cp">;============================================================================
; Interaction with the guru of Daybreak.
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fd4]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fd4]
;
</div><span class="l"><a class="anc" name="a63d" href="#a63d">[a63d]</a><a href="#ISCRIPT_DAYBREAK_GURU" class="la">ISCRIPT_DAYBREAK_GURU:</a><span class="ce">; [$a63d]</span></span>
<span class="l"><a class="anc" name="a63d" href="#a63d">[a63d]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_GURU</span></span><span class="ce">; Display a Guru portrait text box.</span></span>
<span class="l"><a class="anc" name="a63e" href="#a63e">[a63e]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SET_SPAWN_POINT</span></span><span class="ce">; Set the spawn point to the Daybreak temple.</span></span>
<span class="l"><a class="anc" name="a63f" href="#a63f">[a63f]</a><span class="cd"><span class="i">db</span> <span class="o">TEMPLE_DAYBREAK</span></span><span class="ce">; [$a63f] Temple</span></span>
<span class="l"><a class="anc" name="a640" href="#a640">[a640]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_CHECK_UPDATE_PLAYER_TITLE</span></span><span class="ce">; Check the player rank and update if needed.</span></span>
<span class="l"><a class="anc" name="a641" href="#a641">[a641]</a><span class="cd"><span class="i">dw</span> <span class="o">$a600</span></span><span class="ce">; If set, jump to show the new rank.</span></span>
<span class="l"><a class="anc" name="a643" href="#a643">[a643]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_JUMP</span></span><span class="ce">; Else, jump to show the new password.</span></span>
<span class="l"><a class="anc" name="a644" href="#a644">[a644]</a><span class="cd"><span class="i">dw</span> <span class="o">$a5fc</span></span><span class="ce">; <a href="#ISCRIPT_COMMON_GURU_PASSWORD">ISCRIPT_COMMON_GURU_PASSWORD</a> [$PRG12::a644]</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_GURU_FINAL"></a><div class="cp">;============================================================================
; Interaction with the guru of the final temple.
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fe3]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fe3]
;
</div><span class="l"><a class="anc" name="a646" href="#a646">[a646]</a><a href="#ISCRIPT_GURU_FINAL" class="la">ISCRIPT_GURU_FINAL:</a><span class="ce">; [$a646]</span></span>
<span class="l"><a class="anc" name="a646" href="#a646">[a646]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_GURU</span></span><span class="ce">; Display a Guru portrait text box.</span></span>
<span class="l"><a class="anc" name="a647" href="#a647">[a647]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SET_SPAWN_POINT</span></span><span class="ce">; Set the spawn point to the final temple.</span></span>
<span class="l"><a class="anc" name="a648" href="#a648">[a648]</a><span class="cd"><span class="i">db</span> <span class="o">TEMPLE_FINAL</span></span><span class="ce">; [$a648] Temple</span></span>
<span class="l"><a class="anc" name="a649" href="#a649">[a649]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_CHECK_UPDATE_PLAYER_TITLE</span></span><span class="ce">; Check the player rank and update if needed.</span></span>
<span class="l"><a class="anc" name="a64a" href="#a64a">[a64a]</a><span class="cd"><span class="i">dw</span> <span class="o">$a600</span></span><span class="ce">; If set, jump to show the new rank.</span></span>
<span class="l"><a class="anc" name="a64c" href="#a64c">[a64c]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_JUMP</span></span><span class="ce">; Else, jump to show the new password.</span></span>
<span class="l"><a class="anc" name="a64d" href="#a64d">[a64d]</a><span class="cd"><span class="i">dw</span> <span class="o">$a5fc</span></span><span class="ce">; <a href="#ISCRIPT_COMMON_GURU_PASSWORD">ISCRIPT_COMMON_GURU_PASSWORD</a> [$PRG12::a64d]</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_KING_END_GAME"></a><div class="cp">;============================================================================
; "Glad you're back."
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fe4]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fe4]
;
</div><span class="l"><a class="anc" name="a64f" href="#a64f">[a64f]</a><a href="#ISCRIPT_KING_END_GAME" class="la">ISCRIPT_KING_END_GAME:</a><span class="ce">; [$a64f]</span></span>
<span class="l"><a class="anc" name="a64f" href="#a64f">[a64f]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_GENERIC</span></span><span class="ce">; [$a64f] IScriptEntity</span></span>
<span class="l"><a class="anc" name="a650" href="#a650">[a650]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_UNSKIPPABLE_MESSAGE</span></span><span class="ce">; [$a650] IScriptAction</span></span>
<span class="l"><a class="anc" name="a651" href="#a651">[a651]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_GLAD_YOURE_BACK</span></span><span class="ce">; [$a651] Message</span></span>
<span class="l"><a class="anc" name="a652" href="#a652">[a652]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END_GAME</span></span><span class="ce">; [$a652] IScriptAction</span></span>
<span class="l"><a class="anc" name="a653" href="#a653">[a653]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; [$a653] IScriptAction</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_MARK_OF_QUEEN"></a><div class="cp">;============================================================================
; "There is the mark of Queen by the key hole."
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fe6]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fe6]
;
</div><span class="l"><a class="anc" name="a654" href="#a654">[a654]</a><a href="#ISCRIPT_MARK_OF_QUEEN" class="la">ISCRIPT_MARK_OF_QUEEN:</a><span class="ce">; [$a654]</span></span>
<span class="l"><a class="anc" name="a654" href="#a654">[a654]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_GENERIC</span></span><span class="ce">; [$a654] IScriptEntity</span></span>
<span class="l"><a class="anc" name="a655" href="#a655">[a655]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_UNSKIPPABLE_MESSAGE</span></span><span class="ce">; [$a655] IScriptAction</span></span>
<span class="l"><a class="anc" name="a656" href="#a656">[a656]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_MARK_OF_QUEEN</span></span><span class="ce">; [$a656] Message</span></span>
<span class="l"><a class="anc" name="a657" href="#a657">[a657]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; [$a657] IScriptAction</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_MARK_OF_KING"></a><div class="cp">;============================================================================
; "There is the mark of King by the key hole."
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fe7]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fe7]
;
</div><span class="l"><a class="anc" name="a658" href="#a658">[a658]</a><a href="#ISCRIPT_MARK_OF_KING" class="la">ISCRIPT_MARK_OF_KING:</a><span class="ce">; [$a658]</span></span>
<span class="l"><a class="anc" name="a658" href="#a658">[a658]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_GENERIC</span></span><span class="ce">; [$a658] IScriptEntity</span></span>
<span class="l"><a class="anc" name="a659" href="#a659">[a659]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_UNSKIPPABLE_MESSAGE</span></span><span class="ce">; [$a659] IScriptAction</span></span>
<span class="l"><a class="anc" name="a65a" href="#a65a">[a65a]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_MARK_OF_KING</span></span><span class="ce">; [$a65a] Message</span></span>
<span class="l"><a class="anc" name="a65b" href="#a65b">[a65b]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; [$a65b] IScriptAction</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_MARK_OF_ACE"></a><div class="cp">;============================================================================
; "There is the mark of Ace by the key hole."
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fe8]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fe8]
;
</div><span class="l"><a class="anc" name="a65c" href="#a65c">[a65c]</a><a href="#ISCRIPT_MARK_OF_ACE" class="la">ISCRIPT_MARK_OF_ACE:</a><span class="ce">; [$a65c]</span></span>
<span class="l"><a class="anc" name="a65c" href="#a65c">[a65c]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_GENERIC</span></span><span class="ce">; [$a65c] IScriptEntity</span></span>
<span class="l"><a class="anc" name="a65d" href="#a65d">[a65d]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_UNSKIPPABLE_MESSAGE</span></span><span class="ce">; [$a65d] IScriptAction</span></span>
<span class="l"><a class="anc" name="a65e" href="#a65e">[a65e]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_MARK_OF_ACE</span></span><span class="ce">; [$a65e] Message</span></span>
<span class="l"><a class="anc" name="a65f" href="#a65f">[a65f]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; [$a65f] IScriptAction</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_MARK_OF_JOKER"></a><div class="cp">;============================================================================
; "There is the mark of Joker by the key hole."
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fe9]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fe9]
;
</div><span class="l"><a class="anc" name="a660" href="#a660">[a660]</a><a href="#ISCRIPT_MARK_OF_JOKER" class="la">ISCRIPT_MARK_OF_JOKER:</a><span class="ce">; [$a660]</span></span>
<span class="l"><a class="anc" name="a660" href="#a660">[a660]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_GENERIC</span></span><span class="ce">; [$a660] IScriptEntity</span></span>
<span class="l"><a class="anc" name="a661" href="#a661">[a661]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_UNSKIPPABLE_MESSAGE</span></span><span class="ce">; [$a661] IScriptAction</span></span>
<span class="l"><a class="anc" name="a662" href="#a662">[a662]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_MARK_OF_JOKER</span></span><span class="ce">; [$a662] Message</span></span>
<span class="l"><a class="anc" name="a663" href="#a663">[a663]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; [$a663] IScriptAction</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_NEED_RING_FOR_DOOR"></a><div class="cp">;============================================================================
; "Do you need a ring to open a door?"
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fea]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fea]
;
</div><span class="l"><a class="anc" name="a664" href="#a664">[a664]</a><a href="#ISCRIPT_NEED_RING_FOR_DOOR" class="la">ISCRIPT_NEED_RING_FOR_DOOR:</a><span class="ce">; [$a664]</span></span>
<span class="l"><a class="anc" name="a664" href="#a664">[a664]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_GENERIC</span></span><span class="ce">; [$a664] IScriptEntity</span></span>
<span class="l"><a class="anc" name="a665" href="#a665">[a665]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_UNSKIPPABLE_MESSAGE</span></span><span class="ce">; [$a665] IScriptAction</span></span>
<span class="l"><a class="anc" name="a666" href="#a666">[a666]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_NEED_RING_FOR_DOOR</span></span><span class="ce">; [$a666] Message</span></span>
<span class="l"><a class="anc" name="a667" href="#a667">[a667]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; [$a667] IScriptAction</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_USED_RED_POTION"></a><div class="cp">;============================================================================
; "I've used Red Potion."
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9feb]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9feb]
;
</div><span class="l"><a class="anc" name="a668" href="#a668">[a668]</a><a href="#ISCRIPT_USED_RED_POTION" class="la">ISCRIPT_USED_RED_POTION:</a><span class="ce">; [$a668]</span></span>
<span class="l"><a class="anc" name="a668" href="#a668">[a668]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_GENERIC</span></span><span class="ce">; [$a668] IScriptEntity</span></span>
<span class="l"><a class="anc" name="a669" href="#a669">[a669]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_UNSKIPPABLE_MESSAGE</span></span><span class="ce">; [$a669] IScriptAction</span></span>
<span class="l"><a class="anc" name="a66a" href="#a66a">[a66a]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_USED_RED_POTION</span></span><span class="ce">; [$a66a] Message</span></span>
<span class="l"><a class="anc" name="a66b" href="#a66b">[a66b]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; [$a66b] IScriptAction</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_USED_MATTOCK"></a><div class="cp">;============================================================================
; "I've used Mattock."
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fec]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fec]
;
</div><span class="l"><a class="anc" name="a66c" href="#a66c">[a66c]</a><a href="#ISCRIPT_USED_MATTOCK" class="la">ISCRIPT_USED_MATTOCK:</a><span class="ce">; [$a66c]</span></span>
<span class="l"><a class="anc" name="a66c" href="#a66c">[a66c]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_GENERIC</span></span><span class="ce">; [$a66c] IScriptEntity</span></span>
<span class="l"><a class="anc" name="a66d" href="#a66d">[a66d]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_UNSKIPPABLE_MESSAGE</span></span><span class="ce">; [$a66d] IScriptAction</span></span>
<span class="l"><a class="anc" name="a66e" href="#a66e">[a66e]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_USED_MATTOCK</span></span><span class="ce">; [$a66e] Message</span></span>
<span class="l"><a class="anc" name="a66f" href="#a66f">[a66f]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; [$a66f] IScriptAction</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_USED_HOURGLASS"></a><div class="cp">;============================================================================
; "I've used Hour Glass."
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fed]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fed]
;
</div><span class="l"><a class="anc" name="a670" href="#a670">[a670]</a><a href="#ISCRIPT_USED_HOURGLASS" class="la">ISCRIPT_USED_HOURGLASS:</a><span class="ce">; [$a670]</span></span>
<span class="l"><a class="anc" name="a670" href="#a670">[a670]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_GENERIC</span></span><span class="ce">; [$a670] IScriptEntity</span></span>
<span class="l"><a class="anc" name="a671" href="#a671">[a671]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_UNSKIPPABLE_MESSAGE</span></span><span class="ce">; [$a671] IScriptAction</span></span>
<span class="l"><a class="anc" name="a672" href="#a672">[a672]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_USED_HOURGLASS</span></span><span class="ce">; [$a672] Message</span></span>
<span class="l"><a class="anc" name="a673" href="#a673">[a673]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; [$a673] IScriptAction</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_USED_WINGBOOTS"></a><div class="cp">;============================================================================
; "I've used Wing Boots."
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fee]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fee]
;
</div><span class="l"><a class="anc" name="a674" href="#a674">[a674]</a><a href="#ISCRIPT_USED_WINGBOOTS" class="la">ISCRIPT_USED_WINGBOOTS:</a><span class="ce">; [$a674]</span></span>
<span class="l"><a class="anc" name="a674" href="#a674">[a674]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_GENERIC</span></span><span class="ce">; [$a674] IScriptEntity</span></span>
<span class="l"><a class="anc" name="a675" href="#a675">[a675]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_UNSKIPPABLE_MESSAGE</span></span><span class="ce">; [$a675] IScriptAction</span></span>
<span class="l"><a class="anc" name="a676" href="#a676">[a676]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_USED_WINGBOOTS</span></span><span class="ce">; [$a676] Message</span></span>
<span class="l"><a class="anc" name="a677" href="#a677">[a677]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; [$a677] IScriptAction</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_USED_KEY"></a><div class="cp">;============================================================================
; "I've used key."
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fef]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fef]
;
</div><span class="l"><a class="anc" name="a678" href="#a678">[a678]</a><a href="#ISCRIPT_USED_KEY" class="la">ISCRIPT_USED_KEY:</a><span class="ce">; [$a678]</span></span>
<span class="l"><a class="anc" name="a678" href="#a678">[a678]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_GENERIC</span></span><span class="ce">; [$a678] IScriptEntity</span></span>
<span class="l"><a class="anc" name="a679" href="#a679">[a679]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_UNSKIPPABLE_MESSAGE</span></span><span class="ce">; [$a679] IScriptAction</span></span>
<span class="l"><a class="anc" name="a67a" href="#a67a">[a67a]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_USED_KEY</span></span><span class="ce">; [$a67a] Message</span></span>
<span class="l"><a class="anc" name="a67b" href="#a67b">[a67b]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; [$a67b] IScriptAction</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_USED_ELIXIR"></a><div class="cp">;============================================================================
; "I've used Elixir."
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9ff0]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9ff0]
;
</div><span class="l"><a class="anc" name="a67c" href="#a67c">[a67c]</a><a href="#ISCRIPT_USED_ELIXIR" class="la">ISCRIPT_USED_ELIXIR:</a><span class="ce">; [$a67c]</span></span>
<span class="l"><a class="anc" name="a67c" href="#a67c">[a67c]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_GENERIC</span></span><span class="ce">; [$a67c] IScriptEntity</span></span>
<span class="l"><a class="anc" name="a67d" href="#a67d">[a67d]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_UNSKIPPABLE_MESSAGE</span></span><span class="ce">; [$a67d] IScriptAction</span></span>
<span class="l"><a class="anc" name="a67e" href="#a67e">[a67e]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_USED_ELIXIR</span></span><span class="ce">; [$a67e] Message</span></span>
<span class="l"><a class="anc" name="a67f" href="#a67f">[a67f]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; [$a67f] IScriptAction</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_GOT_ELIXIR"></a><div class="cp">;============================================================================
; "I'm holding Elixir."
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9ff1]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9ff1]
;
</div><span class="l"><a class="anc" name="a680" href="#a680">[a680]</a><a href="#ISCRIPT_GOT_ELIXIR" class="la">ISCRIPT_GOT_ELIXIR:</a><span class="ce">; [$a680]</span></span>
<span class="l"><a class="anc" name="a680" href="#a680">[a680]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_GENERIC</span></span><span class="ce">; [$a680] IScriptEntity</span></span>
<span class="l"><a class="anc" name="a681" href="#a681">[a681]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_UNSKIPPABLE_MESSAGE</span></span><span class="ce">; [$a681] IScriptAction</span></span>
<span class="l"><a class="anc" name="a682" href="#a682">[a682]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_HOLDING_ELIXIR</span></span><span class="ce">; [$a682] Message</span></span>
<span class="l"><a class="anc" name="a683" href="#a683">[a683]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; [$a683] IScriptAction</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_GOT_RED_POTION"></a><div class="cp">;============================================================================
; "I'm holding Red Potion."
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9ff2]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9ff2]
;
</div><span class="l"><a class="anc" name="a684" href="#a684">[a684]</a><a href="#ISCRIPT_GOT_RED_POTION" class="la">ISCRIPT_GOT_RED_POTION:</a><span class="ce">; [$a684]</span></span>
<span class="l"><a class="anc" name="a684" href="#a684">[a684]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_GENERIC</span></span><span class="ce">; [$a684] IScriptEntity</span></span>
<span class="l"><a class="anc" name="a685" href="#a685">[a685]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_UNSKIPPABLE_MESSAGE</span></span><span class="ce">; [$a685] IScriptAction</span></span>
<span class="l"><a class="anc" name="a686" href="#a686">[a686]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_HOLDING_RED_POTION</span></span><span class="ce">; [$a686] Message</span></span>
<span class="l"><a class="anc" name="a687" href="#a687">[a687]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; [$a687] IScriptAction</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_GOT_MATTOCK"></a><div class="cp">;============================================================================
; "I'm holding Mattock."
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9ff3]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9ff3]
;
</div><span class="l"><a class="anc" name="a688" href="#a688">[a688]</a><a href="#ISCRIPT_GOT_MATTOCK" class="la">ISCRIPT_GOT_MATTOCK:</a><span class="ce">; [$a688]</span></span>
<span class="l"><a class="anc" name="a688" href="#a688">[a688]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_GENERIC</span></span><span class="ce">; [$a688] IScriptEntity</span></span>
<span class="l"><a class="anc" name="a689" href="#a689">[a689]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_UNSKIPPABLE_MESSAGE</span></span><span class="ce">; [$a689] IScriptAction</span></span>
<span class="l"><a class="anc" name="a68a" href="#a68a">[a68a]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_HOLDING_MATTOCK</span></span><span class="ce">; [$a68a] Message</span></span>
<span class="l"><a class="anc" name="a68b" href="#a68b">[a68b]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; [$a68b] IScriptAction</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_GOT_WINGBOOTS"></a><div class="cp">;============================================================================
; "I'm holding Wing Boots."
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9ff4]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9ff4]
;
</div><span class="l"><a class="anc" name="a68c" href="#a68c">[a68c]</a><a href="#ISCRIPT_GOT_WINGBOOTS" class="la">ISCRIPT_GOT_WINGBOOTS:</a><span class="ce">; [$a68c]</span></span>
<span class="l"><a class="anc" name="a68c" href="#a68c">[a68c]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_GENERIC</span></span><span class="ce">; [$a68c] IScriptEntity</span></span>
<span class="l"><a class="anc" name="a68d" href="#a68d">[a68d]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_UNSKIPPABLE_MESSAGE</span></span><span class="ce">; [$a68d] IScriptAction</span></span>
<span class="l"><a class="anc" name="a68e" href="#a68e">[a68e]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_HOLDING_WINGBOOTS</span></span><span class="ce">; [$a68e] Message</span></span>
<span class="l"><a class="anc" name="a68f" href="#a68f">[a68f]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; [$a68f] IScriptAction</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_GOT_HOURGLASS"></a><div class="cp">;============================================================================
; "I'm holding Hour Glass."
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9ff5]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9ff5]
;
</div><span class="l"><a class="anc" name="a690" href="#a690">[a690]</a><a href="#ISCRIPT_GOT_HOURGLASS" class="la">ISCRIPT_GOT_HOURGLASS:</a><span class="ce">; [$a690]</span></span>
<span class="l"><a class="anc" name="a690" href="#a690">[a690]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_GENERIC</span></span><span class="ce">; [$a690] IScriptEntity</span></span>
<span class="l"><a class="anc" name="a691" href="#a691">[a691]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_UNSKIPPABLE_MESSAGE</span></span><span class="ce">; [$a691] IScriptAction</span></span>
<span class="l"><a class="anc" name="a692" href="#a692">[a692]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_HOLDING_HOURGLASS</span></span><span class="ce">; [$a692] Message</span></span>
<span class="l"><a class="anc" name="a693" href="#a693">[a693]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; [$a693] IScriptAction</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_GOT_BATTLE_SUIT"></a><div class="cp">;============================================================================
; "I've got the Battle Suit."
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9ff6]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9ff6]
;
</div><span class="l"><a class="anc" name="a694" href="#a694">[a694]</a><a href="#ISCRIPT_GOT_BATTLE_SUIT" class="la">ISCRIPT_GOT_BATTLE_SUIT:</a><span class="ce">; [$a694]</span></span>
<span class="l"><a class="anc" name="a694" href="#a694">[a694]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_GENERIC</span></span><span class="ce">; [$a694] IScriptEntity</span></span>
<span class="l"><a class="anc" name="a695" href="#a695">[a695]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_UNSKIPPABLE_MESSAGE</span></span><span class="ce">; [$a695] IScriptAction</span></span>
<span class="l"><a class="anc" name="a696" href="#a696">[a696]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_GOT_BATTLE_SUIT</span></span><span class="ce">; [$a696] Message</span></span>
<span class="l"><a class="anc" name="a697" href="#a697">[a697]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; [$a697] IScriptAction</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_GOT_BATTLE_HELMET"></a><div class="cp">;============================================================================
; "I've got the Battle Helmet."
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9ff7]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9ff7]
;
</div><span class="l"><a class="anc" name="a698" href="#a698">[a698]</a><a href="#ISCRIPT_GOT_BATTLE_HELMET" class="la">ISCRIPT_GOT_BATTLE_HELMET:</a><span class="ce">; [$a698]</span></span>
<span class="l"><a class="anc" name="a698" href="#a698">[a698]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_GENERIC</span></span><span class="ce">; [$a698] IScriptEntity</span></span>
<span class="l"><a class="anc" name="a699" href="#a699">[a699]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_UNSKIPPABLE_MESSAGE</span></span><span class="ce">; [$a699] IScriptAction</span></span>
<span class="l"><a class="anc" name="a69a" href="#a69a">[a69a]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_GOT_BATTLE_HELMET</span></span><span class="ce">; [$a69a] Message</span></span>
<span class="l"><a class="anc" name="a69b" href="#a69b">[a69b]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; [$a69b] IScriptAction</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_GOT_DRAGON_SLAYER"></a><div class="cp">;============================================================================
; "I've got the Dragon Slayer."
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9ff8]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9ff8]
;
</div><span class="l"><a class="anc" name="a69c" href="#a69c">[a69c]</a><a href="#ISCRIPT_GOT_DRAGON_SLAYER" class="la">ISCRIPT_GOT_DRAGON_SLAYER:</a><span class="ce">; [$a69c]</span></span>
<span class="l"><a class="anc" name="a69c" href="#a69c">[a69c]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_GENERIC</span></span><span class="ce">; [$a69c] IScriptEntity</span></span>
<span class="l"><a class="anc" name="a69d" href="#a69d">[a69d]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_UNSKIPPABLE_MESSAGE</span></span><span class="ce">; [$a69d] IScriptAction</span></span>
<span class="l"><a class="anc" name="a69e" href="#a69e">[a69e]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_GOT_DRAGON_SLAYER</span></span><span class="ce">; [$a69e] Message</span></span>
<span class="l"><a class="anc" name="a69f" href="#a69f">[a69f]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; [$a69f] IScriptAction</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_GOT_BLACK_ONYX"></a><div class="cp">;============================================================================
; "I've got the Black Onyx."
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9ff9]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9ff9]
;
</div><span class="l"><a class="anc" name="a6a0" href="#a6a0">[a6a0]</a><a href="#ISCRIPT_GOT_BLACK_ONYX" class="la">ISCRIPT_GOT_BLACK_ONYX:</a><span class="ce">; [$a6a0]</span></span>
<span class="l"><a class="anc" name="a6a0" href="#a6a0">[a6a0]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_GENERIC</span></span><span class="ce">; [$a6a0] IScriptEntity</span></span>
<span class="l"><a class="anc" name="a6a1" href="#a6a1">[a6a1]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_UNSKIPPABLE_MESSAGE</span></span><span class="ce">; [$a6a1] IScriptAction</span></span>
<span class="l"><a class="anc" name="a6a2" href="#a6a2">[a6a2]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_GOT_BLACK_ONYX</span></span><span class="ce">; [$a6a2] Message</span></span>
<span class="l"><a class="anc" name="a6a3" href="#a6a3">[a6a3]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; [$a6a3] IScriptAction</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_GOT_PENDANT"></a><div class="cp">;============================================================================
; "I've got the Pendant."
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9ffa]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9ffa]
;
</div><span class="l"><a class="anc" name="a6a4" href="#a6a4">[a6a4]</a><a href="#ISCRIPT_GOT_PENDANT" class="la">ISCRIPT_GOT_PENDANT:</a><span class="ce">; [$a6a4]</span></span>
<span class="l"><a class="anc" name="a6a4" href="#a6a4">[a6a4]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_GENERIC</span></span><span class="ce">; [$a6a4] IScriptEntity</span></span>
<span class="l"><a class="anc" name="a6a5" href="#a6a5">[a6a5]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_UNSKIPPABLE_MESSAGE</span></span><span class="ce">; [$a6a5] IScriptAction</span></span>
<span class="l"><a class="anc" name="a6a6" href="#a6a6">[a6a6]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_GOT_PENDANT</span></span><span class="ce">; [$a6a6] Message</span></span>
<span class="l"><a class="anc" name="a6a7" href="#a6a7">[a6a7]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; [$a6a7] IScriptAction</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_GOT_MAGICAL_ROD"></a><div class="cp">;============================================================================
; "I've got the Magical Rod."
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9ffb]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9ffb]
;
</div><span class="l"><a class="anc" name="a6a8" href="#a6a8">[a6a8]</a><a href="#ISCRIPT_GOT_MAGICAL_ROD" class="la">ISCRIPT_GOT_MAGICAL_ROD:</a><span class="ce">; [$a6a8]</span></span>
<span class="l"><a class="anc" name="a6a8" href="#a6a8">[a6a8]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_GENERIC</span></span><span class="ce">; [$a6a8] IScriptEntity</span></span>
<span class="l"><a class="anc" name="a6a9" href="#a6a9">[a6a9]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_UNSKIPPABLE_MESSAGE</span></span><span class="ce">; [$a6a9] IScriptAction</span></span>
<span class="l"><a class="anc" name="a6aa" href="#a6aa">[a6aa]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_GOT_MAGICAL_ROD</span></span><span class="ce">; [$a6aa] Message</span></span>
<span class="l"><a class="anc" name="a6ab" href="#a6ab">[a6ab]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; [$a6ab] IScriptAction</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_TOUCHED_POISON"></a><div class="cp">;============================================================================
; "I've touched Poison."
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9ffc]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9ffc]
;
</div><span class="l"><a class="anc" name="a6ac" href="#a6ac">[a6ac]</a><a href="#ISCRIPT_TOUCHED_POISON" class="la">ISCRIPT_TOUCHED_POISON:</a><span class="ce">; [$a6ac]</span></span>
<span class="l"><a class="anc" name="a6ac" href="#a6ac">[a6ac]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_GENERIC</span></span><span class="ce">; [$a6ac] IScriptEntity</span></span>
<span class="l"><a class="anc" name="a6ad" href="#a6ad">[a6ad]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_UNSKIPPABLE_MESSAGE</span></span><span class="ce">; [$a6ad] IScriptAction</span></span>
<span class="l"><a class="anc" name="a6ae" href="#a6ae">[a6ae]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_TOUCHED_POISON</span></span><span class="ce">; [$a6ae] Message</span></span>
<span class="l"><a class="anc" name="a6af" href="#a6af">[a6af]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; [$a6af] IScriptAction</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_GOT_POWER_GLOVE"></a><div class="cp">;============================================================================
; "The glove increases offensive power."
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9ffd]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9ffd]
;
</div><span class="l"><a class="anc" name="a6b0" href="#a6b0">[a6b0]</a><a href="#ISCRIPT_GOT_POWER_GLOVE" class="la">ISCRIPT_GOT_POWER_GLOVE:</a><span class="ce">; [$a6b0]</span></span>
<span class="l"><a class="anc" name="a6b0" href="#a6b0">[a6b0]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_GENERIC</span></span><span class="ce">; [$a6b0] IScriptEntity</span></span>
<span class="l"><a class="anc" name="a6b1" href="#a6b1">[a6b1]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_UNSKIPPABLE_MESSAGE</span></span><span class="ce">; [$a6b1] IScriptAction</span></span>
<span class="l"><a class="anc" name="a6b2" href="#a6b2">[a6b2]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_GLOVE_INCREASES_POWER</span></span><span class="ce">; [$a6b2] Message</span></span>
<span class="l"><a class="anc" name="a6b3" href="#a6b3">[a6b3]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; [$a6b3] IScriptAction</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_POWER_GLOVE_GONE"></a><div class="cp">;============================================================================
; "The power of the Glove is gone."
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9ffe]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9ffe]
;
</div><span class="l"><a class="anc" name="a6b4" href="#a6b4">[a6b4]</a><a href="#ISCRIPT_POWER_GLOVE_GONE" class="la">ISCRIPT_POWER_GLOVE_GONE:</a><span class="ce">; [$a6b4]</span></span>
<span class="l"><a class="anc" name="a6b4" href="#a6b4">[a6b4]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_GENERIC</span></span><span class="ce">; [$a6b4] IScriptEntity</span></span>
<span class="l"><a class="anc" name="a6b5" href="#a6b5">[a6b5]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_UNSKIPPABLE_MESSAGE</span></span><span class="ce">; [$a6b5] IScriptAction</span></span>
<span class="l"><a class="anc" name="a6b6" href="#a6b6">[a6b6]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_POWER_GLOVE_IS_GONE</span></span><span class="ce">; [$a6b6] Message</span></span>
<span class="l"><a class="anc" name="a6b7" href="#a6b7">[a6b7]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; [$a6b7] IScriptAction</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_OINTMENT_USED"></a><div class="cp">;============================================================================
; "I am free from injury because of the Ointment."
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fff]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::9fff]
;
</div><span class="l"><a class="anc" name="a6b8" href="#a6b8">[a6b8]</a><a href="#ISCRIPT_OINTMENT_USED" class="la">ISCRIPT_OINTMENT_USED:</a><span class="ce">; [$a6b8]</span></span>
<span class="l"><a class="anc" name="a6b8" href="#a6b8">[a6b8]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_GENERIC</span></span><span class="ce">; [$a6b8] IScriptEntity</span></span>
<span class="l"><a class="anc" name="a6b9" href="#a6b9">[a6b9]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_UNSKIPPABLE_MESSAGE</span></span><span class="ce">; [$a6b9] IScriptAction</span></span>
<span class="l"><a class="anc" name="a6ba" href="#a6ba">[a6ba]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_USED_OINTMENT</span></span><span class="ce">; [$a6ba] Message</span></span>
<span class="l"><a class="anc" name="a6bb" href="#a6bb">[a6bb]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; [$a6bb] IScriptAction</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_OINTMENT_GONE"></a><div class="cp">;============================================================================
; "The power of the Ointment is gone."
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::a000]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::a000]
;
</div><span class="l"><a class="anc" name="a6bc" href="#a6bc">[a6bc]</a><a href="#ISCRIPT_OINTMENT_GONE" class="la">ISCRIPT_OINTMENT_GONE:</a><span class="ce">; [$a6bc]</span></span>
<span class="l"><a class="anc" name="a6bc" href="#a6bc">[a6bc]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_GENERIC</span></span><span class="ce">; [$a6bc] IScriptEntity</span></span>
<span class="l"><a class="anc" name="a6bd" href="#a6bd">[a6bd]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_UNSKIPPABLE_MESSAGE</span></span><span class="ce">; [$a6bd] IScriptAction</span></span>
<span class="l"><a class="anc" name="a6be" href="#a6be">[a6be]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_OINTMENT_GONE</span></span><span class="ce">; [$a6be] Message</span></span>
<span class="l"><a class="anc" name="a6bf" href="#a6bf">[a6bf]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; [$a6bf] IScriptAction</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_WINGBOOTS_GONE"></a><div class="cp">;============================================================================
; "The power of the Wing Boots is gone."
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::a001]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::a001]
;
</div><span class="l"><a class="anc" name="a6c0" href="#a6c0">[a6c0]</a><a href="#ISCRIPT_WINGBOOTS_GONE" class="la">ISCRIPT_WINGBOOTS_GONE:</a><span class="ce">; [$a6c0]</span></span>
<span class="l"><a class="anc" name="a6c0" href="#a6c0">[a6c0]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_GENERIC</span></span><span class="ce">; [$a6c0] IScriptEntity</span></span>
<span class="l"><a class="anc" name="a6c1" href="#a6c1">[a6c1]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_UNSKIPPABLE_MESSAGE</span></span><span class="ce">; [$a6c1] IScriptAction</span></span>
<span class="l"><a class="anc" name="a6c2" href="#a6c2">[a6c2]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_WINGBOOTS_GONE</span></span><span class="ce">; [$a6c2] Message</span></span>
<span class="l"><a class="anc" name="a6c3" href="#a6c3">[a6c3]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; [$a6c3] IScriptAction</span></span>
<span class="l"></span>
<span class="l"></span>
<a name="ISCRIPT_HOURGLASS_GONE"></a><div class="cp">;============================================================================
; "The power of the Hour Glass is gone."
;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::a002]
;============================================================================
</div><span class="l"></span>
<div class="c">;
; XREFS:
;     <a href="#ISCRIPT_ADDRS_L">ISCRIPT_ADDRS_L</a> [$PRG12::a002]
;
</div><span class="l"><a class="anc" name="a6c4" href="#a6c4">[a6c4]</a><a href="#ISCRIPT_HOURGLASS_GONE" class="la">ISCRIPT_HOURGLASS_GONE:</a><span class="ce">; [$a6c4]</span></span>
<span class="l"><a class="anc" name="a6c4" href="#a6c4">[a6c4]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ENTITY_GENERIC</span></span><span class="ce">; [$a6c4] IScriptEntity</span></span>
<span class="l"><a class="anc" name="a6c5" href="#a6c5">[a6c5]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_SHOW_UNSKIPPABLE_MESSAGE</span></span><span class="ce">; [$a6c5] IScriptAction</span></span>
<span class="l"><a class="anc" name="a6c6" href="#a6c6">[a6c6]</a><span class="cd"><span class="i">db</span> <span class="o">MESSAGEID_HOURGLASS_GONE</span></span><span class="ce">; [$a6c6] Message</span></span>
<span class="l"><a class="anc" name="a6c7" href="#a6c7">[a6c7]</a><span class="cd"><span class="i">db</span> <span class="o">ISCRIPT_ACTION_END</span></span><span class="ce">; [$a6c7] IScriptAction</span></span>
<span class="l"></span>
<a name="SPLASHANIM_INTRO_PALETTE"></a><div class="c">;
; XREFS:
;     <a href="#SPLASHANIM_PALETTE_L">SPLASHANIM_PALETTE_L</a> [$PRG12::a72c]
;
</div><span class="l"><a class="anc" name="a6c8" href="#a6c8">[a6c8]</a><a href="#SPLASHANIM_INTRO_PALETTE" class="la">SPLASHANIM_INTRO_PALETTE:</a><span class="ce">; [$a6c8]</span></span>
<span class="l"><a class="anc" name="a6c8" href="#a6c8">[a6c8]</a><span class="cd"><span class="i">db</span> <span class="o">$0f</span></span><span class="ce">; [0]:</span></span>
<span class="l"><a class="anc" name="a6c9" href="#a6c9">[a6c9]</a><span class="cd"><span class="i">db</span> <span class="o">$07</span></span><span class="ce">; [1]:</span></span>
<span class="l"><a class="anc" name="a6ca" href="#a6ca">[a6ca]</a><span class="cd"><span class="i">db</span> <span class="o">$17</span></span><span class="ce">; [2]:</span></span>
<span class="l"><a class="anc" name="a6cb" href="#a6cb">[a6cb]</a><span class="cd"><span class="i">db</span> <span class="o">$27</span></span><span class="ce">; [3]:</span></span>
<span class="l"><a class="anc" name="a6cc" href="#a6cc">[a6cc]</a><span class="cd"><span class="i">db</span> <span class="o">$0f</span></span><span class="ce">; [4]:</span></span>
<span class="l"><a class="anc" name="a6cd" href="#a6cd">[a6cd]</a><span class="cd"><span class="i">db</span> <span class="o">$27</span></span><span class="ce">; [5]:</span></span>
<span class="l"><a class="anc" name="a6ce" href="#a6ce">[a6ce]</a><span class="cd"><span class="i">db</span> <span class="o">$17</span></span><span class="ce">; [6]:</span></span>
<span class="l"><a class="anc" name="a6cf" href="#a6cf">[a6cf]</a><span class="cd"><span class="i">db</span> <span class="o">$27</span></span><span class="ce">; [7]:</span></span>
<span class="l"><a class="anc" name="a6d0" href="#a6d0">[a6d0]</a><span class="cd"><span class="i">db</span> <span class="o">$0f</span></span><span class="ce">; [8]:</span></span>
<span class="l"><a class="anc" name="a6d1" href="#a6d1">[a6d1]</a><span class="cd"><span class="i">db</span> <span class="o">$0c</span></span><span class="ce">; [9]:</span></span>
<span class="l"><a class="anc" name="a6d2" href="#a6d2">[a6d2]</a><span class="cd"><span class="i">db</span> <span class="o">$17</span></span><span class="ce">; [10]:</span></span>
<span class="l"><a class="anc" name="a6d3" href="#a6d3">[a6d3]</a><span class="cd"><span class="i">db</span> <span class="o">$10</span></span><span class="ce">; [11]:</span></span>
<span class="l"><a class="anc" name="a6d4" href="#a6d4">[a6d4]</a><span class="cd"><span class="i">db</span> <span class="o">$0f</span></span><span class="ce">; [12]:</span></span>
<span class="l"><a class="anc" name="a6d5" href="#a6d5">[a6d5]</a><span class="cd"><span class="i">db</span> <span class="o">$0c</span></span><span class="ce">; [13]:</span></span>
<span class="l"><a class="anc" name="a6d6" href="#a6d6">[a6d6]</a><span class="cd"><span class="i">db</span> <span class="o">$17</span></span><span class="ce">; [14]:</span></span>
<span class="l"><a class="anc" name="a6d7" href="#a6d7">[a6d7]</a><span class="cd"><span class="i">db</span> <span class="o">$27</span></span><span class="ce">; [15]:</span></span>
<span class="l"><a class="anc" name="a6d8" href="#a6d8">[a6d8]</a><span class="cd"><span class="i">db</span> <span class="o">$0f</span></span><span class="ce">; [16]:</span></span>
<span class="l"><a class="anc" name="a6d9" href="#a6d9">[a6d9]</a><span class="cd"><span class="i">db</span> <span class="o">$17</span></span><span class="ce">; [17]:</span></span>
<span class="l"><a class="anc" name="a6da" href="#a6da">[a6da]</a><span class="cd"><span class="i">db</span> <span class="o">$26</span></span><span class="ce">; [18]:</span></span>
<span class="l"><a class="anc" name="a6db" href="#a6db">[a6db]</a><span class="cd"><span class="i">db</span> <span class="o">$30</span></span><span class="ce">; [19]:</span></span>
<span class="l"><a class="anc" name="a6dc" href="#a6dc">[a6dc]</a><span class="cd"><span class="i">db</span> <span class="o">$0f</span></span><span class="ce">; [20]:</span></span>
<span class="l"><a class="anc" name="a6dd" href="#a6dd">[a6dd]</a><span class="cd"><span class="i">db</span> <span class="o">$17</span></span><span class="ce">; [21]:</span></span>
<span class="l"><a class="anc" name="a6de" href="#a6de">[a6de]</a><span class="cd"><span class="i">db</span> <span class="o">$26</span></span><span class="ce">; [22]:</span></span>
<span class="l"><a class="anc" name="a6df" href="#a6df">[a6df]</a><span class="cd"><span class="i">db</span> <span class="o">$30</span></span><span class="ce">; [23]:</span></span>
<span class="l"><a class="anc" name="a6e0" href="#a6e0">[a6e0]</a><span class="cd"><span class="i">db</span> <span class="o">$0f</span></span><span class="ce">; [24]:</span></span>
<span class="l"><a class="anc" name="a6e1" href="#a6e1">[a6e1]</a><span class="cd"><span class="i">db</span> <span class="o">$17</span></span><span class="ce">; [25]:</span></span>
<span class="l"><a class="anc" name="a6e2" href="#a6e2">[a6e2]</a><span class="cd"><span class="i">db</span> <span class="o">$26</span></span><span class="ce">; [26]:</span></span>
<span class="l"><a class="anc" name="a6e3" href="#a6e3">[a6e3]</a><span class="cd"><span class="i">db</span> <span class="o">$30</span></span><span class="ce">; [27]:</span></span>
<span class="l"><a class="anc" name="a6e4" href="#a6e4">[a6e4]</a><span class="cd"><span class="i">db</span> <span class="o">$0f</span></span><span class="ce">; [28]:</span></span>
<span class="l"><a class="anc" name="a6e5" href="#a6e5">[a6e5]</a><span class="cd"><span class="i">db</span> <span class="o">$17</span></span><span class="ce">; [29]:</span></span>
<span class="l"><a class="anc" name="a6e6" href="#a6e6">[a6e6]</a><span class="cd"><span class="i">db</span> <span class="o">$26</span></span><span class="ce">; [30]:</span></span>
<span class="l"><a class="anc" name="a6e7" href="#a6e7">[a6e7]</a><span class="cd"><span class="i">db</span> <span class="o">$30</span></span><span class="ce">; [31]:</span></span>
<span class="l"></span>
<a name="SPLASHANIM_OUTRO_PALETTE"></a><div class="c">;
; XREFS:
;     <a href="#SPLASHANIM_PALETTE_L">SPLASHANIM_PALETTE_L</a> [$PRG12::a72d]
;
</div><span class="l"><a class="anc" name="a6e8" href="#a6e8">[a6e8]</a><a href="#SPLASHANIM_OUTRO_PALETTE" class="la">SPLASHANIM_OUTRO_PALETTE:</a><span class="ce">; [$a6e8]</span></span>
<span class="l"><a class="anc" name="a6e8" href="#a6e8">[a6e8]</a><span class="cd"><span class="i">db</span> <span class="o">$0f</span></span><span class="ce">; [0]:</span></span>
<span class="l"><a class="anc" name="a6e9" href="#a6e9">[a6e9]</a><span class="cd"><span class="i">db</span> <span class="o">$17</span></span><span class="ce">; [1]:</span></span>
<span class="l"><a class="anc" name="a6ea" href="#a6ea">[a6ea]</a><span class="cd"><span class="i">db</span> <span class="o">$27</span></span><span class="ce">; [2]:</span></span>
<span class="l"><a class="anc" name="a6eb" href="#a6eb">[a6eb]</a><span class="cd"><span class="i">db</span> <span class="o">$37</span></span><span class="ce">; [3]:</span></span>
<span class="l"><a class="anc" name="a6ec" href="#a6ec">[a6ec]</a><span class="cd"><span class="i">db</span> <span class="o">$0f</span></span><span class="ce">; [4]:</span></span>
<span class="l"><a class="anc" name="a6ed" href="#a6ed">[a6ed]</a><span class="cd"><span class="i">db</span> <span class="o">$37</span></span><span class="ce">; [5]:</span></span>
<span class="l"><a class="anc" name="a6ee" href="#a6ee">[a6ee]</a><span class="cd"><span class="i">db</span> <span class="o">$19</span></span><span class="ce">; [6]:</span></span>
<span class="l"><a class="anc" name="a6ef" href="#a6ef">[a6ef]</a><span class="cd"><span class="i">db</span> <span class="o">$29</span></span><span class="ce">; [7]:</span></span>
<span class="l"><a class="anc" name="a6f0" href="#a6f0">[a6f0]</a><span class="cd"><span class="i">db</span> <span class="o">$0f</span></span><span class="ce">; [8]:</span></span>
<span class="l"><a class="anc" name="a6f1" href="#a6f1">[a6f1]</a><span class="cd"><span class="i">db</span> <span class="o">$1c</span></span><span class="ce">; [9]:</span></span>
<span class="l"><a class="anc" name="a6f2" href="#a6f2">[a6f2]</a><span class="cd"><span class="i">db</span> <span class="o">$19</span></span><span class="ce">; [10]:</span></span>
<span class="l"><a class="anc" name="a6f3" href="#a6f3">[a6f3]</a><span class="cd"><span class="i">db</span> <span class="o">$30</span></span><span class="ce">; [11]:</span></span>
<span class="l"><a class="anc" name="a6f4" href="#a6f4">[a6f4]</a><span class="cd"><span class="i">db</span> <span class="o">$0f</span></span><span class="ce">; [12]:</span></span>
<span class="l"><a class="anc" name="a6f5" href="#a6f5">[a6f5]</a><span class="cd"><span class="i">db</span> <span class="o">$1c</span></span><span class="ce">; [13]:</span></span>
<span class="l"><a class="anc" name="a6f6" href="#a6f6">[a6f6]</a><span class="cd"><span class="i">db</span> <span class="o">$27</span></span><span class="ce">; [14]:</span></span>
<span class="l"><a class="anc" name="a6f7" href="#a6f7">[a6f7]</a><span class="cd"><span class="i">db</span> <span class="o">$37</span></span><span class="ce">; [15]:</span></span>
<span class="l"><a class="anc" name="a6f8" href="#a6f8">[a6f8]</a><span class="cd"><span class="i">db</span> <span class="o">$0f</span></span><span class="ce">; [16]:</span></span>
<span class="l"><a class="anc" name="a6f9" href="#a6f9">[a6f9]</a><span class="cd"><span class="i">db</span> <span class="o">$17</span></span><span class="ce">; [17]:</span></span>
<span class="l"><a class="anc" name="a6fa" href="#a6fa">[a6fa]</a><span class="cd"><span class="i">db</span> <span class="o">$26</span></span><span class="ce">; [18]:</span></span>
<span class="l"><a class="anc" name="a6fb" href="#a6fb">[a6fb]</a><span class="cd"><span class="i">db</span> <span class="o">$30</span></span><span class="ce">; [19]:</span></span>
<span class="l"><a class="anc" name="a6fc" href="#a6fc">[a6fc]</a><span class="cd"><span class="i">db</span> <span class="o">$0f</span></span><span class="ce">; [20]:</span></span>
<span class="l"><a class="anc" name="a6fd" href="#a6fd">[a6fd]</a><span class="cd"><span class="i">db</span> <span class="o">$1c</span></span><span class="ce">; [21]:</span></span>
<span class="l"><a class="anc" name="a6fe" href="#a6fe">[a6fe]</a><span class="cd"><span class="i">db</span> <span class="o">$2c</span></span><span class="ce">; [22]:</span></span>
<span class="l"><a class="anc" name="a6ff" href="#a6ff">[a6ff]</a><span class="cd"><span class="i">db</span> <span class="o">$30</span></span><span class="ce">; [23]:</span></span>
<span class="l"><a class="anc" name="a700" href="#a700">[a700]</a><span class="cd"><span class="i">db</span> <span class="o">$0f</span></span><span class="ce">; [24]:</span></span>
<span class="l"><a class="anc" name="a701" href="#a701">[a701]</a><span class="cd"><span class="i">db</span> <span class="o">$17</span></span><span class="ce">; [25]:</span></span>
<span class="l"><a class="anc" name="a702" href="#a702">[a702]</a><span class="cd"><span class="i">db</span> <span class="o">$26</span></span><span class="ce">; [26]:</span></span>
<span class="l"><a class="anc" name="a703" href="#a703">[a703]</a><span class="cd"><span class="i">db</span> <span class="o">$30</span></span><span class="ce">; [27]:</span></span>
<span class="l"><a class="anc" name="a704" href="#a704">[a704]</a><span class="cd"><span class="i">db</span> <span class="o">$0f</span></span><span class="ce">; [28]:</span></span>
<span class="l"><a class="anc" name="a705" href="#a705">[a705]</a><span class="cd"><span class="i">db</span> <span class="o">$17</span></span><span class="ce">; [29]:</span></span>
<span class="l"><a class="anc" name="a706" href="#a706">[a706]</a><span class="cd"><span class="i">db</span> <span class="o">$26</span></span><span class="ce">; [30]:</span></span>
<span class="l"><a class="anc" name="a707" href="#a707">[a707]</a><span class="cd"><span class="i">db</span> <span class="o">$30</span></span><span class="ce">; [31]:</span></span>
<span class="l"></span>
</pre><pre><a name="SplashAnimation_Intro_SomethingA708"></a><div class="cp">;============================================================================
; TODO: Document SplashAnimation_Intro_SomethingA708
;
; INPUTS:
;     None.
;
; OUTPUTS:
;     TODO
;
; XREFS:
;     <a href="#SplashAnimation_RunIntro">SplashAnimation_RunIntro</a>
;============================================================================
</div><span class="l"><a class="anc" name="a708" href="#a708">[a708]</a><a href="#SplashAnimation_Intro_SomethingA708" class="la">SplashAnimation_Intro_SomethingA708:</a><span class="ce">; [$a708]</span></span>
<span class="l"><a class="anc" name="a708" href="#a708">[a708]</a><span class="cd"><span class="i">INC</span> <span class="o">a:<a href="RAM.html#SplashAnimation_PaletteStage">SplashAnimation_PaletteStage</a></span></span></span>
<span class="l"><a class="anc" name="a70b" href="#a70b">[a70b]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#SplashAnimation_PaletteStage">SplashAnimation_PaletteStage</a></span></span></span>
<span class="l"><a class="anc" name="a70e" href="#a70e">[a70e]</a><span class="cd"><span class="i">AND</span> <span class="o">#$07</span></span></span>
<span class="l"><a class="anc" name="a710" href="#a710">[a710]</a><span class="cd"><span class="i">BNE</span> <span class="o"><a href="#@LAB_PRG12__a727">@LAB_PRG12__a727</a></span></span></span>
<span class="l"><a class="anc" name="a712" href="#a712">[a712]</a><span class="cd"><span class="i">LDY</span> <span class="o">#$1f</span></span></span>
<span class="l"></span>
<a name=":a714:@LAB_PRG12__a714"></a><span class="l"><a class="anc" name="a714" href="#a714">[a714]</a><a href="#:a714:@LAB_PRG12__a714" class="lla">@LAB_PRG12__a714:</a><span class="ce">; [$a714]</span></span>
<span class="l"><a class="anc" name="a714" href="#a714">[a714]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="RAM.html#Screen_PaletteData">Screen_PaletteData</a>,Y</span></span></span>
<span class="l"><a class="anc" name="a717" href="#a717">[a717]</a><span class="cd"><span class="i">SEC</span></span></span>
<span class="l"><a class="anc" name="a718" href="#a718">[a718]</a><span class="cd"><span class="i">SBC</span> <span class="o">#$10</span></span></span>
<span class="l"><a class="anc" name="a71a" href="#a71a">[a71a]</a><span class="cd"><span class="i">BPL</span> <span class="o"><a href="#@LAB_PRG12__a71e">@LAB_PRG12__a71e</a></span></span></span>
<span class="l"><a class="anc" name="a71c" href="#a71c">[a71c]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$0f</span></span></span>
<span class="l"></span>
<a name=":a71e:@LAB_PRG12__a71e"></a><span class="l"><a class="anc" name="a71e" href="#a71e">[a71e]</a><a href="#:a71e:@LAB_PRG12__a71e" class="lla">@LAB_PRG12__a71e:</a><span class="ce">; [$a71e]</span></span>
<span class="l"><a class="anc" name="a71e" href="#a71e">[a71e]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Screen_PaletteData">Screen_PaletteData</a>,Y</span></span></span>
<span class="l"><a class="anc" name="a721" href="#a721">[a721]</a><span class="cd"><span class="i">DEY</span></span></span>
<span class="l"><a class="anc" name="a722" href="#a722">[a722]</a><span class="cd"><span class="i">BPL</span> <span class="o"><a href="#@LAB_PRG12__a714">@LAB_PRG12__a714</a></span></span></span>
<span class="l"><a class="anc" name="a724" href="#a724">[a724]</a><span class="cd"><span class="i">JMP</span> <span class="o">$d090</span></span></span>
<span class="l"></span>
<a name=":a727:@LAB_PRG12__a727"></a><span class="l"><a class="anc" name="a727" href="#a727">[a727]</a><a href="#:a727:@LAB_PRG12__a727" class="lla">@LAB_PRG12__a727:</a><span class="ce">; [$a727]</span></span>
<span class="l"><a class="anc" name="a727" href="#a727">[a727]</a><span class="cd"><span class="i">RTS</span></span></span>
<span class="l"></span>
<a name="SPLASHANIM_CHR_L"></a><div class="c">;
; XREFS:
;     <a href="#SplashAnimation_DrawScenery">SplashAnimation_DrawScenery</a>
;
</div><span class="l"><a class="anc" name="a728" href="#a728">[a728]</a><a href="#SPLASHANIM_CHR_L" class="la">SPLASHANIM_CHR_L:</a><span class="ce">; [$a728]</span></span>
<span class="l"><a class="anc" name="a728" href="#a728">[a728]</a><span class="cd"><span class="i">db</span> <span class="o">$a0</span></span><span class="ce">; [0]: Intro</span></span>
<span class="l"><a class="anc" name="a729" href="#a729">[a729]</a><span class="cd"><span class="i">db</span> <span class="o">$a0</span></span><span class="ce">; [1]: Outro</span></span>
<span class="l"></span>
<a name="SPLASHANIM_CHR_U"></a><div class="c">;
; XREFS:
;     <a href="#SplashAnimation_DrawScenery">SplashAnimation_DrawScenery</a>
;
</div><span class="l"><a class="anc" name="a72a" href="#a72a">[a72a]</a><a href="#SPLASHANIM_CHR_U" class="la">SPLASHANIM_CHR_U:</a><span class="ce">; [$a72a]</span></span>
<span class="l"><a class="anc" name="a72a" href="#a72a">[a72a]</a><span class="cd"><span class="i">db</span> <span class="o">$ac</span></span><span class="ce">; [0]: Intro</span></span>
<span class="l"><a class="anc" name="a72b" href="#a72b">[a72b]</a><span class="cd"><span class="i">db</span> <span class="o">$b0</span></span><span class="ce">; [1]: Outro</span></span>
<span class="l"></span>
<a name="SPLASHANIM_PALETTE_L"></a><div class="c">;
; XREFS:
;     <a href="#SplashAnimation_DrawScenery">SplashAnimation_DrawScenery</a>
;
</div><span class="l"><a class="anc" name="a72c" href="#a72c">[a72c]</a><a href="#SPLASHANIM_PALETTE_L" class="la">SPLASHANIM_PALETTE_L:</a><span class="ce">; [$a72c]</span></span>
<span class="l"><a class="anc" name="a72c" href="#a72c">[a72c]</a><span class="cd"><span class="i">db</span> <span class="o">$c8</span></span><span class="ce">; [0]: Intro</span></span>
<span class="l"><a class="anc" name="a72d" href="#a72d">[a72d]</a><span class="cd"><span class="i">db</span> <span class="o">$e8</span></span><span class="ce">; [1]: Outro</span></span>
<span class="l"></span>
<a name="SPLASHANIM_PALETTE_U"></a><div class="c">;
; XREFS:
;     <a href="#SplashAnimation_DrawScenery">SplashAnimation_DrawScenery</a>
;
</div><span class="l"><a class="anc" name="a72e" href="#a72e">[a72e]</a><a href="#SPLASHANIM_PALETTE_U" class="la">SPLASHANIM_PALETTE_U:</a><span class="ce">; [$a72e]</span></span>
<span class="l"><a class="anc" name="a72e" href="#a72e">[a72e]</a><span class="cd"><span class="i">db</span> <span class="o">$a6</span></span><span class="ce">; [0]: Intro</span></span>
<span class="l"><a class="anc" name="a72f" href="#a72f">[a72f]</a><span class="cd"><span class="i">db</span> <span class="o">$a6</span></span><span class="ce">; [1]: Outro</span></span>
<span class="l"></span>
</pre><pre><a name="SplashAnimation_DrawScenery"></a><div class="cp">;============================================================================
; TODO: Document SplashAnimation_DrawScenery
;
; INPUTS:
;     A
;
; OUTPUTS:
;     TODO
;
; XREFS:
;     <a href="#SplashAnimation_RunIntro">SplashAnimation_RunIntro</a>
;     <a href="#SplashAnimation_RunOutro">SplashAnimation_RunOutro</a>
;============================================================================
</div><span class="l"><a class="anc" name="a730" href="#a730">[a730]</a><a href="#SplashAnimation_DrawScenery" class="la">SplashAnimation_DrawScenery:</a><span class="ce">; [$a730]</span></span>
<span class="l"><a class="anc" name="a730" href="#a730">[a730]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#SplashAnimation_SceneIndex">SplashAnimation_SceneIndex</a></span></span></span>
<span class="l"><a class="anc" name="a733" href="#a733">[a733]</a><span class="cd"><span class="i">JSR</span> <span class="o">$caf7</span></span></span>
<span class="l"><a class="anc" name="a736" href="#a736">[a736]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$a0</span></span></span>
<span class="l"><a class="anc" name="a738" href="#a738">[a738]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#IScriptOrCHRAddr">IScriptOrCHRAddr</a></span></span></span>
<span class="l"><a class="anc" name="a73a" href="#a73a">[a73a]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$9b</span></span></span>
<span class="l"><a class="anc" name="a73c" href="#a73c">[a73c]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#IScriptOrCHRAddr_U">IScriptOrCHRAddr_U</a></span></span></span>
<span class="l"><a class="anc" name="a73e" href="#a73e">[a73e]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$00</span></span></span>
<span class="l"><a class="anc" name="a740" href="#a740">[a740]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#PPU_TargetAddr">PPU_TargetAddr</a></span></span></span>
<span class="l"><a class="anc" name="a742" href="#a742">[a742]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$00</span></span></span>
<span class="l"><a class="anc" name="a744" href="#a744">[a744]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#PPU_TargetAddr_U">PPU_TargetAddr_U</a></span></span></span>
<span class="l"><a class="anc" name="a746" href="#a746">[a746]</a><span class="cd"><span class="i">LDX</span> <span class="o">#$0a</span></span></span>
<span class="l"><a class="anc" name="a748" href="#a748">[a748]</a><span class="cd"><span class="i">LDY</span> <span class="o">#$90</span></span></span>
<span class="l"><a class="anc" name="a74a" href="#a74a">[a74a]</a><span class="cd"><span class="i">JSR</span> <span class="o">$f89e</span></span></span>
<span class="l"><a class="anc" name="a74d" href="#a74d">[a74d]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$a0</span></span></span>
<span class="l"><a class="anc" name="a74f" href="#a74f">[a74f]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#IScriptOrCHRAddr">IScriptOrCHRAddr</a></span></span></span>
<span class="l"><a class="anc" name="a751" href="#a751">[a751]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$a4</span></span></span>
<span class="l"><a class="anc" name="a753" href="#a753">[a753]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#IScriptOrCHRAddr_U">IScriptOrCHRAddr_U</a></span></span></span>
<span class="l"><a class="anc" name="a755" href="#a755">[a755]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$00</span></span></span>
<span class="l"><a class="anc" name="a757" href="#a757">[a757]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#PPU_TargetAddr">PPU_TargetAddr</a></span></span></span>
<span class="l"><a class="anc" name="a759" href="#a759">[a759]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$18</span></span></span>
<span class="l"><a class="anc" name="a75b" href="#a75b">[a75b]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#PPU_TargetAddr_U">PPU_TargetAddr_U</a></span></span></span>
<span class="l"><a class="anc" name="a75d" href="#a75d">[a75d]</a><span class="cd"><span class="i">LDX</span> <span class="o">#$0a</span></span></span>
<span class="l"><a class="anc" name="a75f" href="#a75f">[a75f]</a><span class="cd"><span class="i">LDY</span> <span class="o">#$80</span></span></span>
<span class="l"><a class="anc" name="a761" href="#a761">[a761]</a><span class="cd"><span class="i">JSR</span> <span class="o">$f89e</span></span></span>
<span class="l"><a class="anc" name="a764" href="#a764">[a764]</a><span class="cd"><span class="i">LDX</span> <span class="o">a:<a href="RAM.html#SplashAnimation_SceneIndex">SplashAnimation_SceneIndex</a></span></span></span>
<span class="l"><a class="anc" name="a767" href="#a767">[a767]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="#SPLASHANIM_CHR_L">SPLASHANIM_CHR_L</a>,X</span></span></span>
<span class="l"><a class="anc" name="a76a" href="#a76a">[a76a]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#IScriptOrCHRAddr">IScriptOrCHRAddr</a></span></span></span>
<span class="l"><a class="anc" name="a76c" href="#a76c">[a76c]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="#SPLASHANIM_CHR_U">SPLASHANIM_CHR_U</a>,X</span></span></span>
<span class="l"><a class="anc" name="a76f" href="#a76f">[a76f]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#IScriptOrCHRAddr_U">IScriptOrCHRAddr_U</a></span></span></span>
<span class="l"><a class="anc" name="a771" href="#a771">[a771]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$20</span></span></span>
<span class="l"><a class="anc" name="a773" href="#a773">[a773]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#PPU_TargetAddr_U">PPU_TargetAddr_U</a></span></span></span>
<span class="l"><a class="anc" name="a775" href="#a775">[a775]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$00</span></span></span>
<span class="l"><a class="anc" name="a777" href="#a777">[a777]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#PPU_TargetAddr">PPU_TargetAddr</a></span></span></span>
<span class="l"><a class="anc" name="a779" href="#a779">[a779]</a><span class="cd"><span class="i">LDX</span> <span class="o">#$0a</span></span></span>
<span class="l"><a class="anc" name="a77b" href="#a77b">[a77b]</a><span class="cd"><span class="i">LDY</span> <span class="o">#$40</span></span></span>
<span class="l"><a class="anc" name="a77d" href="#a77d">[a77d]</a><span class="cd"><span class="i">JSR</span> <span class="o">$f89e</span></span></span>
<span class="l"><a class="anc" name="a780" href="#a780">[a780]</a><span class="cd"><span class="i">LDX</span> <span class="o">a:<a href="RAM.html#SplashAnimation_SceneIndex">SplashAnimation_SceneIndex</a></span></span></span>
<span class="l"><a class="anc" name="a783" href="#a783">[a783]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="#SPLASHANIM_PALETTE_L">SPLASHANIM_PALETTE_L</a>,X</span></span></span>
<span class="l"><a class="anc" name="a786" href="#a786">[a786]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Temp_Int24">Temp_Int24</a></span></span></span>
<span class="l"><a class="anc" name="a788" href="#a788">[a788]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="#SPLASHANIM_PALETTE_U">SPLASHANIM_PALETTE_U</a>,X</span></span></span>
<span class="l"><a class="anc" name="a78b" href="#a78b">[a78b]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Temp_Int24_M">Temp_Int24_M</a></span></span></span>
<span class="l"><a class="anc" name="a78d" href="#a78d">[a78d]</a><span class="cd"><span class="i">LDY</span> <span class="o">#$1f</span></span></span>
<span class="l"></span>
<a name=":a78f:@_paletteLoop"></a><span class="l"><a class="anc" name="a78f" href="#a78f">[a78f]</a><a href="#:a78f:@_paletteLoop" class="lla">@_paletteLoop:</a><span class="ce">; [$a78f]</span></span>
<span class="l"><a class="anc" name="a78f" href="#a78f">[a78f]</a><span class="cd"><span class="i">LDA</span> <span class="o">(<a href="RAM.html#Temp_Int24">Temp_Int24</a>),Y</span></span></span>
<span class="l"><a class="anc" name="a791" href="#a791">[a791]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Screen_PaletteData">Screen_PaletteData</a>,Y</span></span></span>
<span class="l"><a class="anc" name="a794" href="#a794">[a794]</a><span class="cd"><span class="i">DEY</span></span></span>
<span class="l"><a class="anc" name="a795" href="#a795">[a795]</a><span class="cd"><span class="i">BPL</span> <span class="o"><a href="#@_paletteLoop">@_paletteLoop</a></span></span></span>
<span class="l"><a class="anc" name="a797" href="#a797">[a797]</a><span class="cd"><span class="i">JMP</span> <span class="o">$d090</span></span></span>
<span class="l"></span>
</pre><pre><a name="SplashAnimation_RunIntro"></a><div class="cp">;============================================================================
; TODO: Document SplashAnimation_RunIntro
;
; INPUTS:
;     None.
;
; OUTPUTS:
;     TODO
;
; XREFS:
;     <a href="PRG15_MIRROR.html#Game_ShowStartScreen">Game_ShowStartScreen</a>
;============================================================================
</div><span class="l"><a class="anc" name="a79a" href="#a79a">[a79a]</a><a href="#SplashAnimation_RunIntro" class="la">SplashAnimation_RunIntro:</a><span class="ce">; [$a79a]</span></span>
<span class="l"><a class="anc" name="a79a" href="#a79a">[a79a]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$00</span></span></span>
<span class="l"><a class="anc" name="a79c" href="#a79c">[a79c]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#SplashAnimation_DrawScenery">SplashAnimation_DrawScenery</a></span></span></span>
<span class="l"><a class="anc" name="a79f" href="#a79f">[a79f]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#Maybe_SplashAnimation_InitIntroState">Maybe_SplashAnimation_InitIntroState</a></span></span></span>
<span class="l"><a class="anc" name="a7a2" href="#a7a2">[a7a2]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$00</span></span></span>
<span class="l"><a class="anc" name="a7a4" href="#a7a4">[a7a4]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#SplashAnimation_PaletteStage">SplashAnimation_PaletteStage</a></span></span></span>
<span class="l"><a class="anc" name="a7a7" href="#a7a7">[a7a7]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$00</span></span></span>
<span class="l"><a class="anc" name="a7a9" href="#a7a9">[a7a9]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#CurrentMusic">CurrentMusic</a></span></span></span>
<span class="l"><a class="anc" name="a7ab" href="#a7ab">[a7ab]</a><span class="cd"><span class="i">JSR</span> <span class="o">$cb27</span></span></span>
<span class="l"></span>
<a name=":a7ae:@LAB_PRG12__a7ae"></a><span class="l"><a class="anc" name="a7ae" href="#a7ae">[a7ae]</a><a href="#:a7ae:@LAB_PRG12__a7ae" class="lla">@LAB_PRG12__a7ae:</a><span class="ce">; [$a7ae]</span></span>
<span class="l"><a class="anc" name="a7ae" href="#a7ae">[a7ae]</a><span class="cd"><span class="i">JSR</span> <span class="o">$ca25</span></span></span>
<span class="l"><a class="anc" name="a7b1" href="#a7b1">[a7b1]</a><span class="cd"><span class="i">JSR</span> <span class="o">$cb4f</span></span></span>
<span class="l"><a class="anc" name="a7b4" href="#a7b4">[a7b4]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#SplashAnimation_SomethingUpdateState">SplashAnimation_SomethingUpdateState</a></span></span></span>
<span class="l"><a class="anc" name="a7b7" href="#a7b7">[a7b7]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#SplashAnimation_Maybe_CalcPlayerAnimState">SplashAnimation_Maybe_CalcPlayerAnimState</a></span></span></span>
<span class="l"><a class="anc" name="a7ba" href="#a7ba">[a7ba]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#SplashAnimation_Maybe_AnimPlayerStep">SplashAnimation_Maybe_AnimPlayerStep</a></span></span></span>
<span class="l"><a class="anc" name="a7bd" href="#a7bd">[a7bd]</a><span class="cd"><span class="i">LDX</span> <span class="o">a:<a href="RAM.html#IntroAnimation_PlayerSizeCounter">IntroAnimation_PlayerSizeCounter</a></span></span></span>
<span class="l"><a class="anc" name="a7c0" href="#a7c0">[a7c0]</a><span class="cd"><span class="i">CPX</span> <span class="o">#$04</span></span></span>
<span class="l"><a class="anc" name="a7c2" href="#a7c2">[a7c2]</a><span class="cd"><span class="i">BNE</span> <span class="o"><a href="#@LAB_PRG12__a7ae">@LAB_PRG12__a7ae</a></span></span></span>
<span class="l"><a class="anc" name="a7c4" href="#a7c4">[a7c4]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#SplashAnimation_Intro_SomethingA708">SplashAnimation_Intro_SomethingA708</a></span></span></span>
<span class="l"><a class="anc" name="a7c7" href="#a7c7">[a7c7]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#SplashAnimation_PaletteStage">SplashAnimation_PaletteStage</a></span></span></span>
<span class="l"><a class="anc" name="a7ca" href="#a7ca">[a7ca]</a><span class="cd"><span class="i">CMP</span> <span class="o">#$20</span></span></span>
<span class="l"><a class="anc" name="a7cc" href="#a7cc">[a7cc]</a><span class="cd"><span class="i">BNE</span> <span class="o"><a href="#@LAB_PRG12__a7ae">@LAB_PRG12__a7ae</a></span></span></span>
<span class="l"><a class="anc" name="a7ce" href="#a7ce">[a7ce]</a><span class="cd"><span class="i">RTS</span></span></span>
<span class="l"></span>
</pre><pre><a name="SplashAnimation_Maybe_CalcPlayerAnimState"></a><div class="cp">;============================================================================
; TODO: Document SplashAnimation_Maybe_CalcPlayerAnimState
;
; INPUTS:
;     A
;
; OUTPUTS:
;     TODO
;
; XREFS:
;     <a href="#SplashAnimation_RunIntro">SplashAnimation_RunIntro</a>
;============================================================================
</div><span class="l"><a class="anc" name="a7cf" href="#a7cf">[a7cf]</a><a href="#SplashAnimation_Maybe_CalcPlayerAnimState" class="la">SplashAnimation_Maybe_CalcPlayerAnimState:</a><span class="ce">; [$a7cf]</span></span>
<span class="l"><a class="anc" name="a7cf" href="#a7cf">[a7cf]</a><span class="cd"><span class="i">LDY</span> <span class="o">#$07</span></span></span>
<span class="l"><a class="anc" name="a7d1" href="#a7d1">[a7d1]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#SplashAnimation_Maybe_NextAnimState1">SplashAnimation_Maybe_NextAnimState1</a></span></span></span>
<span class="l"><a class="anc" name="a7d4" href="#a7d4">[a7d4]</a><span class="cd"><span class="i">LDY</span> <span class="o">#$07</span></span></span>
<span class="l"><a class="anc" name="a7d6" href="#a7d6">[a7d6]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#SplashAnimation_Maybe_NextAnimState2">SplashAnimation_Maybe_NextAnimState2</a></span></span></span>
<span class="l"><a class="anc" name="a7d9" href="#a7d9">[a7d9]</a><span class="cd"><span class="i">LDX</span> <span class="o">a:<a href="RAM.html#IntroAnimation_PlayerSizeCounter">IntroAnimation_PlayerSizeCounter</a></span></span></span>
<span class="l"><a class="anc" name="a7dc" href="#a7dc">[a7dc]</a><span class="cd"><span class="i">CMP</span> <span class="o">$a859,X</span></span></span>
<span class="l"><a class="anc" name="a7df" href="#a7df">[a7df]</a><span class="cd"><span class="i">BCS</span> <span class="o"><a href="#RETURN_A7F0">RETURN_A7F0</a></span></span></span>
<span class="l"><a class="anc" name="a7e1" href="#a7e1">[a7e1]</a><span class="cd"><span class="i">INC</span> <span class="o">a:<a href="RAM.html#IntroAnimation_PlayerSizeCounter">IntroAnimation_PlayerSizeCounter</a></span></span></span>
<span class="l"><a class="anc" name="a7e4" href="#a7e4">[a7e4]</a><span class="cd"><span class="i">LDA</span> <span class="o">$a85e,X</span></span></span>
<span class="l"><a class="anc" name="a7e7" href="#a7e7">[a7e7]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#SplashAnimation_0692">SplashAnimation_0692</a></span></span></span>
<span class="l"><a class="anc" name="a7ea" href="#a7ea">[a7ea]</a><span class="cd"><span class="i">LDA</span> <span class="o">$a862,X</span></span></span>
<span class="l"><a class="anc" name="a7ed" href="#a7ed">[a7ed]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#SplashAnimation_0693">SplashAnimation_0693</a></span></span></span>
<span class="l"></span>
<a name="RETURN_A7F0"></a><div class="c">;
; XREFS:
;     <a href="#SplashAnimation_Maybe_CalcPlayerAnimSize">SplashAnimation_Maybe_CalcPlayerAnimSize</a>
;     <a href="#SplashAnimation_Maybe_CalcPlayerAnimState">SplashAnimation_Maybe_CalcPlayerAnimState</a>
;
</div><span class="l"><a class="anc" name="a7f0" href="#a7f0">[a7f0]</a><a href="#RETURN_A7F0" class="la">RETURN_A7F0:</a><span class="ce">; [$a7f0]</span></span>
<span class="l"><a class="anc" name="a7f0" href="#a7f0">[a7f0]</a><span class="cd"><span class="i">RTS</span></span></span>
<span class="l"></span>
</pre><pre><a name="SplashAnimation_Maybe_CalcPlayerAnimSize"></a><div class="cp">;============================================================================
; TODO: Document SplashAnimation_Maybe_CalcPlayerAnimSize
;
; INPUTS:
;     A
;
; OUTPUTS:
;     TODO
;
; XREFS:
;     <a href="#SplashAnimation_RunOutro">SplashAnimation_RunOutro</a>
;============================================================================
</div><span class="l"><a class="anc" name="a7f1" href="#a7f1">[a7f1]</a><a href="#SplashAnimation_Maybe_CalcPlayerAnimSize" class="la">SplashAnimation_Maybe_CalcPlayerAnimSize:</a><span class="ce">; [$a7f1]</span></span>
<span class="l"><a class="anc" name="a7f1" href="#a7f1">[a7f1]</a><span class="cd"><span class="i">LDY</span> <span class="o">#$07</span></span></span>
<span class="l"><a class="anc" name="a7f3" href="#a7f3">[a7f3]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#SplashAnimation_Maybe_NextAnimState1">SplashAnimation_Maybe_NextAnimState1</a></span></span></span>
<span class="l"><a class="anc" name="a7f6" href="#a7f6">[a7f6]</a><span class="cd"><span class="i">LDY</span> <span class="o">#$07</span></span></span>
<span class="l"><a class="anc" name="a7f8" href="#a7f8">[a7f8]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#SplashAnimation_Maybe_NextAnimState2">SplashAnimation_Maybe_NextAnimState2</a></span></span></span>
<span class="l"><a class="anc" name="a7fb" href="#a7fb">[a7fb]</a><span class="cd"><span class="i">LDX</span> <span class="o">a:<a href="RAM.html#IntroAnimation_PlayerSizeCounter">IntroAnimation_PlayerSizeCounter</a></span></span></span>
<span class="l"><a class="anc" name="a7fe" href="#a7fe">[a7fe]</a><span class="cd"><span class="i">CMP</span> <span class="o">$a866,X</span></span></span>
<span class="l"><a class="anc" name="a801" href="#a801">[a801]</a><span class="cd"><span class="i">BCC</span> <span class="o"><a href="#RETURN_A7F0">RETURN_A7F0</a></span></span></span>
<span class="l"><a class="anc" name="a803" href="#a803">[a803]</a><span class="cd"><span class="i">INC</span> <span class="o">a:<a href="RAM.html#IntroAnimation_PlayerSizeCounter">IntroAnimation_PlayerSizeCounter</a></span></span></span>
<span class="l"><a class="anc" name="a806" href="#a806">[a806]</a><span class="cd"><span class="i">LDA</span> <span class="o">$a86a,X</span></span></span>
<span class="l"><a class="anc" name="a809" href="#a809">[a809]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#SplashAnimation_0692">SplashAnimation_0692</a></span></span></span>
<span class="l"><a class="anc" name="a80c" href="#a80c">[a80c]</a><span class="cd"><span class="i">LDA</span> <span class="o">$a86e,X</span></span></span>
<span class="l"><a class="anc" name="a80f" href="#a80f">[a80f]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#SplashAnimation_0693">SplashAnimation_0693</a></span></span></span>
<span class="l"><a class="anc" name="a812" href="#a812">[a812]</a><span class="cd"><span class="i">RTS</span></span></span>
<span class="l"></span>
</pre><pre><a name="Maybe_SplashAnimation_InitIntroState"></a><div class="cp">;============================================================================
; TODO: Document Maybe_SplashAnimation_InitIntroState
;
; INPUTS:
;     None.
;
; OUTPUTS:
;     TODO
;
; XREFS:
;     <a href="#SplashAnimation_RunIntro">SplashAnimation_RunIntro</a>
;============================================================================
</div><span class="l"><a class="anc" name="a813" href="#a813">[a813]</a><a href="#Maybe_SplashAnimation_InitIntroState" class="la">Maybe_SplashAnimation_InitIntroState:</a><span class="ce">; [$a813]</span></span>
<span class="l"><a class="anc" name="a813" href="#a813">[a813]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$18</span></span></span>
<span class="l"><a class="anc" name="a815" href="#a815">[a815]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#SplashAnimation_068e">SplashAnimation_068e</a></span></span></span>
<span class="l"><a class="anc" name="a818" href="#a818">[a818]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$ff</span></span></span>
<span class="l"><a class="anc" name="a81a" href="#a81a">[a81a]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#SplashAnimation_068f">SplashAnimation_068f</a></span></span></span>
<span class="l"><a class="anc" name="a81d" href="#a81d">[a81d]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$00</span></span></span>
<span class="l"><a class="anc" name="a81f" href="#a81f">[a81f]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#SplashAnimation_068c">SplashAnimation_068c</a></span></span></span>
<span class="l"><a class="anc" name="a822" href="#a822">[a822]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#IntroAnimation_PlayerSizeCounter">IntroAnimation_PlayerSizeCounter</a></span></span></span>
<span class="l"><a class="anc" name="a825" href="#a825">[a825]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#SplashAnimation_0690">SplashAnimation_0690</a></span></span></span>
<span class="l"><a class="anc" name="a828" href="#a828">[a828]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#SplashAnimation_0691">SplashAnimation_0691</a></span></span></span>
<span class="l"><a class="anc" name="a82b" href="#a82b">[a82b]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$20</span></span></span>
<span class="l"><a class="anc" name="a82d" href="#a82d">[a82d]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#SplashAnimation_0692">SplashAnimation_0692</a></span></span></span>
<span class="l"><a class="anc" name="a830" href="#a830">[a830]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$e0</span></span></span>
<span class="l"><a class="anc" name="a832" href="#a832">[a832]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#SplashAnimation_0693">SplashAnimation_0693</a></span></span></span>
<span class="l"><a class="anc" name="a835" href="#a835">[a835]</a><span class="cd"><span class="i">RTS</span></span></span>
<span class="l"></span>
</pre><pre><a name="Maybe_SplashAnimation_InitOutroState"></a><div class="cp">;============================================================================
; TODO: Document Maybe_SplashAnimation_InitOutroState
;
; INPUTS:
;     None.
;
; OUTPUTS:
;     TODO
;
; XREFS:
;     <a href="#SplashAnimation_RunOutro">SplashAnimation_RunOutro</a>
;============================================================================
</div><span class="l"><a class="anc" name="a836" href="#a836">[a836]</a><a href="#Maybe_SplashAnimation_InitOutroState" class="la">Maybe_SplashAnimation_InitOutroState:</a><span class="ce">; [$a836]</span></span>
<span class="l"><a class="anc" name="a836" href="#a836">[a836]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$70</span></span></span>
<span class="l"><a class="anc" name="a838" href="#a838">[a838]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#SplashAnimation_068e">SplashAnimation_068e</a></span></span></span>
<span class="l"><a class="anc" name="a83b" href="#a83b">[a83b]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$ae</span></span></span>
<span class="l"><a class="anc" name="a83d" href="#a83d">[a83d]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#SplashAnimation_068f">SplashAnimation_068f</a></span></span></span>
<span class="l"><a class="anc" name="a840" href="#a840">[a840]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$00</span></span></span>
<span class="l"><a class="anc" name="a842" href="#a842">[a842]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#SplashAnimation_068c">SplashAnimation_068c</a></span></span></span>
<span class="l"><a class="anc" name="a845" href="#a845">[a845]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#IntroAnimation_PlayerSizeCounter">IntroAnimation_PlayerSizeCounter</a></span></span></span>
<span class="l"><a class="anc" name="a848" href="#a848">[a848]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#SplashAnimation_0690">SplashAnimation_0690</a></span></span></span>
<span class="l"><a class="anc" name="a84b" href="#a84b">[a84b]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#SplashAnimation_0691">SplashAnimation_0691</a></span></span></span>
<span class="l"><a class="anc" name="a84e" href="#a84e">[a84e]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$fd</span></span></span>
<span class="l"><a class="anc" name="a850" href="#a850">[a850]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#SplashAnimation_0692">SplashAnimation_0692</a></span></span></span>
<span class="l"><a class="anc" name="a853" href="#a853">[a853]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$01</span></span></span>
<span class="l"><a class="anc" name="a855" href="#a855">[a855]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#SplashAnimation_0693">SplashAnimation_0693</a></span></span></span>
<span class="l"><a class="anc" name="a858" href="#a858">[a858]</a><span class="cd"><span class="i">RTS</span></span></span>
<span class="l"></span>
<a name="BYTE_ARRAY_PRG12__a859"></a><div class="c">;
; XREFS:
;     <a href="#SplashAnimation_Maybe_CalcPlayerAnimState">SplashAnimation_Maybe_CalcPlayerAnimState</a>
;
</div><span class="l"><a class="anc" name="a859" href="#a859">[a859]</a><a href="#BYTE_ARRAY_PRG12__a859" class="la">BYTE_ARRAY_PRG12__a859:</a><span class="ce">; [$a859]</span></span>
<span class="l"><a class="anc" name="a859" href="#a859">[a859]</a><span class="cd"><span class="i">db</span> <span class="o">$cc</span></span><span class="ce">; [0]:</span></span>
<span class="l"><a class="anc" name="a85a" href="#a85a">[a85a]</a><span class="cd"><span class="i">db</span> <span class="o">$bc</span></span><span class="ce">; [1]:</span></span>
<span class="l"><a class="anc" name="a85b" href="#a85b">[a85b]</a><span class="cd"><span class="i">db</span> <span class="o">$b4</span></span><span class="ce">; [2]:</span></span>
<span class="l"><a class="anc" name="a85c" href="#a85c">[a85c]</a><span class="cd"><span class="i">db</span> <span class="o">$b0</span></span><span class="ce">; [3]:</span></span>
<span class="l"><a class="anc" name="a85d" href="#a85d">[a85d]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [4]:</span></span>
<span class="l"></span>
<a name="BYTE_ARRAY_PRG12__a85e"></a><div class="c">;
; XREFS:
;     <a href="#SplashAnimation_Maybe_CalcPlayerAnimState">SplashAnimation_Maybe_CalcPlayerAnimState</a>
;
</div><span class="l"><a class="anc" name="a85e" href="#a85e">[a85e]</a><a href="#BYTE_ARRAY_PRG12__a85e" class="la">BYTE_ARRAY_PRG12__a85e:</a><span class="ce">; [$a85e]</span></span>
<span class="l"><a class="anc" name="a85e" href="#a85e">[a85e]</a><span class="cd"><span class="i">db</span> <span class="o">$11</span></span><span class="ce">; [0]:</span></span>
<span class="l"><a class="anc" name="a85f" href="#a85f">[a85f]</a><span class="cd"><span class="i">db</span> <span class="o">$0a</span></span><span class="ce">; [1]:</span></span>
<span class="l"><a class="anc" name="a860" href="#a860">[a860]</a><span class="cd"><span class="i">db</span> <span class="o">$05</span></span><span class="ce">; [2]:</span></span>
<span class="l"><a class="anc" name="a861" href="#a861">[a861]</a><span class="cd"><span class="i">db</span> <span class="o">$03</span></span><span class="ce">; [3]:</span></span>
<span class="l"></span>
<a name="BYTE_ARRAY_PRG12__a862"></a><div class="c">;
; XREFS:
;     <a href="#SplashAnimation_Maybe_CalcPlayerAnimState">SplashAnimation_Maybe_CalcPlayerAnimState</a>
;
</div><span class="l"><a class="anc" name="a862" href="#a862">[a862]</a><a href="#BYTE_ARRAY_PRG12__a862" class="la">BYTE_ARRAY_PRG12__a862:</a><span class="ce">; [$a862]</span></span>
<span class="l"><a class="anc" name="a862" href="#a862">[a862]</a><span class="cd"><span class="i">db</span> <span class="o">$f0</span></span><span class="ce">; [0]:</span></span>
<span class="l"><a class="anc" name="a863" href="#a863">[a863]</a><span class="cd"><span class="i">db</span> <span class="o">$f8</span></span><span class="ce">; [1]:</span></span>
<span class="l"><a class="anc" name="a864" href="#a864">[a864]</a><span class="cd"><span class="i">db</span> <span class="o">$fd</span></span><span class="ce">; [2]:</span></span>
<span class="l"><a class="anc" name="a865" href="#a865">[a865]</a><span class="cd"><span class="i">db</span> <span class="o">$ff</span></span><span class="ce">; [3]:</span></span>
<span class="l"></span>
<a name="BYTE_ARRAY_PRG12__a866"></a><div class="c">;
; XREFS:
;     <a href="#SplashAnimation_Maybe_CalcPlayerAnimSize">SplashAnimation_Maybe_CalcPlayerAnimSize</a>
;
</div><span class="l"><a class="anc" name="a866" href="#a866">[a866]</a><a href="#BYTE_ARRAY_PRG12__a866" class="la">BYTE_ARRAY_PRG12__a866:</a><span class="ce">; [$a866]</span></span>
<span class="l"><a class="anc" name="a866" href="#a866">[a866]</a><span class="cd"><span class="i">db</span> <span class="o">$b0</span></span><span class="ce">; [0]:</span></span>
<span class="l"><a class="anc" name="a867" href="#a867">[a867]</a><span class="cd"><span class="i">db</span> <span class="o">$b4</span></span><span class="ce">; [1]:</span></span>
<span class="l"><a class="anc" name="a868" href="#a868">[a868]</a><span class="cd"><span class="i">db</span> <span class="o">$bc</span></span><span class="ce">; [2]:</span></span>
<span class="l"><a class="anc" name="a869" href="#a869">[a869]</a><span class="cd"><span class="i">db</span> <span class="o">$cc</span></span><span class="ce">; [3]:</span></span>
<span class="l"></span>
<a name="BYTE_ARRAY_PRG12__a86a"></a><div class="c">;
; XREFS:
;     <a href="#SplashAnimation_Maybe_CalcPlayerAnimSize">SplashAnimation_Maybe_CalcPlayerAnimSize</a>
;
</div><span class="l"><a class="anc" name="a86a" href="#a86a">[a86a]</a><a href="#BYTE_ARRAY_PRG12__a86a" class="la">BYTE_ARRAY_PRG12__a86a:</a><span class="ce">; [$a86a]</span></span>
<span class="l"><a class="anc" name="a86a" href="#a86a">[a86a]</a><span class="cd"><span class="i">db</span> <span class="o">$fb</span></span><span class="ce">; [0]:</span></span>
<span class="l"><a class="anc" name="a86b" href="#a86b">[a86b]</a><span class="cd"><span class="i">db</span> <span class="o">$f6</span></span><span class="ce">; [1]:</span></span>
<span class="l"><a class="anc" name="a86c" href="#a86c">[a86c]</a><span class="cd"><span class="i">db</span> <span class="o">$ef</span></span><span class="ce">; [2]:</span></span>
<span class="l"><a class="anc" name="a86d" href="#a86d">[a86d]</a><span class="cd"><span class="i">db</span> <span class="o">$e0</span></span><span class="ce">; [3]:</span></span>
<span class="l"></span>
<a name="BYTE_ARRAY_PRG12__a86e"></a><div class="c">;
; XREFS:
;     <a href="#SplashAnimation_Maybe_CalcPlayerAnimSize">SplashAnimation_Maybe_CalcPlayerAnimSize</a>
;
</div><span class="l"><a class="anc" name="a86e" href="#a86e">[a86e]</a><a href="#BYTE_ARRAY_PRG12__a86e" class="la">BYTE_ARRAY_PRG12__a86e:</a><span class="ce">; [$a86e]</span></span>
<span class="l"><a class="anc" name="a86e" href="#a86e">[a86e]</a><span class="cd"><span class="i">db</span> <span class="o">$03</span></span><span class="ce">; [0]:</span></span>
<span class="l"><a class="anc" name="a86f" href="#a86f">[a86f]</a><span class="cd"><span class="i">db</span> <span class="o">$08</span></span><span class="ce">; [1]:</span></span>
<span class="l"><a class="anc" name="a870" href="#a870">[a870]</a><span class="cd"><span class="i">db</span> <span class="o">$10</span></span><span class="ce">; [2]:</span></span>
<span class="l"><a class="anc" name="a871" href="#a871">[a871]</a><span class="cd"><span class="i">db</span> <span class="o">$20</span></span><span class="ce">; [3]:</span></span>
<span class="l"></span>
</pre><pre><a name="SplashAnimation_Maybe_NextAnimState1"></a><div class="cp">;============================================================================
; TODO: Document SplashAnimation_Maybe_NextAnimState1
;
; INPUTS:
;     Y
;
; OUTPUTS:
;     TODO
;
; XREFS:
;     <a href="#SplashAnimation_Maybe_CalcPlayerAnimSize">SplashAnimation_Maybe_CalcPlayerAnimSize</a>
;     <a href="#SplashAnimation_Maybe_CalcPlayerAnimState">SplashAnimation_Maybe_CalcPlayerAnimState</a>
;============================================================================
</div><span class="l"><a class="anc" name="a872" href="#a872">[a872]</a><a href="#SplashAnimation_Maybe_NextAnimState1" class="la">SplashAnimation_Maybe_NextAnimState1:</a><span class="ce">; [$a872]</span></span>
<span class="l"><a class="anc" name="a872" href="#a872">[a872]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$00</span></span></span>
<span class="l"><a class="anc" name="a874" href="#a874">[a874]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Temp_Int24">Temp_Int24</a></span></span></span>
<span class="l"><a class="anc" name="a876" href="#a876">[a876]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#SplashAnimation_0692">SplashAnimation_0692</a></span></span></span>
<span class="l"></span>
<a name=":a879:@LAB_PRG12__a879"></a><span class="l"><a class="anc" name="a879" href="#a879">[a879]</a><a href="#:a879:@LAB_PRG12__a879" class="lla">@LAB_PRG12__a879:</a><span class="ce">; [$a879]</span></span>
<span class="l"><a class="anc" name="a879" href="#a879">[a879]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Temp_Int24_M">Temp_Int24_M</a></span></span></span>
<span class="l"><a class="anc" name="a87b" href="#a87b">[a87b]</a><span class="cd"><span class="i">ROL</span> <span class="o"><a href="RAM.html#Temp_Int24_M">Temp_Int24_M</a></span></span></span>
<span class="l"><a class="anc" name="a87d" href="#a87d">[a87d]</a><span class="cd"><span class="i">ROR</span> <span class="o">A</span></span></span>
<span class="l"><a class="anc" name="a87e" href="#a87e">[a87e]</a><span class="cd"><span class="i">ROR</span> <span class="o"><a href="RAM.html#Temp_Int24">Temp_Int24</a></span></span></span>
<span class="l"><a class="anc" name="a880" href="#a880">[a880]</a><span class="cd"><span class="i">DEY</span></span></span>
<span class="l"><a class="anc" name="a881" href="#a881">[a881]</a><span class="cd"><span class="i">BNE</span> <span class="o"><a href="#@LAB_PRG12__a879">@LAB_PRG12__a879</a></span></span></span>
<span class="l"><a class="anc" name="a883" href="#a883">[a883]</a><span class="cd"><span class="i">CLC</span></span></span>
<span class="l"><a class="anc" name="a884" href="#a884">[a884]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Temp_Int24_M">Temp_Int24_M</a></span></span></span>
<span class="l"><a class="anc" name="a886" href="#a886">[a886]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="RAM.html#Temp_Int24">Temp_Int24</a></span></span></span>
<span class="l"><a class="anc" name="a888" href="#a888">[a888]</a><span class="cd"><span class="i">CLC</span></span></span>
<span class="l"><a class="anc" name="a889" href="#a889">[a889]</a><span class="cd"><span class="i">ADC</span> <span class="o">a:<a href="RAM.html#SplashAnimation_0690">SplashAnimation_0690</a></span></span></span>
<span class="l"><a class="anc" name="a88c" href="#a88c">[a88c]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#SplashAnimation_0690">SplashAnimation_0690</a></span></span></span>
<span class="l"><a class="anc" name="a88f" href="#a88f">[a88f]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="RAM.html#Temp_Int24_M">Temp_Int24_M</a></span></span></span>
<span class="l"><a class="anc" name="a891" href="#a891">[a891]</a><span class="cd"><span class="i">ADC</span> <span class="o">a:<a href="RAM.html#SplashAnimation_068e">SplashAnimation_068e</a></span></span></span>
<span class="l"><a class="anc" name="a894" href="#a894">[a894]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#SplashAnimation_068e">SplashAnimation_068e</a></span></span></span>
<span class="l"><a class="anc" name="a897" href="#a897">[a897]</a><span class="cd"><span class="i">RTS</span></span></span>
<span class="l"></span>
</pre><pre><a name="SplashAnimation_Maybe_NextAnimState2"></a><div class="cp">;============================================================================
; TODO: Document SplashAnimation_Maybe_NextAnimState2
;
; INPUTS:
;     Y
;
; OUTPUTS:
;     TODO
;
; XREFS:
;     <a href="#SplashAnimation_Maybe_CalcPlayerAnimSize">SplashAnimation_Maybe_CalcPlayerAnimSize</a>
;     <a href="#SplashAnimation_Maybe_CalcPlayerAnimState">SplashAnimation_Maybe_CalcPlayerAnimState</a>
;============================================================================
</div><span class="l"><a class="anc" name="a898" href="#a898">[a898]</a><a href="#SplashAnimation_Maybe_NextAnimState2" class="la">SplashAnimation_Maybe_NextAnimState2:</a><span class="ce">; [$a898]</span></span>
<span class="l"><a class="anc" name="a898" href="#a898">[a898]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$00</span></span></span>
<span class="l"><a class="anc" name="a89a" href="#a89a">[a89a]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Temp_Int24">Temp_Int24</a></span></span></span>
<span class="l"><a class="anc" name="a89c" href="#a89c">[a89c]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#SplashAnimation_0693">SplashAnimation_0693</a></span></span></span>
<span class="l"></span>
<a name=":a89f:@LAB_PRG12__a89f"></a><span class="l"><a class="anc" name="a89f" href="#a89f">[a89f]</a><a href="#:a89f:@LAB_PRG12__a89f" class="lla">@LAB_PRG12__a89f:</a><span class="ce">; [$a89f]</span></span>
<span class="l"><a class="anc" name="a89f" href="#a89f">[a89f]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Temp_Int24_M">Temp_Int24_M</a></span></span></span>
<span class="l"><a class="anc" name="a8a1" href="#a8a1">[a8a1]</a><span class="cd"><span class="i">ROL</span> <span class="o"><a href="RAM.html#Temp_Int24_M">Temp_Int24_M</a></span></span></span>
<span class="l"><a class="anc" name="a8a3" href="#a8a3">[a8a3]</a><span class="cd"><span class="i">ROR</span> <span class="o">A</span></span></span>
<span class="l"><a class="anc" name="a8a4" href="#a8a4">[a8a4]</a><span class="cd"><span class="i">ROR</span> <span class="o"><a href="RAM.html#Temp_Int24">Temp_Int24</a></span></span></span>
<span class="l"><a class="anc" name="a8a6" href="#a8a6">[a8a6]</a><span class="cd"><span class="i">DEY</span></span></span>
<span class="l"><a class="anc" name="a8a7" href="#a8a7">[a8a7]</a><span class="cd"><span class="i">BNE</span> <span class="o"><a href="#@LAB_PRG12__a89f">@LAB_PRG12__a89f</a></span></span></span>
<span class="l"><a class="anc" name="a8a9" href="#a8a9">[a8a9]</a><span class="cd"><span class="i">CLC</span></span></span>
<span class="l"><a class="anc" name="a8aa" href="#a8aa">[a8aa]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Temp_Int24_M">Temp_Int24_M</a></span></span></span>
<span class="l"><a class="anc" name="a8ac" href="#a8ac">[a8ac]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="RAM.html#Temp_Int24">Temp_Int24</a></span></span></span>
<span class="l"><a class="anc" name="a8ae" href="#a8ae">[a8ae]</a><span class="cd"><span class="i">CLC</span></span></span>
<span class="l"><a class="anc" name="a8af" href="#a8af">[a8af]</a><span class="cd"><span class="i">ADC</span> <span class="o">a:<a href="RAM.html#SplashAnimation_0691">SplashAnimation_0691</a></span></span></span>
<span class="l"><a class="anc" name="a8b2" href="#a8b2">[a8b2]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#SplashAnimation_0691">SplashAnimation_0691</a></span></span></span>
<span class="l"><a class="anc" name="a8b5" href="#a8b5">[a8b5]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="RAM.html#Temp_Int24_M">Temp_Int24_M</a></span></span></span>
<span class="l"><a class="anc" name="a8b7" href="#a8b7">[a8b7]</a><span class="cd"><span class="i">ADC</span> <span class="o">a:<a href="RAM.html#SplashAnimation_068f">SplashAnimation_068f</a></span></span></span>
<span class="l"><a class="anc" name="a8ba" href="#a8ba">[a8ba]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#SplashAnimation_068f">SplashAnimation_068f</a></span></span></span>
<span class="l"><a class="anc" name="a8bd" href="#a8bd">[a8bd]</a><span class="cd"><span class="i">RTS</span></span></span>
<span class="l"></span>
</pre><pre><a name="SplashAnimation_Maybe_AnimPlayerStep"></a><div class="cp">;============================================================================
; TODO: Document SplashAnimation_Maybe_AnimPlayerStep
;
; INPUTS:
;     X
;
; OUTPUTS:
;     TODO
;
; XREFS:
;     <a href="#SplashAnimation_RunIntro">SplashAnimation_RunIntro</a>
;============================================================================
</div><span class="l"><a class="anc" name="a8be" href="#a8be">[a8be]</a><a href="#SplashAnimation_Maybe_AnimPlayerStep" class="la">SplashAnimation_Maybe_AnimPlayerStep:</a><span class="ce">; [$a8be]</span></span>
<span class="l"><a class="anc" name="a8be" href="#a8be">[a8be]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#SplashAnimation_A90F">SplashAnimation_A90F</a></span></span></span>
<span class="l"><a class="anc" name="a8c1" href="#a8c1">[a8c1]</a><span class="cd"><span class="i">LDY</span> <span class="o">a:<a href="RAM.html#IntroAnimation_PlayerSizeCounter">IntroAnimation_PlayerSizeCounter</a></span></span></span>
<span class="l"><a class="anc" name="a8c4" href="#a8c4">[a8c4]</a><span class="cd"><span class="i">CPY</span> <span class="o">#$03</span></span></span>
<span class="l"><a class="anc" name="a8c6" href="#a8c6">[a8c6]</a><span class="cd"><span class="i">BCS</span> <span class="o"><a href="#@LAB_PRG12__a8d8">@LAB_PRG12__a8d8</a></span></span></span>
<span class="l"><a class="anc" name="a8c8" href="#a8c8">[a8c8]</a><span class="cd"><span class="i">AND</span> <span class="o">#$01</span></span></span>
<span class="l"><a class="anc" name="a8ca" href="#a8ca">[a8ca]</a><span class="cd"><span class="i">BNE</span> <span class="o"><a href="#@LAB_PRG12__a8d8">@LAB_PRG12__a8d8</a></span></span></span>
<span class="l"><a class="anc" name="a8cc" href="#a8cc">[a8cc]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#SplashAnimation_068c">SplashAnimation_068c</a></span></span></span>
<span class="l"><a class="anc" name="a8cf" href="#a8cf">[a8cf]</a><span class="cd"><span class="i">AND</span> <span class="o">#$0f</span></span></span>
<span class="l"><a class="anc" name="a8d1" href="#a8d1">[a8d1]</a><span class="cd"><span class="i">BNE</span> <span class="o"><a href="#@LAB_PRG12__a8d8">@LAB_PRG12__a8d8</a></span></span></span>
<span class="l"><a class="anc" name="a8d3" href="#a8d3">[a8d3]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$15</span></span></span>
<span class="l"><a class="anc" name="a8d5" href="#a8d5">[a8d5]</a><span class="cd"><span class="i">JSR</span> <span class="o">$d0e4</span></span></span>
<span class="l"></span>
<a name=":a8d8:@LAB_PRG12__a8d8"></a><span class="l"><a class="anc" name="a8d8" href="#a8d8">[a8d8]</a><a href="#:a8d8:@LAB_PRG12__a8d8" class="lla">@LAB_PRG12__a8d8:</a><span class="ce">; [$a8d8]</span></span>
<span class="l"><a class="anc" name="a8d8" href="#a8d8">[a8d8]</a><span class="cd"><span class="i">LDA</span> <span class="o">$a8de,X</span></span></span>
<span class="l"><a class="anc" name="a8db" href="#a8db">[a8db]</a><span class="cd"><span class="i">JMP</span> <span class="o"><a href="#SplashAnimation_FuncAA94">SplashAnimation_FuncAA94</a></span></span></span>
<span class="l"></span>
<a name="BYTE_ARRAY_PRG12__a8de"></a><div class="c">;
; XREFS:
;     <a href="#SplashAnimation_Maybe_AnimPlayerStep">SplashAnimation_Maybe_AnimPlayerStep</a>
;
</div><span class="l"><a class="anc" name="a8de" href="#a8de">[a8de]</a><a href="#BYTE_ARRAY_PRG12__a8de" class="la">BYTE_ARRAY_PRG12__a8de:</a><span class="ce">; [$a8de]</span></span>
<span class="l"><a class="anc" name="a8de" href="#a8de">[a8de]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [0]:</span></span>
<span class="l"><a class="anc" name="a8df" href="#a8df">[a8df]</a><span class="cd"><span class="i">db</span> <span class="o">$01</span></span><span class="ce">; [1]:</span></span>
<span class="l"><a class="anc" name="a8e0" href="#a8e0">[a8e0]</a><span class="cd"><span class="i">db</span> <span class="o">$02</span></span><span class="ce">; [2]:</span></span>
<span class="l"><a class="anc" name="a8e1" href="#a8e1">[a8e1]</a><span class="cd"><span class="i">db</span> <span class="o">$01</span></span><span class="ce">; [3]:</span></span>
<span class="l"><a class="anc" name="a8e2" href="#a8e2">[a8e2]</a><span class="cd"><span class="i">db</span> <span class="o">$03</span></span><span class="ce">; [4]:</span></span>
<span class="l"><a class="anc" name="a8e3" href="#a8e3">[a8e3]</a><span class="cd"><span class="i">db</span> <span class="o">$04</span></span><span class="ce">; [5]:</span></span>
<span class="l"><a class="anc" name="a8e4" href="#a8e4">[a8e4]</a><span class="cd"><span class="i">db</span> <span class="o">$05</span></span><span class="ce">; [6]:</span></span>
<span class="l"><a class="anc" name="a8e5" href="#a8e5">[a8e5]</a><span class="cd"><span class="i">db</span> <span class="o">$04</span></span><span class="ce">; [7]:</span></span>
<span class="l"><a class="anc" name="a8e6" href="#a8e6">[a8e6]</a><span class="cd"><span class="i">db</span> <span class="o">$06</span></span><span class="ce">; [8]:</span></span>
<span class="l"><a class="anc" name="a8e7" href="#a8e7">[a8e7]</a><span class="cd"><span class="i">db</span> <span class="o">$06</span></span><span class="ce">; [9]:</span></span>
<span class="l"><a class="anc" name="a8e8" href="#a8e8">[a8e8]</a><span class="cd"><span class="i">db</span> <span class="o">$07</span></span><span class="ce">; [10]:</span></span>
<span class="l"><a class="anc" name="a8e9" href="#a8e9">[a8e9]</a><span class="cd"><span class="i">db</span> <span class="o">$07</span></span><span class="ce">; [11]:</span></span>
<span class="l"><a class="anc" name="a8ea" href="#a8ea">[a8ea]</a><span class="cd"><span class="i">db</span> <span class="o">$08</span></span><span class="ce">; [12]:</span></span>
<span class="l"><a class="anc" name="a8eb" href="#a8eb">[a8eb]</a><span class="cd"><span class="i">db</span> <span class="o">$08</span></span><span class="ce">; [13]:</span></span>
<span class="l"><a class="anc" name="a8ec" href="#a8ec">[a8ec]</a><span class="cd"><span class="i">db</span> <span class="o">$09</span></span><span class="ce">; [14]:</span></span>
<span class="l"><a class="anc" name="a8ed" href="#a8ed">[a8ed]</a><span class="cd"><span class="i">db</span> <span class="o">$09</span></span><span class="ce">; [15]:</span></span>
<span class="l"><a class="anc" name="a8ee" href="#a8ee">[a8ee]</a><span class="cd"><span class="i">db</span> <span class="o">$0a</span></span><span class="ce">; [16]:</span></span>
<span class="l"><a class="anc" name="a8ef" href="#a8ef">[a8ef]</a><span class="cd"><span class="i">db</span> <span class="o">$0a</span></span><span class="ce">; [17]:</span></span>
<span class="l"><a class="anc" name="a8f0" href="#a8f0">[a8f0]</a><span class="cd"><span class="i">db</span> <span class="o">$0b</span></span><span class="ce">; [18]:</span></span>
<span class="l"><a class="anc" name="a8f1" href="#a8f1">[a8f1]</a><span class="cd"><span class="i">db</span> <span class="o">$0b</span></span><span class="ce">; [19]:</span></span>
<span class="l"></span>
</pre><pre><a name="SplashAnimation_OutroFuncAF82"></a><div class="cp">;============================================================================
; TODO: Document SplashAnimation_OutroFuncAF82
;
; INPUTS:
;     X
;
; OUTPUTS:
;     TODO
;
; XREFS:
;     <a href="#SplashAnimation_RunOutro">SplashAnimation_RunOutro</a>
;============================================================================
</div><span class="l"><a class="anc" name="a8f2" href="#a8f2">[a8f2]</a><a href="#SplashAnimation_OutroFuncAF82" class="la">SplashAnimation_OutroFuncAF82:</a><span class="ce">; [$a8f2]</span></span>
<span class="l"><a class="anc" name="a8f2" href="#a8f2">[a8f2]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#SplashAnimation_A90F">SplashAnimation_A90F</a></span></span></span>
<span class="l"><a class="anc" name="a8f5" href="#a8f5">[a8f5]</a><span class="cd"><span class="i">LDA</span> <span class="o">$a8fb,X</span></span></span>
<span class="l"><a class="anc" name="a8f8" href="#a8f8">[a8f8]</a><span class="cd"><span class="i">JMP</span> <span class="o"><a href="#SplashAnimation_FuncAA94">SplashAnimation_FuncAA94</a></span></span></span>
<span class="l"></span>
<a name="BYTE_ARRAY_PRG12__a8fb"></a><div class="c">;
; XREFS:
;     <a href="#SplashAnimation_OutroFuncAF82">SplashAnimation_OutroFuncAF82</a>
;
</div><span class="l"><a class="anc" name="a8fb" href="#a8fb">[a8fb]</a><a href="#BYTE_ARRAY_PRG12__a8fb" class="la">BYTE_ARRAY_PRG12__a8fb:</a><span class="ce">; [$a8fb]</span></span>
<span class="l"><a class="anc" name="a8fb" href="#a8fb">[a8fb]</a><span class="cd"><span class="i">db</span> <span class="o">$0c</span></span><span class="ce">; [0]:</span></span>
<span class="l"><a class="anc" name="a8fc" href="#a8fc">[a8fc]</a><span class="cd"><span class="i">db</span> <span class="o">$0c</span></span><span class="ce">; [1]:</span></span>
<span class="l"><a class="anc" name="a8fd" href="#a8fd">[a8fd]</a><span class="cd"><span class="i">db</span> <span class="o">$0d</span></span><span class="ce">; [2]:</span></span>
<span class="l"><a class="anc" name="a8fe" href="#a8fe">[a8fe]</a><span class="cd"><span class="i">db</span> <span class="o">$0d</span></span><span class="ce">; [3]:</span></span>
<span class="l"><a class="anc" name="a8ff" href="#a8ff">[a8ff]</a><span class="cd"><span class="i">db</span> <span class="o">$0e</span></span><span class="ce">; [4]:</span></span>
<span class="l"><a class="anc" name="a900" href="#a900">[a900]</a><span class="cd"><span class="i">db</span> <span class="o">$0e</span></span><span class="ce">; [5]:</span></span>
<span class="l"><a class="anc" name="a901" href="#a901">[a901]</a><span class="cd"><span class="i">db</span> <span class="o">$0f</span></span><span class="ce">; [6]:</span></span>
<span class="l"><a class="anc" name="a902" href="#a902">[a902]</a><span class="cd"><span class="i">db</span> <span class="o">$0f</span></span><span class="ce">; [7]:</span></span>
<span class="l"><a class="anc" name="a903" href="#a903">[a903]</a><span class="cd"><span class="i">db</span> <span class="o">$10</span></span><span class="ce">; [8]:</span></span>
<span class="l"><a class="anc" name="a904" href="#a904">[a904]</a><span class="cd"><span class="i">db</span> <span class="o">$10</span></span><span class="ce">; [9]:</span></span>
<span class="l"><a class="anc" name="a905" href="#a905">[a905]</a><span class="cd"><span class="i">db</span> <span class="o">$11</span></span><span class="ce">; [10]:</span></span>
<span class="l"><a class="anc" name="a906" href="#a906">[a906]</a><span class="cd"><span class="i">db</span> <span class="o">$11</span></span><span class="ce">; [11]:</span></span>
<span class="l"><a class="anc" name="a907" href="#a907">[a907]</a><span class="cd"><span class="i">db</span> <span class="o">$12</span></span><span class="ce">; [12]:</span></span>
<span class="l"><a class="anc" name="a908" href="#a908">[a908]</a><span class="cd"><span class="i">db</span> <span class="o">$13</span></span><span class="ce">; [13]:</span></span>
<span class="l"><a class="anc" name="a909" href="#a909">[a909]</a><span class="cd"><span class="i">db</span> <span class="o">$14</span></span><span class="ce">; [14]:</span></span>
<span class="l"><a class="anc" name="a90a" href="#a90a">[a90a]</a><span class="cd"><span class="i">db</span> <span class="o">$13</span></span><span class="ce">; [15]:</span></span>
<span class="l"><a class="anc" name="a90b" href="#a90b">[a90b]</a><span class="cd"><span class="i">db</span> <span class="o">$15</span></span><span class="ce">; [16]:</span></span>
<span class="l"><a class="anc" name="a90c" href="#a90c">[a90c]</a><span class="cd"><span class="i">db</span> <span class="o">$16</span></span><span class="ce">; [17]:</span></span>
<span class="l"><a class="anc" name="a90d" href="#a90d">[a90d]</a><span class="cd"><span class="i">db</span> <span class="o">$17</span></span><span class="ce">; [18]:</span></span>
<span class="l"><a class="anc" name="a90e" href="#a90e">[a90e]</a><span class="cd"><span class="i">db</span> <span class="o">$16</span></span><span class="ce">; [19]:</span></span>
<span class="l"></span>
</pre><pre><a name="SplashAnimation_A90F"></a><div class="cp">;============================================================================
; TODO: Document SplashAnimation_A90F
;
; INPUTS:
;     None.
;
; OUTPUTS:
;     A
;
; XREFS:
;     <a href="#SplashAnimation_Maybe_AnimPlayerStep">SplashAnimation_Maybe_AnimPlayerStep</a>
;     <a href="#SplashAnimation_OutroFuncAF82">SplashAnimation_OutroFuncAF82</a>
;============================================================================
</div><span class="l"><a class="anc" name="a90f" href="#a90f">[a90f]</a><a href="#SplashAnimation_A90F" class="la">SplashAnimation_A90F:</a><span class="ce">; [$a90f]</span></span>
<span class="l"><a class="anc" name="a90f" href="#a90f">[a90f]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#SplashAnimation_068e">SplashAnimation_068e</a></span></span></span>
<span class="l"><a class="anc" name="a912" href="#a912">[a912]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#SplashAnimation_0689">SplashAnimation_0689</a></span></span></span>
<span class="l"><a class="anc" name="a915" href="#a915">[a915]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#SplashAnimation_068f">SplashAnimation_068f</a></span></span></span>
<span class="l"><a class="anc" name="a918" href="#a918">[a918]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#SplashAnimation_068a">SplashAnimation_068a</a></span></span></span>
<span class="l"><a class="anc" name="a91b" href="#a91b">[a91b]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#SplashAnimation_068c">SplashAnimation_068c</a></span></span></span>
<span class="l"><a class="anc" name="a91e" href="#a91e">[a91e]</a><span class="cd"><span class="i">INC</span> <span class="o">a:<a href="RAM.html#SplashAnimation_068c">SplashAnimation_068c</a></span></span></span>
<span class="l"><a class="anc" name="a921" href="#a921">[a921]</a><span class="cd"><span class="i">LSR</span> <span class="o">A</span></span></span>
<span class="l"><a class="anc" name="a922" href="#a922">[a922]</a><span class="cd"><span class="i">LSR</span> <span class="o">A</span></span></span>
<span class="l"><a class="anc" name="a923" href="#a923">[a923]</a><span class="cd"><span class="i">LSR</span> <span class="o">A</span></span></span>
<span class="l"><a class="anc" name="a924" href="#a924">[a924]</a><span class="cd"><span class="i">LSR</span> <span class="o">A</span></span></span>
<span class="l"><a class="anc" name="a925" href="#a925">[a925]</a><span class="cd"><span class="i">AND</span> <span class="o">#$03</span></span></span>
<span class="l"><a class="anc" name="a927" href="#a927">[a927]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Temp_Int24">Temp_Int24</a></span></span></span>
<span class="l"><a class="anc" name="a929" href="#a929">[a929]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#IntroAnimation_PlayerSizeCounter">IntroAnimation_PlayerSizeCounter</a></span></span></span>
<span class="l"><a class="anc" name="a92c" href="#a92c">[a92c]</a><span class="cd"><span class="i">ASL</span> <span class="o">A</span></span></span>
<span class="l"><a class="anc" name="a92d" href="#a92d">[a92d]</a><span class="cd"><span class="i">ASL</span> <span class="o">A</span></span></span>
<span class="l"><a class="anc" name="a92e" href="#a92e">[a92e]</a><span class="cd"><span class="i">ORA</span> <span class="o"><a href="RAM.html#Temp_Int24">Temp_Int24</a></span></span></span>
<span class="l"><a class="anc" name="a930" href="#a930">[a930]</a><span class="cd"><span class="i">TAX</span></span></span>
<span class="l"><a class="anc" name="a931" href="#a931">[a931]</a><span class="cd"><span class="i">RTS</span></span></span>
<span class="l"></span>
</pre><pre><a name="SplashAnimation_RunOutro"></a><div class="cp">;============================================================================
; TODO: Document SplashAnimation_RunOutro
;
; INPUTS:
;     X
;
; OUTPUTS:
;     TODO
;
; XREFS:
;     <a href="#IScriptAction_FinishGame">IScriptAction_FinishGame</a>
;============================================================================
</div><span class="l"><a class="anc" name="a932" href="#a932">[a932]</a><a href="#SplashAnimation_RunOutro" class="la">SplashAnimation_RunOutro:</a><span class="ce">; [$a932]</span></span>
<span class="l"><a class="anc" name="a932" href="#a932">[a932]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$01</span></span></span>
<span class="l"><a class="anc" name="a934" href="#a934">[a934]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#SplashAnimation_DrawScenery">SplashAnimation_DrawScenery</a></span></span></span>
<span class="l"><a class="anc" name="a937" href="#a937">[a937]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#Maybe_SplashAnimation_InitOutroState">Maybe_SplashAnimation_InitOutroState</a></span></span></span>
<span class="l"><a class="anc" name="a93a" href="#a93a">[a93a]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#SplashAnimation_SomethingOutro_A99C">SplashAnimation_SomethingOutro_A99C</a></span></span></span>
<span class="l"><a class="anc" name="a93d" href="#a93d">[a93d]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$0c</span></span></span>
<span class="l"><a class="anc" name="a93f" href="#a93f">[a93f]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#CurrentMusic">CurrentMusic</a></span></span></span>
<span class="l"><a class="anc" name="a941" href="#a941">[a941]</a><span class="cd"><span class="i">JSR</span> <span class="o">$cb27</span></span></span>
<span class="l"></span>
<a name=":a944:@LAB_PRG12__a944"></a><span class="l"><a class="anc" name="a944" href="#a944">[a944]</a><a href="#:a944:@LAB_PRG12__a944" class="lla">@LAB_PRG12__a944:</a><span class="ce">; [$a944]</span></span>
<span class="l"><a class="anc" name="a944" href="#a944">[a944]</a><span class="cd"><span class="i">JSR</span> <span class="o">$ca25</span></span></span>
<span class="l"><a class="anc" name="a947" href="#a947">[a947]</a><span class="cd"><span class="i">JSR</span> <span class="o">$cb4f</span></span></span>
<span class="l"><a class="anc" name="a94a" href="#a94a">[a94a]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#SplashAnimation_SomethingUpdateState">SplashAnimation_SomethingUpdateState</a></span></span></span>
<span class="l"><a class="anc" name="a94d" href="#a94d">[a94d]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#SplashAnimation_Maybe_CalcPlayerAnimSize">SplashAnimation_Maybe_CalcPlayerAnimSize</a></span></span></span>
<span class="l"><a class="anc" name="a950" href="#a950">[a950]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#SplashAnimation_OutroFuncAF82">SplashAnimation_OutroFuncAF82</a></span></span></span>
<span class="l"><a class="anc" name="a953" href="#a953">[a953]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#SplashAnimation_SomethingOutroA9C9">SplashAnimation_SomethingOutroA9C9</a></span></span></span>
<span class="l"><a class="anc" name="a956" href="#a956">[a956]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#SplashAnimation_SomethingA9F2">SplashAnimation_SomethingA9F2</a></span></span></span>
<span class="l"><a class="anc" name="a959" href="#a959">[a959]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#SplashAnimation_UpdateOutro">SplashAnimation_UpdateOutro</a></span></span></span>
<span class="l"><a class="anc" name="a95c" href="#a95c">[a95c]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#SplashAnimation_068f">SplashAnimation_068f</a></span></span></span>
<span class="l"><a class="anc" name="a95f" href="#a95f">[a95f]</a><span class="cd"><span class="i">CMP</span> <span class="o">#$fa</span></span></span>
<span class="l"><a class="anc" name="a961" href="#a961">[a961]</a><span class="cd"><span class="i">BCC</span> <span class="o"><a href="#@LAB_PRG12__a944">@LAB_PRG12__a944</a></span></span></span>
<span class="l"></span>
<a name=":a963:@LAB_PRG12__a963"></a><span class="l"><a class="anc" name="a963" href="#a963">[a963]</a><a href="#:a963:@LAB_PRG12__a963" class="lla">@LAB_PRG12__a963:</a><span class="ce">; [$a963]</span></span>
<span class="l"><a class="anc" name="a963" href="#a963">[a963]</a><span class="cd"><span class="i">JSR</span> <span class="o">$ca25</span></span></span>
<span class="l"><a class="anc" name="a966" href="#a966">[a966]</a><span class="cd"><span class="i">JSR</span> <span class="o">$cb4f</span></span></span>
<span class="l"><a class="anc" name="a969" href="#a969">[a969]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#SplashAnimation_SomethingUpdateState">SplashAnimation_SomethingUpdateState</a></span></span></span>
<span class="l"><a class="anc" name="a96c" href="#a96c">[a96c]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#SplashAnimation_SomethingOutroA9C9">SplashAnimation_SomethingOutroA9C9</a></span></span></span>
<span class="l"><a class="anc" name="a96f" href="#a96f">[a96f]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#SplashAnimation_SomethingA9F2">SplashAnimation_SomethingA9F2</a></span></span></span>
<span class="l"><a class="anc" name="a972" href="#a972">[a972]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#SplashAnimation_UpdateOutro">SplashAnimation_UpdateOutro</a></span></span></span>
<span class="l"><a class="anc" name="a975" href="#a975">[a975]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="RAM.html#CurrentMusic">CurrentMusic</a></span></span></span>
<span class="l"><a class="anc" name="a977" href="#a977">[a977]</a><span class="cd"><span class="i">BNE</span> <span class="o"><a href="#@LAB_PRG12__a963">@LAB_PRG12__a963</a></span></span></span>
<span class="l"><a class="anc" name="a979" href="#a979">[a979]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$10</span></span></span>
<span class="l"><a class="anc" name="a97b" href="#a97b">[a97b]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#InterruptCounter">InterruptCounter</a></span></span></span>
<span class="l"></span>
<a name=":a97d:@LAB_PRG12__a97d"></a><span class="l"><a class="anc" name="a97d" href="#a97d">[a97d]</a><a href="#:a97d:@LAB_PRG12__a97d" class="lla">@LAB_PRG12__a97d:</a><span class="ce">; [$a97d]</span></span>
<span class="l"><a class="anc" name="a97d" href="#a97d">[a97d]</a><span class="cd"><span class="i">JSR</span> <span class="o">$ca25</span></span></span>
<span class="l"><a class="anc" name="a980" href="#a980">[a980]</a><span class="cd"><span class="i">JSR</span> <span class="o">$cb4f</span></span></span>
<span class="l"><a class="anc" name="a983" href="#a983">[a983]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#SplashAnimation_SomethingUpdateState">SplashAnimation_SomethingUpdateState</a></span></span></span>
<span class="l"><a class="anc" name="a986" href="#a986">[a986]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#SplashAnimation_SomethingOutroA9C9">SplashAnimation_SomethingOutroA9C9</a></span></span></span>
<span class="l"><a class="anc" name="a989" href="#a989">[a989]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#SplashAnimation_SomethingA9F2">SplashAnimation_SomethingA9F2</a></span></span></span>
<span class="l"><a class="anc" name="a98c" href="#a98c">[a98c]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#SplashAnimation_UpdateOutro">SplashAnimation_UpdateOutro</a></span></span></span>
<span class="l"><a class="anc" name="a98f" href="#a98f">[a98f]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="RAM.html#InterruptCounter">InterruptCounter</a></span></span></span>
<span class="l"><a class="anc" name="a991" href="#a991">[a991]</a><span class="cd"><span class="i">BNE</span> <span class="o"><a href="#@LAB_PRG12__a97d">@LAB_PRG12__a97d</a></span></span></span>
<span class="l"><a class="anc" name="a993" href="#a993">[a993]</a><span class="cd"><span class="i">RTS</span></span></span>
<span class="l"></span>
<a name="BYTE_ARRAY_PRG12__a994"></a><div class="c">;
; XREFS:
;     <a href="#SpashAnimation_SomethingOutro_a9a2">SpashAnimation_SomethingOutro_a9a2</a>
;
</div><span class="l"><a class="anc" name="a994" href="#a994">[a994]</a><a href="#BYTE_ARRAY_PRG12__a994" class="la">BYTE_ARRAY_PRG12__a994:</a><span class="ce">; [$a994]</span></span>
<span class="l"><a class="anc" name="a994" href="#a994">[a994]</a><span class="cd"><span class="i">db</span> <span class="o">$d8</span></span><span class="ce">; [0]:</span></span>
<span class="l"></span>
<a name="BYTE_ARRAY_PRG12__a994_1_"></a><div class="c">;
; XREFS:
;     <a href="#SpashAnimation_SomethingOutro_a9a2">SpashAnimation_SomethingOutro_a9a2</a>
;
</div><span class="l"><a class="anc" name="a995" href="#a995">[a995]</a><a href="#BYTE_ARRAY_PRG12__a994_1_" class="la">BYTE_ARRAY_PRG12__a994_1_:</a><span class="ce">; [$a995]</span></span>
<span class="l"><a class="anc" name="a995" href="#a995">[a995]</a><span class="cd"><span class="i">db</span> <span class="o">$e0</span></span><span class="ce">; [1]:</span></span>
<span class="l"></span>
<a name="BYTE_ARRAY_PRG12__a996"></a><div class="c">;
; XREFS:
;     <a href="#SpashAnimation_SomethingOutro_a9a2">SpashAnimation_SomethingOutro_a9a2</a>
;
</div><span class="l"><a class="anc" name="a996" href="#a996">[a996]</a><a href="#BYTE_ARRAY_PRG12__a996" class="la">BYTE_ARRAY_PRG12__a996:</a><span class="ce">; [$a996]</span></span>
<span class="l"><a class="anc" name="a996" href="#a996">[a996]</a><span class="cd"><span class="i">db</span> <span class="o">$c2</span></span><span class="ce">; [0]:</span></span>
<span class="l"></span>
<a name="BYTE_ARRAY_PRG12__a996_1_"></a><div class="c">;
; XREFS:
;     <a href="#SpashAnimation_SomethingOutro_a9a2">SpashAnimation_SomethingOutro_a9a2</a>
;
</div><span class="l"><a class="anc" name="a997" href="#a997">[a997]</a><a href="#BYTE_ARRAY_PRG12__a996_1_" class="la">BYTE_ARRAY_PRG12__a996_1_:</a><span class="ce">; [$a997]</span></span>
<span class="l"><a class="anc" name="a997" href="#a997">[a997]</a><span class="cd"><span class="i">db</span> <span class="o">$d0</span></span><span class="ce">; [1]:</span></span>
<span class="l"></span>
<a name="BYTE_ARRAY_PRG12__a998"></a><div class="c">;
; XREFS:
;     <a href="#SpashAnimation_SomethingOutro_a9a2">SpashAnimation_SomethingOutro_a9a2</a>
;
</div><span class="l"><a class="anc" name="a998" href="#a998">[a998]</a><a href="#BYTE_ARRAY_PRG12__a998" class="la">BYTE_ARRAY_PRG12__a998:</a><span class="ce">; [$a998]</span></span>
<span class="l"><a class="anc" name="a998" href="#a998">[a998]</a><span class="cd"><span class="i">db</span> <span class="o">$ff</span></span><span class="ce">; [0]:</span></span>
<span class="l"></span>
<a name="BYTE_ARRAY_PRG12__a998_1_"></a><div class="c">;
; XREFS:
;     <a href="#SpashAnimation_SomethingOutro_a9a2">SpashAnimation_SomethingOutro_a9a2</a>
;
</div><span class="l"><a class="anc" name="a999" href="#a999">[a999]</a><a href="#BYTE_ARRAY_PRG12__a998_1_" class="la">BYTE_ARRAY_PRG12__a998_1_:</a><span class="ce">; [$a999]</span></span>
<span class="l"><a class="anc" name="a999" href="#a999">[a999]</a><span class="cd"><span class="i">db</span> <span class="o">$ff</span></span><span class="ce">; [1]:</span></span>
<span class="l"></span>
<a name="BYTE_ARRAY_PRG12__a99a"></a><div class="c">;
; XREFS:
;     <a href="#SpashAnimation_SomethingOutro_a9a2">SpashAnimation_SomethingOutro_a9a2</a>
;
</div><span class="l"><a class="anc" name="a99a" href="#a99a">[a99a]</a><a href="#BYTE_ARRAY_PRG12__a99a" class="la">BYTE_ARRAY_PRG12__a99a:</a><span class="ce">; [$a99a]</span></span>
<span class="l"><a class="anc" name="a99a" href="#a99a">[a99a]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [0]:</span></span>
<span class="l"></span>
<a name="BYTE_ARRAY_PRG12__a99a_1_"></a><div class="c">;
; XREFS:
;     <a href="#SpashAnimation_SomethingOutro_a9a2">SpashAnimation_SomethingOutro_a9a2</a>
;
</div><span class="l"><a class="anc" name="a99b" href="#a99b">[a99b]</a><a href="#BYTE_ARRAY_PRG12__a99a_1_" class="la">BYTE_ARRAY_PRG12__a99a_1_:</a><span class="ce">; [$a99b]</span></span>
<span class="l"><a class="anc" name="a99b" href="#a99b">[a99b]</a><span class="cd"><span class="i">db</span> <span class="o">$01</span></span><span class="ce">; [1]:</span></span>
<span class="l"></span>
</pre><pre><a name="SplashAnimation_SomethingOutro_A99C"></a><div class="cp">;============================================================================
; TODO: Document SplashAnimation_SomethingOutro_A99C
;
; INPUTS:
;     None.
;
; OUTPUTS:
;     TODO
;
; XREFS:
;     <a href="#SplashAnimation_RunOutro">SplashAnimation_RunOutro</a>
;============================================================================
</div><span class="l"><a class="anc" name="a99c" href="#a99c">[a99c]</a><a href="#SplashAnimation_SomethingOutro_A99C" class="la">SplashAnimation_SomethingOutro_A99C:</a><span class="ce">; [$a99c]</span></span>
<span class="l"><a class="anc" name="a99c" href="#a99c">[a99c]</a><span class="cd"><span class="i">LDX</span> <span class="o">#$00</span></span></span>
<span class="l"><a class="anc" name="a99e" href="#a99e">[a99e]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#SpashAnimation_SomethingOutro_a9a2">SpashAnimation_SomethingOutro_a9a2</a></span></span></span>
<span class="l"><a class="anc" name="a9a1" href="#a9a1">[a9a1]</a><span class="cd"><span class="i">INX</span></span></span>
<span class="l"></span>
<div class="c">;
; v-- Fall through --v
;
</div><span class="l"></span>
</pre><pre><a name="SpashAnimation_SomethingOutro_a9a2"></a><div class="cp">;============================================================================
; TODO: Document SpashAnimation_SomethingOutro_a9a2
;
; INPUTS:
;     X
;
; OUTPUTS:
;     TODO
;
; XREFS:
;     <a href="#SplashAnimation_SomethingOutro_A99C">SplashAnimation_SomethingOutro_A99C</a>
;============================================================================
</div><span class="l"><a class="anc" name="a9a2" href="#a9a2">[a9a2]</a><a href="#SpashAnimation_SomethingOutro_a9a2" class="la">SpashAnimation_SomethingOutro_a9a2:</a><span class="ce">; [$a9a2]</span></span>
<span class="l"><a class="anc" name="a9a2" href="#a9a2">[a9a2]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$00</span></span></span>
<span class="l"><a class="anc" name="a9a4" href="#a9a4">[a9a4]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#SplashAnimation_0694">SplashAnimation_0694</a>,X</span></span></span>
<span class="l"><a class="anc" name="a9a7" href="#a9a7">[a9a7]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#SplashAnimation_0696">SplashAnimation_0696</a>,X</span></span></span>
<span class="l"><a class="anc" name="a9aa" href="#a9aa">[a9aa]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#SplashAnimation_069c">SplashAnimation_069c</a>,X</span></span></span>
<span class="l"><a class="anc" name="a9ad" href="#a9ad">[a9ad]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#SplashAnimation_069e">SplashAnimation_069e</a>,X</span></span></span>
<span class="l"><a class="anc" name="a9b0" href="#a9b0">[a9b0]</a><span class="cd"><span class="i">LDA</span> <span class="o">$a994,X</span></span></span>
<span class="l"><a class="anc" name="a9b3" href="#a9b3">[a9b3]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#SplashAnimation_0698">SplashAnimation_0698</a>,X</span></span></span>
<span class="l"><a class="anc" name="a9b6" href="#a9b6">[a9b6]</a><span class="cd"><span class="i">LDA</span> <span class="o">$a996,X</span></span></span>
<span class="l"><a class="anc" name="a9b9" href="#a9b9">[a9b9]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#SplashAnimation_069a">SplashAnimation_069a</a>,X</span></span></span>
<span class="l"><a class="anc" name="a9bc" href="#a9bc">[a9bc]</a><span class="cd"><span class="i">LDA</span> <span class="o">$a998,X</span></span></span>
<span class="l"><a class="anc" name="a9bf" href="#a9bf">[a9bf]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#SplashAnimation_06a0">SplashAnimation_06a0</a>,X</span></span></span>
<span class="l"><a class="anc" name="a9c2" href="#a9c2">[a9c2]</a><span class="cd"><span class="i">LDA</span> <span class="o">$a99a,X</span></span></span>
<span class="l"><a class="anc" name="a9c5" href="#a9c5">[a9c5]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#SplashAnimation_06a2">SplashAnimation_06a2</a>,X</span></span></span>
<span class="l"><a class="anc" name="a9c8" href="#a9c8">[a9c8]</a><span class="cd"><span class="i">RTS</span></span></span>
<span class="l"></span>
</pre><pre><a name="SplashAnimation_SomethingOutroA9C9"></a><div class="cp">;============================================================================
; TODO: Document SplashAnimation_SomethingOutroA9C9
;
; INPUTS:
;     None.
;
; OUTPUTS:
;     TODO
;
; XREFS:
;     <a href="#SplashAnimation_RunOutro">SplashAnimation_RunOutro</a>
;============================================================================
</div><span class="l"><a class="anc" name="a9c9" href="#a9c9">[a9c9]</a><a href="#SplashAnimation_SomethingOutroA9C9" class="la">SplashAnimation_SomethingOutroA9C9:</a><span class="ce">; [$a9c9]</span></span>
<span class="l"><a class="anc" name="a9c9" href="#a9c9">[a9c9]</a><span class="cd"><span class="i">LDX</span> <span class="o">#$00</span></span></span>
<span class="l"><a class="anc" name="a9cb" href="#a9cb">[a9cb]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#@LAB_PRG12__a9cf">@LAB_PRG12__a9cf</a></span></span></span>
<span class="l"><a class="anc" name="a9ce" href="#a9ce">[a9ce]</a><span class="cd"><span class="i">INX</span></span></span>
<span class="l"></span>
<a name=":a9cf:@LAB_PRG12__a9cf"></a><span class="l"><a class="anc" name="a9cf" href="#a9cf">[a9cf]</a><a href="#:a9cf:@LAB_PRG12__a9cf" class="lla">@LAB_PRG12__a9cf:</a><span class="ce">; [$a9cf]</span></span>
<span class="l"><a class="anc" name="a9cf" href="#a9cf">[a9cf]</a><span class="cd"><span class="i">LDY</span> <span class="o">#$01</span></span></span>
<span class="l"><a class="anc" name="a9d1" href="#a9d1">[a9d1]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#SpashAnimation_SomethingOutro_aa20">SpashAnimation_SomethingOutro_aa20</a></span></span></span>
<span class="l"><a class="anc" name="a9d4" href="#a9d4">[a9d4]</a><span class="cd"><span class="i">LDY</span> <span class="o">#$01</span></span></span>
<span class="l"><a class="anc" name="a9d6" href="#a9d6">[a9d6]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#SpashAnimation_SomethingOutro_aa46">SpashAnimation_SomethingOutro_aa46</a></span></span></span>
<span class="l"><a class="anc" name="a9d9" href="#a9d9">[a9d9]</a><span class="cd"><span class="i">LDY</span> <span class="o"><a href="RAM.html#SplashAnimation_0696">SplashAnimation_0696</a>,X</span></span></span>
<span class="l"><a class="anc" name="a9dc" href="#a9dc">[a9dc]</a><span class="cd"><span class="i">INY</span></span></span>
<span class="l"><a class="anc" name="a9dd" href="#a9dd">[a9dd]</a><span class="cd"><span class="i">CPY</span> <span class="o">#$08</span></span></span>
<span class="l"><a class="anc" name="a9df" href="#a9df">[a9df]</a><span class="cd"><span class="i">BNE</span> <span class="o"><a href="#@LAB_PRG12__a9ed">@LAB_PRG12__a9ed</a></span></span></span>
<span class="l"><a class="anc" name="a9e1" href="#a9e1">[a9e1]</a><span class="cd"><span class="i">INC</span> <span class="o"><a href="RAM.html#SplashAnimation_0694">SplashAnimation_0694</a>,X</span></span></span>
<span class="l"><a class="anc" name="a9e4" href="#a9e4">[a9e4]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="RAM.html#SplashAnimation_0694">SplashAnimation_0694</a>,X</span></span></span>
<span class="l"><a class="anc" name="a9e7" href="#a9e7">[a9e7]</a><span class="cd"><span class="i">CMP</span> <span class="o">#$0a</span></span></span>
<span class="l"><a class="anc" name="a9e9" href="#a9e9">[a9e9]</a><span class="cd"><span class="i">BEQ</span> <span class="o"><a href="#SpashAnimation_SomethingOutro_a9a2">SpashAnimation_SomethingOutro_a9a2</a></span></span></span>
<span class="l"><a class="anc" name="a9eb" href="#a9eb">[a9eb]</a><span class="cd"><span class="i">LDY</span> <span class="o">#$00</span></span></span>
<span class="l"></span>
<a name=":a9ed:@LAB_PRG12__a9ed"></a><span class="l"><a class="anc" name="a9ed" href="#a9ed">[a9ed]</a><a href="#:a9ed:@LAB_PRG12__a9ed" class="lla">@LAB_PRG12__a9ed:</a><span class="ce">; [$a9ed]</span></span>
<span class="l"><a class="anc" name="a9ed" href="#a9ed">[a9ed]</a><span class="cd"><span class="i">TYA</span></span></span>
<span class="l"><a class="anc" name="a9ee" href="#a9ee">[a9ee]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#SplashAnimation_0696">SplashAnimation_0696</a>,X</span></span></span>
<span class="l"></span>
<a name="RETURN_A9F1"></a><span class="l"><a class="anc" name="a9f1" href="#a9f1">[a9f1]</a><a href="#RETURN_A9F1" class="la">RETURN_A9F1:</a><span class="ce">; [$a9f1]</span></span>
<span class="l"><a class="anc" name="a9f1" href="#a9f1">[a9f1]</a><span class="cd"><span class="i">RTS</span></span></span>
<span class="l"></span>
</pre><pre><a name="SplashAnimation_SomethingA9F2"></a><div class="cp">;============================================================================
; TODO: Document SplashAnimation_SomethingA9F2
;
; INPUTS:
;     None.
;
; OUTPUTS:
;     TODO
;
; XREFS:
;     <a href="#SplashAnimation_RunOutro">SplashAnimation_RunOutro</a>
;============================================================================
</div><span class="l"><a class="anc" name="a9f2" href="#a9f2">[a9f2]</a><a href="#SplashAnimation_SomethingA9F2" class="la">SplashAnimation_SomethingA9F2:</a><span class="ce">; [$a9f2]</span></span>
<span class="l"><a class="anc" name="a9f2" href="#a9f2">[a9f2]</a><span class="cd"><span class="i">LDX</span> <span class="o">#$00</span></span></span>
<span class="l"><a class="anc" name="a9f4" href="#a9f4">[a9f4]</a><span class="cd"><span class="i">JSR</span> <span class="o"><a href="#@LAB_PRG12__a9f8">@LAB_PRG12__a9f8</a></span></span></span>
<span class="l"><a class="anc" name="a9f7" href="#a9f7">[a9f7]</a><span class="cd"><span class="i">INX</span></span></span>
<span class="l"></span>
<a name=":a9f8:@LAB_PRG12__a9f8"></a><span class="l"><a class="anc" name="a9f8" href="#a9f8">[a9f8]</a><a href="#:a9f8:@LAB_PRG12__a9f8" class="lla">@LAB_PRG12__a9f8:</a><span class="ce">; [$a9f8]</span></span>
<span class="l"><a class="anc" name="a9f8" href="#a9f8">[a9f8]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="RAM.html#SplashAnimation_0694">SplashAnimation_0694</a>,X</span></span></span>
<span class="l"><a class="anc" name="a9fb" href="#a9fb">[a9fb]</a><span class="cd"><span class="i">CMP</span> <span class="o">#$03</span></span></span>
<span class="l"><a class="anc" name="a9fd" href="#a9fd">[a9fd]</a><span class="cd"><span class="i">BCS</span> <span class="o"><a href="#RETURN_A9F1">RETURN_A9F1</a></span></span></span>
<span class="l"><a class="anc" name="a9ff" href="#a9ff">[a9ff]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="RAM.html#SplashAnimation_0698">SplashAnimation_0698</a>,X</span></span></span>
<span class="l"><a class="anc" name="aa02" href="#aa02">[aa02]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#SplashAnimation_0689">SplashAnimation_0689</a></span></span></span>
<span class="l"><a class="anc" name="aa05" href="#aa05">[aa05]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="RAM.html#SplashAnimation_069a">SplashAnimation_069a</a>,X</span></span></span>
<span class="l"><a class="anc" name="aa08" href="#aa08">[aa08]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#SplashAnimation_068a">SplashAnimation_068a</a></span></span></span>
<span class="l"><a class="anc" name="aa0b" href="#aa0b">[aa0b]</a><span class="cd"><span class="i">TXA</span></span></span>
<span class="l"><a class="anc" name="aa0c" href="#aa0c">[aa0c]</a><span class="cd"><span class="i">ASL</span> <span class="o">A</span></span></span>
<span class="l"><a class="anc" name="aa0d" href="#aa0d">[aa0d]</a><span class="cd"><span class="i">ASL</span> <span class="o">A</span></span></span>
<span class="l"><a class="anc" name="aa0e" href="#aa0e">[aa0e]</a><span class="cd"><span class="i">ORA</span> <span class="o"><a href="RAM.html#SplashAnimation_0694">SplashAnimation_0694</a>,X</span></span></span>
<span class="l"><a class="anc" name="aa11" href="#aa11">[aa11]</a><span class="cd"><span class="i">TAY</span></span></span>
<span class="l"><a class="anc" name="aa12" href="#aa12">[aa12]</a><span class="cd"><span class="i">LDA</span> <span class="o">$aa18,Y</span></span></span>
<span class="l"><a class="anc" name="aa15" href="#aa15">[aa15]</a><span class="cd"><span class="i">JMP</span> <span class="o"><a href="#SplashAnimation_FuncAA94">SplashAnimation_FuncAA94</a></span></span></span>
<span class="l"></span>
<a name="BYTE_ARRAY_PRG12__aa18"></a><span class="l"><a class="anc" name="aa18" href="#aa18">[aa18]</a><a href="#BYTE_ARRAY_PRG12__aa18" class="la">BYTE_ARRAY_PRG12__aa18:</a><span class="ce">; [$aa18]</span></span>
<span class="l"><a class="anc" name="aa18" href="#aa18">[aa18]</a><span class="cd"><span class="i">db</span> <span class="o">$1a</span></span><span class="ce">; [0]:</span></span>
<span class="l"><a class="anc" name="aa19" href="#aa19">[aa19]</a><span class="cd"><span class="i">db</span> <span class="o">$1b</span></span><span class="ce">; [1]:</span></span>
<span class="l"><a class="anc" name="aa1a" href="#aa1a">[aa1a]</a><span class="cd"><span class="i">db</span> <span class="o">$1c</span></span><span class="ce">; [2]:</span></span>
<span class="l"><a class="anc" name="aa1b" href="#aa1b">[aa1b]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [3]:</span></span>
<span class="l"><a class="anc" name="aa1c" href="#aa1c">[aa1c]</a><span class="cd"><span class="i">db</span> <span class="o">$1d</span></span><span class="ce">; [4]:</span></span>
<span class="l"><a class="anc" name="aa1d" href="#aa1d">[aa1d]</a><span class="cd"><span class="i">db</span> <span class="o">$1e</span></span><span class="ce">; [5]:</span></span>
<span class="l"><a class="anc" name="aa1e" href="#aa1e">[aa1e]</a><span class="cd"><span class="i">db</span> <span class="o">$1f</span></span><span class="ce">; [6]:</span></span>
<span class="l"><a class="anc" name="aa1f" href="#aa1f">[aa1f]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [7]:</span></span>
<span class="l"></span>
</pre><pre><a name="SpashAnimation_SomethingOutro_aa20"></a><div class="cp">;============================================================================
; TODO: Document SpashAnimation_SomethingOutro_aa20
;
; INPUTS:
;     X
;     Y
;
; OUTPUTS:
;     TODO
;============================================================================
</div><span class="l"><a class="anc" name="aa20" href="#aa20">[aa20]</a><a href="#SpashAnimation_SomethingOutro_aa20" class="la">SpashAnimation_SomethingOutro_aa20:</a><span class="ce">; [$aa20]</span></span>
<span class="l"><a class="anc" name="aa20" href="#aa20">[aa20]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$00</span></span></span>
<span class="l"><a class="anc" name="aa22" href="#aa22">[aa22]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Temp_Int24">Temp_Int24</a></span></span></span>
<span class="l"><a class="anc" name="aa24" href="#aa24">[aa24]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="RAM.html#SplashAnimation_06a0">SplashAnimation_06a0</a>,X</span></span></span>
<span class="l"></span>
<a name=":aa27:@LAB_PRG12__aa27"></a><span class="l"><a class="anc" name="aa27" href="#aa27">[aa27]</a><a href="#:aa27:@LAB_PRG12__aa27" class="lla">@LAB_PRG12__aa27:</a><span class="ce">; [$aa27]</span></span>
<span class="l"><a class="anc" name="aa27" href="#aa27">[aa27]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Temp_Int24_M">Temp_Int24_M</a></span></span></span>
<span class="l"><a class="anc" name="aa29" href="#aa29">[aa29]</a><span class="cd"><span class="i">ROL</span> <span class="o"><a href="RAM.html#Temp_Int24_M">Temp_Int24_M</a></span></span></span>
<span class="l"><a class="anc" name="aa2b" href="#aa2b">[aa2b]</a><span class="cd"><span class="i">ROR</span> <span class="o">A</span></span></span>
<span class="l"><a class="anc" name="aa2c" href="#aa2c">[aa2c]</a><span class="cd"><span class="i">ROR</span> <span class="o"><a href="RAM.html#Temp_Int24">Temp_Int24</a></span></span></span>
<span class="l"><a class="anc" name="aa2e" href="#aa2e">[aa2e]</a><span class="cd"><span class="i">DEY</span></span></span>
<span class="l"><a class="anc" name="aa2f" href="#aa2f">[aa2f]</a><span class="cd"><span class="i">BNE</span> <span class="o"><a href="#@LAB_PRG12__aa27">@LAB_PRG12__aa27</a></span></span></span>
<span class="l"><a class="anc" name="aa31" href="#aa31">[aa31]</a><span class="cd"><span class="i">CLC</span></span></span>
<span class="l"><a class="anc" name="aa32" href="#aa32">[aa32]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Temp_Int24_M">Temp_Int24_M</a></span></span></span>
<span class="l"><a class="anc" name="aa34" href="#aa34">[aa34]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="RAM.html#Temp_Int24">Temp_Int24</a></span></span></span>
<span class="l"><a class="anc" name="aa36" href="#aa36">[aa36]</a><span class="cd"><span class="i">CLC</span></span></span>
<span class="l"><a class="anc" name="aa37" href="#aa37">[aa37]</a><span class="cd"><span class="i">ADC</span> <span class="o"><a href="RAM.html#SplashAnimation_069c">SplashAnimation_069c</a>,X</span></span></span>
<span class="l"><a class="anc" name="aa3a" href="#aa3a">[aa3a]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#SplashAnimation_069c">SplashAnimation_069c</a>,X</span></span></span>
<span class="l"><a class="anc" name="aa3d" href="#aa3d">[aa3d]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="RAM.html#Temp_Int24_M">Temp_Int24_M</a></span></span></span>
<span class="l"><a class="anc" name="aa3f" href="#aa3f">[aa3f]</a><span class="cd"><span class="i">ADC</span> <span class="o"><a href="RAM.html#SplashAnimation_0698">SplashAnimation_0698</a>,X</span></span></span>
<span class="l"><a class="anc" name="aa42" href="#aa42">[aa42]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#SplashAnimation_0698">SplashAnimation_0698</a>,X</span></span></span>
<span class="l"><a class="anc" name="aa45" href="#aa45">[aa45]</a><span class="cd"><span class="i">RTS</span></span></span>
<span class="l"></span>
</pre><pre><a name="SpashAnimation_SomethingOutro_aa46"></a><div class="cp">;============================================================================
; TODO: Document SpashAnimation_SomethingOutro_aa46
;
; INPUTS:
;     X
;     Y
;
; OUTPUTS:
;     TODO
;============================================================================
</div><span class="l"><a class="anc" name="aa46" href="#aa46">[aa46]</a><a href="#SpashAnimation_SomethingOutro_aa46" class="la">SpashAnimation_SomethingOutro_aa46:</a><span class="ce">; [$aa46]</span></span>
<span class="l"><a class="anc" name="aa46" href="#aa46">[aa46]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$00</span></span></span>
<span class="l"><a class="anc" name="aa48" href="#aa48">[aa48]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Temp_Int24">Temp_Int24</a></span></span></span>
<span class="l"><a class="anc" name="aa4a" href="#aa4a">[aa4a]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="RAM.html#SplashAnimation_06a2">SplashAnimation_06a2</a>,X</span></span></span>
<span class="l"></span>
<a name=":aa4d:@LAB_PRG12__aa4d"></a><span class="l"><a class="anc" name="aa4d" href="#aa4d">[aa4d]</a><a href="#:aa4d:@LAB_PRG12__aa4d" class="lla">@LAB_PRG12__aa4d:</a><span class="ce">; [$aa4d]</span></span>
<span class="l"><a class="anc" name="aa4d" href="#aa4d">[aa4d]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Temp_Int24_M">Temp_Int24_M</a></span></span></span>
<span class="l"><a class="anc" name="aa4f" href="#aa4f">[aa4f]</a><span class="cd"><span class="i">ROL</span> <span class="o"><a href="RAM.html#Temp_Int24_M">Temp_Int24_M</a></span></span></span>
<span class="l"><a class="anc" name="aa51" href="#aa51">[aa51]</a><span class="cd"><span class="i">ROR</span> <span class="o">A</span></span></span>
<span class="l"><a class="anc" name="aa52" href="#aa52">[aa52]</a><span class="cd"><span class="i">ROR</span> <span class="o"><a href="RAM.html#Temp_Int24">Temp_Int24</a></span></span></span>
<span class="l"><a class="anc" name="aa54" href="#aa54">[aa54]</a><span class="cd"><span class="i">DEY</span></span></span>
<span class="l"><a class="anc" name="aa55" href="#aa55">[aa55]</a><span class="cd"><span class="i">BNE</span> <span class="o"><a href="#@LAB_PRG12__aa4d">@LAB_PRG12__aa4d</a></span></span></span>
<span class="l"><a class="anc" name="aa57" href="#aa57">[aa57]</a><span class="cd"><span class="i">CLC</span></span></span>
<span class="l"><a class="anc" name="aa58" href="#aa58">[aa58]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Temp_Int24_M">Temp_Int24_M</a></span></span></span>
<span class="l"><a class="anc" name="aa5a" href="#aa5a">[aa5a]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="RAM.html#Temp_Int24">Temp_Int24</a></span></span></span>
<span class="l"><a class="anc" name="aa5c" href="#aa5c">[aa5c]</a><span class="cd"><span class="i">CLC</span></span></span>
<span class="l"><a class="anc" name="aa5d" href="#aa5d">[aa5d]</a><span class="cd"><span class="i">ADC</span> <span class="o"><a href="RAM.html#SplashAnimation_069e">SplashAnimation_069e</a>,X</span></span></span>
<span class="l"><a class="anc" name="aa60" href="#aa60">[aa60]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#SplashAnimation_069e">SplashAnimation_069e</a>,X</span></span></span>
<span class="l"><a class="anc" name="aa63" href="#aa63">[aa63]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="RAM.html#Temp_Int24_M">Temp_Int24_M</a></span></span></span>
<span class="l"><a class="anc" name="aa65" href="#aa65">[aa65]</a><span class="cd"><span class="i">ADC</span> <span class="o"><a href="RAM.html#SplashAnimation_069a">SplashAnimation_069a</a>,X</span></span></span>
<span class="l"><a class="anc" name="aa68" href="#aa68">[aa68]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#SplashAnimation_069a">SplashAnimation_069a</a>,X</span></span></span>
<span class="l"><a class="anc" name="aa6b" href="#aa6b">[aa6b]</a><span class="cd"><span class="i">RTS</span></span></span>
<span class="l"></span>
</pre><pre><a name="SplashAnimation_UpdateOutro"></a><div class="cp">;============================================================================
; TODO: Document SplashAnimation_UpdateOutro
;
; INPUTS:
;     None.
;
; OUTPUTS:
;     TODO
;
; XREFS:
;     <a href="#SplashAnimation_RunOutro">SplashAnimation_RunOutro</a>
;============================================================================
</div><span class="l"><a class="anc" name="aa6c" href="#aa6c">[aa6c]</a><a href="#SplashAnimation_UpdateOutro" class="la">SplashAnimation_UpdateOutro:</a><span class="ce">; [$aa6c]</span></span>
<span class="l"><a class="anc" name="aa6c" href="#aa6c">[aa6c]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$e0</span></span></span>
<span class="l"><a class="anc" name="aa6e" href="#aa6e">[aa6e]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#SplashAnimation_0689">SplashAnimation_0689</a></span></span></span>
<span class="l"><a class="anc" name="aa71" href="#aa71">[aa71]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$78</span></span></span>
<span class="l"><a class="anc" name="aa73" href="#aa73">[aa73]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#SplashAnimation_068a">SplashAnimation_068a</a></span></span></span>
<span class="l"><a class="anc" name="aa76" href="#aa76">[aa76]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="RAM.html#InterruptCounter">InterruptCounter</a></span></span></span>
<span class="l"><a class="anc" name="aa78" href="#aa78">[aa78]</a><span class="cd"><span class="i">AND</span> <span class="o">#$10</span></span></span>
<span class="l"><a class="anc" name="aa7a" href="#aa7a">[aa7a]</a><span class="cd"><span class="i">LSR</span> <span class="o">A</span></span></span>
<span class="l"><a class="anc" name="aa7b" href="#aa7b">[aa7b]</a><span class="cd"><span class="i">LSR</span> <span class="o">A</span></span></span>
<span class="l"><a class="anc" name="aa7c" href="#aa7c">[aa7c]</a><span class="cd"><span class="i">LSR</span> <span class="o">A</span></span></span>
<span class="l"><a class="anc" name="aa7d" href="#aa7d">[aa7d]</a><span class="cd"><span class="i">LSR</span> <span class="o">A</span></span></span>
<span class="l"><a class="anc" name="aa7e" href="#aa7e">[aa7e]</a><span class="cd"><span class="i">ADC</span> <span class="o">#$18</span></span></span>
<span class="l"><a class="anc" name="aa80" href="#aa80">[aa80]</a><span class="cd"><span class="i">JMP</span> <span class="o"><a href="#SplashAnimation_FuncAA94">SplashAnimation_FuncAA94</a></span></span></span>
<span class="l"></span>
</pre><pre><a name="SplashAnimation_SomethingUpdateState"></a><div class="cp">;============================================================================
; TODO: Document SplashAnimation_SomethingUpdateState
;
; INPUTS:
;     None.
;
; OUTPUTS:
;     TODO
;
; XREFS:
;     <a href="#SplashAnimation_RunIntro">SplashAnimation_RunIntro</a>
;     <a href="#SplashAnimation_RunOutro">SplashAnimation_RunOutro</a>
;============================================================================
</div><span class="l"><a class="anc" name="aa83" href="#aa83">[aa83]</a><a href="#SplashAnimation_SomethingUpdateState" class="la">SplashAnimation_SomethingUpdateState:</a><span class="ce">; [$aa83]</span></span>
<span class="l"><a class="anc" name="aa83" href="#aa83">[aa83]</a><span class="cd"><span class="i">LDX</span> <span class="o">#$00</span></span></span>
<span class="l"><a class="anc" name="aa85" href="#aa85">[aa85]</a><span class="cd"><span class="i">LDA</span> <span class="o">#$f0</span></span></span>
<span class="l"></span>
<a name=":aa87:@LAB_PRG12__aa87"></a><span class="l"><a class="anc" name="aa87" href="#aa87">[aa87]</a><a href="#:aa87:@LAB_PRG12__aa87" class="lla">@LAB_PRG12__aa87:</a><span class="ce">; [$aa87]</span></span>
<span class="l"><a class="anc" name="aa87" href="#aa87">[aa87]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#SPRITE_0_RANGE_1_START">SPRITE_0_RANGE_1_START</a>,X</span></span></span>
<span class="l"><a class="anc" name="aa8a" href="#aa8a">[aa8a]</a><span class="cd"><span class="i">INX</span></span></span>
<span class="l"><a class="anc" name="aa8b" href="#aa8b">[aa8b]</a><span class="cd"><span class="i">INX</span></span></span>
<span class="l"><a class="anc" name="aa8c" href="#aa8c">[aa8c]</a><span class="cd"><span class="i">INX</span></span></span>
<span class="l"><a class="anc" name="aa8d" href="#aa8d">[aa8d]</a><span class="cd"><span class="i">INX</span></span></span>
<span class="l"><a class="anc" name="aa8e" href="#aa8e">[aa8e]</a><span class="cd"><span class="i">BNE</span> <span class="o"><a href="#@LAB_PRG12__aa87">@LAB_PRG12__aa87</a></span></span></span>
<span class="l"><a class="anc" name="aa90" href="#aa90">[aa90]</a><span class="cd"><span class="i">STX</span> <span class="o">a:<a href="RAM.html#SplashAnimation_0688">SplashAnimation_0688</a></span></span></span>
<span class="l"><a class="anc" name="aa93" href="#aa93">[aa93]</a><span class="cd"><span class="i">RTS</span></span></span>
<span class="l"></span>
</pre><pre><a name="SplashAnimation_FuncAA94"></a><div class="cp">;============================================================================
; TODO: Document SplashAnimation_FuncAA94
;
; INPUTS:
;     A
;     X
;
; OUTPUTS:
;     A
;
; XREFS:
;     <a href="#SplashAnimation_Maybe_AnimPlayerStep">SplashAnimation_Maybe_AnimPlayerStep</a>
;     <a href="#SplashAnimation_OutroFuncAF82">SplashAnimation_OutroFuncAF82</a>
;     <a href="#SplashAnimation_UpdateOutro">SplashAnimation_UpdateOutro</a>
;============================================================================
</div><span class="l"><a class="anc" name="aa94" href="#aa94">[aa94]</a><a href="#SplashAnimation_FuncAA94" class="la">SplashAnimation_FuncAA94:</a><span class="ce">; [$aa94]</span></span>
<span class="l"><a class="anc" name="aa94" href="#aa94">[aa94]</a><span class="cd"><span class="i">TAY</span></span></span>
<span class="l"><a class="anc" name="aa95" href="#aa95">[aa95]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="#@_return">@_return</a>+1,Y</span></span></span>
<span class="l"><a class="anc" name="aa98" href="#aa98">[aa98]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Temp_Int24">Temp_Int24</a></span></span></span>
<span class="l"><a class="anc" name="aa9a" href="#aa9a">[aa9a]</a><span class="cd"><span class="i">LDA</span> <span class="o">$ab37,Y</span></span></span>
<span class="l"><a class="anc" name="aa9d" href="#aa9d">[aa9d]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Temp_Int24_M">Temp_Int24_M</a></span></span></span>
<span class="l"><a class="anc" name="aa9f" href="#aa9f">[aa9f]</a><span class="cd"><span class="i">LDY</span> <span class="o">#$00</span></span></span>
<span class="l"><a class="anc" name="aaa1" href="#aaa1">[aaa1]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#SplashAnimation_0689">SplashAnimation_0689</a></span></span></span>
<span class="l"><a class="anc" name="aaa4" href="#aaa4">[aaa4]</a><span class="cd"><span class="i">CLC</span></span></span>
<span class="l"><a class="anc" name="aaa5" href="#aaa5">[aaa5]</a><span class="cd"><span class="i">ADC</span> <span class="o">(<a href="RAM.html#Temp_Int24">Temp_Int24</a>),Y</span></span></span>
<span class="l"><a class="anc" name="aaa7" href="#aaa7">[aaa7]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#SplashAnimation_0689">SplashAnimation_0689</a></span></span></span>
<span class="l"><a class="anc" name="aaaa" href="#aaaa">[aaaa]</a><span class="cd"><span class="i">INY</span></span></span>
<span class="l"><a class="anc" name="aaab" href="#aaab">[aaab]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#SplashAnimation_068a">SplashAnimation_068a</a></span></span></span>
<span class="l"><a class="anc" name="aaae" href="#aaae">[aaae]</a><span class="cd"><span class="i">CLC</span></span></span>
<span class="l"><a class="anc" name="aaaf" href="#aaaf">[aaaf]</a><span class="cd"><span class="i">ADC</span> <span class="o">(<a href="RAM.html#Temp_Int24">Temp_Int24</a>),Y</span></span></span>
<span class="l"><a class="anc" name="aab1" href="#aab1">[aab1]</a><span class="cd"><span class="i">CMP</span> <span class="o">#$f0</span></span></span>
<span class="l"><a class="anc" name="aab3" href="#aab3">[aab3]</a><span class="cd"><span class="i">BCS</span> <span class="o"><a href="#@_return">@_return</a></span></span></span>
<span class="l"><a class="anc" name="aab5" href="#aab5">[aab5]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#SplashAnimation_068a">SplashAnimation_068a</a></span></span></span>
<span class="l"><a class="anc" name="aab8" href="#aab8">[aab8]</a><span class="cd"><span class="i">INY</span></span></span>
<span class="l"><a class="anc" name="aab9" href="#aab9">[aab9]</a><span class="cd"><span class="i">LDA</span> <span class="o">(<a href="RAM.html#Temp_Int24">Temp_Int24</a>),Y</span></span></span>
<span class="l"><a class="anc" name="aabb" href="#aabb">[aabb]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#DAT_068b">DAT_068b</a></span></span></span>
<span class="l"><a class="anc" name="aabe" href="#aabe">[aabe]</a><span class="cd"><span class="i">INY</span></span></span>
<span class="l"><a class="anc" name="aabf" href="#aabf">[aabf]</a><span class="cd"><span class="i">LDA</span> <span class="o">(<a href="RAM.html#Temp_Int24">Temp_Int24</a>),Y</span></span></span>
<span class="l"><a class="anc" name="aac1" href="#aac1">[aac1]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#TextBox_ContentsY">TextBox_ContentsY</a></span></span></span>
<span class="l"><a class="anc" name="aac3" href="#aac3">[aac3]</a><span class="cd"><span class="i">INY</span></span></span>
<span class="l"><a class="anc" name="aac4" href="#aac4">[aac4]</a><span class="cd"><span class="i">TXA</span></span></span>
<span class="l"><a class="anc" name="aac5" href="#aac5">[aac5]</a><span class="cd"><span class="i">PHA</span></span></span>
<span class="l"><a class="anc" name="aac6" href="#aac6">[aac6]</a><span class="cd"><span class="i">LDX</span> <span class="o">a:<a href="RAM.html#SplashAnimation_0688">SplashAnimation_0688</a></span></span></span>
<span class="l"></span>
<a name=":aac9:@LAB_PRG12__aac9"></a><span class="l"><a class="anc" name="aac9" href="#aac9">[aac9]</a><a href="#:aac9:@LAB_PRG12__aac9" class="lla">@LAB_PRG12__aac9:</a><span class="ce">; [$aac9]</span></span>
<span class="l"><a class="anc" name="aac9" href="#aac9">[aac9]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#DAT_068b">DAT_068b</a></span></span></span>
<span class="l"><a class="anc" name="aacc" href="#aacc">[aacc]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#Temp_Int24_U">Temp_Int24_U</a></span></span></span>
<span class="l"><a class="anc" name="aace" href="#aace">[aace]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#SplashAnimation_0689">SplashAnimation_0689</a></span></span></span>
<span class="l"><a class="anc" name="aad1" href="#aad1">[aad1]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#TextBox_ContentsX">TextBox_ContentsX</a></span></span></span>
<span class="l"></span>
<a name=":aad3:@LAB_PRG12__aad3"></a><span class="l"><a class="anc" name="aad3" href="#aad3">[aad3]</a><a href="#:aad3:@LAB_PRG12__aad3" class="lla">@LAB_PRG12__aad3:</a><span class="ce">; [$aad3]</span></span>
<span class="l"><a class="anc" name="aad3" href="#aad3">[aad3]</a><span class="cd"><span class="i">LDA</span> <span class="o">(<a href="RAM.html#Temp_Int24">Temp_Int24</a>),Y</span></span></span>
<span class="l"><a class="anc" name="aad5" href="#aad5">[aad5]</a><span class="cd"><span class="i">INY</span></span></span>
<span class="l"><a class="anc" name="aad6" href="#aad6">[aad6]</a><span class="cd"><span class="i">CMP</span> <span class="o">#$ff</span></span></span>
<span class="l"><a class="anc" name="aad8" href="#aad8">[aad8]</a><span class="cd"><span class="i">BEQ</span> <span class="o"><a href="#@LAB_PRG12__aaf9">@LAB_PRG12__aaf9</a></span></span></span>
<span class="l"><a class="anc" name="aada" href="#aada">[aada]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#SPRITE0_TILE">SPRITE0_TILE</a>,X</span></span></span>
<span class="l"><a class="anc" name="aadd" href="#aadd">[aadd]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#SplashAnimation_068a">SplashAnimation_068a</a></span></span></span>
<span class="l"><a class="anc" name="aae0" href="#aae0">[aae0]</a><span class="cd"><span class="i">CMP</span> <span class="o">#$f0</span></span></span>
<span class="l"><a class="anc" name="aae2" href="#aae2">[aae2]</a><span class="cd"><span class="i">BCS</span> <span class="o"><a href="#@LAB_PRG12__ab11">@LAB_PRG12__ab11</a></span></span></span>
<span class="l"><a class="anc" name="aae4" href="#aae4">[aae4]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#SplashAnimation_068a">SplashAnimation_068a</a></span></span></span>
<span class="l"><a class="anc" name="aae7" href="#aae7">[aae7]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#SPRITE_0_RANGE_1_START">SPRITE_0_RANGE_1_START</a>,X</span></span></span>
<span class="l"><a class="anc" name="aaea" href="#aaea">[aaea]</a><span class="cd"><span class="i">LDA</span> <span class="o">(<a href="RAM.html#Temp_Int24">Temp_Int24</a>),Y</span></span></span>
<span class="l"><a class="anc" name="aaec" href="#aaec">[aaec]</a><span class="cd"><span class="i">INY</span></span></span>
<span class="l"><a class="anc" name="aaed" href="#aaed">[aaed]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#SPRITE0_ATTRS">SPRITE0_ATTRS</a>,X</span></span></span>
<span class="l"><a class="anc" name="aaf0" href="#aaf0">[aaf0]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="RAM.html#TextBox_ContentsX">TextBox_ContentsX</a></span></span></span>
<span class="l"><a class="anc" name="aaf2" href="#aaf2">[aaf2]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#SPRITE0_X">SPRITE0_X</a>,X</span></span></span>
<span class="l"><a class="anc" name="aaf5" href="#aaf5">[aaf5]</a><span class="cd"><span class="i">INX</span></span></span>
<span class="l"><a class="anc" name="aaf6" href="#aaf6">[aaf6]</a><span class="cd"><span class="i">INX</span></span></span>
<span class="l"><a class="anc" name="aaf7" href="#aaf7">[aaf7]</a><span class="cd"><span class="i">INX</span></span></span>
<span class="l"><a class="anc" name="aaf8" href="#aaf8">[aaf8]</a><span class="cd"><span class="i">INX</span></span></span>
<span class="l"></span>
<a name=":aaf9:@LAB_PRG12__aaf9"></a><span class="l"><a class="anc" name="aaf9" href="#aaf9">[aaf9]</a><a href="#:aaf9:@LAB_PRG12__aaf9" class="lla">@LAB_PRG12__aaf9:</a><span class="ce">; [$aaf9]</span></span>
<span class="l"><a class="anc" name="aaf9" href="#aaf9">[aaf9]</a><span class="cd"><span class="i">LDA</span> <span class="o"><a href="RAM.html#TextBox_ContentsX">TextBox_ContentsX</a></span></span></span>
<span class="l"><a class="anc" name="aafb" href="#aafb">[aafb]</a><span class="cd"><span class="i">CLC</span></span></span>
<span class="l"><a class="anc" name="aafc" href="#aafc">[aafc]</a><span class="cd"><span class="i">ADC</span> <span class="o">#$08</span></span></span>
<span class="l"><a class="anc" name="aafe" href="#aafe">[aafe]</a><span class="cd"><span class="i">STA</span> <span class="o"><a href="RAM.html#TextBox_ContentsX">TextBox_ContentsX</a></span></span></span>
<span class="l"><a class="anc" name="ab00" href="#ab00">[ab00]</a><span class="cd"><span class="i">DEC</span> <span class="o"><a href="RAM.html#Temp_Int24_U">Temp_Int24_U</a></span></span></span>
<span class="l"><a class="anc" name="ab02" href="#ab02">[ab02]</a><span class="cd"><span class="i">BNE</span> <span class="o"><a href="#@LAB_PRG12__aad3">@LAB_PRG12__aad3</a></span></span></span>
<span class="l"><a class="anc" name="ab04" href="#ab04">[ab04]</a><span class="cd"><span class="i">LDA</span> <span class="o">a:<a href="RAM.html#SplashAnimation_068a">SplashAnimation_068a</a></span></span></span>
<span class="l"><a class="anc" name="ab07" href="#ab07">[ab07]</a><span class="cd"><span class="i">CLC</span></span></span>
<span class="l"><a class="anc" name="ab08" href="#ab08">[ab08]</a><span class="cd"><span class="i">ADC</span> <span class="o">#$08</span></span></span>
<span class="l"><a class="anc" name="ab0a" href="#ab0a">[ab0a]</a><span class="cd"><span class="i">STA</span> <span class="o">a:<a href="RAM.html#SplashAnimation_068a">SplashAnimation_068a</a></span></span></span>
<span class="l"><a class="anc" name="ab0d" href="#ab0d">[ab0d]</a><span class="cd"><span class="i">DEC</span> <span class="o"><a href="RAM.html#TextBox_ContentsY">TextBox_ContentsY</a></span></span></span>
<span class="l"><a class="anc" name="ab0f" href="#ab0f">[ab0f]</a><span class="cd"><span class="i">BNE</span> <span class="o"><a href="#@LAB_PRG12__aac9">@LAB_PRG12__aac9</a></span></span></span>
<span class="l"></span>
<a name=":ab11:@LAB_PRG12__ab11"></a><span class="l"><a class="anc" name="ab11" href="#ab11">[ab11]</a><a href="#:ab11:@LAB_PRG12__ab11" class="lla">@LAB_PRG12__ab11:</a><span class="ce">; [$ab11]</span></span>
<span class="l"><a class="anc" name="ab11" href="#ab11">[ab11]</a><span class="cd"><span class="i">STX</span> <span class="o">a:<a href="RAM.html#SplashAnimation_0688">SplashAnimation_0688</a></span></span></span>
<span class="l"><a class="anc" name="ab14" href="#ab14">[ab14]</a><span class="cd"><span class="i">PLA</span></span></span>
<span class="l"><a class="anc" name="ab15" href="#ab15">[ab15]</a><span class="cd"><span class="i">TAX</span></span></span>
<span class="l"></span>
<a name=":ab16:@_return"></a><span class="l"><a class="anc" name="ab16" href="#ab16">[ab16]</a><a href="#:ab16:@_return" class="lla">@_return:</a><span class="ce">; [$ab16]</span></span>
<span class="l"><a class="anc" name="ab16" href="#ab16">[ab16]</a><span class="cd"><span class="i">RTS</span></span></span>
<span class="l"></span>
<a name="BYTE_ARRAY_PRG12__ab17"></a><div class="c">;
; XREFS:
;     <a href="#SplashAnimation_FuncAA94">SplashAnimation_FuncAA94</a>
;
</div><span class="l"><a class="anc" name="ab17" href="#ab17">[ab17]</a><a href="#BYTE_ARRAY_PRG12__ab17" class="la">BYTE_ARRAY_PRG12__ab17:</a><span class="ce">; [$ab17]</span></span>
<span class="l"><a class="anc" name="ab17" href="#ab17">[ab17]</a><span class="cd"><span class="i">db</span> <span class="o">$57</span></span><span class="ce">; [0]:</span></span>
<span class="l"><a class="anc" name="ab18" href="#ab18">[ab18]</a><span class="cd"><span class="i">db</span> <span class="o">$6f</span></span><span class="ce">; [1]:</span></span>
<span class="l"><a class="anc" name="ab19" href="#ab19">[ab19]</a><span class="cd"><span class="i">db</span> <span class="o">$87</span></span><span class="ce">; [2]:</span></span>
<span class="l"><a class="anc" name="ab1a" href="#ab1a">[ab1a]</a><span class="cd"><span class="i">db</span> <span class="o">$9f</span></span><span class="ce">; [3]:</span></span>
<span class="l"><a class="anc" name="ab1b" href="#ab1b">[ab1b]</a><span class="cd"><span class="i">db</span> <span class="o">$b3</span></span><span class="ce">; [4]:</span></span>
<span class="l"><a class="anc" name="ab1c" href="#ab1c">[ab1c]</a><span class="cd"><span class="i">db</span> <span class="o">$c7</span></span><span class="ce">; [5]:</span></span>
<span class="l"><a class="anc" name="ab1d" href="#ab1d">[ab1d]</a><span class="cd"><span class="i">db</span> <span class="o">$db</span></span><span class="ce">; [6]:</span></span>
<span class="l"><a class="anc" name="ab1e" href="#ab1e">[ab1e]</a><span class="cd"><span class="i">db</span> <span class="o">$eb</span></span><span class="ce">; [7]:</span></span>
<span class="l"><a class="anc" name="ab1f" href="#ab1f">[ab1f]</a><span class="cd"><span class="i">db</span> <span class="o">$fb</span></span><span class="ce">; [8]:</span></span>
<span class="l"><a class="anc" name="ab20" href="#ab20">[ab20]</a><span class="cd"><span class="i">db</span> <span class="o">$05</span></span><span class="ce">; [9]:</span></span>
<span class="l"><a class="anc" name="ab21" href="#ab21">[ab21]</a><span class="cd"><span class="i">db</span> <span class="o">$0f</span></span><span class="ce">; [10]:</span></span>
<span class="l"><a class="anc" name="ab22" href="#ab22">[ab22]</a><span class="cd"><span class="i">db</span> <span class="o">$17</span></span><span class="ce">; [11]:</span></span>
<span class="l"><a class="anc" name="ab23" href="#ab23">[ab23]</a><span class="cd"><span class="i">db</span> <span class="o">$1f</span></span><span class="ce">; [12]:</span></span>
<span class="l"><a class="anc" name="ab24" href="#ab24">[ab24]</a><span class="cd"><span class="i">db</span> <span class="o">$27</span></span><span class="ce">; [13]:</span></span>
<span class="l"><a class="anc" name="ab25" href="#ab25">[ab25]</a><span class="cd"><span class="i">db</span> <span class="o">$2f</span></span><span class="ce">; [14]:</span></span>
<span class="l"><a class="anc" name="ab26" href="#ab26">[ab26]</a><span class="cd"><span class="i">db</span> <span class="o">$39</span></span><span class="ce">; [15]:</span></span>
<span class="l"><a class="anc" name="ab27" href="#ab27">[ab27]</a><span class="cd"><span class="i">db</span> <span class="o">$43</span></span><span class="ce">; [16]:</span></span>
<span class="l"><a class="anc" name="ab28" href="#ab28">[ab28]</a><span class="cd"><span class="i">db</span> <span class="o">$53</span></span><span class="ce">; [17]:</span></span>
<span class="l"><a class="anc" name="ab29" href="#ab29">[ab29]</a><span class="cd"><span class="i">db</span> <span class="o">$63</span></span><span class="ce">; [18]:</span></span>
<span class="l"><a class="anc" name="ab2a" href="#ab2a">[ab2a]</a><span class="cd"><span class="i">db</span> <span class="o">$77</span></span><span class="ce">; [19]:</span></span>
<span class="l"><a class="anc" name="ab2b" href="#ab2b">[ab2b]</a><span class="cd"><span class="i">db</span> <span class="o">$8b</span></span><span class="ce">; [20]:</span></span>
<span class="l"><a class="anc" name="ab2c" href="#ab2c">[ab2c]</a><span class="cd"><span class="i">db</span> <span class="o">$9f</span></span><span class="ce">; [21]:</span></span>
<span class="l"><a class="anc" name="ab2d" href="#ab2d">[ab2d]</a><span class="cd"><span class="i">db</span> <span class="o">$b7</span></span><span class="ce">; [22]:</span></span>
<span class="l"><a class="anc" name="ab2e" href="#ab2e">[ab2e]</a><span class="cd"><span class="i">db</span> <span class="o">$cf</span></span><span class="ce">; [23]:</span></span>
<span class="l"><a class="anc" name="ab2f" href="#ab2f">[ab2f]</a><span class="cd"><span class="i">db</span> <span class="o">$e7</span></span><span class="ce">; [24]:</span></span>
<span class="l"><a class="anc" name="ab30" href="#ab30">[ab30]</a><span class="cd"><span class="i">db</span> <span class="o">$26</span></span><span class="ce">; [25]:</span></span>
<span class="l"><a class="anc" name="ab31" href="#ab31">[ab31]</a><span class="cd"><span class="i">db</span> <span class="o">$65</span></span><span class="ce">; [26]:</span></span>
<span class="l"><a class="anc" name="ab32" href="#ab32">[ab32]</a><span class="cd"><span class="i">db</span> <span class="o">$6b</span></span><span class="ce">; [27]:</span></span>
<span class="l"><a class="anc" name="ab33" href="#ab33">[ab33]</a><span class="cd"><span class="i">db</span> <span class="o">$71</span></span><span class="ce">; [28]:</span></span>
<span class="l"><a class="anc" name="ab34" href="#ab34">[ab34]</a><span class="cd"><span class="i">db</span> <span class="o">$77</span></span><span class="ce">; [29]:</span></span>
<span class="l"><a class="anc" name="ab35" href="#ab35">[ab35]</a><span class="cd"><span class="i">db</span> <span class="o">$7d</span></span><span class="ce">; [30]:</span></span>
<span class="l"><a class="anc" name="ab36" href="#ab36">[ab36]</a><span class="cd"><span class="i">db</span> <span class="o">$83</span></span><span class="ce">; [31]:</span></span>
<span class="l"></span>
<a name="BYTE_ARRAY_PRG12__ab37"></a><div class="c">;
; XREFS:
;     <a href="#SplashAnimation_FuncAA94">SplashAnimation_FuncAA94</a>
;
</div><span class="l"><a class="anc" name="ab37" href="#ab37">[ab37]</a><a href="#BYTE_ARRAY_PRG12__ab37" class="la">BYTE_ARRAY_PRG12__ab37:</a><span class="ce">; [$ab37]</span></span>
<span class="l"><a class="anc" name="ab37" href="#ab37">[ab37]</a><span class="cd"><span class="i">db</span> <span class="o">$ab</span></span><span class="ce">; [0]:</span></span>
<span class="l"><a class="anc" name="ab38" href="#ab38">[ab38]</a><span class="cd"><span class="i">db</span> <span class="o">$ab</span></span><span class="ce">; [1]:</span></span>
<span class="l"><a class="anc" name="ab39" href="#ab39">[ab39]</a><span class="cd"><span class="i">db</span> <span class="o">$ab</span></span><span class="ce">; [2]:</span></span>
<span class="l"><a class="anc" name="ab3a" href="#ab3a">[ab3a]</a><span class="cd"><span class="i">db</span> <span class="o">$ab</span></span><span class="ce">; [3]:</span></span>
<span class="l"><a class="anc" name="ab3b" href="#ab3b">[ab3b]</a><span class="cd"><span class="i">db</span> <span class="o">$ab</span></span><span class="ce">; [4]:</span></span>
<span class="l"><a class="anc" name="ab3c" href="#ab3c">[ab3c]</a><span class="cd"><span class="i">db</span> <span class="o">$ab</span></span><span class="ce">; [5]:</span></span>
<span class="l"><a class="anc" name="ab3d" href="#ab3d">[ab3d]</a><span class="cd"><span class="i">db</span> <span class="o">$ab</span></span><span class="ce">; [6]:</span></span>
<span class="l"><a class="anc" name="ab3e" href="#ab3e">[ab3e]</a><span class="cd"><span class="i">db</span> <span class="o">$ab</span></span><span class="ce">; [7]:</span></span>
<span class="l"><a class="anc" name="ab3f" href="#ab3f">[ab3f]</a><span class="cd"><span class="i">db</span> <span class="o">$ab</span></span><span class="ce">; [8]:</span></span>
<span class="l"><a class="anc" name="ab40" href="#ab40">[ab40]</a><span class="cd"><span class="i">db</span> <span class="o">$ac</span></span><span class="ce">; [9]:</span></span>
<span class="l"><a class="anc" name="ab41" href="#ab41">[ab41]</a><span class="cd"><span class="i">db</span> <span class="o">$ac</span></span><span class="ce">; [10]:</span></span>
<span class="l"><a class="anc" name="ab42" href="#ab42">[ab42]</a><span class="cd"><span class="i">db</span> <span class="o">$ac</span></span><span class="ce">; [11]:</span></span>
<span class="l"><a class="anc" name="ab43" href="#ab43">[ab43]</a><span class="cd"><span class="i">db</span> <span class="o">$ac</span></span><span class="ce">; [12]:</span></span>
<span class="l"><a class="anc" name="ab44" href="#ab44">[ab44]</a><span class="cd"><span class="i">db</span> <span class="o">$ac</span></span><span class="ce">; [13]:</span></span>
<span class="l"><a class="anc" name="ab45" href="#ab45">[ab45]</a><span class="cd"><span class="i">db</span> <span class="o">$ac</span></span><span class="ce">; [14]:</span></span>
<span class="l"><a class="anc" name="ab46" href="#ab46">[ab46]</a><span class="cd"><span class="i">db</span> <span class="o">$ac</span></span><span class="ce">; [15]:</span></span>
<span class="l"><a class="anc" name="ab47" href="#ab47">[ab47]</a><span class="cd"><span class="i">db</span> <span class="o">$ac</span></span><span class="ce">; [16]:</span></span>
<span class="l"><a class="anc" name="ab48" href="#ab48">[ab48]</a><span class="cd"><span class="i">db</span> <span class="o">$ac</span></span><span class="ce">; [17]:</span></span>
<span class="l"><a class="anc" name="ab49" href="#ab49">[ab49]</a><span class="cd"><span class="i">db</span> <span class="o">$ac</span></span><span class="ce">; [18]:</span></span>
<span class="l"><a class="anc" name="ab4a" href="#ab4a">[ab4a]</a><span class="cd"><span class="i">db</span> <span class="o">$ac</span></span><span class="ce">; [19]:</span></span>
<span class="l"><a class="anc" name="ab4b" href="#ab4b">[ab4b]</a><span class="cd"><span class="i">db</span> <span class="o">$ac</span></span><span class="ce">; [20]:</span></span>
<span class="l"><a class="anc" name="ab4c" href="#ab4c">[ab4c]</a><span class="cd"><span class="i">db</span> <span class="o">$ac</span></span><span class="ce">; [21]:</span></span>
<span class="l"><a class="anc" name="ab4d" href="#ab4d">[ab4d]</a><span class="cd"><span class="i">db</span> <span class="o">$ac</span></span><span class="ce">; [22]:</span></span>
<span class="l"><a class="anc" name="ab4e" href="#ab4e">[ab4e]</a><span class="cd"><span class="i">db</span> <span class="o">$ac</span></span><span class="ce">; [23]:</span></span>
<span class="l"><a class="anc" name="ab4f" href="#ab4f">[ab4f]</a><span class="cd"><span class="i">db</span> <span class="o">$ac</span></span><span class="ce">; [24]:</span></span>
<span class="l"><a class="anc" name="ab50" href="#ab50">[ab50]</a><span class="cd"><span class="i">db</span> <span class="o">$ad</span></span><span class="ce">; [25]:</span></span>
<span class="l"><a class="anc" name="ab51" href="#ab51">[ab51]</a><span class="cd"><span class="i">db</span> <span class="o">$ad</span></span><span class="ce">; [26]:</span></span>
<span class="l"><a class="anc" name="ab52" href="#ab52">[ab52]</a><span class="cd"><span class="i">db</span> <span class="o">$ad</span></span><span class="ce">; [27]:</span></span>
<span class="l"><a class="anc" name="ab53" href="#ab53">[ab53]</a><span class="cd"><span class="i">db</span> <span class="o">$ad</span></span><span class="ce">; [28]:</span></span>
<span class="l"><a class="anc" name="ab54" href="#ab54">[ab54]</a><span class="cd"><span class="i">db</span> <span class="o">$ad</span></span><span class="ce">; [29]:</span></span>
<span class="l"><a class="anc" name="ab55" href="#ab55">[ab55]</a><span class="cd"><span class="i">db</span> <span class="o">$ad</span></span><span class="ce">; [30]:</span></span>
<span class="l"><a class="anc" name="ab56" href="#ab56">[ab56]</a><span class="cd"><span class="i">db</span> <span class="o">$ad</span></span><span class="ce">; [31]:</span></span>
<span class="l"><a class="anc" name="ab57" href="#ab57">[ab57]</a><span class="cd"><span class="i">db</span> <span class="o">$f8</span></span><span class="ce">; [0]:</span></span>
<span class="l"><a class="anc" name="ab58" href="#ab58">[ab58]</a><span class="cd"><span class="i">db</span> <span class="o">$ec</span></span><span class="ce">; [1]:</span></span>
<span class="l"><a class="anc" name="ab59" href="#ab59">[ab59]</a><span class="cd"><span class="i">db</span> <span class="o">$02</span></span><span class="ce">; [2]:</span></span>
<span class="l"><a class="anc" name="ab5a" href="#ab5a">[ab5a]</a><span class="cd"><span class="i">db</span> <span class="o">$05</span></span><span class="ce">; [3]:</span></span>
<span class="l"><a class="anc" name="ab5b" href="#ab5b">[ab5b]</a><span class="cd"><span class="i">db</span> <span class="o">$46</span></span><span class="ce">; [4]:</span></span>
<span class="l"><a class="anc" name="ab5c" href="#ab5c">[ab5c]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [5]:</span></span>
<span class="l"><a class="anc" name="ab5d" href="#ab5d">[ab5d]</a><span class="cd"><span class="i">db</span> <span class="o">$47</span></span><span class="ce">; [6]:</span></span>
<span class="l"><a class="anc" name="ab5e" href="#ab5e">[ab5e]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [7]:</span></span>
<span class="l"><a class="anc" name="ab5f" href="#ab5f">[ab5f]</a><span class="cd"><span class="i">db</span> <span class="o">$48</span></span><span class="ce">; [8]:</span></span>
<span class="l"><a class="anc" name="ab60" href="#ab60">[ab60]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [9]:</span></span>
<span class="l"><a class="anc" name="ab61" href="#ab61">[ab61]</a><span class="cd"><span class="i">db</span> <span class="o">$49</span></span><span class="ce">; [10]:</span></span>
<span class="l"><a class="anc" name="ab62" href="#ab62">[ab62]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [11]:</span></span>
<span class="l"><a class="anc" name="ab63" href="#ab63">[ab63]</a><span class="cd"><span class="i">db</span> <span class="o">$4a</span></span><span class="ce">; [12]:</span></span>
<span class="l"><a class="anc" name="ab64" href="#ab64">[ab64]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [13]:</span></span>
<span class="l"><a class="anc" name="ab65" href="#ab65">[ab65]</a><span class="cd"><span class="i">db</span> <span class="o">$4b</span></span><span class="ce">; [14]:</span></span>
<span class="l"><a class="anc" name="ab66" href="#ab66">[ab66]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [15]:</span></span>
<span class="l"><a class="anc" name="ab67" href="#ab67">[ab67]</a><span class="cd"><span class="i">db</span> <span class="o">$4c</span></span><span class="ce">; [16]:</span></span>
<span class="l"><a class="anc" name="ab68" href="#ab68">[ab68]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [17]:</span></span>
<span class="l"><a class="anc" name="ab69" href="#ab69">[ab69]</a><span class="cd"><span class="i">db</span> <span class="o">$4d</span></span><span class="ce">; [18]:</span></span>
<span class="l"><a class="anc" name="ab6a" href="#ab6a">[ab6a]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [19]:</span></span>
<span class="l"><a class="anc" name="ab6b" href="#ab6b">[ab6b]</a><span class="cd"><span class="i">db</span> <span class="o">$4e</span></span><span class="ce">; [20]:</span></span>
<span class="l"><a class="anc" name="ab6c" href="#ab6c">[ab6c]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [21]:</span></span>
<span class="l"><a class="anc" name="ab6d" href="#ab6d">[ab6d]</a><span class="cd"><span class="i">db</span> <span class="o">$4f</span></span><span class="ce">; [22]:</span></span>
<span class="l"><a class="anc" name="ab6e" href="#ab6e">[ab6e]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [23]:</span></span>
<span class="l"><a class="anc" name="ab6f" href="#ab6f">[ab6f]</a><span class="cd"><span class="i">db</span> <span class="o">$f8</span></span><span class="ce">; [0]:</span></span>
<span class="l"><a class="anc" name="ab70" href="#ab70">[ab70]</a><span class="cd"><span class="i">db</span> <span class="o">$ec</span></span><span class="ce">; [1]:</span></span>
<span class="l"><a class="anc" name="ab71" href="#ab71">[ab71]</a><span class="cd"><span class="i">db</span> <span class="o">$02</span></span><span class="ce">; [2]:</span></span>
<span class="l"><a class="anc" name="ab72" href="#ab72">[ab72]</a><span class="cd"><span class="i">db</span> <span class="o">$05</span></span><span class="ce">; [3]:</span></span>
<span class="l"><a class="anc" name="ab73" href="#ab73">[ab73]</a><span class="cd"><span class="i">db</span> <span class="o">$50</span></span><span class="ce">; [4]:</span></span>
<span class="l"><a class="anc" name="ab74" href="#ab74">[ab74]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [5]:</span></span>
<span class="l"><a class="anc" name="ab75" href="#ab75">[ab75]</a><span class="cd"><span class="i">db</span> <span class="o">$51</span></span><span class="ce">; [6]:</span></span>
<span class="l"><a class="anc" name="ab76" href="#ab76">[ab76]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [7]:</span></span>
<span class="l"><a class="anc" name="ab77" href="#ab77">[ab77]</a><span class="cd"><span class="i">db</span> <span class="o">$52</span></span><span class="ce">; [8]:</span></span>
<span class="l"><a class="anc" name="ab78" href="#ab78">[ab78]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [9]:</span></span>
<span class="l"><a class="anc" name="ab79" href="#ab79">[ab79]</a><span class="cd"><span class="i">db</span> <span class="o">$53</span></span><span class="ce">; [10]:</span></span>
<span class="l"><a class="anc" name="ab7a" href="#ab7a">[ab7a]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [11]:</span></span>
<span class="l"><a class="anc" name="ab7b" href="#ab7b">[ab7b]</a><span class="cd"><span class="i">db</span> <span class="o">$54</span></span><span class="ce">; [12]:</span></span>
<span class="l"><a class="anc" name="ab7c" href="#ab7c">[ab7c]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [13]:</span></span>
<span class="l"><a class="anc" name="ab7d" href="#ab7d">[ab7d]</a><span class="cd"><span class="i">db</span> <span class="o">$55</span></span><span class="ce">; [14]:</span></span>
<span class="l"><a class="anc" name="ab7e" href="#ab7e">[ab7e]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [15]:</span></span>
<span class="l"><a class="anc" name="ab7f" href="#ab7f">[ab7f]</a><span class="cd"><span class="i">db</span> <span class="o">$56</span></span><span class="ce">; [16]:</span></span>
<span class="l"><a class="anc" name="ab80" href="#ab80">[ab80]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [17]:</span></span>
<span class="l"><a class="anc" name="ab81" href="#ab81">[ab81]</a><span class="cd"><span class="i">db</span> <span class="o">$57</span></span><span class="ce">; [18]:</span></span>
<span class="l"><a class="anc" name="ab82" href="#ab82">[ab82]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [19]:</span></span>
<span class="l"><a class="anc" name="ab83" href="#ab83">[ab83]</a><span class="cd"><span class="i">db</span> <span class="o">$58</span></span><span class="ce">; [20]:</span></span>
<span class="l"><a class="anc" name="ab84" href="#ab84">[ab84]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [21]:</span></span>
<span class="l"><a class="anc" name="ab85" href="#ab85">[ab85]</a><span class="cd"><span class="i">db</span> <span class="o">$59</span></span><span class="ce">; [22]:</span></span>
<span class="l"><a class="anc" name="ab86" href="#ab86">[ab86]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [23]:</span></span>
<span class="l"><a class="anc" name="ab87" href="#ab87">[ab87]</a><span class="cd"><span class="i">db</span> <span class="o">$f8</span></span><span class="ce">; [0]:</span></span>
<span class="l"><a class="anc" name="ab88" href="#ab88">[ab88]</a><span class="cd"><span class="i">db</span> <span class="o">$ec</span></span><span class="ce">; [1]:</span></span>
<span class="l"><a class="anc" name="ab89" href="#ab89">[ab89]</a><span class="cd"><span class="i">db</span> <span class="o">$02</span></span><span class="ce">; [2]:</span></span>
<span class="l"><a class="anc" name="ab8a" href="#ab8a">[ab8a]</a><span class="cd"><span class="i">db</span> <span class="o">$05</span></span><span class="ce">; [3]:</span></span>
<span class="l"><a class="anc" name="ab8b" href="#ab8b">[ab8b]</a><span class="cd"><span class="i">db</span> <span class="o">$46</span></span><span class="ce">; [4]:</span></span>
<span class="l"><a class="anc" name="ab8c" href="#ab8c">[ab8c]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [5]:</span></span>
<span class="l"><a class="anc" name="ab8d" href="#ab8d">[ab8d]</a><span class="cd"><span class="i">db</span> <span class="o">$47</span></span><span class="ce">; [6]:</span></span>
<span class="l"><a class="anc" name="ab8e" href="#ab8e">[ab8e]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [7]:</span></span>
<span class="l"><a class="anc" name="ab8f" href="#ab8f">[ab8f]</a><span class="cd"><span class="i">db</span> <span class="o">$5a</span></span><span class="ce">; [8]:</span></span>
<span class="l"><a class="anc" name="ab90" href="#ab90">[ab90]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [9]:</span></span>
<span class="l"><a class="anc" name="ab91" href="#ab91">[ab91]</a><span class="cd"><span class="i">db</span> <span class="o">$5b</span></span><span class="ce">; [10]:</span></span>
<span class="l"><a class="anc" name="ab92" href="#ab92">[ab92]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [11]:</span></span>
<span class="l"><a class="anc" name="ab93" href="#ab93">[ab93]</a><span class="cd"><span class="i">db</span> <span class="o">$5c</span></span><span class="ce">; [12]:</span></span>
<span class="l"><a class="anc" name="ab94" href="#ab94">[ab94]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [13]:</span></span>
<span class="l"><a class="anc" name="ab95" href="#ab95">[ab95]</a><span class="cd"><span class="i">db</span> <span class="o">$5d</span></span><span class="ce">; [14]:</span></span>
<span class="l"><a class="anc" name="ab96" href="#ab96">[ab96]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [15]:</span></span>
<span class="l"><a class="anc" name="ab97" href="#ab97">[ab97]</a><span class="cd"><span class="i">db</span> <span class="o">$5e</span></span><span class="ce">; [16]:</span></span>
<span class="l"><a class="anc" name="ab98" href="#ab98">[ab98]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [17]:</span></span>
<span class="l"><a class="anc" name="ab99" href="#ab99">[ab99]</a><span class="cd"><span class="i">db</span> <span class="o">$5f</span></span><span class="ce">; [18]:</span></span>
<span class="l"><a class="anc" name="ab9a" href="#ab9a">[ab9a]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [19]:</span></span>
<span class="l"><a class="anc" name="ab9b" href="#ab9b">[ab9b]</a><span class="cd"><span class="i">db</span> <span class="o">$60</span></span><span class="ce">; [20]:</span></span>
<span class="l"><a class="anc" name="ab9c" href="#ab9c">[ab9c]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [21]:</span></span>
<span class="l"><a class="anc" name="ab9d" href="#ab9d">[ab9d]</a><span class="cd"><span class="i">db</span> <span class="o">$61</span></span><span class="ce">; [22]:</span></span>
<span class="l"><a class="anc" name="ab9e" href="#ab9e">[ab9e]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [23]:</span></span>
<span class="l"><a class="anc" name="ab9f" href="#ab9f">[ab9f]</a><span class="cd"><span class="i">db</span> <span class="o">$f8</span></span><span class="ce">; [0]:</span></span>
<span class="l"><a class="anc" name="aba0" href="#aba0">[aba0]</a><span class="cd"><span class="i">db</span> <span class="o">$f0</span></span><span class="ce">; [1]:</span></span>
<span class="l"><a class="anc" name="aba1" href="#aba1">[aba1]</a><span class="cd"><span class="i">db</span> <span class="o">$02</span></span><span class="ce">; [2]:</span></span>
<span class="l"><a class="anc" name="aba2" href="#aba2">[aba2]</a><span class="cd"><span class="i">db</span> <span class="o">$04</span></span><span class="ce">; [3]:</span></span>
<span class="l"><a class="anc" name="aba3" href="#aba3">[aba3]</a><span class="cd"><span class="i">db</span> <span class="o">$62</span></span><span class="ce">; [4]:</span></span>
<span class="l"><a class="anc" name="aba4" href="#aba4">[aba4]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [5]:</span></span>
<span class="l"><a class="anc" name="aba5" href="#aba5">[aba5]</a><span class="cd"><span class="i">db</span> <span class="o">$63</span></span><span class="ce">; [6]:</span></span>
<span class="l"><a class="anc" name="aba6" href="#aba6">[aba6]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [7]:</span></span>
<span class="l"><a class="anc" name="aba7" href="#aba7">[aba7]</a><span class="cd"><span class="i">db</span> <span class="o">$64</span></span><span class="ce">; [8]:</span></span>
<span class="l"><a class="anc" name="aba8" href="#aba8">[aba8]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [9]:</span></span>
<span class="l"><a class="anc" name="aba9" href="#aba9">[aba9]</a><span class="cd"><span class="i">db</span> <span class="o">$65</span></span><span class="ce">; [10]:</span></span>
<span class="l"><a class="anc" name="abaa" href="#abaa">[abaa]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [11]:</span></span>
<span class="l"><a class="anc" name="abab" href="#abab">[abab]</a><span class="cd"><span class="i">db</span> <span class="o">$66</span></span><span class="ce">; [12]:</span></span>
<span class="l"><a class="anc" name="abac" href="#abac">[abac]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [13]:</span></span>
<span class="l"><a class="anc" name="abad" href="#abad">[abad]</a><span class="cd"><span class="i">db</span> <span class="o">$67</span></span><span class="ce">; [14]:</span></span>
<span class="l"><a class="anc" name="abae" href="#abae">[abae]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [15]:</span></span>
<span class="l"><a class="anc" name="abaf" href="#abaf">[abaf]</a><span class="cd"><span class="i">db</span> <span class="o">$68</span></span><span class="ce">; [16]:</span></span>
<span class="l"><a class="anc" name="abb0" href="#abb0">[abb0]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [17]:</span></span>
<span class="l"><a class="anc" name="abb1" href="#abb1">[abb1]</a><span class="cd"><span class="i">db</span> <span class="o">$69</span></span><span class="ce">; [18]:</span></span>
<span class="l"><a class="anc" name="abb2" href="#abb2">[abb2]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [19]:</span></span>
<span class="l"><a class="anc" name="abb3" href="#abb3">[abb3]</a><span class="cd"><span class="i">db</span> <span class="o">$f8</span></span><span class="ce">; [0]:</span></span>
<span class="l"><a class="anc" name="abb4" href="#abb4">[abb4]</a><span class="cd"><span class="i">db</span> <span class="o">$f0</span></span><span class="ce">; [1]:</span></span>
<span class="l"><a class="anc" name="abb5" href="#abb5">[abb5]</a><span class="cd"><span class="i">db</span> <span class="o">$02</span></span><span class="ce">; [2]:</span></span>
<span class="l"><a class="anc" name="abb6" href="#abb6">[abb6]</a><span class="cd"><span class="i">db</span> <span class="o">$04</span></span><span class="ce">; [3]:</span></span>
<span class="l"><a class="anc" name="abb7" href="#abb7">[abb7]</a><span class="cd"><span class="i">db</span> <span class="o">$62</span></span><span class="ce">; [4]:</span></span>
<span class="l"><a class="anc" name="abb8" href="#abb8">[abb8]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [5]:</span></span>
<span class="l"><a class="anc" name="abb9" href="#abb9">[abb9]</a><span class="cd"><span class="i">db</span> <span class="o">$63</span></span><span class="ce">; [6]:</span></span>
<span class="l"><a class="anc" name="abba" href="#abba">[abba]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [7]:</span></span>
<span class="l"><a class="anc" name="abbb" href="#abbb">[abbb]</a><span class="cd"><span class="i">db</span> <span class="o">$70</span></span><span class="ce">; [8]:</span></span>
<span class="l"><a class="anc" name="abbc" href="#abbc">[abbc]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [9]:</span></span>
<span class="l"><a class="anc" name="abbd" href="#abbd">[abbd]</a><span class="cd"><span class="i">db</span> <span class="o">$71</span></span><span class="ce">; [10]:</span></span>
<span class="l"><a class="anc" name="abbe" href="#abbe">[abbe]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [11]:</span></span>
<span class="l"><a class="anc" name="abbf" href="#abbf">[abbf]</a><span class="cd"><span class="i">db</span> <span class="o">$72</span></span><span class="ce">; [12]:</span></span>
<span class="l"><a class="anc" name="abc0" href="#abc0">[abc0]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [13]:</span></span>
<span class="l"><a class="anc" name="abc1" href="#abc1">[abc1]</a><span class="cd"><span class="i">db</span> <span class="o">$73</span></span><span class="ce">; [14]:</span></span>
<span class="l"><a class="anc" name="abc2" href="#abc2">[abc2]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [15]:</span></span>
<span class="l"><a class="anc" name="abc3" href="#abc3">[abc3]</a><span class="cd"><span class="i">db</span> <span class="o">$74</span></span><span class="ce">; [16]:</span></span>
<span class="l"><a class="anc" name="abc4" href="#abc4">[abc4]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [17]:</span></span>
<span class="l"><a class="anc" name="abc5" href="#abc5">[abc5]</a><span class="cd"><span class="i">db</span> <span class="o">$75</span></span><span class="ce">; [18]:</span></span>
<span class="l"><a class="anc" name="abc6" href="#abc6">[abc6]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [19]:</span></span>
<span class="l"><a class="anc" name="abc7" href="#abc7">[abc7]</a><span class="cd"><span class="i">db</span> <span class="o">$f8</span></span><span class="ce">; [0]:</span></span>
<span class="l"><a class="anc" name="abc8" href="#abc8">[abc8]</a><span class="cd"><span class="i">db</span> <span class="o">$f0</span></span><span class="ce">; [1]:</span></span>
<span class="l"><a class="anc" name="abc9" href="#abc9">[abc9]</a><span class="cd"><span class="i">db</span> <span class="o">$02</span></span><span class="ce">; [2]:</span></span>
<span class="l"><a class="anc" name="abca" href="#abca">[abca]</a><span class="cd"><span class="i">db</span> <span class="o">$04</span></span><span class="ce">; [3]:</span></span>
<span class="l"><a class="anc" name="abcb" href="#abcb">[abcb]</a><span class="cd"><span class="i">db</span> <span class="o">$62</span></span><span class="ce">; [4]:</span></span>
<span class="l"><a class="anc" name="abcc" href="#abcc">[abcc]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [5]:</span></span>
<span class="l"><a class="anc" name="abcd" href="#abcd">[abcd]</a><span class="cd"><span class="i">db</span> <span class="o">$63</span></span><span class="ce">; [6]:</span></span>
<span class="l"><a class="anc" name="abce" href="#abce">[abce]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [7]:</span></span>
<span class="l"><a class="anc" name="abcf" href="#abcf">[abcf]</a><span class="cd"><span class="i">db</span> <span class="o">$6a</span></span><span class="ce">; [8]:</span></span>
<span class="l"><a class="anc" name="abd0" href="#abd0">[abd0]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [9]:</span></span>
<span class="l"><a class="anc" name="abd1" href="#abd1">[abd1]</a><span class="cd"><span class="i">db</span> <span class="o">$6b</span></span><span class="ce">; [10]:</span></span>
<span class="l"><a class="anc" name="abd2" href="#abd2">[abd2]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [11]:</span></span>
<span class="l"><a class="anc" name="abd3" href="#abd3">[abd3]</a><span class="cd"><span class="i">db</span> <span class="o">$6c</span></span><span class="ce">; [12]:</span></span>
<span class="l"><a class="anc" name="abd4" href="#abd4">[abd4]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [13]:</span></span>
<span class="l"><a class="anc" name="abd5" href="#abd5">[abd5]</a><span class="cd"><span class="i">db</span> <span class="o">$6d</span></span><span class="ce">; [14]:</span></span>
<span class="l"><a class="anc" name="abd6" href="#abd6">[abd6]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [15]:</span></span>
<span class="l"><a class="anc" name="abd7" href="#abd7">[abd7]</a><span class="cd"><span class="i">db</span> <span class="o">$6e</span></span><span class="ce">; [16]:</span></span>
<span class="l"><a class="anc" name="abd8" href="#abd8">[abd8]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [17]:</span></span>
<span class="l"><a class="anc" name="abd9" href="#abd9">[abd9]</a><span class="cd"><span class="i">db</span> <span class="o">$6f</span></span><span class="ce">; [18]:</span></span>
<span class="l"><a class="anc" name="abda" href="#abda">[abda]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [19]:</span></span>
<span class="l"><a class="anc" name="abdb" href="#abdb">[abdb]</a><span class="cd"><span class="i">db</span> <span class="o">$f8</span></span><span class="ce">; [0]:</span></span>
<span class="l"><a class="anc" name="abdc" href="#abdc">[abdc]</a><span class="cd"><span class="i">db</span> <span class="o">$f4</span></span><span class="ce">; [1]:</span></span>
<span class="l"><a class="anc" name="abdd" href="#abdd">[abdd]</a><span class="cd"><span class="i">db</span> <span class="o">$02</span></span><span class="ce">; [2]:</span></span>
<span class="l"><a class="anc" name="abde" href="#abde">[abde]</a><span class="cd"><span class="i">db</span> <span class="o">$03</span></span><span class="ce">; [3]:</span></span>
<span class="l"><a class="anc" name="abdf" href="#abdf">[abdf]</a><span class="cd"><span class="i">db</span> <span class="o">$76</span></span><span class="ce">; [4]:</span></span>
<span class="l"><a class="anc" name="abe0" href="#abe0">[abe0]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [5]:</span></span>
<span class="l"><a class="anc" name="abe1" href="#abe1">[abe1]</a><span class="cd"><span class="i">db</span> <span class="o">$77</span></span><span class="ce">; [6]:</span></span>
<span class="l"><a class="anc" name="abe2" href="#abe2">[abe2]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [7]:</span></span>
<span class="l"><a class="anc" name="abe3" href="#abe3">[abe3]</a><span class="cd"><span class="i">db</span> <span class="o">$78</span></span><span class="ce">; [8]:</span></span>
<span class="l"><a class="anc" name="abe4" href="#abe4">[abe4]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [9]:</span></span>
<span class="l"><a class="anc" name="abe5" href="#abe5">[abe5]</a><span class="cd"><span class="i">db</span> <span class="o">$79</span></span><span class="ce">; [10]:</span></span>
<span class="l"><a class="anc" name="abe6" href="#abe6">[abe6]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [11]:</span></span>
<span class="l"><a class="anc" name="abe7" href="#abe7">[abe7]</a><span class="cd"><span class="i">db</span> <span class="o">$34</span></span><span class="ce">; [12]:</span></span>
<span class="l"><a class="anc" name="abe8" href="#abe8">[abe8]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [13]:</span></span>
<span class="l"><a class="anc" name="abe9" href="#abe9">[abe9]</a><span class="cd"><span class="i">db</span> <span class="o">$7b</span></span><span class="ce">; [14]:</span></span>
<span class="l"><a class="anc" name="abea" href="#abea">[abea]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [15]:</span></span>
<span class="l"><a class="anc" name="abeb" href="#abeb">[abeb]</a><span class="cd"><span class="i">db</span> <span class="o">$f8</span></span><span class="ce">; [0]:</span></span>
<span class="l"><a class="anc" name="abec" href="#abec">[abec]</a><span class="cd"><span class="i">db</span> <span class="o">$f4</span></span><span class="ce">; [1]:</span></span>
<span class="l"><a class="anc" name="abed" href="#abed">[abed]</a><span class="cd"><span class="i">db</span> <span class="o">$02</span></span><span class="ce">; [2]:</span></span>
<span class="l"><a class="anc" name="abee" href="#abee">[abee]</a><span class="cd"><span class="i">db</span> <span class="o">$03</span></span><span class="ce">; [3]:</span></span>
<span class="l"><a class="anc" name="abef" href="#abef">[abef]</a><span class="cd"><span class="i">db</span> <span class="o">$76</span></span><span class="ce">; [4]:</span></span>
<span class="l"><a class="anc" name="abf0" href="#abf0">[abf0]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [5]:</span></span>
<span class="l"><a class="anc" name="abf1" href="#abf1">[abf1]</a><span class="cd"><span class="i">db</span> <span class="o">$77</span></span><span class="ce">; [6]:</span></span>
<span class="l"><a class="anc" name="abf2" href="#abf2">[abf2]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [7]:</span></span>
<span class="l"><a class="anc" name="abf3" href="#abf3">[abf3]</a><span class="cd"><span class="i">db</span> <span class="o">$7c</span></span><span class="ce">; [8]:</span></span>
<span class="l"><a class="anc" name="abf4" href="#abf4">[abf4]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [9]:</span></span>
<span class="l"><a class="anc" name="abf5" href="#abf5">[abf5]</a><span class="cd"><span class="i">db</span> <span class="o">$7d</span></span><span class="ce">; [10]:</span></span>
<span class="l"><a class="anc" name="abf6" href="#abf6">[abf6]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [11]:</span></span>
<span class="l"><a class="anc" name="abf7" href="#abf7">[abf7]</a><span class="cd"><span class="i">db</span> <span class="o">$3a</span></span><span class="ce">; [12]:</span></span>
<span class="l"><a class="anc" name="abf8" href="#abf8">[abf8]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [13]:</span></span>
<span class="l"><a class="anc" name="abf9" href="#abf9">[abf9]</a><span class="cd"><span class="i">db</span> <span class="o">$7f</span></span><span class="ce">; [14]:</span></span>
<span class="l"><a class="anc" name="abfa" href="#abfa">[abfa]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [15]:</span></span>
<span class="l"><a class="anc" name="abfb" href="#abfb">[abfb]</a><span class="cd"><span class="i">db</span> <span class="o">$fc</span></span><span class="ce">; [0]:</span></span>
<span class="l"><a class="anc" name="abfc" href="#abfc">[abfc]</a><span class="cd"><span class="i">db</span> <span class="o">$f4</span></span><span class="ce">; [1]:</span></span>
<span class="l"><a class="anc" name="abfd" href="#abfd">[abfd]</a><span class="cd"><span class="i">db</span> <span class="o">$01</span></span><span class="ce">; [2]:</span></span>
<span class="l"><a class="anc" name="abfe" href="#abfe">[abfe]</a><span class="cd"><span class="i">db</span> <span class="o">$03</span></span><span class="ce">; [3]:</span></span>
<span class="l"><a class="anc" name="abff" href="#abff">[abff]</a><span class="cd"><span class="i">db</span> <span class="o">$36</span></span><span class="ce">; [4]:</span></span>
<span class="l"><a class="anc" name="ac00" href="#ac00">[ac00]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [5]:</span></span>
<span class="l"><a class="anc" name="ac01" href="#ac01">[ac01]</a><span class="cd"><span class="i">db</span> <span class="o">$3d</span></span><span class="ce">; [6]:</span></span>
<span class="l"><a class="anc" name="ac02" href="#ac02">[ac02]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [7]:</span></span>
<span class="l"><a class="anc" name="ac03" href="#ac03">[ac03]</a><span class="cd"><span class="i">db</span> <span class="o">$3e</span></span><span class="ce">; [8]:</span></span>
<span class="l"><a class="anc" name="ac04" href="#ac04">[ac04]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [9]:</span></span>
<span class="l"><a class="anc" name="ac05" href="#ac05">[ac05]</a><span class="cd"><span class="i">db</span> <span class="o">$fc</span></span><span class="ce">; [0]:</span></span>
<span class="l"><a class="anc" name="ac06" href="#ac06">[ac06]</a><span class="cd"><span class="i">db</span> <span class="o">$f4</span></span><span class="ce">; [1]:</span></span>
<span class="l"><a class="anc" name="ac07" href="#ac07">[ac07]</a><span class="cd"><span class="i">db</span> <span class="o">$01</span></span><span class="ce">; [2]:</span></span>
<span class="l"><a class="anc" name="ac08" href="#ac08">[ac08]</a><span class="cd"><span class="i">db</span> <span class="o">$03</span></span><span class="ce">; [3]:</span></span>
<span class="l"><a class="anc" name="ac09" href="#ac09">[ac09]</a><span class="cd"><span class="i">db</span> <span class="o">$37</span></span><span class="ce">; [4]:</span></span>
<span class="l"><a class="anc" name="ac0a" href="#ac0a">[ac0a]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [5]:</span></span>
<span class="l"><a class="anc" name="ac0b" href="#ac0b">[ac0b]</a><span class="cd"><span class="i">db</span> <span class="o">$40</span></span><span class="ce">; [6]:</span></span>
<span class="l"><a class="anc" name="ac0c" href="#ac0c">[ac0c]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [7]:</span></span>
<span class="l"><a class="anc" name="ac0d" href="#ac0d">[ac0d]</a><span class="cd"><span class="i">db</span> <span class="o">$41</span></span><span class="ce">; [8]:</span></span>
<span class="l"><a class="anc" name="ac0e" href="#ac0e">[ac0e]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [9]:</span></span>
<span class="l"><a class="anc" name="ac0f" href="#ac0f">[ac0f]</a><span class="cd"><span class="i">db</span> <span class="o">$fc</span></span><span class="ce">; [0]:</span></span>
<span class="l"><a class="anc" name="ac10" href="#ac10">[ac10]</a><span class="cd"><span class="i">db</span> <span class="o">$f8</span></span><span class="ce">; [1]:</span></span>
<span class="l"><a class="anc" name="ac11" href="#ac11">[ac11]</a><span class="cd"><span class="i">db</span> <span class="o">$01</span></span><span class="ce">; [2]:</span></span>
<span class="l"><a class="anc" name="ac12" href="#ac12">[ac12]</a><span class="cd"><span class="i">db</span> <span class="o">$02</span></span><span class="ce">; [3]:</span></span>
<span class="l"><a class="anc" name="ac13" href="#ac13">[ac13]</a><span class="cd"><span class="i">db</span> <span class="o">$7a</span></span><span class="ce">; [4]:</span></span>
<span class="l"><a class="anc" name="ac14" href="#ac14">[ac14]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [5]:</span></span>
<span class="l"><a class="anc" name="ac15" href="#ac15">[ac15]</a><span class="cd"><span class="i">db</span> <span class="o">$43</span></span><span class="ce">; [6]:</span></span>
<span class="l"><a class="anc" name="ac16" href="#ac16">[ac16]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [7]:</span></span>
<span class="l"><a class="anc" name="ac17" href="#ac17">[ac17]</a><span class="cd"><span class="i">db</span> <span class="o">$fc</span></span><span class="ce">; [0]:</span></span>
<span class="l"><a class="anc" name="ac18" href="#ac18">[ac18]</a><span class="cd"><span class="i">db</span> <span class="o">$f8</span></span><span class="ce">; [1]:</span></span>
<span class="l"><a class="anc" name="ac19" href="#ac19">[ac19]</a><span class="cd"><span class="i">db</span> <span class="o">$01</span></span><span class="ce">; [2]:</span></span>
<span class="l"><a class="anc" name="ac1a" href="#ac1a">[ac1a]</a><span class="cd"><span class="i">db</span> <span class="o">$02</span></span><span class="ce">; [3]:</span></span>
<span class="l"><a class="anc" name="ac1b" href="#ac1b">[ac1b]</a><span class="cd"><span class="i">db</span> <span class="o">$7e</span></span><span class="ce">; [4]:</span></span>
<span class="l"><a class="anc" name="ac1c" href="#ac1c">[ac1c]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [5]:</span></span>
<span class="l"><a class="anc" name="ac1d" href="#ac1d">[ac1d]</a><span class="cd"><span class="i">db</span> <span class="o">$45</span></span><span class="ce">; [6]:</span></span>
<span class="l"><a class="anc" name="ac1e" href="#ac1e">[ac1e]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [7]:</span></span>
<span class="l"><a class="anc" name="ac1f" href="#ac1f">[ac1f]</a><span class="cd"><span class="i">db</span> <span class="o">$fc</span></span><span class="ce">; [0]:</span></span>
<span class="l"><a class="anc" name="ac20" href="#ac20">[ac20]</a><span class="cd"><span class="i">db</span> <span class="o">$f8</span></span><span class="ce">; [1]:</span></span>
<span class="l"><a class="anc" name="ac21" href="#ac21">[ac21]</a><span class="cd"><span class="i">db</span> <span class="o">$01</span></span><span class="ce">; [2]:</span></span>
<span class="l"><a class="anc" name="ac22" href="#ac22">[ac22]</a><span class="cd"><span class="i">db</span> <span class="o">$02</span></span><span class="ce">; [3]:</span></span>
<span class="l"><a class="anc" name="ac23" href="#ac23">[ac23]</a><span class="cd"><span class="i">db</span> <span class="o">$42</span></span><span class="ce">; [4]:</span></span>
<span class="l"><a class="anc" name="ac24" href="#ac24">[ac24]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [5]:</span></span>
<span class="l"><a class="anc" name="ac25" href="#ac25">[ac25]</a><span class="cd"><span class="i">db</span> <span class="o">$43</span></span><span class="ce">; [6]:</span></span>
<span class="l"><a class="anc" name="ac26" href="#ac26">[ac26]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [7]:</span></span>
<span class="l"><a class="anc" name="ac27" href="#ac27">[ac27]</a><span class="cd"><span class="i">db</span> <span class="o">$fc</span></span><span class="ce">; [0]:</span></span>
<span class="l"><a class="anc" name="ac28" href="#ac28">[ac28]</a><span class="cd"><span class="i">db</span> <span class="o">$f8</span></span><span class="ce">; [1]:</span></span>
<span class="l"><a class="anc" name="ac29" href="#ac29">[ac29]</a><span class="cd"><span class="i">db</span> <span class="o">$01</span></span><span class="ce">; [2]:</span></span>
<span class="l"><a class="anc" name="ac2a" href="#ac2a">[ac2a]</a><span class="cd"><span class="i">db</span> <span class="o">$02</span></span><span class="ce">; [3]:</span></span>
<span class="l"><a class="anc" name="ac2b" href="#ac2b">[ac2b]</a><span class="cd"><span class="i">db</span> <span class="o">$44</span></span><span class="ce">; [4]:</span></span>
<span class="l"><a class="anc" name="ac2c" href="#ac2c">[ac2c]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [5]:</span></span>
<span class="l"><a class="anc" name="ac2d" href="#ac2d">[ac2d]</a><span class="cd"><span class="i">db</span> <span class="o">$45</span></span><span class="ce">; [6]:</span></span>
<span class="l"><a class="anc" name="ac2e" href="#ac2e">[ac2e]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [7]:</span></span>
<span class="l"><a class="anc" name="ac2f" href="#ac2f">[ac2f]</a><span class="cd"><span class="i">db</span> <span class="o">$fc</span></span><span class="ce">; [0]:</span></span>
<span class="l"><a class="anc" name="ac30" href="#ac30">[ac30]</a><span class="cd"><span class="i">db</span> <span class="o">$f4</span></span><span class="ce">; [1]:</span></span>
<span class="l"><a class="anc" name="ac31" href="#ac31">[ac31]</a><span class="cd"><span class="i">db</span> <span class="o">$01</span></span><span class="ce">; [2]:</span></span>
<span class="l"><a class="anc" name="ac32" href="#ac32">[ac32]</a><span class="cd"><span class="i">db</span> <span class="o">$03</span></span><span class="ce">; [3]:</span></span>
<span class="l"><a class="anc" name="ac33" href="#ac33">[ac33]</a><span class="cd"><span class="i">db</span> <span class="o">$3c</span></span><span class="ce">; [4]:</span></span>
<span class="l"><a class="anc" name="ac34" href="#ac34">[ac34]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [5]:</span></span>
<span class="l"><a class="anc" name="ac35" href="#ac35">[ac35]</a><span class="cd"><span class="i">db</span> <span class="o">$3d</span></span><span class="ce">; [6]:</span></span>
<span class="l"><a class="anc" name="ac36" href="#ac36">[ac36]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [7]:</span></span>
<span class="l"><a class="anc" name="ac37" href="#ac37">[ac37]</a><span class="cd"><span class="i">db</span> <span class="o">$3e</span></span><span class="ce">; [8]:</span></span>
<span class="l"><a class="anc" name="ac38" href="#ac38">[ac38]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [9]:</span></span>
<span class="l"><a class="anc" name="ac39" href="#ac39">[ac39]</a><span class="cd"><span class="i">db</span> <span class="o">$fc</span></span><span class="ce">; [0]:</span></span>
<span class="l"><a class="anc" name="ac3a" href="#ac3a">[ac3a]</a><span class="cd"><span class="i">db</span> <span class="o">$f4</span></span><span class="ce">; [1]:</span></span>
<span class="l"><a class="anc" name="ac3b" href="#ac3b">[ac3b]</a><span class="cd"><span class="i">db</span> <span class="o">$01</span></span><span class="ce">; [2]:</span></span>
<span class="l"><a class="anc" name="ac3c" href="#ac3c">[ac3c]</a><span class="cd"><span class="i">db</span> <span class="o">$03</span></span><span class="ce">; [3]:</span></span>
<span class="l"><a class="anc" name="ac3d" href="#ac3d">[ac3d]</a><span class="cd"><span class="i">db</span> <span class="o">$3f</span></span><span class="ce">; [4]:</span></span>
<span class="l"><a class="anc" name="ac3e" href="#ac3e">[ac3e]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [5]:</span></span>
<span class="l"><a class="anc" name="ac3f" href="#ac3f">[ac3f]</a><span class="cd"><span class="i">db</span> <span class="o">$40</span></span><span class="ce">; [6]:</span></span>
<span class="l"><a class="anc" name="ac40" href="#ac40">[ac40]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [7]:</span></span>
<span class="l"><a class="anc" name="ac41" href="#ac41">[ac41]</a><span class="cd"><span class="i">db</span> <span class="o">$41</span></span><span class="ce">; [8]:</span></span>
<span class="l"><a class="anc" name="ac42" href="#ac42">[ac42]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [9]:</span></span>
<span class="l"><a class="anc" name="ac43" href="#ac43">[ac43]</a><span class="cd"><span class="i">db</span> <span class="o">$f8</span></span><span class="ce">; [0]:</span></span>
<span class="l"><a class="anc" name="ac44" href="#ac44">[ac44]</a><span class="cd"><span class="i">db</span> <span class="o">$f4</span></span><span class="ce">; [1]:</span></span>
<span class="l"><a class="anc" name="ac45" href="#ac45">[ac45]</a><span class="cd"><span class="i">db</span> <span class="o">$02</span></span><span class="ce">; [0]:</span></span>
<span class="l"><a class="anc" name="ac46" href="#ac46">[ac46]</a><span class="cd"><span class="i">db</span> <span class="o">$03</span></span><span class="ce">; [1]:</span></span>
<span class="l"><a class="anc" name="ac47" href="#ac47">[ac47]</a><span class="cd"><span class="i">db</span> <span class="o">$30</span></span><span class="ce">; [2]:</span></span>
<span class="l"><a class="anc" name="ac48" href="#ac48">[ac48]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [3]:</span></span>
<span class="l"><a class="anc" name="ac49" href="#ac49">[ac49]</a><span class="cd"><span class="i">db</span> <span class="o">$31</span></span><span class="ce">; [4]:</span></span>
<span class="l"><a class="anc" name="ac4a" href="#ac4a">[ac4a]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [5]:</span></span>
<span class="l"><a class="anc" name="ac4b" href="#ac4b">[ac4b]</a><span class="cd"><span class="i">db</span> <span class="o">$32</span></span><span class="ce">; [6]:</span></span>
<span class="l"><a class="anc" name="ac4c" href="#ac4c">[ac4c]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [7]:</span></span>
<span class="l"><a class="anc" name="ac4d" href="#ac4d">[ac4d]</a><span class="cd"><span class="i">db</span> <span class="o">$33</span></span><span class="ce">; [8]:</span></span>
<span class="l"><a class="anc" name="ac4e" href="#ac4e">[ac4e]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [9]:</span></span>
<span class="l"><a class="anc" name="ac4f" href="#ac4f">[ac4f]</a><span class="cd"><span class="i">db</span> <span class="o">$34</span></span><span class="ce">; [10]:</span></span>
<span class="l"><a class="anc" name="ac50" href="#ac50">[ac50]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [11]:</span></span>
<span class="l"><a class="anc" name="ac51" href="#ac51">[ac51]</a><span class="cd"><span class="i">db</span> <span class="o">$35</span></span><span class="ce">; [12]:</span></span>
<span class="l"><a class="anc" name="ac52" href="#ac52">[ac52]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [13]:</span></span>
<span class="l"><a class="anc" name="ac53" href="#ac53">[ac53]</a><span class="cd"><span class="i">db</span> <span class="o">$f8</span></span><span class="ce">; [0]:</span></span>
<span class="l"><a class="anc" name="ac54" href="#ac54">[ac54]</a><span class="cd"><span class="i">db</span> <span class="o">$f4</span></span><span class="ce">; [1]:</span></span>
<span class="l"><a class="anc" name="ac55" href="#ac55">[ac55]</a><span class="cd"><span class="i">db</span> <span class="o">$02</span></span><span class="ce">; [2]:</span></span>
<span class="l"><a class="anc" name="ac56" href="#ac56">[ac56]</a><span class="cd"><span class="i">db</span> <span class="o">$03</span></span><span class="ce">; [3]:</span></span>
<span class="l"><a class="anc" name="ac57" href="#ac57">[ac57]</a><span class="cd"><span class="i">db</span> <span class="o">$30</span></span><span class="ce">; [4]:</span></span>
<span class="l"><a class="anc" name="ac58" href="#ac58">[ac58]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [5]:</span></span>
<span class="l"><a class="anc" name="ac59" href="#ac59">[ac59]</a><span class="cd"><span class="i">db</span> <span class="o">$31</span></span><span class="ce">; [6]:</span></span>
<span class="l"><a class="anc" name="ac5a" href="#ac5a">[ac5a]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [7]:</span></span>
<span class="l"><a class="anc" name="ac5b" href="#ac5b">[ac5b]</a><span class="cd"><span class="i">db</span> <span class="o">$38</span></span><span class="ce">; [8]:</span></span>
<span class="l"><a class="anc" name="ac5c" href="#ac5c">[ac5c]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [9]:</span></span>
<span class="l"><a class="anc" name="ac5d" href="#ac5d">[ac5d]</a><span class="cd"><span class="i">db</span> <span class="o">$39</span></span><span class="ce">; [10]:</span></span>
<span class="l"><a class="anc" name="ac5e" href="#ac5e">[ac5e]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [11]:</span></span>
<span class="l"><a class="anc" name="ac5f" href="#ac5f">[ac5f]</a><span class="cd"><span class="i">db</span> <span class="o">$3a</span></span><span class="ce">; [12]:</span></span>
<span class="l"><a class="anc" name="ac60" href="#ac60">[ac60]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [13]:</span></span>
<span class="l"><a class="anc" name="ac61" href="#ac61">[ac61]</a><span class="cd"><span class="i">db</span> <span class="o">$3b</span></span><span class="ce">; [14]:</span></span>
<span class="l"><a class="anc" name="ac62" href="#ac62">[ac62]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [15]:</span></span>
<span class="l"><a class="anc" name="ac63" href="#ac63">[ac63]</a><span class="cd"><span class="i">db</span> <span class="o">$f8</span></span><span class="ce">; [0]:</span></span>
<span class="l"><a class="anc" name="ac64" href="#ac64">[ac64]</a><span class="cd"><span class="i">db</span> <span class="o">$f0</span></span><span class="ce">; [1]:</span></span>
<span class="l"><a class="anc" name="ac65" href="#ac65">[ac65]</a><span class="cd"><span class="i">db</span> <span class="o">$02</span></span><span class="ce">; [2]:</span></span>
<span class="l"><a class="anc" name="ac66" href="#ac66">[ac66]</a><span class="cd"><span class="i">db</span> <span class="o">$04</span></span><span class="ce">; [3]:</span></span>
<span class="l"><a class="anc" name="ac67" href="#ac67">[ac67]</a><span class="cd"><span class="i">db</span> <span class="o">$1c</span></span><span class="ce">; [4]:</span></span>
<span class="l"><a class="anc" name="ac68" href="#ac68">[ac68]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [5]:</span></span>
<span class="l"><a class="anc" name="ac69" href="#ac69">[ac69]</a><span class="cd"><span class="i">db</span> <span class="o">$1d</span></span><span class="ce">; [6]:</span></span>
<span class="l"><a class="anc" name="ac6a" href="#ac6a">[ac6a]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [7]:</span></span>
<span class="l"><a class="anc" name="ac6b" href="#ac6b">[ac6b]</a><span class="cd"><span class="i">db</span> <span class="o">$1e</span></span><span class="ce">; [8]:</span></span>
<span class="l"><a class="anc" name="ac6c" href="#ac6c">[ac6c]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [9]:</span></span>
<span class="l"><a class="anc" name="ac6d" href="#ac6d">[ac6d]</a><span class="cd"><span class="i">db</span> <span class="o">$1f</span></span><span class="ce">; [10]:</span></span>
<span class="l"><a class="anc" name="ac6e" href="#ac6e">[ac6e]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [11]:</span></span>
<span class="l"><a class="anc" name="ac6f" href="#ac6f">[ac6f]</a><span class="cd"><span class="i">db</span> <span class="o">$20</span></span><span class="ce">; [12]:</span></span>
<span class="l"><a class="anc" name="ac70" href="#ac70">[ac70]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [13]:</span></span>
<span class="l"><a class="anc" name="ac71" href="#ac71">[ac71]</a><span class="cd"><span class="i">db</span> <span class="o">$21</span></span><span class="ce">; [14]:</span></span>
<span class="l"><a class="anc" name="ac72" href="#ac72">[ac72]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [15]:</span></span>
<span class="l"><a class="anc" name="ac73" href="#ac73">[ac73]</a><span class="cd"><span class="i">db</span> <span class="o">$22</span></span><span class="ce">; [16]:</span></span>
<span class="l"><a class="anc" name="ac74" href="#ac74">[ac74]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [17]:</span></span>
<span class="l"><a class="anc" name="ac75" href="#ac75">[ac75]</a><span class="cd"><span class="i">db</span> <span class="o">$23</span></span><span class="ce">; [18]:</span></span>
<span class="l"><a class="anc" name="ac76" href="#ac76">[ac76]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [19]:</span></span>
<span class="l"><a class="anc" name="ac77" href="#ac77">[ac77]</a><span class="cd"><span class="i">db</span> <span class="o">$f8</span></span><span class="ce">; [0]:</span></span>
<span class="l"><a class="anc" name="ac78" href="#ac78">[ac78]</a><span class="cd"><span class="i">db</span> <span class="o">$f0</span></span><span class="ce">; [1]:</span></span>
<span class="l"><a class="anc" name="ac79" href="#ac79">[ac79]</a><span class="cd"><span class="i">db</span> <span class="o">$02</span></span><span class="ce">; [2]:</span></span>
<span class="l"><a class="anc" name="ac7a" href="#ac7a">[ac7a]</a><span class="cd"><span class="i">db</span> <span class="o">$04</span></span><span class="ce">; [3]:</span></span>
<span class="l"><a class="anc" name="ac7b" href="#ac7b">[ac7b]</a><span class="cd"><span class="i">db</span> <span class="o">$1c</span></span><span class="ce">; [4]:</span></span>
<span class="l"><a class="anc" name="ac7c" href="#ac7c">[ac7c]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [5]:</span></span>
<span class="l"><a class="anc" name="ac7d" href="#ac7d">[ac7d]</a><span class="cd"><span class="i">db</span> <span class="o">$1d</span></span><span class="ce">; [6]:</span></span>
<span class="l"><a class="anc" name="ac7e" href="#ac7e">[ac7e]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [7]:</span></span>
<span class="l"><a class="anc" name="ac7f" href="#ac7f">[ac7f]</a><span class="cd"><span class="i">db</span> <span class="o">$2a</span></span><span class="ce">; [8]:</span></span>
<span class="l"><a class="anc" name="ac80" href="#ac80">[ac80]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [9]:</span></span>
<span class="l"><a class="anc" name="ac81" href="#ac81">[ac81]</a><span class="cd"><span class="i">db</span> <span class="o">$2b</span></span><span class="ce">; [10]:</span></span>
<span class="l"><a class="anc" name="ac82" href="#ac82">[ac82]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [11]:</span></span>
<span class="l"><a class="anc" name="ac83" href="#ac83">[ac83]</a><span class="cd"><span class="i">db</span> <span class="o">$2c</span></span><span class="ce">; [12]:</span></span>
<span class="l"><a class="anc" name="ac84" href="#ac84">[ac84]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [13]:</span></span>
<span class="l"><a class="anc" name="ac85" href="#ac85">[ac85]</a><span class="cd"><span class="i">db</span> <span class="o">$2d</span></span><span class="ce">; [14]:</span></span>
<span class="l"><a class="anc" name="ac86" href="#ac86">[ac86]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [15]:</span></span>
<span class="l"><a class="anc" name="ac87" href="#ac87">[ac87]</a><span class="cd"><span class="i">db</span> <span class="o">$2e</span></span><span class="ce">; [16]:</span></span>
<span class="l"><a class="anc" name="ac88" href="#ac88">[ac88]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [17]:</span></span>
<span class="l"><a class="anc" name="ac89" href="#ac89">[ac89]</a><span class="cd"><span class="i">db</span> <span class="o">$2f</span></span><span class="ce">; [18]:</span></span>
<span class="l"><a class="anc" name="ac8a" href="#ac8a">[ac8a]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [19]:</span></span>
<span class="l"><a class="anc" name="ac8b" href="#ac8b">[ac8b]</a><span class="cd"><span class="i">db</span> <span class="o">$f8</span></span><span class="ce">; [0]:</span></span>
<span class="l"><a class="anc" name="ac8c" href="#ac8c">[ac8c]</a><span class="cd"><span class="i">db</span> <span class="o">$f0</span></span><span class="ce">; [1]:</span></span>
<span class="l"><a class="anc" name="ac8d" href="#ac8d">[ac8d]</a><span class="cd"><span class="i">db</span> <span class="o">$02</span></span><span class="ce">; [2]:</span></span>
<span class="l"><a class="anc" name="ac8e" href="#ac8e">[ac8e]</a><span class="cd"><span class="i">db</span> <span class="o">$04</span></span><span class="ce">; [3]:</span></span>
<span class="l"><a class="anc" name="ac8f" href="#ac8f">[ac8f]</a><span class="cd"><span class="i">db</span> <span class="o">$1c</span></span><span class="ce">; [4]:</span></span>
<span class="l"><a class="anc" name="ac90" href="#ac90">[ac90]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [5]:</span></span>
<span class="l"><a class="anc" name="ac91" href="#ac91">[ac91]</a><span class="cd"><span class="i">db</span> <span class="o">$1d</span></span><span class="ce">; [6]:</span></span>
<span class="l"><a class="anc" name="ac92" href="#ac92">[ac92]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [7]:</span></span>
<span class="l"><a class="anc" name="ac93" href="#ac93">[ac93]</a><span class="cd"><span class="i">db</span> <span class="o">$24</span></span><span class="ce">; [8]:</span></span>
<span class="l"><a class="anc" name="ac94" href="#ac94">[ac94]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [9]:</span></span>
<span class="l"><a class="anc" name="ac95" href="#ac95">[ac95]</a><span class="cd"><span class="i">db</span> <span class="o">$25</span></span><span class="ce">; [10]:</span></span>
<span class="l"><a class="anc" name="ac96" href="#ac96">[ac96]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [11]:</span></span>
<span class="l"><a class="anc" name="ac97" href="#ac97">[ac97]</a><span class="cd"><span class="i">db</span> <span class="o">$26</span></span><span class="ce">; [12]:</span></span>
<span class="l"><a class="anc" name="ac98" href="#ac98">[ac98]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [13]:</span></span>
<span class="l"><a class="anc" name="ac99" href="#ac99">[ac99]</a><span class="cd"><span class="i">db</span> <span class="o">$27</span></span><span class="ce">; [14]:</span></span>
<span class="l"><a class="anc" name="ac9a" href="#ac9a">[ac9a]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [15]:</span></span>
<span class="l"><a class="anc" name="ac9b" href="#ac9b">[ac9b]</a><span class="cd"><span class="i">db</span> <span class="o">$28</span></span><span class="ce">; [16]:</span></span>
<span class="l"><a class="anc" name="ac9c" href="#ac9c">[ac9c]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [17]:</span></span>
<span class="l"><a class="anc" name="ac9d" href="#ac9d">[ac9d]</a><span class="cd"><span class="i">db</span> <span class="o">$29</span></span><span class="ce">; [18]:</span></span>
<span class="l"><a class="anc" name="ac9e" href="#ac9e">[ac9e]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [19]:</span></span>
<span class="l"><a class="anc" name="ac9f" href="#ac9f">[ac9f]</a><span class="cd"><span class="i">db</span> <span class="o">$f8</span></span><span class="ce">; [0]:</span></span>
<span class="l"><a class="anc" name="aca0" href="#aca0">[aca0]</a><span class="cd"><span class="i">db</span> <span class="o">$ec</span></span><span class="ce">; [1]:</span></span>
<span class="l"><a class="anc" name="aca1" href="#aca1">[aca1]</a><span class="cd"><span class="i">db</span> <span class="o">$02</span></span><span class="ce">; [2]:</span></span>
<span class="l"><a class="anc" name="aca2" href="#aca2">[aca2]</a><span class="cd"><span class="i">db</span> <span class="o">$05</span></span><span class="ce">; [3]:</span></span>
<span class="l"><a class="anc" name="aca3" href="#aca3">[aca3]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [4]:</span></span>
<span class="l"><a class="anc" name="aca4" href="#aca4">[aca4]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [5]:</span></span>
<span class="l"><a class="anc" name="aca5" href="#aca5">[aca5]</a><span class="cd"><span class="i">db</span> <span class="o">$01</span></span><span class="ce">; [6]:</span></span>
<span class="l"><a class="anc" name="aca6" href="#aca6">[aca6]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [7]:</span></span>
<span class="l"><a class="anc" name="aca7" href="#aca7">[aca7]</a><span class="cd"><span class="i">db</span> <span class="o">$02</span></span><span class="ce">; [8]:</span></span>
<span class="l"><a class="anc" name="aca8" href="#aca8">[aca8]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [9]:</span></span>
<span class="l"><a class="anc" name="aca9" href="#aca9">[aca9]</a><span class="cd"><span class="i">db</span> <span class="o">$03</span></span><span class="ce">; [10]:</span></span>
<span class="l"><a class="anc" name="acaa" href="#acaa">[acaa]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [11]:</span></span>
<span class="l"><a class="anc" name="acab" href="#acab">[acab]</a><span class="cd"><span class="i">db</span> <span class="o">$04</span></span><span class="ce">; [12]:</span></span>
<span class="l"><a class="anc" name="acac" href="#acac">[acac]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [13]:</span></span>
<span class="l"><a class="anc" name="acad" href="#acad">[acad]</a><span class="cd"><span class="i">db</span> <span class="o">$05</span></span><span class="ce">; [14]:</span></span>
<span class="l"><a class="anc" name="acae" href="#acae">[acae]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [15]:</span></span>
<span class="l"><a class="anc" name="acaf" href="#acaf">[acaf]</a><span class="cd"><span class="i">db</span> <span class="o">$06</span></span><span class="ce">; [16]:</span></span>
<span class="l"><a class="anc" name="acb0" href="#acb0">[acb0]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [17]:</span></span>
<span class="l"><a class="anc" name="acb1" href="#acb1">[acb1]</a><span class="cd"><span class="i">db</span> <span class="o">$07</span></span><span class="ce">; [18]:</span></span>
<span class="l"><a class="anc" name="acb2" href="#acb2">[acb2]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [19]:</span></span>
<span class="l"><a class="anc" name="acb3" href="#acb3">[acb3]</a><span class="cd"><span class="i">db</span> <span class="o">$08</span></span><span class="ce">; [20]:</span></span>
<span class="l"><a class="anc" name="acb4" href="#acb4">[acb4]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [21]:</span></span>
<span class="l"><a class="anc" name="acb5" href="#acb5">[acb5]</a><span class="cd"><span class="i">db</span> <span class="o">$09</span></span><span class="ce">; [22]:</span></span>
<span class="l"><a class="anc" name="acb6" href="#acb6">[acb6]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [23]:</span></span>
<span class="l"><a class="anc" name="acb7" href="#acb7">[acb7]</a><span class="cd"><span class="i">db</span> <span class="o">$f8</span></span><span class="ce">; [0]:</span></span>
<span class="l"><a class="anc" name="acb8" href="#acb8">[acb8]</a><span class="cd"><span class="i">db</span> <span class="o">$ec</span></span><span class="ce">; [1]:</span></span>
<span class="l"><a class="anc" name="acb9" href="#acb9">[acb9]</a><span class="cd"><span class="i">db</span> <span class="o">$02</span></span><span class="ce">; [2]:</span></span>
<span class="l"><a class="anc" name="acba" href="#acba">[acba]</a><span class="cd"><span class="i">db</span> <span class="o">$05</span></span><span class="ce">; [3]:</span></span>
<span class="l"><a class="anc" name="acbb" href="#acbb">[acbb]</a><span class="cd"><span class="i">db</span> <span class="o">$0a</span></span><span class="ce">; [4]:</span></span>
<span class="l"><a class="anc" name="acbc" href="#acbc">[acbc]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [5]:</span></span>
<span class="l"><a class="anc" name="acbd" href="#acbd">[acbd]</a><span class="cd"><span class="i">db</span> <span class="o">$0b</span></span><span class="ce">; [6]:</span></span>
<span class="l"><a class="anc" name="acbe" href="#acbe">[acbe]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [7]:</span></span>
<span class="l"><a class="anc" name="acbf" href="#acbf">[acbf]</a><span class="cd"><span class="i">db</span> <span class="o">$0c</span></span><span class="ce">; [8]:</span></span>
<span class="l"><a class="anc" name="acc0" href="#acc0">[acc0]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [9]:</span></span>
<span class="l"><a class="anc" name="acc1" href="#acc1">[acc1]</a><span class="cd"><span class="i">db</span> <span class="o">$0d</span></span><span class="ce">; [10]:</span></span>
<span class="l"><a class="anc" name="acc2" href="#acc2">[acc2]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [11]:</span></span>
<span class="l"><a class="anc" name="acc3" href="#acc3">[acc3]</a><span class="cd"><span class="i">db</span> <span class="o">$0e</span></span><span class="ce">; [12]:</span></span>
<span class="l"><a class="anc" name="acc4" href="#acc4">[acc4]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [13]:</span></span>
<span class="l"><a class="anc" name="acc5" href="#acc5">[acc5]</a><span class="cd"><span class="i">db</span> <span class="o">$0f</span></span><span class="ce">; [14]:</span></span>
<span class="l"><a class="anc" name="acc6" href="#acc6">[acc6]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [15]:</span></span>
<span class="l"><a class="anc" name="acc7" href="#acc7">[acc7]</a><span class="cd"><span class="i">db</span> <span class="o">$10</span></span><span class="ce">; [16]:</span></span>
<span class="l"><a class="anc" name="acc8" href="#acc8">[acc8]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [17]:</span></span>
<span class="l"><a class="anc" name="acc9" href="#acc9">[acc9]</a><span class="cd"><span class="i">db</span> <span class="o">$11</span></span><span class="ce">; [18]:</span></span>
<span class="l"><a class="anc" name="acca" href="#acca">[acca]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [19]:</span></span>
<span class="l"><a class="anc" name="accb" href="#accb">[accb]</a><span class="cd"><span class="i">db</span> <span class="o">$12</span></span><span class="ce">; [20]:</span></span>
<span class="l"><a class="anc" name="accc" href="#accc">[accc]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [21]:</span></span>
<span class="l"><a class="anc" name="accd" href="#accd">[accd]</a><span class="cd"><span class="i">db</span> <span class="o">$13</span></span><span class="ce">; [22]:</span></span>
<span class="l"><a class="anc" name="acce" href="#acce">[acce]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [23]:</span></span>
<span class="l"><a class="anc" name="accf" href="#accf">[accf]</a><span class="cd"><span class="i">db</span> <span class="o">$f8</span></span><span class="ce">; [0]:</span></span>
<span class="l"><a class="anc" name="acd0" href="#acd0">[acd0]</a><span class="cd"><span class="i">db</span> <span class="o">$ec</span></span><span class="ce">; [1]:</span></span>
<span class="l"><a class="anc" name="acd1" href="#acd1">[acd1]</a><span class="cd"><span class="i">db</span> <span class="o">$02</span></span><span class="ce">; [2]:</span></span>
<span class="l"><a class="anc" name="acd2" href="#acd2">[acd2]</a><span class="cd"><span class="i">db</span> <span class="o">$05</span></span><span class="ce">; [3]:</span></span>
<span class="l"><a class="anc" name="acd3" href="#acd3">[acd3]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [4]:</span></span>
<span class="l"><a class="anc" name="acd4" href="#acd4">[acd4]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [5]:</span></span>
<span class="l"><a class="anc" name="acd5" href="#acd5">[acd5]</a><span class="cd"><span class="i">db</span> <span class="o">$01</span></span><span class="ce">; [6]:</span></span>
<span class="l"><a class="anc" name="acd6" href="#acd6">[acd6]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [7]:</span></span>
<span class="l"><a class="anc" name="acd7" href="#acd7">[acd7]</a><span class="cd"><span class="i">db</span> <span class="o">$14</span></span><span class="ce">; [8]:</span></span>
<span class="l"><a class="anc" name="acd8" href="#acd8">[acd8]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [9]:</span></span>
<span class="l"><a class="anc" name="acd9" href="#acd9">[acd9]</a><span class="cd"><span class="i">db</span> <span class="o">$15</span></span><span class="ce">; [10]:</span></span>
<span class="l"><a class="anc" name="acda" href="#acda">[acda]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [11]:</span></span>
<span class="l"><a class="anc" name="acdb" href="#acdb">[acdb]</a><span class="cd"><span class="i">db</span> <span class="o">$16</span></span><span class="ce">; [12]:</span></span>
<span class="l"><a class="anc" name="acdc" href="#acdc">[acdc]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [13]:</span></span>
<span class="l"><a class="anc" name="acdd" href="#acdd">[acdd]</a><span class="cd"><span class="i">db</span> <span class="o">$17</span></span><span class="ce">; [14]:</span></span>
<span class="l"><a class="anc" name="acde" href="#acde">[acde]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [15]:</span></span>
<span class="l"><a class="anc" name="acdf" href="#acdf">[acdf]</a><span class="cd"><span class="i">db</span> <span class="o">$18</span></span><span class="ce">; [16]:</span></span>
<span class="l"><a class="anc" name="ace0" href="#ace0">[ace0]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [17]:</span></span>
<span class="l"><a class="anc" name="ace1" href="#ace1">[ace1]</a><span class="cd"><span class="i">db</span> <span class="o">$19</span></span><span class="ce">; [18]:</span></span>
<span class="l"><a class="anc" name="ace2" href="#ace2">[ace2]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [19]:</span></span>
<span class="l"><a class="anc" name="ace3" href="#ace3">[ace3]</a><span class="cd"><span class="i">db</span> <span class="o">$1a</span></span><span class="ce">; [20]:</span></span>
<span class="l"><a class="anc" name="ace4" href="#ace4">[ace4]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [21]:</span></span>
<span class="l"><a class="anc" name="ace5" href="#ace5">[ace5]</a><span class="cd"><span class="i">db</span> <span class="o">$1b</span></span><span class="ce">; [22]:</span></span>
<span class="l"><a class="anc" name="ace6" href="#ace6">[ace6]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [23]:</span></span>
<span class="l"><a class="anc" name="ace7" href="#ace7">[ace7]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [0]:</span></span>
<span class="l"><a class="anc" name="ace8" href="#ace8">[ace8]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [1]:</span></span>
<span class="l"><a class="anc" name="ace9" href="#ace9">[ace9]</a><span class="cd"><span class="i">db</span> <span class="o">$04</span></span><span class="ce">; [2]:</span></span>
<span class="l"><a class="anc" name="acea" href="#acea">[acea]</a><span class="cd"><span class="i">db</span> <span class="o">$0b</span></span><span class="ce">; [3]:</span></span>
<span class="l"><a class="anc" name="aceb" href="#aceb">[aceb]</a><span class="cd"><span class="i">db</span> <span class="o">$ff</span></span><span class="ce">; [4]:</span></span>
<span class="l"><a class="anc" name="acec" href="#acec">[acec]</a><span class="cd"><span class="i">db</span> <span class="o">$80</span></span><span class="ce">; [5]:</span></span>
<span class="l"><a class="anc" name="aced" href="#aced">[aced]</a><span class="cd"><span class="i">db</span> <span class="o">$01</span></span><span class="ce">; [6]:</span></span>
<span class="l"><a class="anc" name="acee" href="#acee">[acee]</a><span class="cd"><span class="i">db</span> <span class="o">$83</span></span><span class="ce">; [7]:</span></span>
<span class="l"><a class="anc" name="acef" href="#acef">[acef]</a><span class="cd"><span class="i">db</span> <span class="o">$01</span></span><span class="ce">; [8]:</span></span>
<span class="l"><a class="anc" name="acf0" href="#acf0">[acf0]</a><span class="cd"><span class="i">db</span> <span class="o">$83</span></span><span class="ce">; [9]:</span></span>
<span class="l"><a class="anc" name="acf1" href="#acf1">[acf1]</a><span class="cd"><span class="i">db</span> <span class="o">$01</span></span><span class="ce">; [10]:</span></span>
<span class="l"><a class="anc" name="acf2" href="#acf2">[acf2]</a><span class="cd"><span class="i">db</span> <span class="o">$ff</span></span><span class="ce">; [11]:</span></span>
<span class="l"><a class="anc" name="acf3" href="#acf3">[acf3]</a><span class="cd"><span class="i">db</span> <span class="o">$81</span></span><span class="ce">; [12]:</span></span>
<span class="l"><a class="anc" name="acf4" href="#acf4">[acf4]</a><span class="cd"><span class="i">db</span> <span class="o">$01</span></span><span class="ce">; [13]:</span></span>
<span class="l"><a class="anc" name="acf5" href="#acf5">[acf5]</a><span class="cd"><span class="i">db</span> <span class="o">$8e</span></span><span class="ce">; [14]:</span></span>
<span class="l"><a class="anc" name="acf6" href="#acf6">[acf6]</a><span class="cd"><span class="i">db</span> <span class="o">$01</span></span><span class="ce">; [15]:</span></span>
<span class="l"><a class="anc" name="acf7" href="#acf7">[acf7]</a><span class="cd"><span class="i">db</span> <span class="o">$ff</span></span><span class="ce">; [16]:</span></span>
<span class="l"><a class="anc" name="acf8" href="#acf8">[acf8]</a><span class="cd"><span class="i">db</span> <span class="o">$ff</span></span><span class="ce">; [17]:</span></span>
<span class="l"><a class="anc" name="acf9" href="#acf9">[acf9]</a><span class="cd"><span class="i">db</span> <span class="o">$81</span></span><span class="ce">; [18]:</span></span>
<span class="l"><a class="anc" name="acfa" href="#acfa">[acfa]</a><span class="cd"><span class="i">db</span> <span class="o">$01</span></span><span class="ce">; [19]:</span></span>
<span class="l"><a class="anc" name="acfb" href="#acfb">[acfb]</a><span class="cd"><span class="i">db</span> <span class="o">$ff</span></span><span class="ce">; [20]:</span></span>
<span class="l"><a class="anc" name="acfc" href="#acfc">[acfc]</a><span class="cd"><span class="i">db</span> <span class="o">$ff</span></span><span class="ce">; [21]:</span></span>
<span class="l"><a class="anc" name="acfd" href="#acfd">[acfd]</a><span class="cd"><span class="i">db</span> <span class="o">$ff</span></span><span class="ce">; [22]:</span></span>
<span class="l"><a class="anc" name="acfe" href="#acfe">[acfe]</a><span class="cd"><span class="i">db</span> <span class="o">$81</span></span><span class="ce">; [23]:</span></span>
<span class="l"><a class="anc" name="acff" href="#acff">[acff]</a><span class="cd"><span class="i">db</span> <span class="o">$01</span></span><span class="ce">; [24]:</span></span>
<span class="l"><a class="anc" name="ad00" href="#ad00">[ad00]</a><span class="cd"><span class="i">db</span> <span class="o">$ff</span></span><span class="ce">; [25]:</span></span>
<span class="l"><a class="anc" name="ad01" href="#ad01">[ad01]</a><span class="cd"><span class="i">db</span> <span class="o">$ff</span></span><span class="ce">; [26]:</span></span>
<span class="l"><a class="anc" name="ad02" href="#ad02">[ad02]</a><span class="cd"><span class="i">db</span> <span class="o">$ff</span></span><span class="ce">; [27]:</span></span>
<span class="l"><a class="anc" name="ad03" href="#ad03">[ad03]</a><span class="cd"><span class="i">db</span> <span class="o">$81</span></span><span class="ce">; [28]:</span></span>
<span class="l"><a class="anc" name="ad04" href="#ad04">[ad04]</a><span class="cd"><span class="i">db</span> <span class="o">$01</span></span><span class="ce">; [29]:</span></span>
<span class="l"><a class="anc" name="ad05" href="#ad05">[ad05]</a><span class="cd"><span class="i">db</span> <span class="o">$ff</span></span><span class="ce">; [30]:</span></span>
<span class="l"><a class="anc" name="ad06" href="#ad06">[ad06]</a><span class="cd"><span class="i">db</span> <span class="o">$ff</span></span><span class="ce">; [31]:</span></span>
<span class="l"><a class="anc" name="ad07" href="#ad07">[ad07]</a><span class="cd"><span class="i">db</span> <span class="o">$ff</span></span><span class="ce">; [32]:</span></span>
<span class="l"><a class="anc" name="ad08" href="#ad08">[ad08]</a><span class="cd"><span class="i">db</span> <span class="o">$81</span></span><span class="ce">; [33]:</span></span>
<span class="l"><a class="anc" name="ad09" href="#ad09">[ad09]</a><span class="cd"><span class="i">db</span> <span class="o">$01</span></span><span class="ce">; [34]:</span></span>
<span class="l"><a class="anc" name="ad0a" href="#ad0a">[ad0a]</a><span class="cd"><span class="i">db</span> <span class="o">$ff</span></span><span class="ce">; [35]:</span></span>
<span class="l"><a class="anc" name="ad0b" href="#ad0b">[ad0b]</a><span class="cd"><span class="i">db</span> <span class="o">$ff</span></span><span class="ce">; [36]:</span></span>
<span class="l"><a class="anc" name="ad0c" href="#ad0c">[ad0c]</a><span class="cd"><span class="i">db</span> <span class="o">$ff</span></span><span class="ce">; [37]:</span></span>
<span class="l"><a class="anc" name="ad0d" href="#ad0d">[ad0d]</a><span class="cd"><span class="i">db</span> <span class="o">$81</span></span><span class="ce">; [38]:</span></span>
<span class="l"><a class="anc" name="ad0e" href="#ad0e">[ad0e]</a><span class="cd"><span class="i">db</span> <span class="o">$01</span></span><span class="ce">; [39]:</span></span>
<span class="l"><a class="anc" name="ad0f" href="#ad0f">[ad0f]</a><span class="cd"><span class="i">db</span> <span class="o">$ff</span></span><span class="ce">; [40]:</span></span>
<span class="l"><a class="anc" name="ad10" href="#ad10">[ad10]</a><span class="cd"><span class="i">db</span> <span class="o">$ff</span></span><span class="ce">; [41]:</span></span>
<span class="l"><a class="anc" name="ad11" href="#ad11">[ad11]</a><span class="cd"><span class="i">db</span> <span class="o">$ff</span></span><span class="ce">; [42]:</span></span>
<span class="l"><a class="anc" name="ad12" href="#ad12">[ad12]</a><span class="cd"><span class="i">db</span> <span class="o">$81</span></span><span class="ce">; [43]:</span></span>
<span class="l"><a class="anc" name="ad13" href="#ad13">[ad13]</a><span class="cd"><span class="i">db</span> <span class="o">$01</span></span><span class="ce">; [44]:</span></span>
<span class="l"><a class="anc" name="ad14" href="#ad14">[ad14]</a><span class="cd"><span class="i">db</span> <span class="o">$ff</span></span><span class="ce">; [45]:</span></span>
<span class="l"><a class="anc" name="ad15" href="#ad15">[ad15]</a><span class="cd"><span class="i">db</span> <span class="o">$ff</span></span><span class="ce">; [46]:</span></span>
<span class="l"><a class="anc" name="ad16" href="#ad16">[ad16]</a><span class="cd"><span class="i">db</span> <span class="o">$ff</span></span><span class="ce">; [47]:</span></span>
<span class="l"><a class="anc" name="ad17" href="#ad17">[ad17]</a><span class="cd"><span class="i">db</span> <span class="o">$81</span></span><span class="ce">; [48]:</span></span>
<span class="l"><a class="anc" name="ad18" href="#ad18">[ad18]</a><span class="cd"><span class="i">db</span> <span class="o">$01</span></span><span class="ce">; [49]:</span></span>
<span class="l"><a class="anc" name="ad19" href="#ad19">[ad19]</a><span class="cd"><span class="i">db</span> <span class="o">$ff</span></span><span class="ce">; [50]:</span></span>
<span class="l"><a class="anc" name="ad1a" href="#ad1a">[ad1a]</a><span class="cd"><span class="i">db</span> <span class="o">$ff</span></span><span class="ce">; [51]:</span></span>
<span class="l"><a class="anc" name="ad1b" href="#ad1b">[ad1b]</a><span class="cd"><span class="i">db</span> <span class="o">$84</span></span><span class="ce">; [52]:</span></span>
<span class="l"><a class="anc" name="ad1c" href="#ad1c">[ad1c]</a><span class="cd"><span class="i">db</span> <span class="o">$01</span></span><span class="ce">; [53]:</span></span>
<span class="l"><a class="anc" name="ad1d" href="#ad1d">[ad1d]</a><span class="cd"><span class="i">db</span> <span class="o">$85</span></span><span class="ce">; [54]:</span></span>
<span class="l"><a class="anc" name="ad1e" href="#ad1e">[ad1e]</a><span class="cd"><span class="i">db</span> <span class="o">$01</span></span><span class="ce">; [55]:</span></span>
<span class="l"><a class="anc" name="ad1f" href="#ad1f">[ad1f]</a><span class="cd"><span class="i">db</span> <span class="o">$ff</span></span><span class="ce">; [56]:</span></span>
<span class="l"><a class="anc" name="ad20" href="#ad20">[ad20]</a><span class="cd"><span class="i">db</span> <span class="o">$ff</span></span><span class="ce">; [57]:</span></span>
<span class="l"><a class="anc" name="ad21" href="#ad21">[ad21]</a><span class="cd"><span class="i">db</span> <span class="o">$ff</span></span><span class="ce">; [58]:</span></span>
<span class="l"><a class="anc" name="ad22" href="#ad22">[ad22]</a><span class="cd"><span class="i">db</span> <span class="o">$8f</span></span><span class="ce">; [59]:</span></span>
<span class="l"><a class="anc" name="ad23" href="#ad23">[ad23]</a><span class="cd"><span class="i">db</span> <span class="o">$01</span></span><span class="ce">; [60]:</span></span>
<span class="l"><a class="anc" name="ad24" href="#ad24">[ad24]</a><span class="cd"><span class="i">db</span> <span class="o">$ff</span></span><span class="ce">; [61]:</span></span>
<span class="l"><a class="anc" name="ad25" href="#ad25">[ad25]</a><span class="cd"><span class="i">db</span> <span class="o">$ff</span></span><span class="ce">; [62]:</span></span>
<span class="l"><a class="anc" name="ad26" href="#ad26">[ad26]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [0]:</span></span>
<span class="l"><a class="anc" name="ad27" href="#ad27">[ad27]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [1]:</span></span>
<span class="l"><a class="anc" name="ad28" href="#ad28">[ad28]</a><span class="cd"><span class="i">db</span> <span class="o">$04</span></span><span class="ce">; [2]:</span></span>
<span class="l"><a class="anc" name="ad29" href="#ad29">[ad29]</a><span class="cd"><span class="i">db</span> <span class="o">$0b</span></span><span class="ce">; [3]:</span></span>
<span class="l"><a class="anc" name="ad2a" href="#ad2a">[ad2a]</a><span class="cd"><span class="i">db</span> <span class="o">$ff</span></span><span class="ce">; [4]:</span></span>
<span class="l"><a class="anc" name="ad2b" href="#ad2b">[ad2b]</a><span class="cd"><span class="i">db</span> <span class="o">$82</span></span><span class="ce">; [5]:</span></span>
<span class="l"><a class="anc" name="ad2c" href="#ad2c">[ad2c]</a><span class="cd"><span class="i">db</span> <span class="o">$01</span></span><span class="ce">; [6]:</span></span>
<span class="l"><a class="anc" name="ad2d" href="#ad2d">[ad2d]</a><span class="cd"><span class="i">db</span> <span class="o">$83</span></span><span class="ce">; [7]:</span></span>
<span class="l"><a class="anc" name="ad2e" href="#ad2e">[ad2e]</a><span class="cd"><span class="i">db</span> <span class="o">$81</span></span><span class="ce">; [8]:</span></span>
<span class="l"><a class="anc" name="ad2f" href="#ad2f">[ad2f]</a><span class="cd"><span class="i">db</span> <span class="o">$83</span></span><span class="ce">; [9]:</span></span>
<span class="l"><a class="anc" name="ad30" href="#ad30">[ad30]</a><span class="cd"><span class="i">db</span> <span class="o">$81</span></span><span class="ce">; [10]:</span></span>
<span class="l"><a class="anc" name="ad31" href="#ad31">[ad31]</a><span class="cd"><span class="i">db</span> <span class="o">$ff</span></span><span class="ce">; [11]:</span></span>
<span class="l"><a class="anc" name="ad32" href="#ad32">[ad32]</a><span class="cd"><span class="i">db</span> <span class="o">$81</span></span><span class="ce">; [12]:</span></span>
<span class="l"><a class="anc" name="ad33" href="#ad33">[ad33]</a><span class="cd"><span class="i">db</span> <span class="o">$41</span></span><span class="ce">; [13]:</span></span>
<span class="l"><a class="anc" name="ad34" href="#ad34">[ad34]</a><span class="cd"><span class="i">db</span> <span class="o">$8e</span></span><span class="ce">; [14]:</span></span>
<span class="l"><a class="anc" name="ad35" href="#ad35">[ad35]</a><span class="cd"><span class="i">db</span> <span class="o">$01</span></span><span class="ce">; [15]:</span></span>
<span class="l"><a class="anc" name="ad36" href="#ad36">[ad36]</a><span class="cd"><span class="i">db</span> <span class="o">$ff</span></span><span class="ce">; [16]:</span></span>
<span class="l"><a class="anc" name="ad37" href="#ad37">[ad37]</a><span class="cd"><span class="i">db</span> <span class="o">$ff</span></span><span class="ce">; [17]:</span></span>
<span class="l"><a class="anc" name="ad38" href="#ad38">[ad38]</a><span class="cd"><span class="i">db</span> <span class="o">$81</span></span><span class="ce">; [18]:</span></span>
<span class="l"><a class="anc" name="ad39" href="#ad39">[ad39]</a><span class="cd"><span class="i">db</span> <span class="o">$41</span></span><span class="ce">; [19]:</span></span>
<span class="l"><a class="anc" name="ad3a" href="#ad3a">[ad3a]</a><span class="cd"><span class="i">db</span> <span class="o">$ff</span></span><span class="ce">; [20]:</span></span>
<span class="l"><a class="anc" name="ad3b" href="#ad3b">[ad3b]</a><span class="cd"><span class="i">db</span> <span class="o">$ff</span></span><span class="ce">; [21]:</span></span>
<span class="l"><a class="anc" name="ad3c" href="#ad3c">[ad3c]</a><span class="cd"><span class="i">db</span> <span class="o">$ff</span></span><span class="ce">; [22]:</span></span>
<span class="l"><a class="anc" name="ad3d" href="#ad3d">[ad3d]</a><span class="cd"><span class="i">db</span> <span class="o">$81</span></span><span class="ce">; [23]:</span></span>
<span class="l"><a class="anc" name="ad3e" href="#ad3e">[ad3e]</a><span class="cd"><span class="i">db</span> <span class="o">$41</span></span><span class="ce">; [24]:</span></span>
<span class="l"><a class="anc" name="ad3f" href="#ad3f">[ad3f]</a><span class="cd"><span class="i">db</span> <span class="o">$ff</span></span><span class="ce">; [25]:</span></span>
<span class="l"><a class="anc" name="ad40" href="#ad40">[ad40]</a><span class="cd"><span class="i">db</span> <span class="o">$ff</span></span><span class="ce">; [26]:</span></span>
<span class="l"><a class="anc" name="ad41" href="#ad41">[ad41]</a><span class="cd"><span class="i">db</span> <span class="o">$ff</span></span><span class="ce">; [27]:</span></span>
<span class="l"><a class="anc" name="ad42" href="#ad42">[ad42]</a><span class="cd"><span class="i">db</span> <span class="o">$81</span></span><span class="ce">; [28]:</span></span>
<span class="l"><a class="anc" name="ad43" href="#ad43">[ad43]</a><span class="cd"><span class="i">db</span> <span class="o">$41</span></span><span class="ce">; [29]:</span></span>
<span class="l"><a class="anc" name="ad44" href="#ad44">[ad44]</a><span class="cd"><span class="i">db</span> <span class="o">$ff</span></span><span class="ce">; [30]:</span></span>
<span class="l"><a class="anc" name="ad45" href="#ad45">[ad45]</a><span class="cd"><span class="i">db</span> <span class="o">$ff</span></span><span class="ce">; [31]:</span></span>
<span class="l"><a class="anc" name="ad46" href="#ad46">[ad46]</a><span class="cd"><span class="i">db</span> <span class="o">$ff</span></span><span class="ce">; [32]:</span></span>
<span class="l"><a class="anc" name="ad47" href="#ad47">[ad47]</a><span class="cd"><span class="i">db</span> <span class="o">$81</span></span><span class="ce">; [33]:</span></span>
<span class="l"><a class="anc" name="ad48" href="#ad48">[ad48]</a><span class="cd"><span class="i">db</span> <span class="o">$41</span></span><span class="ce">; [34]:</span></span>
<span class="l"><a class="anc" name="ad49" href="#ad49">[ad49]</a><span class="cd"><span class="i">db</span> <span class="o">$ff</span></span><span class="ce">; [35]:</span></span>
<span class="l"><a class="anc" name="ad4a" href="#ad4a">[ad4a]</a><span class="cd"><span class="i">db</span> <span class="o">$ff</span></span><span class="ce">; [36]:</span></span>
<span class="l"><a class="anc" name="ad4b" href="#ad4b">[ad4b]</a><span class="cd"><span class="i">db</span> <span class="o">$ff</span></span><span class="ce">; [37]:</span></span>
<span class="l"><a class="anc" name="ad4c" href="#ad4c">[ad4c]</a><span class="cd"><span class="i">db</span> <span class="o">$81</span></span><span class="ce">; [38]:</span></span>
<span class="l"><a class="anc" name="ad4d" href="#ad4d">[ad4d]</a><span class="cd"><span class="i">db</span> <span class="o">$41</span></span><span class="ce">; [39]:</span></span>
<span class="l"><a class="anc" name="ad4e" href="#ad4e">[ad4e]</a><span class="cd"><span class="i">db</span> <span class="o">$ff</span></span><span class="ce">; [40]:</span></span>
<span class="l"><a class="anc" name="ad4f" href="#ad4f">[ad4f]</a><span class="cd"><span class="i">db</span> <span class="o">$ff</span></span><span class="ce">; [41]:</span></span>
<span class="l"><a class="anc" name="ad50" href="#ad50">[ad50]</a><span class="cd"><span class="i">db</span> <span class="o">$ff</span></span><span class="ce">; [42]:</span></span>
<span class="l"><a class="anc" name="ad51" href="#ad51">[ad51]</a><span class="cd"><span class="i">db</span> <span class="o">$81</span></span><span class="ce">; [43]:</span></span>
<span class="l"><a class="anc" name="ad52" href="#ad52">[ad52]</a><span class="cd"><span class="i">db</span> <span class="o">$41</span></span><span class="ce">; [44]:</span></span>
<span class="l"><a class="anc" name="ad53" href="#ad53">[ad53]</a><span class="cd"><span class="i">db</span> <span class="o">$ff</span></span><span class="ce">; [45]:</span></span>
<span class="l"><a class="anc" name="ad54" href="#ad54">[ad54]</a><span class="cd"><span class="i">db</span> <span class="o">$ff</span></span><span class="ce">; [46]:</span></span>
<span class="l"><a class="anc" name="ad55" href="#ad55">[ad55]</a><span class="cd"><span class="i">db</span> <span class="o">$ff</span></span><span class="ce">; [47]:</span></span>
<span class="l"><a class="anc" name="ad56" href="#ad56">[ad56]</a><span class="cd"><span class="i">db</span> <span class="o">$81</span></span><span class="ce">; [48]:</span></span>
<span class="l"><a class="anc" name="ad57" href="#ad57">[ad57]</a><span class="cd"><span class="i">db</span> <span class="o">$41</span></span><span class="ce">; [49]:</span></span>
<span class="l"><a class="anc" name="ad58" href="#ad58">[ad58]</a><span class="cd"><span class="i">db</span> <span class="o">$ff</span></span><span class="ce">; [50]:</span></span>
<span class="l"><a class="anc" name="ad59" href="#ad59">[ad59]</a><span class="cd"><span class="i">db</span> <span class="o">$ff</span></span><span class="ce">; [51]:</span></span>
<span class="l"><a class="anc" name="ad5a" href="#ad5a">[ad5a]</a><span class="cd"><span class="i">db</span> <span class="o">$86</span></span><span class="ce">; [52]:</span></span>
<span class="l"><a class="anc" name="ad5b" href="#ad5b">[ad5b]</a><span class="cd"><span class="i">db</span> <span class="o">$01</span></span><span class="ce">; [53]:</span></span>
<span class="l"><a class="anc" name="ad5c" href="#ad5c">[ad5c]</a><span class="cd"><span class="i">db</span> <span class="o">$87</span></span><span class="ce">; [54]:</span></span>
<span class="l"><a class="anc" name="ad5d" href="#ad5d">[ad5d]</a><span class="cd"><span class="i">db</span> <span class="o">$41</span></span><span class="ce">; [55]:</span></span>
<span class="l"><a class="anc" name="ad5e" href="#ad5e">[ad5e]</a><span class="cd"><span class="i">db</span> <span class="o">$ff</span></span><span class="ce">; [56]:</span></span>
<span class="l"><a class="anc" name="ad5f" href="#ad5f">[ad5f]</a><span class="cd"><span class="i">db</span> <span class="o">$ff</span></span><span class="ce">; [57]:</span></span>
<span class="l"><a class="anc" name="ad60" href="#ad60">[ad60]</a><span class="cd"><span class="i">db</span> <span class="o">$ff</span></span><span class="ce">; [58]:</span></span>
<span class="l"><a class="anc" name="ad61" href="#ad61">[ad61]</a><span class="cd"><span class="i">db</span> <span class="o">$8f</span></span><span class="ce">; [59]:</span></span>
<span class="l"><a class="anc" name="ad62" href="#ad62">[ad62]</a><span class="cd"><span class="i">db</span> <span class="o">$41</span></span><span class="ce">; [60]:</span></span>
<span class="l"><a class="anc" name="ad63" href="#ad63">[ad63]</a><span class="cd"><span class="i">db</span> <span class="o">$ff</span></span><span class="ce">; [61]:</span></span>
<span class="l"><a class="anc" name="ad64" href="#ad64">[ad64]</a><span class="cd"><span class="i">db</span> <span class="o">$ff</span></span><span class="ce">; [62]:</span></span>
<span class="l"><a class="anc" name="ad65" href="#ad65">[ad65]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [0]:</span></span>
<span class="l"><a class="anc" name="ad66" href="#ad66">[ad66]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [1]:</span></span>
<span class="l"><a class="anc" name="ad67" href="#ad67">[ad67]</a><span class="cd"><span class="i">db</span> <span class="o">$01</span></span><span class="ce">; [2]:</span></span>
<span class="l"><a class="anc" name="ad68" href="#ad68">[ad68]</a><span class="cd"><span class="i">db</span> <span class="o">$01</span></span><span class="ce">; [3]:</span></span>
<span class="l"><a class="anc" name="ad69" href="#ad69">[ad69]</a><span class="cd"><span class="i">db</span> <span class="o">$88</span></span><span class="ce">; [4]:</span></span>
<span class="l"><a class="anc" name="ad6a" href="#ad6a">[ad6a]</a><span class="cd"><span class="i">db</span> <span class="o">$01</span></span><span class="ce">; [5]:</span></span>
<span class="l"><a class="anc" name="ad6b" href="#ad6b">[ad6b]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [0]:</span></span>
<span class="l"><a class="anc" name="ad6c" href="#ad6c">[ad6c]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [1]:</span></span>
<span class="l"><a class="anc" name="ad6d" href="#ad6d">[ad6d]</a><span class="cd"><span class="i">db</span> <span class="o">$01</span></span><span class="ce">; [2]:</span></span>
<span class="l"><a class="anc" name="ad6e" href="#ad6e">[ad6e]</a><span class="cd"><span class="i">db</span> <span class="o">$01</span></span><span class="ce">; [3]:</span></span>
<span class="l"><a class="anc" name="ad6f" href="#ad6f">[ad6f]</a><span class="cd"><span class="i">db</span> <span class="o">$89</span></span><span class="ce">; [4]:</span></span>
<span class="l"><a class="anc" name="ad70" href="#ad70">[ad70]</a><span class="cd"><span class="i">db</span> <span class="o">$01</span></span><span class="ce">; [5]:</span></span>
<span class="l"><a class="anc" name="ad71" href="#ad71">[ad71]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [0]:</span></span>
<span class="l"><a class="anc" name="ad72" href="#ad72">[ad72]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [1]:</span></span>
<span class="l"><a class="anc" name="ad73" href="#ad73">[ad73]</a><span class="cd"><span class="i">db</span> <span class="o">$01</span></span><span class="ce">; [2]:</span></span>
<span class="l"><a class="anc" name="ad74" href="#ad74">[ad74]</a><span class="cd"><span class="i">db</span> <span class="o">$01</span></span><span class="ce">; [3]:</span></span>
<span class="l"><a class="anc" name="ad75" href="#ad75">[ad75]</a><span class="cd"><span class="i">db</span> <span class="o">$8a</span></span><span class="ce">; [4]:</span></span>
<span class="l"><a class="anc" name="ad76" href="#ad76">[ad76]</a><span class="cd"><span class="i">db</span> <span class="o">$01</span></span><span class="ce">; [5]:</span></span>
<span class="l"><a class="anc" name="ad77" href="#ad77">[ad77]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [0]:</span></span>
<span class="l"><a class="anc" name="ad78" href="#ad78">[ad78]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [1]:</span></span>
<span class="l"><a class="anc" name="ad79" href="#ad79">[ad79]</a><span class="cd"><span class="i">db</span> <span class="o">$01</span></span><span class="ce">; [2]:</span></span>
<span class="l"><a class="anc" name="ad7a" href="#ad7a">[ad7a]</a><span class="cd"><span class="i">db</span> <span class="o">$01</span></span><span class="ce">; [3]:</span></span>
<span class="l"><a class="anc" name="ad7b" href="#ad7b">[ad7b]</a><span class="cd"><span class="i">db</span> <span class="o">$8b</span></span><span class="ce">; [4]:</span></span>
<span class="l"><a class="anc" name="ad7c" href="#ad7c">[ad7c]</a><span class="cd"><span class="i">db</span> <span class="o">$01</span></span><span class="ce">; [5]:</span></span>
<span class="l"><a class="anc" name="ad7d" href="#ad7d">[ad7d]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [0]:</span></span>
<span class="l"><a class="anc" name="ad7e" href="#ad7e">[ad7e]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [1]:</span></span>
<span class="l"><a class="anc" name="ad7f" href="#ad7f">[ad7f]</a><span class="cd"><span class="i">db</span> <span class="o">$01</span></span><span class="ce">; [2]:</span></span>
<span class="l"><a class="anc" name="ad80" href="#ad80">[ad80]</a><span class="cd"><span class="i">db</span> <span class="o">$01</span></span><span class="ce">; [3]:</span></span>
<span class="l"><a class="anc" name="ad81" href="#ad81">[ad81]</a><span class="cd"><span class="i">db</span> <span class="o">$8c</span></span><span class="ce">; [4]:</span></span>
<span class="l"><a class="anc" name="ad82" href="#ad82">[ad82]</a><span class="cd"><span class="i">db</span> <span class="o">$01</span></span><span class="ce">; [5]:</span></span>
<span class="l"><a class="anc" name="ad83" href="#ad83">[ad83]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [0]:</span></span>
<span class="l"><a class="anc" name="ad84" href="#ad84">[ad84]</a><span class="cd"><span class="i">db</span> <span class="o">$00</span></span><span class="ce">; [1]:</span></span>
<span class="l"><a class="anc" name="ad85" href="#ad85">[ad85]</a><span class="cd"><span class="i">db</span> <span class="o">$01</span></span><span class="ce">; [2]:</span></span>
<span class="l"><a class="anc" name="ad86" href="#ad86">[ad86]</a><span class="cd"><span class="i">db</span> <span class="o">$01</span></span><span class="ce">; [3]:</span></span>
<span class="l"><a class="anc" name="ad87" href="#ad87">[ad87]</a><span class="cd"><span class="i">db</span> <span class="o">$8d</span></span><span class="ce">; [4]:</span></span>
<span class="l"><a class="anc" name="ad88" href="#ad88">[ad88]</a><span class="cd"><span class="i">db</span> <span class="o">$01</span></span><span class="ce">; [5]:</span></span>
<span class="l"><a class="anc" name="ad89" href="#ad89">[ad89]</a><span class="cd"><span class="i">db</span> <span class="o">$80</span></span><span class="ce">; [6]:</span></span>
<span class="l"><a class="anc" name="ad8a" href="#ad8a">[ad8a]</a><span class="cd"><span class="i">db</span> <span class="o">$ff</span></span><span class="ce">; [7]:</span></span>
<span class="l"><a class="anc" name="ad8b" href="#ad8b">[ad8b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$ad8b] undefined</span></span>
<span class="l"><a class="anc" name="ad9b" href="#ad9b">[ad9b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$ad9b] undefined</span></span>
<span class="l"><a class="anc" name="adab" href="#adab">[adab]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$adab] undefined</span></span>
<span class="l"><a class="anc" name="adbb" href="#adbb">[adbb]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$adbb] undefined</span></span>
<span class="l"><a class="anc" name="adcb" href="#adcb">[adcb]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$adcb] undefined</span></span>
<span class="l"><a class="anc" name="addb" href="#addb">[addb]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$addb] undefined</span></span>
<span class="l"><a class="anc" name="adeb" href="#adeb">[adeb]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$adeb] undefined</span></span>
<span class="l"><a class="anc" name="adfb" href="#adfb">[adfb]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$adfb] undefined</span></span>
<span class="l"><a class="anc" name="ae0b" href="#ae0b">[ae0b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$ae0b] undefined</span></span>
<span class="l"><a class="anc" name="ae1b" href="#ae1b">[ae1b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$ae1b] undefined</span></span>
<span class="l"><a class="anc" name="ae2b" href="#ae2b">[ae2b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$ae2b] undefined</span></span>
<span class="l"><a class="anc" name="ae3b" href="#ae3b">[ae3b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$ae3b] undefined</span></span>
<span class="l"><a class="anc" name="ae4b" href="#ae4b">[ae4b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$ae4b] undefined</span></span>
<span class="l"><a class="anc" name="ae5b" href="#ae5b">[ae5b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$ae5b] undefined</span></span>
<span class="l"><a class="anc" name="ae6b" href="#ae6b">[ae6b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$ae6b] undefined</span></span>
<span class="l"><a class="anc" name="ae7b" href="#ae7b">[ae7b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$ae7b] undefined</span></span>
<span class="l"><a class="anc" name="ae8b" href="#ae8b">[ae8b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$ae8b] undefined</span></span>
<span class="l"><a class="anc" name="ae9b" href="#ae9b">[ae9b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$ae9b] undefined</span></span>
<span class="l"><a class="anc" name="aeab" href="#aeab">[aeab]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$aeab] undefined</span></span>
<span class="l"><a class="anc" name="aebb" href="#aebb">[aebb]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$aebb] undefined</span></span>
<span class="l"><a class="anc" name="aecb" href="#aecb">[aecb]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$aecb] undefined</span></span>
<span class="l"><a class="anc" name="aedb" href="#aedb">[aedb]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$aedb] undefined</span></span>
<span class="l"><a class="anc" name="aeeb" href="#aeeb">[aeeb]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$aeeb] undefined</span></span>
<span class="l"><a class="anc" name="aefb" href="#aefb">[aefb]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$aefb] undefined</span></span>
<span class="l"><a class="anc" name="af0b" href="#af0b">[af0b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$af0b] undefined</span></span>
<span class="l"><a class="anc" name="af1b" href="#af1b">[af1b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$af1b] undefined</span></span>
<span class="l"><a class="anc" name="af2b" href="#af2b">[af2b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$af2b] undefined</span></span>
<span class="l"><a class="anc" name="af3b" href="#af3b">[af3b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$af3b] undefined</span></span>
<span class="l"><a class="anc" name="af4b" href="#af4b">[af4b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$af4b] undefined</span></span>
<span class="l"><a class="anc" name="af5b" href="#af5b">[af5b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$af5b] undefined</span></span>
<span class="l"><a class="anc" name="af6b" href="#af6b">[af6b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$af6b] undefined</span></span>
<span class="l"><a class="anc" name="af7b" href="#af7b">[af7b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$af7b] undefined</span></span>
<span class="l"><a class="anc" name="af8b" href="#af8b">[af8b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$af8b] undefined</span></span>
<span class="l"><a class="anc" name="af9b" href="#af9b">[af9b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$af9b] undefined</span></span>
<span class="l"><a class="anc" name="afab" href="#afab">[afab]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$afab] undefined</span></span>
<span class="l"><a class="anc" name="afbb" href="#afbb">[afbb]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$afbb] undefined</span></span>
<span class="l"><a class="anc" name="afcb" href="#afcb">[afcb]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$afcb] undefined</span></span>
<span class="l"><a class="anc" name="afdb" href="#afdb">[afdb]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$afdb] undefined</span></span>
<span class="l"><a class="anc" name="afeb" href="#afeb">[afeb]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$afeb] undefined</span></span>
<span class="l"><a class="anc" name="affb" href="#affb">[affb]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$affb] undefined</span></span>
<span class="l"><a class="anc" name="b00b" href="#b00b">[b00b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b00b] undefined</span></span>
<span class="l"><a class="anc" name="b01b" href="#b01b">[b01b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b01b] undefined</span></span>
<span class="l"><a class="anc" name="b02b" href="#b02b">[b02b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b02b] undefined</span></span>
<span class="l"><a class="anc" name="b03b" href="#b03b">[b03b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b03b] undefined</span></span>
<span class="l"><a class="anc" name="b04b" href="#b04b">[b04b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b04b] undefined</span></span>
<span class="l"><a class="anc" name="b05b" href="#b05b">[b05b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b05b] undefined</span></span>
<span class="l"><a class="anc" name="b06b" href="#b06b">[b06b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b06b] undefined</span></span>
<span class="l"><a class="anc" name="b07b" href="#b07b">[b07b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b07b] undefined</span></span>
<span class="l"><a class="anc" name="b08b" href="#b08b">[b08b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b08b] undefined</span></span>
<span class="l"><a class="anc" name="b09b" href="#b09b">[b09b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b09b] undefined</span></span>
<span class="l"><a class="anc" name="b0ab" href="#b0ab">[b0ab]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b0ab] undefined</span></span>
<span class="l"><a class="anc" name="b0bb" href="#b0bb">[b0bb]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b0bb] undefined</span></span>
<span class="l"><a class="anc" name="b0cb" href="#b0cb">[b0cb]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b0cb] undefined</span></span>
<span class="l"><a class="anc" name="b0db" href="#b0db">[b0db]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b0db] undefined</span></span>
<span class="l"><a class="anc" name="b0eb" href="#b0eb">[b0eb]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b0eb] undefined</span></span>
<span class="l"><a class="anc" name="b0fb" href="#b0fb">[b0fb]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b0fb] undefined</span></span>
<span class="l"><a class="anc" name="b10b" href="#b10b">[b10b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b10b] undefined</span></span>
<span class="l"><a class="anc" name="b11b" href="#b11b">[b11b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b11b] undefined</span></span>
<span class="l"><a class="anc" name="b12b" href="#b12b">[b12b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b12b] undefined</span></span>
<span class="l"><a class="anc" name="b13b" href="#b13b">[b13b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b13b] undefined</span></span>
<span class="l"><a class="anc" name="b14b" href="#b14b">[b14b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b14b] undefined</span></span>
<span class="l"><a class="anc" name="b15b" href="#b15b">[b15b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b15b] undefined</span></span>
<span class="l"><a class="anc" name="b16b" href="#b16b">[b16b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b16b] undefined</span></span>
<span class="l"><a class="anc" name="b17b" href="#b17b">[b17b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b17b] undefined</span></span>
<span class="l"><a class="anc" name="b18b" href="#b18b">[b18b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b18b] undefined</span></span>
<span class="l"><a class="anc" name="b19b" href="#b19b">[b19b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b19b] undefined</span></span>
<span class="l"><a class="anc" name="b1ab" href="#b1ab">[b1ab]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b1ab] undefined</span></span>
<span class="l"><a class="anc" name="b1bb" href="#b1bb">[b1bb]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b1bb] undefined</span></span>
<span class="l"><a class="anc" name="b1cb" href="#b1cb">[b1cb]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b1cb] undefined</span></span>
<span class="l"><a class="anc" name="b1db" href="#b1db">[b1db]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b1db] undefined</span></span>
<span class="l"><a class="anc" name="b1eb" href="#b1eb">[b1eb]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b1eb] undefined</span></span>
<span class="l"><a class="anc" name="b1fb" href="#b1fb">[b1fb]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b1fb] undefined</span></span>
<span class="l"><a class="anc" name="b20b" href="#b20b">[b20b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b20b] undefined</span></span>
<span class="l"><a class="anc" name="b21b" href="#b21b">[b21b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b21b] undefined</span></span>
<span class="l"><a class="anc" name="b22b" href="#b22b">[b22b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b22b] undefined</span></span>
<span class="l"><a class="anc" name="b23b" href="#b23b">[b23b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b23b] undefined</span></span>
<span class="l"><a class="anc" name="b24b" href="#b24b">[b24b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b24b] undefined</span></span>
<span class="l"><a class="anc" name="b25b" href="#b25b">[b25b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b25b] undefined</span></span>
<span class="l"><a class="anc" name="b26b" href="#b26b">[b26b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b26b] undefined</span></span>
<span class="l"><a class="anc" name="b27b" href="#b27b">[b27b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b27b] undefined</span></span>
<span class="l"><a class="anc" name="b28b" href="#b28b">[b28b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b28b] undefined</span></span>
<span class="l"><a class="anc" name="b29b" href="#b29b">[b29b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b29b] undefined</span></span>
<span class="l"><a class="anc" name="b2ab" href="#b2ab">[b2ab]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b2ab] undefined</span></span>
<span class="l"><a class="anc" name="b2bb" href="#b2bb">[b2bb]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b2bb] undefined</span></span>
<span class="l"><a class="anc" name="b2cb" href="#b2cb">[b2cb]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b2cb] undefined</span></span>
<span class="l"><a class="anc" name="b2db" href="#b2db">[b2db]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b2db] undefined</span></span>
<span class="l"><a class="anc" name="b2eb" href="#b2eb">[b2eb]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b2eb] undefined</span></span>
<span class="l"><a class="anc" name="b2fb" href="#b2fb">[b2fb]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b2fb] undefined</span></span>
<span class="l"><a class="anc" name="b30b" href="#b30b">[b30b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b30b] undefined</span></span>
<span class="l"><a class="anc" name="b31b" href="#b31b">[b31b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b31b] undefined</span></span>
<span class="l"><a class="anc" name="b32b" href="#b32b">[b32b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b32b] undefined</span></span>
<span class="l"><a class="anc" name="b33b" href="#b33b">[b33b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b33b] undefined</span></span>
<span class="l"><a class="anc" name="b34b" href="#b34b">[b34b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b34b] undefined</span></span>
<span class="l"><a class="anc" name="b35b" href="#b35b">[b35b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b35b] undefined</span></span>
<span class="l"><a class="anc" name="b36b" href="#b36b">[b36b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b36b] undefined</span></span>
<span class="l"><a class="anc" name="b37b" href="#b37b">[b37b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b37b] undefined</span></span>
<span class="l"><a class="anc" name="b38b" href="#b38b">[b38b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b38b] undefined</span></span>
<span class="l"><a class="anc" name="b39b" href="#b39b">[b39b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b39b] undefined</span></span>
<span class="l"><a class="anc" name="b3ab" href="#b3ab">[b3ab]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b3ab] undefined</span></span>
<span class="l"><a class="anc" name="b3bb" href="#b3bb">[b3bb]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b3bb] undefined</span></span>
<span class="l"><a class="anc" name="b3cb" href="#b3cb">[b3cb]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b3cb] undefined</span></span>
<span class="l"><a class="anc" name="b3db" href="#b3db">[b3db]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b3db] undefined</span></span>
<span class="l"><a class="anc" name="b3eb" href="#b3eb">[b3eb]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b3eb] undefined</span></span>
<span class="l"><a class="anc" name="b3fb" href="#b3fb">[b3fb]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b3fb] undefined</span></span>
<span class="l"><a class="anc" name="b40b" href="#b40b">[b40b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b40b] undefined</span></span>
<span class="l"><a class="anc" name="b41b" href="#b41b">[b41b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b41b] undefined</span></span>
<span class="l"><a class="anc" name="b42b" href="#b42b">[b42b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b42b] undefined</span></span>
<span class="l"><a class="anc" name="b43b" href="#b43b">[b43b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b43b] undefined</span></span>
<span class="l"><a class="anc" name="b44b" href="#b44b">[b44b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b44b] undefined</span></span>
<span class="l"><a class="anc" name="b45b" href="#b45b">[b45b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b45b] undefined</span></span>
<span class="l"><a class="anc" name="b46b" href="#b46b">[b46b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b46b] undefined</span></span>
<span class="l"><a class="anc" name="b47b" href="#b47b">[b47b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b47b] undefined</span></span>
<span class="l"><a class="anc" name="b48b" href="#b48b">[b48b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b48b] undefined</span></span>
<span class="l"><a class="anc" name="b49b" href="#b49b">[b49b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b49b] undefined</span></span>
<span class="l"><a class="anc" name="b4ab" href="#b4ab">[b4ab]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b4ab] undefined</span></span>
<span class="l"><a class="anc" name="b4bb" href="#b4bb">[b4bb]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b4bb] undefined</span></span>
<span class="l"><a class="anc" name="b4cb" href="#b4cb">[b4cb]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b4cb] undefined</span></span>
<span class="l"><a class="anc" name="b4db" href="#b4db">[b4db]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b4db] undefined</span></span>
<span class="l"><a class="anc" name="b4eb" href="#b4eb">[b4eb]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b4eb] undefined</span></span>
<span class="l"><a class="anc" name="b4fb" href="#b4fb">[b4fb]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b4fb] undefined</span></span>
<span class="l"><a class="anc" name="b50b" href="#b50b">[b50b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b50b] undefined</span></span>
<span class="l"><a class="anc" name="b51b" href="#b51b">[b51b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b51b] undefined</span></span>
<span class="l"><a class="anc" name="b52b" href="#b52b">[b52b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b52b] undefined</span></span>
<span class="l"><a class="anc" name="b53b" href="#b53b">[b53b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b53b] undefined</span></span>
<span class="l"><a class="anc" name="b54b" href="#b54b">[b54b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b54b] undefined</span></span>
<span class="l"><a class="anc" name="b55b" href="#b55b">[b55b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b55b] undefined</span></span>
<span class="l"><a class="anc" name="b56b" href="#b56b">[b56b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b56b] undefined</span></span>
<span class="l"><a class="anc" name="b57b" href="#b57b">[b57b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b57b] undefined</span></span>
<span class="l"><a class="anc" name="b58b" href="#b58b">[b58b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b58b] undefined</span></span>
<span class="l"><a class="anc" name="b59b" href="#b59b">[b59b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b59b] undefined</span></span>
<span class="l"><a class="anc" name="b5ab" href="#b5ab">[b5ab]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b5ab] undefined</span></span>
<span class="l"><a class="anc" name="b5bb" href="#b5bb">[b5bb]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b5bb] undefined</span></span>
<span class="l"><a class="anc" name="b5cb" href="#b5cb">[b5cb]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b5cb] undefined</span></span>
<span class="l"><a class="anc" name="b5db" href="#b5db">[b5db]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b5db] undefined</span></span>
<span class="l"><a class="anc" name="b5eb" href="#b5eb">[b5eb]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b5eb] undefined</span></span>
<span class="l"><a class="anc" name="b5fb" href="#b5fb">[b5fb]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b5fb] undefined</span></span>
<span class="l"><a class="anc" name="b60b" href="#b60b">[b60b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b60b] undefined</span></span>
<span class="l"><a class="anc" name="b61b" href="#b61b">[b61b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b61b] undefined</span></span>
<span class="l"><a class="anc" name="b62b" href="#b62b">[b62b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b62b] undefined</span></span>
<span class="l"><a class="anc" name="b63b" href="#b63b">[b63b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b63b] undefined</span></span>
<span class="l"><a class="anc" name="b64b" href="#b64b">[b64b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b64b] undefined</span></span>
<span class="l"><a class="anc" name="b65b" href="#b65b">[b65b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b65b] undefined</span></span>
<span class="l"><a class="anc" name="b66b" href="#b66b">[b66b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b66b] undefined</span></span>
<span class="l"><a class="anc" name="b67b" href="#b67b">[b67b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b67b] undefined</span></span>
<span class="l"><a class="anc" name="b68b" href="#b68b">[b68b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b68b] undefined</span></span>
<span class="l"><a class="anc" name="b69b" href="#b69b">[b69b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b69b] undefined</span></span>
<span class="l"><a class="anc" name="b6ab" href="#b6ab">[b6ab]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b6ab] undefined</span></span>
<span class="l"><a class="anc" name="b6bb" href="#b6bb">[b6bb]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b6bb] undefined</span></span>
<span class="l"><a class="anc" name="b6cb" href="#b6cb">[b6cb]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b6cb] undefined</span></span>
<span class="l"><a class="anc" name="b6db" href="#b6db">[b6db]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b6db] undefined</span></span>
<span class="l"><a class="anc" name="b6eb" href="#b6eb">[b6eb]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b6eb] undefined</span></span>
<span class="l"><a class="anc" name="b6fb" href="#b6fb">[b6fb]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b6fb] undefined</span></span>
<span class="l"><a class="anc" name="b70b" href="#b70b">[b70b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b70b] undefined</span></span>
<span class="l"><a class="anc" name="b71b" href="#b71b">[b71b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b71b] undefined</span></span>
<span class="l"><a class="anc" name="b72b" href="#b72b">[b72b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b72b] undefined</span></span>
<span class="l"><a class="anc" name="b73b" href="#b73b">[b73b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b73b] undefined</span></span>
<span class="l"><a class="anc" name="b74b" href="#b74b">[b74b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b74b] undefined</span></span>
<span class="l"><a class="anc" name="b75b" href="#b75b">[b75b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b75b] undefined</span></span>
<span class="l"><a class="anc" name="b76b" href="#b76b">[b76b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b76b] undefined</span></span>
<span class="l"><a class="anc" name="b77b" href="#b77b">[b77b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b77b] undefined</span></span>
<span class="l"><a class="anc" name="b78b" href="#b78b">[b78b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b78b] undefined</span></span>
<span class="l"><a class="anc" name="b79b" href="#b79b">[b79b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b79b] undefined</span></span>
<span class="l"><a class="anc" name="b7ab" href="#b7ab">[b7ab]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b7ab] undefined</span></span>
<span class="l"><a class="anc" name="b7bb" href="#b7bb">[b7bb]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b7bb] undefined</span></span>
<span class="l"><a class="anc" name="b7cb" href="#b7cb">[b7cb]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b7cb] undefined</span></span>
<span class="l"><a class="anc" name="b7db" href="#b7db">[b7db]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b7db] undefined</span></span>
<span class="l"><a class="anc" name="b7eb" href="#b7eb">[b7eb]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b7eb] undefined</span></span>
<span class="l"><a class="anc" name="b7fb" href="#b7fb">[b7fb]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b7fb] undefined</span></span>
<span class="l"><a class="anc" name="b80b" href="#b80b">[b80b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b80b] undefined</span></span>
<span class="l"><a class="anc" name="b81b" href="#b81b">[b81b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b81b] undefined</span></span>
<span class="l"><a class="anc" name="b82b" href="#b82b">[b82b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b82b] undefined</span></span>
<span class="l"><a class="anc" name="b83b" href="#b83b">[b83b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b83b] undefined</span></span>
<span class="l"><a class="anc" name="b84b" href="#b84b">[b84b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b84b] undefined</span></span>
<span class="l"><a class="anc" name="b85b" href="#b85b">[b85b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b85b] undefined</span></span>
<span class="l"><a class="anc" name="b86b" href="#b86b">[b86b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b86b] undefined</span></span>
<span class="l"><a class="anc" name="b87b" href="#b87b">[b87b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b87b] undefined</span></span>
<span class="l"><a class="anc" name="b88b" href="#b88b">[b88b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b88b] undefined</span></span>
<span class="l"><a class="anc" name="b89b" href="#b89b">[b89b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b89b] undefined</span></span>
<span class="l"><a class="anc" name="b8ab" href="#b8ab">[b8ab]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b8ab] undefined</span></span>
<span class="l"><a class="anc" name="b8bb" href="#b8bb">[b8bb]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b8bb] undefined</span></span>
<span class="l"><a class="anc" name="b8cb" href="#b8cb">[b8cb]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b8cb] undefined</span></span>
<span class="l"><a class="anc" name="b8db" href="#b8db">[b8db]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b8db] undefined</span></span>
<span class="l"><a class="anc" name="b8eb" href="#b8eb">[b8eb]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b8eb] undefined</span></span>
<span class="l"><a class="anc" name="b8fb" href="#b8fb">[b8fb]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b8fb] undefined</span></span>
<span class="l"><a class="anc" name="b90b" href="#b90b">[b90b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b90b] undefined</span></span>
<span class="l"><a class="anc" name="b91b" href="#b91b">[b91b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b91b] undefined</span></span>
<span class="l"><a class="anc" name="b92b" href="#b92b">[b92b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b92b] undefined</span></span>
<span class="l"><a class="anc" name="b93b" href="#b93b">[b93b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b93b] undefined</span></span>
<span class="l"><a class="anc" name="b94b" href="#b94b">[b94b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b94b] undefined</span></span>
<span class="l"><a class="anc" name="b95b" href="#b95b">[b95b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b95b] undefined</span></span>
<span class="l"><a class="anc" name="b96b" href="#b96b">[b96b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b96b] undefined</span></span>
<span class="l"><a class="anc" name="b97b" href="#b97b">[b97b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b97b] undefined</span></span>
<span class="l"><a class="anc" name="b98b" href="#b98b">[b98b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b98b] undefined</span></span>
<span class="l"><a class="anc" name="b99b" href="#b99b">[b99b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b99b] undefined</span></span>
<span class="l"><a class="anc" name="b9ab" href="#b9ab">[b9ab]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b9ab] undefined</span></span>
<span class="l"><a class="anc" name="b9bb" href="#b9bb">[b9bb]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b9bb] undefined</span></span>
<span class="l"><a class="anc" name="b9cb" href="#b9cb">[b9cb]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b9cb] undefined</span></span>
<span class="l"><a class="anc" name="b9db" href="#b9db">[b9db]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b9db] undefined</span></span>
<span class="l"><a class="anc" name="b9eb" href="#b9eb">[b9eb]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b9eb] undefined</span></span>
<span class="l"><a class="anc" name="b9fb" href="#b9fb">[b9fb]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$b9fb] undefined</span></span>
<span class="l"><a class="anc" name="ba0b" href="#ba0b">[ba0b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$ba0b] undefined</span></span>
<span class="l"><a class="anc" name="ba1b" href="#ba1b">[ba1b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$ba1b] undefined</span></span>
<span class="l"><a class="anc" name="ba2b" href="#ba2b">[ba2b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$ba2b] undefined</span></span>
<span class="l"><a class="anc" name="ba3b" href="#ba3b">[ba3b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$ba3b] undefined</span></span>
<span class="l"><a class="anc" name="ba4b" href="#ba4b">[ba4b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$ba4b] undefined</span></span>
<span class="l"><a class="anc" name="ba5b" href="#ba5b">[ba5b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$ba5b] undefined</span></span>
<span class="l"><a class="anc" name="ba6b" href="#ba6b">[ba6b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$ba6b] undefined</span></span>
<span class="l"><a class="anc" name="ba7b" href="#ba7b">[ba7b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$ba7b] undefined</span></span>
<span class="l"><a class="anc" name="ba8b" href="#ba8b">[ba8b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$ba8b] undefined</span></span>
<span class="l"><a class="anc" name="ba9b" href="#ba9b">[ba9b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$ba9b] undefined</span></span>
<span class="l"><a class="anc" name="baab" href="#baab">[baab]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$baab] undefined</span></span>
<span class="l"><a class="anc" name="babb" href="#babb">[babb]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$babb] undefined</span></span>
<span class="l"><a class="anc" name="bacb" href="#bacb">[bacb]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$bacb] undefined</span></span>
<span class="l"><a class="anc" name="badb" href="#badb">[badb]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$badb] undefined</span></span>
<span class="l"><a class="anc" name="baeb" href="#baeb">[baeb]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$baeb] undefined</span></span>
<span class="l"><a class="anc" name="bafb" href="#bafb">[bafb]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$bafb] undefined</span></span>
<span class="l"><a class="anc" name="bb0b" href="#bb0b">[bb0b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$bb0b] undefined</span></span>
<span class="l"><a class="anc" name="bb1b" href="#bb1b">[bb1b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$bb1b] undefined</span></span>
<span class="l"><a class="anc" name="bb2b" href="#bb2b">[bb2b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$bb2b] undefined</span></span>
<span class="l"><a class="anc" name="bb3b" href="#bb3b">[bb3b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$bb3b] undefined</span></span>
<span class="l"><a class="anc" name="bb4b" href="#bb4b">[bb4b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$bb4b] undefined</span></span>
<span class="l"><a class="anc" name="bb5b" href="#bb5b">[bb5b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$bb5b] undefined</span></span>
<span class="l"><a class="anc" name="bb6b" href="#bb6b">[bb6b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$bb6b] undefined</span></span>
<span class="l"><a class="anc" name="bb7b" href="#bb7b">[bb7b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$bb7b] undefined</span></span>
<span class="l"><a class="anc" name="bb8b" href="#bb8b">[bb8b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$bb8b] undefined</span></span>
<span class="l"><a class="anc" name="bb9b" href="#bb9b">[bb9b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$bb9b] undefined</span></span>
<span class="l"><a class="anc" name="bbab" href="#bbab">[bbab]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$bbab] undefined</span></span>
<span class="l"><a class="anc" name="bbbb" href="#bbbb">[bbbb]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$bbbb] undefined</span></span>
<span class="l"><a class="anc" name="bbcb" href="#bbcb">[bbcb]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$bbcb] undefined</span></span>
<span class="l"><a class="anc" name="bbdb" href="#bbdb">[bbdb]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$bbdb] undefined</span></span>
<span class="l"><a class="anc" name="bbeb" href="#bbeb">[bbeb]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$bbeb] undefined</span></span>
<span class="l"><a class="anc" name="bbfb" href="#bbfb">[bbfb]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$bbfb] undefined</span></span>
<span class="l"><a class="anc" name="bc0b" href="#bc0b">[bc0b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$bc0b] undefined</span></span>
<span class="l"><a class="anc" name="bc1b" href="#bc1b">[bc1b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$bc1b] undefined</span></span>
<span class="l"><a class="anc" name="bc2b" href="#bc2b">[bc2b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$bc2b] undefined</span></span>
<span class="l"><a class="anc" name="bc3b" href="#bc3b">[bc3b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$bc3b] undefined</span></span>
<span class="l"><a class="anc" name="bc4b" href="#bc4b">[bc4b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$bc4b] undefined</span></span>
<span class="l"><a class="anc" name="bc5b" href="#bc5b">[bc5b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$bc5b] undefined</span></span>
<span class="l"><a class="anc" name="bc6b" href="#bc6b">[bc6b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$bc6b] undefined</span></span>
<span class="l"><a class="anc" name="bc7b" href="#bc7b">[bc7b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$bc7b] undefined</span></span>
<span class="l"><a class="anc" name="bc8b" href="#bc8b">[bc8b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$bc8b] undefined</span></span>
<span class="l"><a class="anc" name="bc9b" href="#bc9b">[bc9b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$bc9b] undefined</span></span>
<span class="l"><a class="anc" name="bcab" href="#bcab">[bcab]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$bcab] undefined</span></span>
<span class="l"><a class="anc" name="bcbb" href="#bcbb">[bcbb]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$bcbb] undefined</span></span>
<span class="l"><a class="anc" name="bccb" href="#bccb">[bccb]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$bccb] undefined</span></span>
<span class="l"><a class="anc" name="bcdb" href="#bcdb">[bcdb]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$bcdb] undefined</span></span>
<span class="l"><a class="anc" name="bceb" href="#bceb">[bceb]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$bceb] undefined</span></span>
<span class="l"><a class="anc" name="bcfb" href="#bcfb">[bcfb]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$bcfb] undefined</span></span>
<span class="l"><a class="anc" name="bd0b" href="#bd0b">[bd0b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$bd0b] undefined</span></span>
<span class="l"><a class="anc" name="bd1b" href="#bd1b">[bd1b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$bd1b] undefined</span></span>
<span class="l"><a class="anc" name="bd2b" href="#bd2b">[bd2b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$bd2b] undefined</span></span>
<span class="l"><a class="anc" name="bd3b" href="#bd3b">[bd3b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$bd3b] undefined</span></span>
<span class="l"><a class="anc" name="bd4b" href="#bd4b">[bd4b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$bd4b] undefined</span></span>
<span class="l"><a class="anc" name="bd5b" href="#bd5b">[bd5b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$bd5b] undefined</span></span>
<span class="l"><a class="anc" name="bd6b" href="#bd6b">[bd6b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$bd6b] undefined</span></span>
<span class="l"><a class="anc" name="bd7b" href="#bd7b">[bd7b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$bd7b] undefined</span></span>
<span class="l"><a class="anc" name="bd8b" href="#bd8b">[bd8b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$bd8b] undefined</span></span>
<span class="l"><a class="anc" name="bd9b" href="#bd9b">[bd9b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$bd9b] undefined</span></span>
<span class="l"><a class="anc" name="bdab" href="#bdab">[bdab]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$bdab] undefined</span></span>
<span class="l"><a class="anc" name="bdbb" href="#bdbb">[bdbb]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$bdbb] undefined</span></span>
<span class="l"><a class="anc" name="bdcb" href="#bdcb">[bdcb]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$bdcb] undefined</span></span>
<span class="l"><a class="anc" name="bddb" href="#bddb">[bddb]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$bddb] undefined</span></span>
<span class="l"><a class="anc" name="bdeb" href="#bdeb">[bdeb]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$bdeb] undefined</span></span>
<span class="l"><a class="anc" name="bdfb" href="#bdfb">[bdfb]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$bdfb] undefined</span></span>
<span class="l"><a class="anc" name="be0b" href="#be0b">[be0b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$be0b] undefined</span></span>
<span class="l"><a class="anc" name="be1b" href="#be1b">[be1b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$be1b] undefined</span></span>
<span class="l"><a class="anc" name="be2b" href="#be2b">[be2b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$be2b] undefined</span></span>
<span class="l"><a class="anc" name="be3b" href="#be3b">[be3b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$be3b] undefined</span></span>
<span class="l"><a class="anc" name="be4b" href="#be4b">[be4b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$be4b] undefined</span></span>
<span class="l"><a class="anc" name="be5b" href="#be5b">[be5b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$be5b] undefined</span></span>
<span class="l"><a class="anc" name="be6b" href="#be6b">[be6b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$be6b] undefined</span></span>
<span class="l"><a class="anc" name="be7b" href="#be7b">[be7b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$be7b] undefined</span></span>
<span class="l"><a class="anc" name="be8b" href="#be8b">[be8b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$be8b] undefined</span></span>
<span class="l"><a class="anc" name="be9b" href="#be9b">[be9b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$be9b] undefined</span></span>
<span class="l"><a class="anc" name="beab" href="#beab">[beab]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$beab] undefined</span></span>
<span class="l"><a class="anc" name="bebb" href="#bebb">[bebb]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$bebb] undefined</span></span>
<span class="l"><a class="anc" name="becb" href="#becb">[becb]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$becb] undefined</span></span>
<span class="l"><a class="anc" name="bedb" href="#bedb">[bedb]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$bedb] undefined</span></span>
<span class="l"><a class="anc" name="beeb" href="#beeb">[beeb]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$beeb] undefined</span></span>
<span class="l"><a class="anc" name="befb" href="#befb">[befb]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$befb] undefined</span></span>
<span class="l"><a class="anc" name="bf0b" href="#bf0b">[bf0b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$bf0b] undefined</span></span>
<span class="l"><a class="anc" name="bf1b" href="#bf1b">[bf1b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$bf1b] undefined</span></span>
<span class="l"><a class="anc" name="bf2b" href="#bf2b">[bf2b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$bf2b] undefined</span></span>
<span class="l"><a class="anc" name="bf3b" href="#bf3b">[bf3b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$bf3b] undefined</span></span>
<span class="l"><a class="anc" name="bf4b" href="#bf4b">[bf4b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$bf4b] undefined</span></span>
<span class="l"><a class="anc" name="bf5b" href="#bf5b">[bf5b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$bf5b] undefined</span></span>
<span class="l"><a class="anc" name="bf6b" href="#bf6b">[bf6b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$bf6b] undefined</span></span>
<span class="l"><a class="anc" name="bf7b" href="#bf7b">[bf7b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$bf7b] undefined</span></span>
<span class="l"><a class="anc" name="bf8b" href="#bf8b">[bf8b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$bf8b] undefined</span></span>
<span class="l"><a class="anc" name="bf9b" href="#bf9b">[bf9b]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$bf9b] undefined</span></span>
<span class="l"><a class="anc" name="bfab" href="#bfab">[bfab]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$bfab] undefined</span></span>
<span class="l"><a class="anc" name="bfbb" href="#bfbb">[bfbb]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$bfbb] undefined</span></span>
<span class="l"><a class="anc" name="bfcb" href="#bfcb">[bfcb]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$bfcb] undefined</span></span>
<span class="l"><a class="anc" name="bfdb" href="#bfdb">[bfdb]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$bfdb] undefined</span></span>
<span class="l"><a class="anc" name="bfeb" href="#bfeb">[bfeb]</a><span class="cd"><span class="i">hex</span> <span class="o">ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff</span></span><span class="ce">; [$bfeb] undefined</span></span>
<span class="l"><a class="anc" name="bffb" href="#bffb">[bffb]</a><span class="cd"><span class="i">db</span> <span class="o">$ff,$ff,$ff,$ff,$ff</span></span><span class="ce">; [$bffb] undefined</span></span>
</pre>
 </body>
</html>
